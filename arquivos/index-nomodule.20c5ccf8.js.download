!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=void 0!==typeof self?self:this;function t(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function n(e){return!!e&&!!e[q]}function r(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[F]||!!e.constructor[F]||c(e)||d(e))}function i(e,t,n){void 0===n&&(n=!1),0===o(e)?(n?Object.keys:K)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function o(e){var t=e[q];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:c(e)?2:d(e)?3:0}function a(e,t){return 2===o(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function s(e,t,n){var r=o(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function c(e){return D&&e instanceof Map}function d(e){return z&&e instanceof Set}function l(e){return e.o||e.t}function f(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=H(e);delete t[q];for(var n=K(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function p(e,t){return void 0===t&&(t=!1),v(e)||n(e)||!r(e)||(o(e)>1&&(e.set=e.add=e.clear=e.delete=h),Object.freeze(e),t&&i(e,(function(e,t){return p(t,!0)}),!0)),e}function h(){t(2)}function v(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function m(e){var n=V[e];return n||t(18,e),n}function g(){return L}function y(e,t){t&&(m("Patches"),e.u=[],e.s=[],e.v=t)}function w(e){b(e),e.p.forEach(E),e.p=null}function b(e){e===L&&(L=e.l)}function S(e){return L={p:[],l:L,h:e,m:!0,_:0}}function E(e){var t=e[q];0===t.i||1===t.i?t.j():t.g=!0}function k(e,n){n._=n.p.length;var i=n.p[0],o=void 0!==e&&e!==i;return n.h.O||m("ES5").S(n,e,o),o?(i[q].P&&(w(n),t(4)),r(e)&&(e=C(n,e),n.l||T(n,e)),n.u&&m("Patches").M(i[q],e,n.u,n.s)):e=C(n,i,[]),w(n),n.u&&n.v(n.u,n.s),e!==U?e:void 0}function C(e,t,n){if(v(t))return t;var r=t[q];if(!r)return i(t,(function(i,o){return x(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return T(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=f(r.k):r.o;i(3===r.i?new Set(o):o,(function(t,i){return x(e,r,o,t,i,n)})),T(e,o,!1),n&&e.u&&m("Patches").R(r,n,e.u,e.s)}return r.o}function x(e,t,i,o,u,c){if(n(u)){var d=C(e,u,c&&t&&3!==t.i&&!a(t.D,o)?c.concat(o):void 0);if(s(i,o,d),!n(d))return;e.m=!1}if(r(u)&&!v(u)){if(!e.h.N&&e._<1)return;C(e,u),t&&t.A.l||T(e,u)}}function T(e,t,n){void 0===n&&(n=!1),e.h.N&&e.m&&p(t,n)}function N(e,t){var n=e[q];return(n?l(n):e)[t]}function O(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function A(e){e.P||(e.P=!0,e.l&&A(e.l))}function P(e){e.o||(e.o=f(e.t))}function _(e,t,n){var r=c(t)?m("MapSet").T(t,n):d(t)?m("MapSet").F(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:g(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=$;n&&(i=[r],o=G);var a=Proxy.revocable(i,o),s=a.revoke,u=a.proxy;return r.k=u,r.j=s,u}(t,n):m("ES5").J(t,n);return(n?n.A:g()).p.push(r),r}function I(e){return n(e)||t(22,e),function e(t){if(!r(t))return t;var n,a=t[q],u=o(t);if(a){if(!a.P&&(a.i<4||!m("ES5").K(a)))return a.t;a.I=!0,n=M(t,u),a.I=!1}else n=M(t,u);return i(n,(function(t,r){a&&function(e,t){return 2===o(e)?e.get(t):e[t]}(a.t,t)===r||s(n,t,e(r))})),3===u?new Set(n):n}(e)}function M(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return f(e)}var R,L,B="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),D="undefined"!=typeof Map,z="undefined"!=typeof Set,j="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,U=B?Symbol.for("immer-nothing"):((R={})["immer-nothing"]=!0,R),F=B?Symbol.for("immer-draftable"):"__$immer_draftable",q=B?Symbol.for("immer-state"):"__$immer_state",K="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,H=Object.getOwnPropertyDescriptors||function(e){var t={};return K(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},V={},$={get:function(e,t){if(t===q)return e;var n=l(e);if(!a(n,t))return function(e,t,n){var r,i=O(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var i=n[t];return e.I||!r(i)?i:i===N(e.t,t)?(P(e),e.o[t]=_(e.A.h,i,e)):i},has:function(e,t){return t in l(e)},ownKeys:function(e){return Reflect.ownKeys(l(e))},set:function(e,t,n){var r=O(l(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=N(l(e),t),o=null==i?void 0:i[q];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(u(n,i)&&(void 0!==n||a(e.t,t)))return!0;P(e),A(e)}return e.o[t]=n,e.D[t]=!0,!0},deleteProperty:function(e,t){return void 0!==N(e.t,t)||t in e.t?(e.D[t]=!1,P(e),A(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=l(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){t(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){t(12)}},G={};i($,(function(e,t){G[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),G.deleteProperty=function(e,t){return $.deleteProperty.call(this,e[0],t)},G.set=function(e,t,n){return $.set.call(this,e[0],t,n,e[0])};var W=new(function(){function e(e){this.O=j,this.N=!0,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var i=e.prototype;return i.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var o=n;n=e;var a=this;return function(e){var t=this;void 0===e&&(e=o);for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(i))}))}}var s;if("function"!=typeof n&&t(6),void 0!==i&&"function"!=typeof i&&t(7),r(e)){var u=S(this),c=_(this,e,void 0),d=!0;try{s=n(c),d=!1}finally{d?w(u):b(u)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return y(u,i),k(e,u)}),(function(e){throw w(u),e})):(y(u,i),k(s,u))}if(!e||"object"!=typeof e){if((s=n(e))===U)return;return void 0===s&&(s=e),this.N&&p(s,!0),s}t(21,e)},i.produceWithPatches=function(e,t){var n,r,i=this;return"function"==typeof e?function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return i.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(r))}))}:[this.produce(e,t,(function(e,t){n=e,r=t})),n,r]},i.createDraft=function(e){r(e)||t(8),n(e)&&(e=I(e));var i=S(this),o=_(this,e,void 0);return o[q].C=!0,b(i),o},i.finishDraft=function(e,t){var n=(e&&e[q]).A;return y(n,t),k(void 0,n)},i.setAutoFreeze=function(e){this.N=e},i.setUseProxies=function(e){e&&!j&&t(20),this.O=e},i.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var i=t[r];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}var o=m("Patches").$;return n(e)?o(e,t):this.produce(e,(function(e){return o(e,t.slice(r+1))}))},e}()),Y=W.produce;W.produceWithPatches.bind(W),W.setAutoFreeze.bind(W),W.setUseProxies.bind(W),W.applyPatches.bind(W),W.createDraft.bind(W),W.finishDraft.bind(W);var Q=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof module?module:Function("return this")()),X=Object.freeze({__proto__:null,default:Q}),J=function(){return Math.random().toString(36).substring(7).split("").join(".")},Z={INIT:"@@redux/INIT"+J(),REPLACE:"@@redux/REPLACE"+J(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+J()}};function ee(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function te(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(te)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,o=t,a=[],s=a,u=!1;function c(){s===a&&(s=a.slice())}function d(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function l(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,c();var n=s.indexOf(e);s.splice(n,1),a=null}}}function f(e){if(!ee(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,o=i(o,e)}finally{u=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,f({type:Z.REPLACE})}function h(){var e,t=l;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[Q]=function(){return this},e}return f({type:Z.INIT}),(r={dispatch:f,subscribe:l,getState:d,replaceReducer:p})[Q]=h,r}function ne(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function re(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var o,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Z.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:Z.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Z.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},s=0;s<a.length;s++){var u=a[s],c=n[u],d=e[u],l=c(d,t);if(void 0===l){var f=ne(u,t);throw new Error(f)}i[u]=l,r=r||l!==d}return(r=r||a.length!==Object.keys(e).length)?i:e}}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function ue(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return ae({},n,{dispatch:r=se.apply(void 0,o)(n.dispatch)})}}}function ce(e,t){return e===t}function de(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}function le(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}!function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce,n=null,r=null;return function(){return de(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}));var fe=le();function pe(){return(pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ge(e,t,n){return(ge=me()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ve(i,n.prototype),i}).apply(null,arguments)}function ye(e){var t="function"==typeof Map?new Map:void 0;return(ye=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ge(e,arguments,he(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ve(r,e)})(e)}fe.withExtraArgument=le;var we="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?se:se.apply(null,arguments)};var be=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.concat=function(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return ge(r,(t=e.prototype.concat).call.apply(t,[this].concat(i)))},i.prepend=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?ge(r,t[0].concat(this)):ge(r,t.concat(this))},r}(ye(Array));function Se(){return function(e){return function(e){void 0===e&&(e={});var t=e,n=t.thunk,r=void 0===n||n;t.immutableCheck,t.serializableCheck;var i=new be;r&&(!function(e){return"boolean"==typeof e}(r)?i.push(fe.withExtraArgument(r.extraArgument)):i.push(fe));return i}(e)}}var Ee,ke,Ce,xe,Te,Ne,Oe,Ae,Pe,_e,Ie,Me,Re,Le,Be,De,ze,je,Ue,Fe,qe,Ke,He,Ve,$e,Ge,We;function Ye(e){var t,n=Se(),r=e||{},i=r.reducer,o=void 0===i?void 0:i,a=r.middleware,s=void 0===a?n():a,u=r.devTools,c=void 0===u||u,d=r.preloadedState,l=void 0===d?void 0:d,f=r.enhancers,p=void 0===f?void 0:f;if("function"==typeof o)t=o;else{if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=re(o)}var h=ue.apply(void 0,"function"==typeof s?s(n):s),v=se;c&&(v=we(pe({trace:!1},"object"==typeof c&&c)));var m=[h];return Array.isArray(p)?m=[h].concat(p):"function"==typeof p&&(m=p(m)),te(t,l,v.apply(void 0,m))}function Qe(e,t){function n(){if(t){var n=t.apply(void 0,arguments);if(!n)throw new Error("prepareAction did not return an object");return pe({type:e,payload:n.payload},"meta"in n&&{meta:n.meta},{},"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function Xe(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"==typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function Je(e){var t=e.name,i=e.initialState;if(!t)throw new Error("`name` is a required option for createSlice");var o=e.reducers||{},a=void 0===e.extraReducers?[]:"function"==typeof e.extraReducers?Xe(e.extraReducers):[e.extraReducers],s=a[0],u=void 0===s?{}:s,c=a[1],d=void 0===c?[]:c,l=a[2],f=void 0===l?void 0:l,p=Object.keys(o),h={},v={},m={};p.forEach((function(e){var n,r,i=o[e],a=function(e,t){return e+"/"+t}(t,e);"reducer"in i?(n=i.reducer,r=i.prepare):n=i,h[e]=n,v[a]=n,m[e]=r?Qe(a,r):Qe(a)}));var g=function(e,t,i,o){void 0===i&&(i=[]);var a="function"==typeof t?Xe(t):[t,i,o],s=a[0],u=a[1],c=a[2];return function(t,i){void 0===t&&(t=e);var o=[s[i.type]].concat(u.filter((function(e){return(0,e.matcher)(i)})).map((function(e){return e.reducer})));return 0===o.filter((function(e){return!!e})).length&&(o=[c]),o.reduce((function(e,t){if(t){if(n(e)){var o=t(e,i);return void 0===o?e:o}if(r(e))return Y(e,(function(e){return t(e,i)}));var a=t(e,i);if(void 0===a){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return a}return e}),t)}}(i,pe({},u,{},v),d,f);return{name:t,reducer:g,actions:m,caseReducers:h}}"undefined"==typeof Symbol||(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"==typeof Symbol||(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator"))),function(){function e(e,t){var n=s[e];return n?n.enumerable=t:s[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[q];return $.get(t,e)},set:function(t){var n=this[q];$.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var n=e[t][q];if(!n.P)switch(n.i){case 5:o(n)&&A(n);break;case 4:r(n)&&A(n)}}}function r(e){for(var t=e.t,n=e.k,r=K(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==q){var s=t[o];if(void 0===s&&!a(t,o))return!0;var c=n[o],d=c&&c[q];if(d?d.t!==s:!u(c,s))return!0}}var l=!!t[q];return r.length!==K(t).length+(l?0:1)}function o(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}var s={};!function(e,t){V[e]||(V[e]=t)}("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=H(n);delete o[q];for(var a=K(o),s=0;s<a.length;s++){var u=a[s];o[u]=e(u,t||!!o[u].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:g(),P:!1,I:!1,D:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,q,{value:o,writable:!0}),i},S:function(e,r,s){s?n(r)&&r[q].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[q];if(n){var r=n.t,s=n.k,u=n.D,c=n.i;if(4===c)i(s,(function(t){t!==q&&(void 0!==r[t]||a(r,t)?u[t]||e(s[t]):(u[t]=!0,A(n)))})),i(r,(function(e){void 0!==s[e]||a(s,e)||(u[e]=!1,A(n))}));else if(5===c){if(o(n)&&(A(n),u.length=!0),s.length<r.length)for(var d=s.length;d<r.length;d++)u[d]=!1;else for(var l=r.length;l<s.length;l++)u[l]=!0;for(var f=Math.min(s.length,r.length),p=0;p<f;p++)void 0===u[p]&&e(s[p])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):o(e)}})}(),function(e){e.First="first-authentication-step",e.Second="second-authentication-step"}(Ee||(Ee={})),function(e){e.Admin="admin",e.Creator="creator",e.CreatorLite="creator_lite",e.Guest="guest",e.Viewer="viewer"}(ke||(ke={})),function(e){e.Fatal="fatal",e.Error="error",e.Warning="warn",e.Info="info",e.Debug="debug"}(Ce||(Ce={})),function(e){e.Initiated="Shared Auth Flow Initiated",e.GraphQLSubscribed="Shared Auth GraphQL Subscribed",e.GraphQLHeardBack="Shared Auth GraphQL Heard Back",e.SessionRequestTokenReceived="Shared Auth Received Session Request Token",e.LoginSuccess="Shared Auth Login Success"}(xe||(xe={})),function(e){e.EXTENSION_RECORDING_SUPPORT_ARTICLE="https://support.loom.com/hc/en-us/articles/360002187698-Getting-started-with-the-Chrome-Extension",e.DESKTOP_RECORDING_SUPPORT_ARTICLE="https://support.loom.com/hc/en-us/articles/360002207917-Getting-started-with-the-Desktop-App",e.CHROME_EXTENSION_INSTALL="https://chrome.google.com/webstore/detail/loom-video-recorder-scree/liecbddmkiiihnedobmlmillhodjkdmb"}(Te||(Te={})),function(e){e.Production="https://loom.com",e.Staging="https://stage.loom.com",e.Development="https://loomlocal.com:4444"}(Ne||(Ne={})),function(e){e.INITIATE_LOOM_RECORDER_FROM_BUTTON="initiate-loom-recorder-from-script"}(Oe||(Oe={})),function(e){e.V5="v5"}(Ae||(Ae={})),function(e){e.CHROME="chrome",e.SDK="sdk"}(Pe||(Pe={})),function(e){e.CloseModal="close-modal",e.DeleteRecording="delete-modal",e.RedoRecording="restart-recording",e.InsertRecording="insert-recording"}(_e||(_e={})),function(e){e.RecordingControls="recording-controls",e.Authentication="authentication",e.Offline="offline",e.SystemPermissions="system-permissions",e.MemberVideoLimitPaywall="member-video-limit-paywall",e.ErrorModal="error-modal"}(Ie||(Ie={})),function(e){e.PreRecording="pre-recording",e.Countdown="countdown",e.Recording="recording",e.Paused="paused",e.PostRecording="post-recording",e.Closed="closed"}(Me||(Me={})),function(e){e.ScreenAndCamera="screen_cam",e.ScreenOnly="screen",e.CameraOnly="cam"}(Re||(Re={})),function(e){e.Camera="cam",e.Desktop="desktop",e.Tab="tab"}(Le||(Le={})),function(e){e.Success="success",e.Failed="failed"}(Be||(Be={})),function(e){e[e.WS_CLOSE_CODE_NORMAL=1e3]="WS_CLOSE_CODE_NORMAL",e[e.WS_CLOSE_CODE_GOING_AWAY=1001]="WS_CLOSE_CODE_GOING_AWAY",e[e.WS_CLOSE_UNSUPPORTED_DATA=1003]="WS_CLOSE_UNSUPPORTED_DATA",e[e.WS_CLOSE_CODE_ABNORMAL_CLOSE=1006]="WS_CLOSE_CODE_ABNORMAL_CLOSE"}(De||(De={})),function(e){e.Abandoning="wrucore-is-abandoning",e.Abandoned="wrucore-is-abandoned",e.Intitializing="wrucore-is-initializing",e.Ready="wrucore-is-ready",e.Starting="wrucore-is-starting",e.Recording="wrucore-is-recording",e.Pausing="wrucore-is-pausing",e.Paused="wrucore-is-paused",e.Resuming="wrucore-is-resuming",e.Resumed="wrucore-is-resumed",e.Cancelling="wrucore-is-cancelling",e.Cancelled="wrucore-is-cancelled",e.MediaStreamStopped="wrucore-is-media-stream-stopped",e.Completing="wrucore-is-completing",e.FinishedUploading="wrucore-is-finished-uploading",e.Completed="wrucore-is-completed",e.Unknown="wrucore-unknown-state"}(ze||(ze={})),function(e){e.Lowest="lowest",e.Low="low",e.Normal="normal",e.High="high",e.Highest="highest"}(je||(je={})),function(e){e.Development="loom-media-dev",e.Test="loom-media-test",e.Stage="loom-media-staging",e.Production="loom-media-production"}(Ue||(Ue={})),function(e){e.USWest2="us-west-2"}(Fe||(Fe={})),function(e){e.Granted="granted",e.Prompt="prompt",e.Denied="denied"}(qe||(qe={})),function(e){e.PermissionDismissedError="PermissionDismissedError"}(Ke||(Ke={})),function(e){e.Development="development",e.Testbench="testbench",e.Staging="staging",e.Production="production"}(He||(He={})),function(e){e.Development="https://loomlocal.com:4444",e.Staging="https://stage.loom.com",e.Production="https://www.loom.com"}(Ve||(Ve={})),function(e){e.TEAM_PLATFORM_QA_AUTH="team-platform-qa-auth",e.ENABLE_SDK_MEMBER_VIDEO_LIMITS="enable-sdk-member-video-limits",e.GUEST_RECORDING_LIMITS="guest-recording-limits",e.ENABLE_SDK_PICTURE_IN_PICTURE="enable-sdk-picture-in-picture"}($e||($e={})),function(e){e.Closed="closed",e.PreRecording="pre-recording",e.ActiveRecording="active-recording",e.PostRecording="post-recording"}(Ge||(Ge={})),function(e){e.ContentContainer="lo-engage-ext-container",e.Shadow="loom-shadow",e.PreRecordingOverlay="lo-pre-recording-overlay"}(We||(We={}));const Ze=Je({name:"workspaces",initialState:{workspaces:[],defaultWorkspace:void 0,defaultWorkspaceAdmins:[]},reducers:{setWorkspaces(e,t){e.workspaces=t.payload.workspaces,e.defaultWorkspace=t.payload.defaultWorkspace},setDefaultWorkspaceAdmins(e,t){e.defaultWorkspaceAdmins=t.payload.admins}}}),et="personal",tt="team",nt="enterprise",rt="trialing",it=[et,tt,nt],ot=[tt,nt];var at=Object.freeze({__proto__:null,oAuthKeys:{GOOGLE:"google",SLACK:"slack",WINDOWS:"windows",AUTH0:"auth0",APPLE:"apple"},ACCOUNT_TYPE_PERSONAL:et,ACCOUNT_TYPE_TEAM:tt,ACCOUNT_TYPE_ENTERPRISE:nt,TRIALING:rt,ALL_ACCOUNT_TYPES:it,TEAM_ACCOUNT_TYPES:ot,DEFAULT_PREFERENCES_COOKIE:{mediaDevices:{},recorderSettings:{}}});const st={user:void 0,updateZendeskUser:!1,isFetching:!1,isTrialing:!1,isVerifyingEmail:!1,hasWorkspaceAccess:!1,loginErrorMessage:"",isAuthenticated:!1,termsAccepted:!1,termsAcceptedError:!1,authStep:Ee.First,isSignIn:!1,isSdkSharedUser:!1,hasReachedRecordingLimit:!1,oAuthUri:"",guestRecordingEnabled:!1},ut=Je({name:"authentication",initialState:st,reducers:{userLoginRequest(e){e.isFetching=!0,e.loginErrorMessage=""},userLogout:()=>st,userLoginSuccess(e,t){const n=t.payload;e.user=n,e.isFetching=!1,e.isTrialing=(null==n?void 0:n.trial_status)===rt,e.hasWorkspaceAccess=ot.includes(null==n?void 0:n.account_type),e.isAuthenticated=!0},hasReachedRecordingLimit(e,t){e.hasReachedRecordingLimit=t.payload},userLoginFailed(e,t){e.isFetching=!1,e.loginErrorMessage=t.payload},clearLoginErrorMessage(e){e.loginErrorMessage=""},userVerifyEmail(e,t){const n=t.payload;e.user=n,e.isVerifyingEmail=!0,e.isFetching=!1},setTermsAccepted(e,t){e.termsAccepted=t.payload,t.payload&&(e.termsAcceptedError=!1)},setTermsAcceptedError(e,t){e.termsAcceptedError=t.payload},setAuthStep(e,t){e.authStep=t.payload,e.loginErrorMessage=""},setIsSignIn(e,t){e.isSignIn=t.payload},setOAuthUri(e,t){e.oAuthUri=t.payload},setGuestRecordingEnabled(e,t){e.guestRecordingEnabled=t.payload}},extraReducers:e=>{e.addCase(Ze.actions.setWorkspaces,((e,t)=>{e.isSdkSharedUser=t.payload.isSdkSharedUser}))}}),ct={x:0,y:0},dt=[ct],lt=[Me.Countdown,Me.Paused,Me.PostRecording,Me.Recording],ft=Qe("UPDATE_MICROPHONE"),pt=Qe("OPEN_PRE_RECORDING_MENU");var ht=Object.freeze({__proto__:null,START_RECORDING:"start-recording",PAUSE_RECORDING:"pause-recording",RESUME_RECORDING:"resume-recording",END_RECORDING:"end-recording",OPEN_PRE_RECORDING_MENU:"open-pre-recording-menu",CLOSE_PRE_RECORDING_MENU:"close-pre-recording-menu",UPDATE_TIME_ELAPSED:"update-time-elapsed",NUM_AUDIO_BARS:7,MAX_Z_INDEX:2147483647,CAMERA_POSITION_BOTTOM_LEFT:ct,ALL:dt,ACTIVE_RECORDING_STAGES:lt,updateMicrophone:ft,openPreRecordingMenu:pt});const vt={appStage:Me.Closed,audioData:Array(7).fill(0),canceledDesktopError:!1,dimensions:{width:0,height:0},hostUrl:"",isCapturing:!0,isLoomUploading:!1,micMutedError:!1,videoDurationLimit:0,recordingType:Re.ScreenAndCamera,screenType:Le.Desktop,session:void 0,tab:void 0,timeElapsed:0,mediaDevicePermissions:qe.Prompt},mt=Je({name:"recorder",initialState:vt,reducers:{exitPreRecordingStage:e=>Object.assign(Object.assign({},vt),{hostUrl:e.hostUrl,recordingType:e.recordingType,videoDurationLimit:e.videoDurationLimit}),startCountdown(e){e.appStage=Me.Countdown},startRecording(e,t){e.dimensions=t.payload,e.appStage=Me.Recording},pauseRecording(e){e.appStage=Me.Paused},resumeRecording(e){e.appStage=Me.Recording},cancelRecording:e=>Object.assign(Object.assign({},vt),{screenType:e.screenType,recordingType:e.recordingType,hostUrl:e.hostUrl}),endRecording:e=>Object.assign(Object.assign({},vt),{appStage:Me.PostRecording,screenType:e.screenType,recordingType:e.recordingType,hostUrl:e.hostUrl,isLoomUploading:!0}),updateTimeElapsed(e,t){e.timeElapsed=t.payload},disableCanceledDesktopError(e){e.canceledDesktopError=!1},preCaptureCam(e){e.screenType=Le.Camera},preCaptureDesktop(e){e.screenType=Le.Desktop},preCaptureTab(e){e.screenType=Le.Tab},captureCam(e){e.isCapturing=!0,e.screenType=Le.Camera},captureDesktop(e){e.isCapturing=!0,e.screenType=Le.Desktop},captureTab(e,t){e.isCapturing=!0,e.screenType=Le.Tab,e.tab=t.payload},updateMicMutedError(e,t){e.micMutedError=t.payload},updateRecordingSession(e,t){e.session=t.payload.session,e.tab=t.payload.tab},updateSelectedRecordingType(e,t){e.recordingType=t.payload},closePreviewModal:e=>Object.assign(Object.assign({},vt),{hostUrl:e.hostUrl}),finishedUploading(e){e.isLoomUploading=!1},updateHostUrl(e,t){e.hostUrl=t.payload},updateMediaDevicesState(e,t){e.mediaDevicePermissions=t.payload.mediaDevicePermissions},setDurationLimit(e,t){e.videoDurationLimit=t.payload}},extraReducers:e=>{e.addCase(ft,(e=>{e.micMutedError=!1})).addCase(pt,(e=>{e.appStage=Me.PreRecording}))}}),gt={isEnabled:!0,isMenuExpanded:!0,isExpandedDefault:!0,isCameraTooltipExpanded:!1,isCaptureSourceExpanded:!1,isMessageShown:!1},yt=Je({name:"bubbleMenu",initialState:gt,reducers:{toggleBubbleMenu(e){e.isMenuExpanded=!e.isMenuExpanded},toggleBubbleCameraMenu:e=>Object.assign(Object.assign({},e),{camera:!e.isCameraTooltipExpanded,captureSource:!1}),updateBubbleExpandedDefault(e,t){e.isExpandedDefault=t.payload},updateBubbleMessageShown(e,t){e.isMessageShown=t.payload}},extraReducers:e=>{e.addCase(mt.actions.startRecording,(e=>Object.assign(Object.assign({},gt),{isMenuExpanded:e.isExpandedDefault}))).addCase(mt.actions.endRecording,(e=>Object.assign(Object.assign({},gt),{isExpandedDefault:e.isExpandedDefault})))}}),wt=e=>Qe(`consumer_trigger/${e}`),bt={updateBubbleEnabledRecorderSettings:wt("updateBubbleEnabledRecorderSettings")},St="https://loom.com",Et="audio-glow-off";var kt=Object.freeze({__proto__:null,LOOM_URI:"@*LOOM_URI*@",LOOM_HTTP_URI:St,PLANS_AND_BILLING_URI:"https://loom.com/settings/workspace#plans",MY_VIDEOS_URI:"https://loom.com/my-videos",NOTIFICATIONS_TAB:"notifications-tab",PRE_RECORDING_TAB:"pre-recording-tab",AUDIO_GLOW_ON:"audio-glow-on",AUDIO_GLOW_OFF:Et,AUDIO_GLOW_PAUSED:"audio-glow-paused",TOOLTIP_DISMISSED_STORAGE_KEY:"workspace-tooltip-limit-dismissed"});const Ct=Object.assign(Object.assign(Object.assign({},ht),kt),at),xt={openPreRecordingMenu:pt,updateMicrophone:ft},Tt={enabled:!0,started:!1,paused:!1,secondsLeft:3,paywallDismissed:!1},Nt=Je({name:"countdown",initialState:Tt,reducers:{decrementCountdown(e){e.secondsLeft-=1},pauseCountdown(e){e.paused=!0},resumeCountdown(e){e.paused=!1,e.started=!0},enableCancelledDesktopError:()=>Tt,updateCountdownEnabled(e,t){e.enabled=t.payload},updateCountdownPaywallDismissed(e,t){e.paywallDismissed=t.payload}},extraReducers:e=>{e.addCase(mt.actions.endRecording,(e=>{e.paused=Tt.paused,e.secondsLeft=Tt.secondsLeft,e.started=Tt.started})),e.addCase(mt.actions.cancelRecording,(e=>{e.paused=Tt.paused,e.secondsLeft=Tt.secondsLeft,e.started=Tt.started}))}}),Ot={propagateError:wt("propagateError")},At={trackAnalytics:wt("trackAnalytics")},Pt={quitPage:wt("quitPage")},_t=Je({name:"featureFlags",initialState:{activeFlags:[],inactiveFlags:[]},reducers:{setFeatureFlags(e,t){const n=t.payload,r=[],i=[];n.forEach((e=>{const t=e.flag,n=e.resultDetails.result;"true"===n?r.push(t):"false"===n&&i.push(t)})),e.activeFlags=r,e.inactiveFlags=i}}}),It={checkDevicePermissions:wt("checkDevicePermissions"),updateMediaDevices:wt("updateMediaDevices"),initializeCameras:wt("initializeCameras"),initializeMicrophones:wt("initializeMicrophones")},Mt={getWorkspaces:wt("get_workspaces"),getDefaultWorkspaceAdmins:wt("get_default_workspace_admins")},Rt=Je({name:"meta",initialState:{latestConsumerTrigger:null},reducers:{},extraReducers:e=>e.addMatcher((e=>"string"==typeof e.type&&e.type.startsWith("consumer_trigger/")),((e,t)=>{e.latestConsumerTrigger=t.type}))}),Lt=Je({name:"settings",initialState:{apiKey:"",sdkConfig:{bubbleResizable:!0}},reducers:{setApiKey(e,t){e.apiKey=t.payload},setSDKConfig(e,t){e.sdkConfig=Object.assign(Object.assign({},e.sdkConfig),t.payload)}}}),Bt=Je({name:"network",initialState:{userCanConnect:!0,userHasInternetConnection:!0,isPlannedDowntime:!1},reducers:{userCanConnect(e,t){e.userCanConnect=t.payload},userHasInternetConnection(e,t){e.userHasInternetConnection=t.payload},isPlannedDowntime(e,t){e.isPlannedDowntime=t.payload}}}),Dt={startRecording:wt("start_recording"),redoRecording:wt("redo_recording"),deleteRecording:wt("delete_recording"),cancelRecording:wt("cancel_recording"),endRecording:wt("end_recording"),updateMicrophone:wt("update_microphone"),copyVideoUrl:wt("copy_video_url"),togglePauseRecording:wt("toggle_pause_recording"),resumeRecording:wt("resume_recording"),pauseRecording:wt("pause_recording"),oAuthLoginUser:wt("oauth_login_user"),initializeBackground:wt("initialize_background"),getFeatureFlags:wt("get_feature_flags"),checkUserAuthenticated:wt("check_user_authenticated"),emailSignInUser:wt("email_sign_in_user"),emailSignUpUser:wt("email_sign_up_user"),resendVerificationEmail:wt("resend_verification_email"),updateSelectedScreenType:wt("update_selected_screen_type"),finishRecordingPreview:wt("finish_recording_preview"),updateUserRecordingSettings:wt("updateUserRecordingSettings")},zt={loomVideo:void 0,dimensions:{width:0,height:0},sessionId:void 0,confirm:_e.InsertRecording},jt=Je({name:"preview-modal",initialState:zt,reducers:{updateLoomVideo(e,t){e.loomVideo=t.payload},confirmationClosePreviewModal(e){e.confirm=_e.CloseModal},confirmationDeleteRecording(e){e.confirm=_e.DeleteRecording},confirmationRedoRecording(e){e.confirm=_e.RedoRecording},resetConfirm(e){e.confirm=_e.InsertRecording}},extraReducers:e=>{e.addCase(mt.actions.startRecording,((e,t)=>{e.dimensions=t.payload})).addCase(Dt.startRecording,(()=>zt)).addCase(mt.actions.updateRecordingSession,((e,t)=>{e.sessionId=t.payload.session.id}))}}),Ut=Je({name:"pre-recording",initialState:{shouldRenderCamera:!0,modalToDisplay:Ie.RecordingControls,previousView:void 0,showAvatarMenu:!1,tempPhotoExperience:!1,tempAvatarUrl:void 0,tempAvatarDims:{height:void 0,width:void 0},capturingTempAvatar:!1,photoCountdownSeconds:3,isRetake:!1,glowStatus:Et,dbLevel:0,workspaceLimitTooltipDismissed:!1,bannerNotification:void 0,errorModalMessage:""},reducers:{goBackToPreviousView(e){e.previousView===Ie.RecordingControls&&(e.modalToDisplay=Ie.RecordingControls),e.previousView=void 0},setOffline(e){e.modalToDisplay=Ie.Offline},openAuthModalFromView(e,t){e.modalToDisplay=Ie.Authentication,e.previousView=t.payload},openSystemPermissionsModal(e,t){e.modalToDisplay=Ie.SystemPermissions,e.previousView=t.payload},updateGlow(e,t){e.dbLevel=t.payload.level,e.glowStatus=t.payload.status},toggleAvatarMenu(e){e.showAvatarMenu=!e.showAvatarMenu},startTempPhotoExperience(e){e.tempPhotoExperience=!0,e.showAvatarMenu=!1},endTempPhotoExperience(e){e.tempPhotoExperience=!1},resetAvatarCountdown(e){e.photoCountdownSeconds=3},decrementAvatarCountdown(e){e.photoCountdownSeconds-=1},updateTempAvatar(e,t){const{url:n,height:r,width:i}=t.payload;e.tempAvatarUrl=n,e.tempAvatarDims={height:r,width:i}},toggleCapturingAvatar(e){e.capturingTempAvatar=!e.capturingTempAvatar},turnOnCamera(e){e.tempAvatarUrl=void 0},setIsRetake(e,t){e.isRetake=t.payload},updateWorkspaceLimitTooltipDismissed(e,t){e.workspaceLimitTooltipDismissed=t.payload},setBannerNotification(e,t){e.bannerNotification=t.payload},clearBannerNotification(e){e.bannerNotification=void 0},setMemberPaywall(e){e.modalToDisplay=Ie.MemberVideoLimitPaywall},showErrorModal(e,t){e.errorModalMessage=t.payload.errorMessage,e.modalToDisplay=Ie.ErrorModal}},extraReducers:e=>{e.addCase(mt.actions.endRecording,(e=>{e.tempAvatarUrl=void 0,e.showAvatarMenu=!1,e.tempPhotoExperience=!1,e.isRetake=!1})).addCase(ut.actions.userLoginSuccess,(e=>{e.modalToDisplay=Ie.RecordingControls})).addCase(ut.actions.userLogout,(e=>{e.modalToDisplay=Ie.Authentication}))}}),Ft={openPreRecordingMenu:wt("open_pre_recording_menu")},qt=Je({name:"recorderSettings",initialState:{availableCameras:[],accessRequested:!1,cameraId:void 0,tempAvatarCameraId:void 0,defaultCameraId:void 0,cameraPosition:ct,cameraSize:1,defaultCameraPosition:ct,highQuality:!0,flipCamera:!0,microphoneId:void 0,defaultMicrophoneId:void 0,screenType:Le.Desktop,microphones:[],audioEnabled:!0,cameraEnabled:!0,tabAudio:!1,avatarOnScreenOnly:!0,tempHideCamera:!1,currAvatar:0,recordingTimerEnabled:!0},reducers:{accessRequested(e,t){e.accessRequested=t.payload},turnOffMicrophone(e){e.audioEnabled=!1},turnOnMicrophone(e){e.audioEnabled=!0},updateMicrophones(e,t){e.microphones=t.payload},turnOnCamera(e){e.cameraEnabled=!0,e.cameraId=e.defaultCameraId},turnOffCamera(e){e.cameraEnabled=!1,e.cameraId=void 0},updateCamera(e,t){const n=t.payload;return Object.assign(Object.assign({},e),{cameraId:n,defaultCameraId:n||e.defaultCameraId||e.cameraId,tempAvatarCameraId:n||e.defaultCameraId||e.cameraId})},updateDefaultCamera(e,t){e.defaultCameraId=t.payload},updateCameraPosition(e,t){e.cameraPosition={x:t.payload.x,y:t.payload.y}},updateCameraSize(e,t){e.cameraSize=t.payload},updateDefaultCameraPosition(e,t){e.cameraPosition={x:t.payload.x,y:t.payload.y},e.defaultCameraPosition={x:t.payload.x,y:t.payload.y}},updateFlipCamera(e,t){e.flipCamera=t.payload},updateHighQuality(e,t){e.highQuality=t.payload},updateTabAudio(e,t){e.tabAudio=t.payload},updateRecordingTimerEnabled(e,t){e.recordingTimerEnabled=t.payload},updateAvailableCameras(e,t){e.availableCameras=t.payload},updateSelectedScreenType(e,t){e.screenType=t.payload}},extraReducers:e=>{e.addCase(mt.actions.endRecording,(e=>Object.assign(Object.assign({},e),{cameraPosition:e.defaultCameraPosition,highQuality:!0}))).addCase(mt.actions.captureCam,(e=>{e.tabAudio=!1})).addCase(mt.actions.captureDesktop,(e=>{e.tabAudio=!1})).addCase(mt.actions.captureTab,(e=>{e.tabAudio=!1})).addCase(ft,((e,t)=>{e.microphoneId=t.payload,e.defaultMicrophoneId=t.payload}))}});var Kt;!function(e){e.RecordingCompleted="recording-completed",e.RecordingLimit="recording-limit",e.UnrecoverableError="unrecoverable-error",e.MediaStreamStopped="media-stream-stopped",e.ScreenRecordingEnded="screen-recording-ended",e.FailedToStartRecording="failed-to-start-recording"}(Kt||(Kt={}));const Ht=re({authentication:ut.reducer,bubbleMenu:yt.reducer,countdown:Nt.reducer,featureFlags:_t.reducer,network:Bt.reducer,preRecording:Ut.reducer,previewRecording:jt.reducer,recorder:mt.reducer,recorderSettings:qt.reducer,workspaces:Ze.reducer,meta:Rt.reducer,settings:Lt.reducer}),Vt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ut.actions),yt.actions),Nt.actions),_t.actions),Bt.actions),Ut.actions),jt.actions),mt.actions),qt.actions),Ze.actions),Rt.actions),Lt.actions),xt),$t=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},At),bt),Ot),It),Pt),Ft),Dt),Mt),Gt=(e,t)=>({trigger:e,handler:t}),Wt="integrations.sdk",Yt=Wt+".initialize_background",Qt=Wt+".feature_flags.request",Xt=Wt+".media",Jt=Xt+".get_display_stream",Zt=Wt+".consumers",en=Zt+".start_recording",tn=["SDK Record Button Configured"],nn=[({analytics:e,metrics:t})=>Gt($t.trackAnalytics,(({},{event:n,properties:r,trackOverrides:i})=>{tn.includes(n)||(e.track(n,r,i),t.increment("integrations.sdk.analytics",{event:n}))}))];var rn=[],on=[],an="undefined"!=typeof Uint8Array?Uint8Array:Array,sn=!1;function un(){sn=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)rn[t]=e[t],on[e.charCodeAt(t)]=t;on["-".charCodeAt(0)]=62,on["_".charCodeAt(0)]=63}function cn(e){return rn[e>>18&63]+rn[e>>12&63]+rn[e>>6&63]+rn[63&e]}function dn(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(cn(r));return i.join("")}function ln(e){var t;sn||un();for(var n=e.length,r=n%3,i="",o=[],a=16383,s=0,u=n-r;s<u;s+=a)o.push(dn(e,s,s+a>u?u:s+a));return 1===r?(t=e[n-1],i+=rn[t>>2],i+=rn[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=rn[t>>10],i+=rn[t>>4&63],i+=rn[t<<2&63],i+="="),o.push(i),o.join("")}function fn(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,d=-7,l=n?i-1:0,f=n?-1:1,p=e[t+l];for(l+=f,o=p&(1<<-d)-1,p>>=-d,d+=s;d>0;o=256*o+e[t+l],l+=f,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=r;d>0;a=256*a+e[t+l],l+=f,d-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)}function pn(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,d=(1<<c)-1,l=d>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=d?(s=0,a=d):a+l>=1?(s=(t*u-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=h,a/=256,c-=8);e[n+p-h]|=128*v}var hn={}.toString,vn=Array.isArray||function(e){return"[object Array]"==hn.call(e)};function mn(){return yn.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function gn(e,t){if(mn()<t)throw new RangeError("Invalid typed array length");return yn.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=yn.prototype:(null===e&&(e=new yn(t)),e.length=t),e}function yn(e,t,n){if(!(yn.TYPED_ARRAY_SUPPORT||this instanceof yn))return new yn(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Sn(this,e)}return wn(this,e,t,n)}function wn(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);yn.TYPED_ARRAY_SUPPORT?(e=t).__proto__=yn.prototype:e=En(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!yn.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|xn(t,n),i=(e=gn(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(Cn(t)){var n=0|kn(t.length);return 0===(e=gn(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?gn(e,0):En(e,t);if("Buffer"===t.type&&vn(t.data))return En(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function bn(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Sn(e,t){if(bn(t),e=gn(e,t<0?0:0|kn(t)),!yn.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function En(e,t){var n=t.length<0?0:0|kn(t.length);e=gn(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function kn(e){if(e>=mn())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+mn().toString(16)+" bytes");return 0|e}function Cn(e){return!(null==e||!e._isBuffer)}function xn(e,t){if(Cn(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Jn(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Zn(e).length;default:if(r)return Jn(e).length;t=(""+t).toLowerCase(),r=!0}}function Tn(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Fn(this,t,n);case"utf8":case"utf-8":return Dn(this,t,n);case"ascii":return jn(this,t,n);case"latin1":case"binary":return Un(this,t,n);case"base64":return Bn(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qn(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function Nn(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function On(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=yn.from(t,r)),Cn(t))return 0===t.length?-1:An(e,t,n,r,i);if("number"==typeof t)return t&=255,yn.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):An(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function An(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var d=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===d?0:o-d)){if(-1===d&&(d=o),o-d+1===u)return d*a}else-1!==d&&(o-=o-d),d=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var l=!0,f=0;f<u;f++)if(c(e,o+f)!==c(t,f)){l=!1;break}if(l)return o}return-1}function Pn(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function _n(e,t,n,r){return er(Jn(t,e.length-n),e,n,r)}function In(e,t,n,r){return er(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function Mn(e,t,n,r){return In(e,t,n,r)}function Rn(e,t,n,r){return er(Zn(t),e,n,r)}function Ln(e,t,n,r){return er(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function Bn(e,t,n){return 0===t&&n===e.length?ln(e):ln(e.slice(t,n))}function Dn(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,c=e[i],d=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(d=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(d=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(d=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(d=u)}null===d?(d=65533,l=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=l}return function(e){var t=e.length;if(t<=zn)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=zn));return n}(r)}yn.TYPED_ARRAY_SUPPORT=void 0===e.TYPED_ARRAY_SUPPORT||e.TYPED_ARRAY_SUPPORT,yn.poolSize=8192,yn._augment=function(e){return e.__proto__=yn.prototype,e},yn.from=function(e,t,n){return wn(null,e,t,n)},yn.TYPED_ARRAY_SUPPORT&&(yn.prototype.__proto__=Uint8Array.prototype,yn.__proto__=Uint8Array),yn.alloc=function(e,t,n){return function(e,t,n,r){return bn(t),t<=0?gn(e,t):void 0!==n?"string"==typeof r?gn(e,t).fill(n,r):gn(e,t).fill(n):gn(e,t)}(null,e,t,n)},yn.allocUnsafe=function(e){return Sn(null,e)},yn.allocUnsafeSlow=function(e){return Sn(null,e)},yn.isBuffer=function(e){return null!=e&&(!!e._isBuffer||tr(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&tr(e.slice(0,0))}(e))},yn.compare=function(e,t){if(!Cn(e)||!Cn(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},yn.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},yn.concat=function(e,t){if(!vn(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return yn.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=yn.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!Cn(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},yn.byteLength=xn,yn.prototype._isBuffer=!0,yn.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Nn(this,t,t+1);return this},yn.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Nn(this,t,t+3),Nn(this,t+1,t+2);return this},yn.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Nn(this,t,t+7),Nn(this,t+1,t+6),Nn(this,t+2,t+5),Nn(this,t+3,t+4);return this},yn.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Dn(this,0,e):Tn.apply(this,arguments)},yn.prototype.equals=function(e){if(!Cn(e))throw new TypeError("Argument must be a Buffer");return this===e||0===yn.compare(this,e)},yn.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},yn.prototype.compare=function(e,t,n,r,i){if(!Cn(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),c=e.slice(t,n),d=0;d<s;++d)if(u[d]!==c[d]){o=u[d],a=c[d];break}return o<a?-1:a<o?1:0},yn.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},yn.prototype.indexOf=function(e,t,n){return On(this,e,t,n,!0)},yn.prototype.lastIndexOf=function(e,t,n){return On(this,e,t,n,!1)},yn.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return Pn(this,e,t,n);case"utf8":case"utf-8":return _n(this,e,t,n);case"ascii":return In(this,e,t,n);case"latin1":case"binary":return Mn(this,e,t,n);case"base64":return Rn(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ln(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},yn.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var zn=4096;function jn(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function Un(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function Fn(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=Xn(e[o]);return i}function qn(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function Kn(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Hn(e,t,n,r,i,o){if(!Cn(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Vn(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function $n(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function Gn(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Wn(e,t,n,r,i){return i||Gn(e,0,n,4),pn(e,t,n,r,23,4),n+4}function Yn(e,t,n,r,i){return i||Gn(e,0,n,8),pn(e,t,n,r,52,8),n+8}yn.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),yn.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=yn.prototype;else{var i=t-e;n=new yn(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},yn.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||Kn(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},yn.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||Kn(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},yn.prototype.readUInt8=function(e,t){return t||Kn(e,1,this.length),this[e]},yn.prototype.readUInt16LE=function(e,t){return t||Kn(e,2,this.length),this[e]|this[e+1]<<8},yn.prototype.readUInt16BE=function(e,t){return t||Kn(e,2,this.length),this[e]<<8|this[e+1]},yn.prototype.readUInt32LE=function(e,t){return t||Kn(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},yn.prototype.readUInt32BE=function(e,t){return t||Kn(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},yn.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||Kn(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},yn.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||Kn(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},yn.prototype.readInt8=function(e,t){return t||Kn(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},yn.prototype.readInt16LE=function(e,t){t||Kn(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},yn.prototype.readInt16BE=function(e,t){t||Kn(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},yn.prototype.readInt32LE=function(e,t){return t||Kn(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},yn.prototype.readInt32BE=function(e,t){return t||Kn(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},yn.prototype.readFloatLE=function(e,t){return t||Kn(e,4,this.length),fn(this,e,!0,23,4)},yn.prototype.readFloatBE=function(e,t){return t||Kn(e,4,this.length),fn(this,e,!1,23,4)},yn.prototype.readDoubleLE=function(e,t){return t||Kn(e,8,this.length),fn(this,e,!0,52,8)},yn.prototype.readDoubleBE=function(e,t){return t||Kn(e,8,this.length),fn(this,e,!1,52,8)},yn.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||Hn(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},yn.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||Hn(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},yn.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Hn(this,e,t,1,255,0),yn.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},yn.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Hn(this,e,t,2,65535,0),yn.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Vn(this,e,t,!0),t+2},yn.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Hn(this,e,t,2,65535,0),yn.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Vn(this,e,t,!1),t+2},yn.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Hn(this,e,t,4,4294967295,0),yn.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):$n(this,e,t,!0),t+4},yn.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Hn(this,e,t,4,4294967295,0),yn.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):$n(this,e,t,!1),t+4},yn.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Hn(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},yn.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Hn(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},yn.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Hn(this,e,t,1,127,-128),yn.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},yn.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Hn(this,e,t,2,32767,-32768),yn.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Vn(this,e,t,!0),t+2},yn.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Hn(this,e,t,2,32767,-32768),yn.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Vn(this,e,t,!1),t+2},yn.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Hn(this,e,t,4,2147483647,-2147483648),yn.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):$n(this,e,t,!0),t+4},yn.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Hn(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),yn.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):$n(this,e,t,!1),t+4},yn.prototype.writeFloatLE=function(e,t,n){return Wn(this,e,t,!0,n)},yn.prototype.writeFloatBE=function(e,t,n){return Wn(this,e,t,!1,n)},yn.prototype.writeDoubleLE=function(e,t,n){return Yn(this,e,t,!0,n)},yn.prototype.writeDoubleBE=function(e,t,n){return Yn(this,e,t,!1,n)},yn.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!yn.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},yn.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!yn.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=Cn(e)?e:Jn(new yn(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var Qn=/[^+\/0-9A-Za-z-_]/g;function Xn(e){return e<16?"0"+e.toString(16):e.toString(16)}function Jn(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Zn(e){return function(e){var t,n,r,i,o,a;sn||un();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[s-2]?2:"="===e[s-1]?1:0,a=new an(3*s/4-o),r=o>0?s-4:s;var u=0;for(t=0,n=0;t<r;t+=4,n+=3)i=on[e.charCodeAt(t)]<<18|on[e.charCodeAt(t+1)]<<12|on[e.charCodeAt(t+2)]<<6|on[e.charCodeAt(t+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=255&i;return 2===o?(i=on[e.charCodeAt(t)]<<2|on[e.charCodeAt(t+1)]>>4,a[u++]=255&i):1===o&&(i=on[e.charCodeAt(t)]<<10|on[e.charCodeAt(t+1)]<<4|on[e.charCodeAt(t+2)]>>2,a[u++]=i>>8&255,a[u++]=255&i),a}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(Qn,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function er(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function tr(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var nr=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const rr=e=>yn.from(e).toString("base64");function ir(e){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var or="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function ar(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function sr(e){return ur(e.source,ar(e.source,e.start))}function ur(e,t){var n=e.locationOffset.column-1,r=dr(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,a=t.line+o,s=1===t.line?n:0,u=t.column+s,c="".concat(e.name,":").concat(a,":").concat(u,"\n"),d=r.split(/\r\n|[\n\r]/g),l=d[i];if(l.length>120){for(var f=Math.floor(u/80),p=u%80,h=[],v=0;v<l.length;v+=80)h.push(l.slice(v,v+80));return c+cr([["".concat(a),h[0]]].concat(h.slice(1,f+1).map((function(e){return["",e]})),[[" ",dr(p-1)+"^"],["",h[f+1]]]))}return c+cr([["".concat(a-1),d[i-1]],["".concat(a),l],["",dr(u-1)+"^"],["".concat(a+1),d[i+1]]])}function cr(e){var t=e.filter((function(e){return e[0],void 0!==e[1]})),n=Math.max.apply(Math,t.map((function(e){return e[0].length})));return t.map((function(e){var t=e[0],r=e[1];return function(e,t){return dr(e-t.length)+t}(n,t)+(r?" | "+r:" |")})).join("\n")}function dr(e){return Array(e+1).join(" ")}function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pr(e,t){return!t||"object"!==lr(t)&&"function"!=typeof t?hr(e):t}function hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vr(e){var t="function"==typeof Map?new Map:void 0;return(vr=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return mr(e,arguments,wr(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),yr(r,e)})(e)}function mr(e,t,n){return(mr=gr()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&yr(i,n.prototype),i}).apply(null,arguments)}function gr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(s,e);var t,n,r,i,o,a=(t=s,n=gr(),function(){var e,r=wr(t);if(n){var i=wr(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return pr(this,e)});function s(e,t,n,r,i,o,u){var c,d,l,f,p;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),p=a.call(this,e);var h,v=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,m=n;!m&&v&&(m=null===(h=v[0].loc)||void 0===h?void 0:h.source);var g,y=r;!y&&v&&(y=v.reduce((function(e,t){return t.loc&&e.push(t.loc.start),e}),[])),y&&0===y.length&&(y=void 0),r&&n?g=r.map((function(e){return ar(n,e)})):v&&(g=v.reduce((function(e,t){return t.loc&&e.push(ar(t.loc.source,t.loc.start)),e}),[]));var w,b=u;if(null==b&&null!=o){var S=o.extensions;"object"==ir(w=S)&&null!==w&&(b=S)}return Object.defineProperties(hr(p),{name:{value:"GraphQLError"},message:{value:e,enumerable:!0,writable:!0},locations:{value:null!==(c=g)&&void 0!==c?c:void 0,enumerable:null!=g},path:{value:null!=i?i:void 0,enumerable:null!=i},nodes:{value:null!=v?v:void 0},source:{value:null!==(d=m)&&void 0!==d?d:void 0},positions:{value:null!==(l=y)&&void 0!==l?l:void 0},originalError:{value:o},extensions:{value:null!==(f=b)&&void 0!==f?f:void 0,enumerable:null!=b}}),null!=o&&o.stack?(Object.defineProperty(hr(p),"stack",{value:o.stack,writable:!0,configurable:!0}),pr(p)):(Error.captureStackTrace?Error.captureStackTrace(hr(p),s):Object.defineProperty(hr(p),"stack",{value:Error().stack,writable:!0,configurable:!0}),p)}return r=s,(i=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var i=r[n];i.loc&&(t+="\n\n"+sr(i.loc))}else if(e.source&&e.locations)for(var o=0,a=e.locations;o<a.length;o++){var s=a[o];t+="\n\n"+ur(e.source,s)}return t}(this)}},{key:or,get:function(){return"Object"}}])&&fr(r.prototype,i),o&&fr(r,o),s}(vr(Error));function Sr(e,t,n){return new br("Syntax Error: ".concat(n),void 0,e,[t])}var Er=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});var kr="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function Cr(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}(0),e.prototype.inspect=t,kr&&(e.prototype[kr]=t)}var xr=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();Cr(xr);var Tr=function(){function e(e,t,n,r,i,o,a){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=a,this.prev=o,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function Nr(e){return null!=e&&"string"==typeof e.kind}Cr(Tr);var Or=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function Ar(e){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pr(e){return _r(e,[])}function _r(e,t){switch(Ar(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),r=function(e){var t=e[String(kr)];if("function"==typeof t)return t;if("function"==typeof e.inspect)return e.inspect}(e);if(void 0!==r){var i=r.call(e);if(i!==e)return"string"==typeof i?i:_r(i,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),r=e.length-n,i=[],o=0;o<n;++o)i.push(_r(e[o],t));1===r?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items"));return"["+i.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);if(0===n.length)return"{}";if(t.length>2)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]";return"{ "+n.map((function(n){return n+": "+_r(e[n],t)})).join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}function Ir(e,t){if(!Boolean(e))throw new Error(t)}function Mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Rr=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||Ir(0,"Body must be a string. Received: ".concat(Pr(e),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||Ir(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Ir(0,"column in locationOffset is 1-indexed and must be positive.")}var t,n,r;return t=e,(n=[{key:or,get:function(){return"Source"}}])&&Mr(t.prototype,n),r&&Mr(t,r),e}();var Lr=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Br(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,r=!0,i=0,o=null,a=0;a<e.length;++a)switch(e.charCodeAt(a)){case 13:10===e.charCodeAt(a+1)&&++a;case 10:n=!1,r=!0,i=0;break;case 9:case 32:++i;break;default:r&&!n&&(null===o||i<o)&&(o=i),r=!1}return null!==(t=o)&&void 0!==t?t:0}(e);if(0!==n)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var i=0;i<t.length&&Dr(t[i]);)++i;for(var o=t.length;o>i&&Dr(t[o-1]);)--o;return t.slice(i,o).join("\n")}function Dr(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"\t"!==e[t])return!1;return!0}var zr=function(){function e(e){var t=new Tr(Or.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e=this.token;if(e.kind!==Or.EOF)do{var t;e=null!==(t=e.next)&&void 0!==t?t:e.next=Ur(this,e)}while(e.kind===Or.COMMENT);return e},e}();function jr(e){return isNaN(e)?Or.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function Ur(e,t){for(var n=e.source,r=n.body,i=r.length,o=t.end;o<i;){var a=r.charCodeAt(o),s=e.line,u=1+o-e.lineStart;switch(a){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++e.line,e.lineStart=o;continue;case 13:10===r.charCodeAt(o+1)?o+=2:++o,++e.line,e.lineStart=o;continue;case 33:return new Tr(Or.BANG,o,o+1,s,u,t);case 35:return qr(n,o,s,u,t);case 36:return new Tr(Or.DOLLAR,o,o+1,s,u,t);case 38:return new Tr(Or.AMP,o,o+1,s,u,t);case 40:return new Tr(Or.PAREN_L,o,o+1,s,u,t);case 41:return new Tr(Or.PAREN_R,o,o+1,s,u,t);case 46:if(46===r.charCodeAt(o+1)&&46===r.charCodeAt(o+2))return new Tr(Or.SPREAD,o,o+3,s,u,t);break;case 58:return new Tr(Or.COLON,o,o+1,s,u,t);case 61:return new Tr(Or.EQUALS,o,o+1,s,u,t);case 64:return new Tr(Or.AT,o,o+1,s,u,t);case 91:return new Tr(Or.BRACKET_L,o,o+1,s,u,t);case 93:return new Tr(Or.BRACKET_R,o,o+1,s,u,t);case 123:return new Tr(Or.BRACE_L,o,o+1,s,u,t);case 124:return new Tr(Or.PIPE,o,o+1,s,u,t);case 125:return new Tr(Or.BRACE_R,o,o+1,s,u,t);case 34:return 34===r.charCodeAt(o+1)&&34===r.charCodeAt(o+2)?$r(n,o,s,u,t,e):Vr(n,o,s,u,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Kr(n,o,a,s,u,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return Yr(n,o,s,u,t)}throw Sr(n,o,Fr(a))}var c=e.line,d=1+o-e.lineStart;return new Tr(Or.EOF,i,i,c,d,t)}function Fr(e){return e<32&&9!==e&&10!==e&&13!==e?"Cannot contain the invalid character ".concat(jr(e),"."):39===e?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(jr(e),".")}function qr(e,t,n,r,i){var o,a=e.body,s=t;do{o=a.charCodeAt(++s)}while(!isNaN(o)&&(o>31||9===o));return new Tr(Or.COMMENT,t,s,n,r,i,a.slice(t+1,s))}function Kr(e,t,n,r,i,o){var a=e.body,s=n,u=t,c=!1;if(45===s&&(s=a.charCodeAt(++u)),48===s){if((s=a.charCodeAt(++u))>=48&&s<=57)throw Sr(e,u,"Invalid number, unexpected digit after 0: ".concat(jr(s),"."))}else u=Hr(e,u,s),s=a.charCodeAt(u);if(46===s&&(c=!0,s=a.charCodeAt(++u),u=Hr(e,u,s),s=a.charCodeAt(u)),69!==s&&101!==s||(c=!0,43!==(s=a.charCodeAt(++u))&&45!==s||(s=a.charCodeAt(++u)),u=Hr(e,u,s),s=a.charCodeAt(u)),46===s||function(e){return 95===e||e>=65&&e<=90||e>=97&&e<=122}(s))throw Sr(e,u,"Invalid number, expected digit but got: ".concat(jr(s),"."));return new Tr(c?Or.FLOAT:Or.INT,t,u,r,i,o,a.slice(t,u))}function Hr(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do{o=r.charCodeAt(++i)}while(o>=48&&o<=57);return i}throw Sr(e,i,"Invalid number, expected digit but got: ".concat(jr(o),"."))}function Vr(e,t,n,r,i){for(var o=e.body,a=t+1,s=a,u=0,c="";a<o.length&&!isNaN(u=o.charCodeAt(a))&&10!==u&&13!==u;){if(34===u)return c+=o.slice(s,a),new Tr(Or.STRING,t,a+1,n,r,i,c);if(u<32&&9!==u)throw Sr(e,a,"Invalid character within String: ".concat(jr(u),"."));if(++a,92===u){switch(c+=o.slice(s,a-1),u=o.charCodeAt(a)){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+="\n";break;case 114:c+="\r";break;case 116:c+="\t";break;case 117:var d=Gr(o.charCodeAt(a+1),o.charCodeAt(a+2),o.charCodeAt(a+3),o.charCodeAt(a+4));if(d<0){var l=o.slice(a+1,a+5);throw Sr(e,a,"Invalid character escape sequence: \\u".concat(l,"."))}c+=String.fromCharCode(d),a+=4;break;default:throw Sr(e,a,"Invalid character escape sequence: \\".concat(String.fromCharCode(u),"."))}s=++a}}throw Sr(e,a,"Unterminated string.")}function $r(e,t,n,r,i,o){for(var a=e.body,s=t+3,u=s,c=0,d="";s<a.length&&!isNaN(c=a.charCodeAt(s));){if(34===c&&34===a.charCodeAt(s+1)&&34===a.charCodeAt(s+2))return d+=a.slice(u,s),new Tr(Or.BLOCK_STRING,t,s+3,n,r,i,Br(d));if(c<32&&9!==c&&10!==c&&13!==c)throw Sr(e,s,"Invalid character within String: ".concat(jr(c),"."));10===c?(++s,++o.line,o.lineStart=s):13===c?(10===a.charCodeAt(s+1)?s+=2:++s,++o.line,o.lineStart=s):92===c&&34===a.charCodeAt(s+1)&&34===a.charCodeAt(s+2)&&34===a.charCodeAt(s+3)?(d+=a.slice(u,s)+'"""',u=s+=4):++s}throw Sr(e,s,"Unterminated string.")}function Gr(e,t,n,r){return Wr(e)<<12|Wr(t)<<8|Wr(n)<<4|Wr(r)}function Wr(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function Yr(e,t,n,r,i){for(var o=e.body,a=o.length,s=t+1,u=0;s!==a&&!isNaN(u=o.charCodeAt(s))&&(95===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122);)++s;return new Tr(Or.NAME,t,s,n,r,i,o.slice(t,s))}function Qr(e,t){return new Xr(e,t).parseDocument()}var Xr=function(){function e(e,t){var n=function(e){return e instanceof Rr}(e)?e:new Rr(e);this._lexer=new zr(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(Or.NAME);return{kind:Er.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:Er.DOCUMENT,definitions:this.many(Or.SOF,this.parseDefinition,Or.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(Or.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(Or.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var e=this._lexer.token;if(this.peek(Or.BRACE_L))return{kind:Er.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(e)};var t,n=this.parseOperationType();return this.peek(Or.NAME)&&(t=this.parseName()),{kind:Er.OPERATION_DEFINITION,operation:n,name:t,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseOperationType=function(){var e=this.expectToken(Or.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(Or.PAREN_L,this.parseVariableDefinition,Or.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:Er.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(Or.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(Or.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(Or.DOLLAR),{kind:Er.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:Er.SELECTION_SET,selections:this.many(Or.BRACE_L,this.parseSelection,Or.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(Or.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(Or.COLON)?(e=r,t=this.parseName()):t=r,{kind:Er.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(Or.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(Or.PAREN_L,t,Or.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(Or.COLON),{kind:Er.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:Er.ARGUMENT,name:this.parseName(),value:(this.expectToken(Or.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(Or.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(Or.NAME)?{kind:Er.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:Er.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)?{kind:Er.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:Er.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case Or.BRACKET_L:return this.parseList(e);case Or.BRACE_L:return this.parseObject(e);case Or.INT:return this._lexer.advance(),{kind:Er.INT,value:t.value,loc:this.loc(t)};case Or.FLOAT:return this._lexer.advance(),{kind:Er.FLOAT,value:t.value,loc:this.loc(t)};case Or.STRING:case Or.BLOCK_STRING:return this.parseStringLiteral();case Or.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:Er.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:Er.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:Er.NULL,loc:this.loc(t)};default:return{kind:Er.ENUM,value:t.value,loc:this.loc(t)}}case Or.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:Er.STRING,value:e.value,block:e.kind===Or.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:Er.LIST,values:this.any(Or.BRACKET_L,(function(){return t.parseValueLiteral(e)}),Or.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:Er.OBJECT,fields:this.any(Or.BRACE_L,(function(){return t.parseObjectField(e)}),Or.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(Or.COLON),{kind:Er.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(Or.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(Or.AT),{kind:Er.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return this.expectOptionalToken(Or.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(Or.BRACKET_R),e={kind:Er.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(Or.BANG)?{kind:Er.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:Er.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===Or.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(Or.STRING)||this.peek(Or.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(Or.BRACE_L,this.parseOperationTypeDefinition,Or.BRACE_R);return{kind:Er.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(Or.COLON);var n=this.parseNamedType();return{kind:Er.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:Er.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:Er.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)){var t=[];this.expectOptionalToken(Or.AMP);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(Or.AMP)||this.peek(Or.NAME));return t}return this.delimitedMany(Or.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)&&this.peek(Or.BRACE_L)&&this._lexer.lookahead().kind===Or.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(Or.BRACE_L,this.parseFieldDefinition,Or.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(Or.COLON);var i=this.parseTypeReference(),o=this.parseDirectives(!0);return{kind:Er.FIELD_DEFINITION,description:t,name:n,arguments:r,type:i,directives:o,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(Or.PAREN_L,this.parseInputValueDef,Or.PAREN_R)},t.parseInputValueDef=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(Or.COLON);var r,i=this.parseTypeReference();this.expectOptionalToken(Or.EQUALS)&&(r=this.parseValueLiteral(!0));var o=this.parseDirectives(!0);return{kind:Er.INPUT_VALUE_DEFINITION,description:t,name:n,type:i,defaultValue:r,directives:o,loc:this.loc(e)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:Er.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return{kind:Er.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:i,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(Or.EQUALS)?this.delimitedMany(Or.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return{kind:Er.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:i,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(Or.BRACE_L,this.parseEnumValueDefinition,Or.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:Er.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return{kind:Er.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(Or.BRACE_L,this.parseInputValueDef,Or.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===Or.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(Or.BRACE_L,this.parseOperationTypeDefinition,Or.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:Er.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:Er.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:Er.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:Er.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:Er.UNION_TYPE_EXTENSION,name:t,directives:n,types:r,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:Er.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:Er.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(Or.AT);var n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var o=this.parseDirectiveLocations();return{kind:Er.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:i,locations:o,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(Or.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==Lr[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if(!0!==(null===(t=this._options)||void 0===t?void 0:t.noLocation))return new xr(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw Sr(this._lexer.source,t.start,"Expected ".concat(Zr(e),", found ").concat(Jr(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind!==Or.NAME||t.value!==e)throw Sr(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(Jr(t),"."));this._lexer.advance()},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===Or.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return Sr(this._lexer.source,t.start,"Unexpected ".concat(Jr(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var r=[];!this.expectOptionalToken(n);)r.push(t.call(this));return r},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r}return[]},t.many=function(e,t,n){this.expectToken(e);var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n},e}();function Jr(e){var t=e.value;return Zr(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function Zr(e){return function(e){return e===Or.BANG||e===Or.DOLLAR||e===Or.AMP||e===Or.PAREN_L||e===Or.PAREN_R||e===Or.SPREAD||e===Or.COLON||e===Or.EQUALS||e===Or.AT||e===Or.BRACKET_L||e===Or.BRACKET_R||e===Or.BRACE_L||e===Or.PIPE||e===Or.BRACE_R}(e)?'"'.concat(e,'"'):e}var ei="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function ti(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ni(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}function ri(e){var t={exports:{}};return e(t,t.exports),t.exports}var ii=ni(Object.freeze({__proto__:null,parse:Qr,parseValue:function(e,t){var n=new Xr(e,t);n.expectToken(Or.SOF);var r=n.parseValueLiteral(!1);return n.expectToken(Or.EOF),r},parseType:function(e,t){var n=new Xr(e,t);n.expectToken(Or.SOF);var r=n.parseTypeReference();return n.expectToken(Or.EOF),r},Parser:Xr})).parse;function oi(e){return e.replace(/[\s,]+/g," ").trim()}var ai={},si={};var ui=!0;function ci(e,t){var n=Object.prototype.toString.call(e);if("[object Array]"===n)return e.map((function(e){return ci(e,t)}));if("[object Object]"!==n)throw new Error("Unexpected input.");t&&e.loc&&delete e.loc,e.loc&&(delete e.loc.startToken,delete e.loc.endToken);var r,i,o,a=Object.keys(e);for(r in a)a.hasOwnProperty(r)&&(i=e[a[r]],"[object Object]"!==(o=Object.prototype.toString.call(i))&&"[object Array]"!==o||(e[a[r]]=ci(i,!0)));return e}var di=!1;function li(e){var t=oi(e);if(ai[t])return ai[t];var n=ii(e,{experimentalFragmentVariables:di});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");return n=ci(n=function(e){for(var t,n={},r=[],i=0;i<e.definitions.length;i++){var o=e.definitions[i];if("FragmentDefinition"===o.kind){var a=o.name.value,s=oi((t=o.loc).source.body.substring(t.start,t.end));si.hasOwnProperty(a)&&!si[a][s]?(ui&&console.warn("Warning: fragment with name "+a+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"),si[a][s]=!0):si.hasOwnProperty(a)||(si[a]={},si[a][s]=!0),n[s]||(n[s]=!0,r.push(o))}else r.push(o)}return e.definitions=r,e}(n),!1),ai[t]=n,n}function fi(){for(var e=Array.prototype.slice.call(arguments),t=e[0],n="string"==typeof t?t:t[0],r=1;r<e.length;r++)e[r]&&e[r].kind&&"Document"===e[r].kind?n+=e[r].loc.source.body:n+=e[r],n+=t[r];return li(n)}fi.default=fi,fi.resetCaches=function(){ai={},si={}},fi.disableFragmentWarnings=function(){ui=!1},fi.enableExperimentalFragmentVariables=function(){di=!0},fi.disableExperimentalFragmentVariables=function(){di=!1};var pi=fi;function hi(e,t){return t.tag=e,t}function vi(){}function mi(e){return function(t){var n=e.length;let r=!1,i=!1,o=!1,a=0;t(hi(0,[function(s){if(s)r=!0;else if(i)o=!0;else{for(i=o=!0;o&&!r;)a<n?(s=e[a],a=a+1|0,o=!1,t(hi(1,[s]))):(r=!0,t(0));i=!1}}]))}}function gi(){}function yi(e){e(0)}function wi(e){return e(0)}function bi(e){return function(t){return function(n){let r=vi,i=!1,o=[],a=!1;t((function(t){"number"==typeof t?a||(a=!0,0===o.length&&n(0)):t.tag?a||(i=!1,function(e){function t(e){"number"==typeof e?0!==o.length&&(o=o.filter(s),e=0===o.length,a&&e?n(0):!i&&e&&(i=!0,r(0))):e.tag?0!==o.length&&(n(hi(1,[e[0]])),u(0)):(u=e=e[0],o=o.concat(e),e(0))}function s(e){return e!==u}let u=vi;1===e.length?e(t):e.bind(null,t)}(e(t[0])),i||(i=!0,r(0))):r=t[0]})),n(hi(0,[function(e){e?(a||(a=!0,r(e)),o.forEach((function(t){return t(e)})),o=[]):(i||a?i=!1:(i=!0,r(0)),o.forEach(wi))}]))}}}function Si(e){return e}function Ei(e){return function(t){return function(n){let r=!1;return t((function(t){if("number"==typeof t)r||(r=!0,n(t));else if(t.tag)r||(e(t[0]),n(t));else{var i=t[0];n(hi(0,[function(e){if(!r)return e&&(r=!0),i(e)}]))}}))}}}function ki(e){e(0)}function Ci(e){return function(t){return function(n){let r=[],i=vi;return t((function(t){"number"==typeof t?mi(r)(n):t.tag?(r.length>=e&&0<e&&r.shift(),r.push(t[0]),i(0)):(t=t[0],0>=e?(t(1),function(e){let t=!1;e(hi(0,[function(n){n?t=!0:t||e(0)}]))}(n)):(i=t,t(0)))}))}}}function xi(e){return function(t){let n=vi,r=!1;return t((function(t){"number"==typeof t?r=!0:t.tag?r||(e(t[0]),n(0)):(n=t=t[0],t(0))})),{unsubscribe:function(){if(!r)return r=!0,n(1)}}}}function Ti(){}function Ni(e){return function(t){return function(n){let r=vi;return t((function(t){"number"==typeof t?n(t):t.tag?e(t[0])?n(t):r(0):(r=t[0],n(t))}))}}}function Oi(e){return function(t){let n=!1;t(hi(0,[function(r){r?n=!0:n||(n=!0,t(hi(1,[e])),t(0))}]))}}function Ai(e){return function(t){let n=gi,r=!1;n=e({next:function(e){r||t(hi(1,[e]))},complete:function(){r||(r=!0,t(0))}}),t(hi(0,[function(e){if(e&&!r)return r=!0,n()}]))}}function Pi(){let e=[],t=!1;return{source:function(t){function n(e){return e!==t}e=e.concat(t),t(hi(0,[function(t){t&&(e=e.filter(n))}]))},next:function(n){t||e.forEach((function(e){e(hi(1,[n]))}))},complete:function(){t||(t=!0,e.forEach(yi))}}}function _i(e){return function(t){return function(n){return t((function(t){t="number"==typeof t?0:t.tag?hi(1,[e(t[0])]):hi(0,[t[0]]),n(t)}))}}}function Ii(e){return bi(Si)(mi(e))}function Mi(e){return function(t){return function(n){return t((function(t){"number"==typeof t||t.tag?n(t):(n(t),e())}))}}}function Ri(e){function t(e){"number"==typeof e?(n.forEach(ki),n=[]):e.tag?(i=!1,n.forEach((function(t){t(e)}))):r=e[0]}let n=[],r=vi,i=!1;return function(o){function a(e){return e!==o}n=n.concat(o),1===n.length&&e(t),o(hi(0,[function(e){if(e){if(n=n.filter(a),0===n.length)return r(1)}else i||(i=!0,r(e))}]))}}function Li(e){return function(t){return function(n){let r=!1,i=0,o=vi;t((function(t){"number"==typeof t?r||(r=!0,n(0)):t.tag?i<e&&!r&&(i=i+1|0,n(t),!r&&i>=e&&(r=!0,n(0),o(1))):(t=t[0],0>=e?(r=!0,n(0),t(1)):o=t)})),n(hi(0,[function(t){if(!r){if(t)return r=!0,o(1);if(i<e)return o(0)}}]))}}}function Bi(e){return function(t){return function(n){function r(e){"number"!=typeof e&&(e.tag?(i=!0,o(1),n(0)):(a=e=e[0],e(0)))}let i=!1,o=vi,a=vi;t((function(t){"number"==typeof t?i||(i=!0,a(1),n(0)):t.tag?i||n(t):(o=t[0],e(r))})),n(hi(0,[function(e){if(!i)return e?(i=!0,o(1),a(1)):o(0)}]))}}}"function"!=typeof Symbol||(Symbol.observable||(Symbol.observable=Symbol("observable")));var Di,zi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};!function(e){e[e.Success=0]="Success",e[e.Unauthenticated=1]="Unauthenticated",e[e.ConnectionFailed=2]="ConnectionFailed",e[e.RequestFailed=3]="RequestFailed",e[e.UnknownFailure=4]="UnknownFailure"}(Di||(Di={}));const ji=["No logged in viewer found"],Ui=e=>{const{failure:t,context:n,message:r}=e;return{kind:Be.Failed,message:r,context:n,stackContext:[{context:t.context,message:t.message},...t.stackContext]}};var Fi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function qi(e,t,n){console["fatal"===e?"error":e](t,n)}const Ki=e=>{const{isConsoleLogActive:t,onCrumbHook:n,trackerMethods:r,baseContext:i={}}=e;let o=Object.assign({},i);const a=(e,n)=>(i,a={},s={})=>(e=>{r.forEach((t=>{t.onEvent(e)})),!0===t()&&qi(e.level,e.message,e.context)})({level:e,message:i,context:Object.assign(Object.assign({},a),o),tags:Object.assign(Object.assign({},s),n)}),s=a(Ce.Error,{priority:"p1"});return{crumb:e=>{const i=(new Date).getTime();e.context=Object.assign(Object.assign({},o),e.context),n([i,e]),r.map((t=>t.captureCrumb([i,e]))),!0===t()&&qi(e.level,e.message,e.context)},recordFail:e=>{const{message:t,context:n,stackContext:r}=e;s(t,Object.assign(Object.assign({},n),{stackContext:r,stack:(new Error).stack}),{})},fatal:a(Ce.Fatal,{priority:"p0"}),error:s,warn:a(Ce.Warning,{}),info:a(Ce.Info,{}),debug:a(Ce.Debug,{}),teardown:()=>Fi(void 0,void 0,void 0,(function*(){const e=r.map((e=>e.teardown()));yield Promise.all(e)})),addToBaseContext:e=>{o=Object.assign(Object.assign({},o),e)}}};
/*!
	 * JavaScript Cookie v2.2.1
	 * https://github.com/js-cookie/js-cookie
	 *
	 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
	 * Released under the MIT license
	 */var Hi=ri((function(e,t){!function(t){e.exports=t()}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in o)o[u]&&(s+="; "+u,!0!==o[u]&&(s+="="+o[u].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var s=o[a].split("="),u=s.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(s[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(i[c]=u,e===c)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))}));const Vi="loom/preferences";function $i(){try{const e=Hi.getJSON(Vi);if(!e)throw new Error("SDK Preferences cookie not set");return r=e,{kind:Be.Success,payload:r}}catch(r){return e=r,t=`Failed to load user context, ${r.message}`,{kind:Be.Failed,message:t,context:{args:e,extra:null!=n?n:{}},stackContext:[]}}var e,t,n,r}const Gi=e=>{const t=$i();return t.kind===Be.Failed?(e.info("No preferences cookie found for user",{context:t}),Ct.DEFAULT_PREFERENCES_COOKIE):t.payload},Wi=(e,t,n)=>{((e,t)=>{const n=Gi(e),r={mediaDevices:Object.assign(Object.assign({},n.mediaDevices),t.mediaDevices),recorderSettings:Object.assign(Object.assign({},n.recorderSettings),t.mediaDevices)};try{Hi.set(Vi,JSON.stringify(r),{domain:window.location.hostname,expires:365})}catch(t){e.error("Failed to write updated SDK preferences cookie",{error:t})}})(t,n),n.mediaDevices&&Yi(e,n.mediaDevices),n.recorderSettings&&Qi(e,n.recorderSettings)},Yi=(e,{cameraId:t,microphoneId:n})=>{t&&e(Vt.updateCamera(t)),n&&e(Vt.updateMicrophone(n))},Qi=(e,t)=>{void 0!==(null==t?void 0:t.bubble_menu_expanded_default)&&e(Vt.updateBubbleExpandedDefault(t.bubble_menu_expanded_default)),void 0!==(null==t?void 0:t.camera_size)&&e(Vt.updateCameraSize(t.camera_size)),void 0!==(null==t?void 0:t.countdown_enabled)&&e(Vt.updateCountdownEnabled(t.countdown_enabled)),void 0!==(null==t?void 0:t.flip_camera)&&e(Vt.updateFlipCamera(t.flip_camera))},Xi="[a-fA-F\\d:]",Ji=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${Xi})|(?<=${Xi})(?=\\s|$))`:"",Zi="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",eo="[a-fA-F\\d]{1,4}",to=`\n(?:\n(?:${eo}:){7}(?:${eo}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${eo}:){6}(?:${Zi}|:${eo}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${eo}:){5}(?::${Zi}|(?::${eo}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${eo}:){4}(?:(?::${eo}){0,1}:${Zi}|(?::${eo}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${eo}:){3}(?:(?::${eo}){0,2}:${Zi}|(?::${eo}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${eo}:){2}(?:(?::${eo}){0,3}:${Zi}|(?::${eo}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${eo}:){1}(?:(?::${eo}){0,4}:${Zi}|(?::${eo}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${eo}){0,5}:${Zi}|(?::${eo}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),no=new RegExp(`(?:^${Zi}$)|(?:^${to}$)`),ro=new RegExp(`^${Zi}$`),io=new RegExp(`^${to}$`),oo=e=>e&&e.exact?no:new RegExp(`(?:${Ji(e)}${Zi}${Ji(e)})|(?:${Ji(e)}${to}${Ji(e)})`,"g");oo.v4=e=>e&&e.exact?ro:new RegExp(`${Ji(e)}${Zi}${Ji(e)}`,"g"),oo.v6=e=>e&&e.exact?io:new RegExp(`${Ji(e)}${to}${Ji(e)}`,"g");var ao=oo;const so=e=>ao({exact:!0}).test(e);so.v4=e=>ao.v4({exact:!0}).test(e),so.v6=e=>ao.v6({exact:!0}).test(e),so.version=e=>so(e)?so.v4(e)?4:6:void 0;var uo=so;class co extends Error{constructor(){super("Request was cancelled"),this.name="CancelError"}get isCanceled(){return!0}}const lo={timeout:5e3},fo={v4:["https://ipv4.icanhazip.com/","https://api.ipify.org/"],v6:["https://ipv6.icanhazip.com/","https://api6.ipify.org/"]},po=(e,t,n)=>{const r=new XMLHttpRequest;let i;const o=new Promise(((o,a)=>{i=a,r.addEventListener("error",a,{once:!0}),r.addEventListener("timeout",a,{once:!0}),r.addEventListener("load",(()=>{const e=r.responseText.trim();e&&uo[n](e)?o(e):a()}),{once:!0}),r.open("GET",e),r.timeout=t.timeout,r.send()}));return o.cancel=()=>{r.abort(),i(new co)},o},ho=(e,t)=>{let n;const r=async function(){const r=[].concat.apply(fo[e],t.fallbackUrls||[]);for(const i of r)try{n=po(i,t,e);return await n}catch(e){if(e instanceof co)throw e}throw new Error("Couldn't find your IP")}();return r.cancel=()=>{n.cancel()},r};var vo={v4:e=>ho("v4",{...lo,...e}),v6:e=>ho("v6",{...lo,...e})};var mo=async e=>{if(e={timeout:5e3,ipVersion:4,...e},navigator&&!1===navigator.onLine)return!1;const t=4===e.ipVersion?"v4":"v6";try{return await vo[t](e),!0}catch(e){return!1}},go=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const yo=({logger:e})=>go(void 0,void 0,void 0,(function*(){const t=yield mo(),n=yield(e=>go(void 0,void 0,void 0,(function*(){var t;try{const e=yield fetch(`${null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.origin}/downtime`),{downtime:n}=yield e.json();return n||!1}catch(t){return e.crumb({level:Ce.Warning,message:"Unable to fetch /downtime data",context:{err:t}}),!1}})))(e);return e.crumb({level:Ce.Info,message:` Connection check -  Internet: ${t?"online":"offline"} -  Downtime: ${n}`,context:{online:t}}),{online:t,downtime:n}}));var wo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var bo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var So=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var Eo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var ko=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const Co={google:"api/auth/google",slack:"api/auth/slack",apple:"api/auth/apple",windows:"api/auth/windows",auth0:"api/auth/auth0"},xo=[e=>Gt($t.checkUserAuthenticated,(({dispatch:t,getState:n})=>wo(void 0,void 0,void 0,(function*(){var r;const{authentication:{user:i},settings:{apiKey:o},recorder:{hostUrl:a}}=n();yield fetch(`${a}/integrations-app/sdk/authenticate?api_key=${o}`,{method:"POST"});const s=Gi(e.logger),u=yield(({logger:e,gqlClient:t,metrics:n})=>zi(void 0,void 0,void 0,(function*(){var r,i;const o=yield t.query(pi`
        query IsUserLoggedIn {
          me {
            id
            first_name
            account_type
            default_workspace_id
            recorder_settings
            status
            sdkPartnerSessionVideos
          }
        }
      `,void 0,{requestPolicy:"network-only"}).toPromise(),a=null===(r=o.data)||void 0===r?void 0:r.me,s=o.error;return null!=(null==a?void 0:a.id)?(null!=s&&e.crumb({level:Ce.Warning,message:"getCurrentUser: Viewer was found, but errors were encountered",context:{graphqlErrors:s.graphQLErrors.map((({message:e})=>e)),networkErrors:null===(i=s.networkError)||void 0===i?void 0:i.message}}),n.increment("integrations.sdk.login.request",{success:!0}),{kind:Di.Success,me:a}):null==s?(e.crumb({level:Ce.Error,message:"getCurrentUser: Missing viewer and an error was not provided",context:{result:o}}),{kind:Di.UnknownFailure}):null!=s.networkError?(e.crumb({level:Ce.Warning,message:"getCurrentUser: Network error",context:{result:o}}),{kind:Di.ConnectionFailed}):null!=s.graphQLErrors.find((({message:e})=>ji.map((t=>e.includes(t))).includes(!0)))?{kind:Di.Unauthenticated}:{kind:Di.RequestFailed}})))(e);if(e.metrics.increment(Wt+".auth.result",{resultKind:u.kind}),!e.config.partnerData.guestRecordingEnabled&&u.kind===Di.Unauthenticated)return void t(Vt.openAuthModalFromView());if(u.kind===Di.Unauthenticated&&void 0!==i)return void t(Vt.userLogout());if(u.kind!==Di.Success){let n="There was an error using Loom.";const{online:r,downtime:i}=yield yo(e);return r||(n="You seem to be offline.",e.metrics.increment(Wt+".auth.failed",{reason:"offline"}),t(Vt.userHasInternetConnection(!1))),i&&(n="Loom planned downtime.",e.metrics.increment(Wt+".auth.failed",{reason:"downtime"}),t(Vt.isPlannedDowntime(!0))),(()=>{const e="loomhq:testThirdPartyCookieSupport";return document.cookie=`${e}; SameSite=None; Secure`,new RegExp(e).test(document.cookie)})()||(t(Vt.setBannerNotification({type:"danger",message:"Enable third-party cookies to use the Loom recorder"})),e.metrics.increment(Wt+".auth.failed",{reason:"third-party"}),n="Enable third-party cookies to use the Loom recorder"),void t(Vt.showErrorModal({errorMessage:n}))}const{me:c}=u;Wi(t,e.logger,Object.assign(Object.assign({},s),{recorderSettings:Object.assign(Object.assign({},c.recorder_settings),s.recorderSettings)})),t(Vt.userLoginSuccess(c));const d=null!==(r=e.config.partnerData.guestRecordingLimit)&&void 0!==r?r:5,l=!0===(0!==d&&c.sdkPartnerSessionVideos&&c.sdkPartnerSessionVideos.length>d);t(Vt.hasReachedRecordingLimit(l)),t($t.getWorkspaces()),e.analytics.addToBaseContext({userOrganizationId:c.default_workspace_id}),e.logger.addToBaseContext({user:{id:c.id,status:c.status}})})))),e=>Gt($t.emailSignInUser,((t,{email:n,password:r})=>bo(void 0,void 0,void 0,(function*(){var i,o;const{gqlClient:a,logger:s}=e;try{t.dispatch(Vt.userLoginRequest());const e=null===(i=(yield a.mutation(pi`
              mutation LoginUserWithEmailAndPassword(
                $email: String!
                $password: String!
              ) {
                loginUserWithEmailAndPassword(
                  email: $email
                  password: $password
                ) {
                  __typename
                  ... on RegularUser {
                    id
                    account_type
                    default_workspace_id
                    recorder_settings
                  }
                  ... on Error {
                    message
                  }
                  ... on GenericError {
                    message
                    error
                  }
                }
              }
            `,{email:n,password:r}).toPromise()).data)||void 0===i?void 0:i.loginUserWithEmailAndPassword;if((null==e?void 0:e.id)||"UserAlreadyLoggedInError"===(null==e?void 0:e.__typename))t.dispatch($t.checkUserAuthenticated());else{const n=null!==(o=null==e?void 0:e.__typename)&&void 0!==o?o:"Unknown",r=(null==e?void 0:e.message)?(null==e?void 0:e.error)?e.message+"; "+e.error:e.message:"";s.error("Failed to sign in user",{errorType:n,errorMessage:r}),t.dispatch(Vt.userLoginFailed((e=>{switch(e){case"UserNotAuthorizedError":return"Your login information was incorrect. Please check and try again.";default:return"Oops! Something went wrong. Try logging in via OAuth or SSO."}})(n)))}}catch(e){s.error(e)}})))),e=>Gt($t.emailSignUpUser,((t,{email:n,password:r,termsAccepted:i,firstName:o,lastName:a})=>So(void 0,void 0,void 0,(function*(){var s,u;const{gqlClient:c,logger:d,config:l}=e;try{t.dispatch(Vt.userLoginRequest());const e=null===(s=(yield c.mutation(pi`
              mutation CreateUserWithEmailAndPassword(
                $email: String!
                $password: String!
                $termsAccepted: Boolean!
                $firstName: String!
                $lastName: String!
                $referrerPartnerId: ID!
              ) {
                createUserWithEmailAndPassword(
                  email: $email
                  password: $password
                  termsAccepted: $termsAccepted
                  firstName: $firstName
                  lastName: $lastName
                  referrerPartnerId: $referrerPartnerId
                ) {
                  __typename
                  ... on RegularUser {
                    id
                    account_type
                    default_workspace_id
                    email
                  }
                  ... on Error {
                    message
                  }
                  ... on GenericError {
                    message
                    error
                  }
                }
              }
            `,{email:n,password:r,termsAccepted:i,firstName:o,lastName:a,referrerPartnerId:l.partnerData.sdkPartnerId}).toPromise()).data)||void 0===s?void 0:s.createUserWithEmailAndPassword;if(null==e?void 0:e.id)t.dispatch(Vt.userVerifyEmail(e));else{const n=null!==(u=null==e?void 0:e.__typename)&&void 0!==u?u:"Unknown",r=(null==e?void 0:e.message)?(null==e?void 0:e.error)?e.message+"; "+e.error:e.message:"";d.error("Failed to sign up user",{errorType:n,errorMessage:r}),t.dispatch(Vt.userLoginFailed((e=>{switch(e){case"UserAlreadyExistsError":return"You appear to already have an account.";default:return"Oops! Something went wrong on our end. Please try that again."}})(n)))}}catch(e){d.error("EmailSignUpUser consumer failed.",e)}})))),e=>Gt($t.oAuthLoginUser,(({dispatch:t},{provider:n})=>ko(void 0,void 0,void 0,(function*(){const{gqlClient:r,logger:i,config:o}=e;try{const{publicKeyAsPem:e,privateKey:a}=yield nr(void 0,void 0,void 0,(function*(){const{publicKey:e,privateKey:t}=yield window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},!0,["encrypt","decrypt"]),n=yield window.crypto.subtle.exportKey("spki",e);return{publicKeyAsPem:(e=>{let t="-----BEGIN PUBLIC KEY-----\n";for(;e.length>0;)t+=e.substring(0,64)+"\n",e=e.substring(64);return t+="-----END PUBLIC KEY-----",t})(rr(n)),privateKey:t,publicKey:e}})),s=rr(e),u=pi`
          subscription OnSessionRequestToken($encodedPublicKey: String!) {
            sessionRequestToken(encodedPublicKey: $encodedPublicKey) {
              token
              status
            }
          }
        `,{unsubscribe:c}=function(){for(var e=arguments,t=arguments[0],n=1,r=arguments.length;n<r;n++)t=e[n](t);return t}(r.subscription(u,{encodedPublicKey:s}),xi((e=>ko(void 0,void 0,void 0,(function*(){var n,r;if(c(),null===(null===(n=e.data)||void 0===n?void 0:n.sessionRequestToken))return void i.error("empty payload received from OnSessionRequestToken subscription");const{token:o,status:s}=null===(r=e.data)||void 0===r?void 0:r.sessionRequestToken;var u;if("failure"!==s)try{const e=(u=o,yn.from(u,"base64"));yield((e,t)=>nr(void 0,void 0,void 0,(function*(){const n=yield window.crypto.subtle.decrypt({name:"RSA-OAEP"},e,t);return yn.from(n)})))(a,e),t($t.checkUserAuthenticated())}catch(e){i.error("Unable to decrypt sessionRequestToken.",{err:e})}else i.error("sessionRequestToken request failed.")}))))),d=[`ak=${s}`,`referrer_partner_id=${o.partnerData.sdkPartnerId}`],l=`${window.location.origin}/${Co[n]}?${d.join("&")}`;t(Vt.setOAuthUri(l))}catch(e){i.error("Authentication consumer failed.",e)}})))),e=>Gt($t.resendVerificationEmail,((t,{email:n})=>Eo(void 0,void 0,void 0,(function*(){(yield function(e,t){var n;return Eo(this,void 0,void 0,(function*(){try{const r=yield t.gqlClient.mutation(pi`
          mutation SendEmailVerificationEmail($email: String!) {
            sendEmailVerificationEmail(email: $email)
          }
        `,{email:e}).toPromise();if(null!=r.error)throw r.error.toString();return!!(null===(n=r.data)||void 0===n?void 0:n.sendEmailVerificationEmail)}catch(e){return t.logger.error("Failed to resend verification email",e),!1}}))}(n,e))?t.dispatch(Vt.setBannerNotification({type:"success",message:"Verification email sent!"})):t.dispatch(Vt.setBannerNotification({type:"danger",message:"Oops! Please try that again shortly."}))}))))];var To=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const No=[e=>Gt($t.getFeatureFlags,(({dispatch:t})=>To(void 0,void 0,void 0,(function*(){const n=yield(({logger:e,gqlClient:t,metrics:n},r)=>To(void 0,void 0,void 0,(function*(){var i,o;try{const e=yield t.query(pi`
          query GetBulkFlagsForUser($flags: [String!]!, $anonId: String!) {
            getBulkFlagsForUser(flags: $flags, anonId: $anonId) {
              flag
              resultDetails {
                result
              }
            }
          }
        `,{flags:r,anonId:""},{requestPolicy:"cache-and-network"}).toPromise();if(e.error)throw e.error;return n.increment(Qt,{success:!0}),null!==(o=null===(i=e.data)||void 0===i?void 0:i.getBulkFlagsForUser)&&void 0!==o?o:[]}catch(t){return n.increment(Qt,{success:!1}),e.warn("Unable to fetch feature flags",{error:t}),[]}})))(e,[...Object.values($e)]);t(Vt.setFeatureFlags(n))}))))];var Oo,Ao,Po,_o,Io;!function(e){e.Call="call",e.Reply="reply",e.Syn="syn",e.SynAck="synAck",e.Ack="ack"}(Oo||(Oo={})),function(e){e.Fulfilled="fulfilled",e.Rejected="rejected"}(Ao||(Ao={})),function(e){e.ConnectionDestroyed="ConnectionDestroyed",e.ConnectionTimeout="ConnectionTimeout",e.NotInIframe="NotInIframe",e.NoIframeSrc="NoIframeSrc"}(Po||(Po={})),function(e){e.DataCloneError="DataCloneError"}(_o||(_o={})),function(e){e.Message="message"}(Io||(Io={}));const Mo=({name:e,message:t,stack:n})=>({name:e,message:t,stack:n});let Ro=0;var Lo=()=>++Ro,Bo=(e,t,n,r,i)=>{const{localName:o,local:a,remote:s,originForSending:u,originForReceiving:c}=t;let d=!1;i(`${o}: Connecting call sender`);const l=e=>(...t)=>{let n;i(`${o}: Sending ${e}() call`);try{s.closed&&(n=!0)}catch(e){n=!0}if(n&&r(),d){const t=new Error(`Unable to send ${e}() call due to destroyed connection`);throw t.code=Po.ConnectionDestroyed,t}return new Promise(((n,r)=>{const d=Lo(),l=t=>{if(t.source!==s||t.data.penpal!==Oo.Reply||t.data.id!==d)return;if(t.origin!==c)return void i(`${o} received message from origin ${t.origin} which did not match expected origin ${c}`);const u=t.data;i(`${o}: Received ${e}() reply`),a.removeEventListener(Io.Message,l);let f=u.returnValue;u.returnValueIsError&&(f=(e=>{const t=new Error;return Object.keys(e).forEach((n=>t[n]=e[n])),t})(f)),(u.resolution===Ao.Fulfilled?n:r)(f)};a.addEventListener(Io.Message,l);const f={penpal:Oo.Call,id:d,methodName:e,args:t};s.postMessage(f,u)}))};return n.reduce(((e,t)=>(e[t]=l(t),e)),e),()=>{d=!0}},Do=(e,t,n,r)=>{const{destroy:i,onDestroy:o}=n;return n=>{if(!(e instanceof RegExp?e.test(n.origin):"*"===e||e===n.origin))return void r(`Child: Handshake - Received SYN-ACK from origin ${n.origin} which did not match expected origin ${e}`);r("Child: Handshake - Received SYN-ACK, responding with ACK");const a="null"===n.origin?"*":n.origin,s={penpal:Oo.Ack,methodNames:Object.keys(t)};window.parent.postMessage(s,a);const u={localName:"Child",local:window,remote:window.parent,originForSending:a,originForReceiving:n.origin},c=((e,t,n)=>{const{localName:r,local:i,remote:o,originForSending:a,originForReceiving:s}=e;let u=!1;const c=e=>{if(e.source!==o||e.data.penpal!==Oo.Call)return;if(e.origin!==s)return void n(`${r} received message from origin ${e.origin} which did not match expected origin ${s}`);const i=e.data,{methodName:c,args:d,id:l}=i;n(`${r}: Received ${c}() call`);const f=e=>t=>{if(n(`${r}: Sending ${c}() reply`),u)return void n(`${r}: Unable to send ${c}() reply due to destroyed connection`);const i={penpal:Oo.Reply,id:l,resolution:e,returnValue:t};e===Ao.Rejected&&t instanceof Error&&(i.returnValue=Mo(t),i.returnValueIsError=!0);try{o.postMessage(i,a)}catch(e){if(e.name===_o.DataCloneError){const t={penpal:Oo.Reply,id:l,resolution:Ao.Rejected,returnValue:Mo(e),returnValueIsError:!0};o.postMessage(t,a)}throw e}};new Promise((e=>e(t[c].apply(t,d)))).then(f(Ao.Fulfilled),f(Ao.Rejected))};return i.addEventListener(Io.Message,c),()=>{u=!0,i.removeEventListener(Io.Message,c)}})(u,t,r);o(c);const d={},l=Bo(d,u,n.data.methodNames,i,r);return o(l),d}};var zo=(e={})=>{const{parentOrigin:t="*",methods:n={},timeout:r,debug:i=!1}=e,o=(e=>(...t)=>{e&&console.log("[Penpal]",...t)})(i),a=(()=>{const e=[];let t=!1;return{destroy(n){t=!0,e.forEach((e=>{e(n)}))},onDestroy(n){t?n():e.push(n)}}})(),{destroy:s,onDestroy:u}=a;(()=>{if(window===window.top){const e=new Error("connectToParent() must be called within an iframe");throw e.code=Po.NotInIframe,e}})();const c=Do(t,n,a,o);return{promise:new Promise(((e,n)=>{const i=((e,t)=>{let n;return void 0!==e&&(n=window.setTimeout((()=>{const n=new Error(`Connection timed out after ${e}ms`);n.code=Po.ConnectionTimeout,t(n)}),e)),()=>{clearTimeout(n)}})(r,s),a=t=>{if((()=>{try{clearTimeout()}catch(e){return!1}return!0})()&&t.source===parent&&t.data&&t.data.penpal===Oo.SynAck){const n=c(t);n&&(window.removeEventListener(Io.Message,a),i(),e(n))}};window.addEventListener(Io.Message,a),(()=>{o("Child: Handshake - Sending SYN");const e={penpal:Oo.Syn},n=t instanceof RegExp?"*":t;window.parent.postMessage(e,n)})(),u((e=>{window.removeEventListener(Io.Message,a),e||((e=new Error("Connection destroyed")).code=Po.ConnectionDestroyed),n(e)}))})),destroy(){s()}}};function jo(e,t){const n=[];return Object.keys(t).forEach((r=>{e[r]!==t[r]&&n.push({key:r,value:t[r],change:"updated"})})),Object.keys(e).forEach((e=>{t.hasOwnProperty(e)||n.push({key:e,change:"removed"})})),n}const Uo=e=>t=>{try{return{error:null,value:e.dispatch(t)}}catch(e){return console.error("error dispatching result:",e),{error:e.message,value:null}}};class Fo extends Error{constructor(e){super(Fo._prepareSuperMessage(e)),Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,Fo)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}}const qo=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],Ko=Symbol(".toJSON called"),Ho=({from:e,seen:t,to_:n,forceEnumerable:r})=>{const i=n||(Array.isArray(e)?[]:{});if(t.push(e),"function"==typeof e.toJSON&&!0!==e[Ko])return(e=>{e[Ko]=!0;const t=e.toJSON();return delete e[Ko],t})(e);for(const[n,o]of Object.entries(e))yn.isBuffer(o)?i[n]="[object Buffer]":"function"!=typeof o&&(o&&"object"==typeof o?t.includes(e[n])?i[n]="[Circular]":i[n]=Ho({from:e[n],seen:t.slice(),forceEnumerable:r}):i[n]=o);for(const{property:t,enumerable:n}of qo)"string"==typeof e[t]&&Object.defineProperty(i,t,{value:e[t],enumerable:!!r||n,configurable:!0,writable:!0});return i};var Vo=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e&&!Array.isArray(e)){const t=new Error;return Ho({from:e,seen:[],to_:t}),t}return new Fo(e)};const $o=[({logger:e})=>Gt($t.propagateError,(({},{error:t,componentStack:n,context:r})=>{const i=Vo(t);e.error(i.message,r,Object.assign({componentStack:n},i.stack&&{errorStack:i.stack}))}))],Go="integrations.media-devices",Wo=Go+".request_device_permissions";var Yo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const Qo="Media Utilities [Devices]:";function Xo(e){return"Permission dismissed"===e.message?qe.Prompt:qe.Denied}const Jo=()=>Yo(void 0,void 0,void 0,(function*(){var e;if(!(null===(e=null===navigator||void 0===navigator?void 0:navigator.mediaDevices)||void 0===e?void 0:e.enumerateDevices))throw new Error("Browser not supported. Please visit https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices#browser_compatibility for a full browser compatibility list.");return(yield navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind||"audioinput"===e.kind))}));var Zo,ea=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};!function(e){e.UserDeclined="User declined",e.MissingPermissions="Missing Permissions",e.UnableToOpen="Unable to open stream"}(Zo||(Zo={}));const ta={audio:void 0,camera:void 0,display:void 0},na=(e,{logger:t})=>ea(void 0,void 0,void 0,(function*(){try{return yield navigator.mediaDevices.getUserMedia(e)}catch(e){const{userAgent:n}=navigator;return t.warn("Media Utilities: Unable to capture media stream",{err:e,userAgent:n}),e}})),ra=({logger:e})=>{try{ta.camera&&(ia("camera"),oa("camera")),ta.display&&(ia("display"),oa("display")),ta.audio&&oa("audio")}catch(t){return e.error("Failed to stop some or all tracks of a media stream:",{err:t}),!1}return!0},ia=e=>{ta.audio&&ta.audio.getAudioTracks().forEach((t=>{var n;null===(n=ta[e])||void 0===n||n.removeTrack(t)}))},oa=e=>{var t;null===(t=ta[e])||void 0===t||t.getTracks().forEach((e=>{e.stop()})),ta[e]=void 0};var aa=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const sa="SDK Ask Device Permissions",ua={asked:"asked",granted:"granted",denied:"denied"};var ca;!function(e){e.Camera="camera",e.Microphone="microphone"}(ca||(ca={}));var da=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function la(e){return da(this,void 0,void 0,(function*(){const{logger:t,analytics:n}=e;n.track(sa,{state:ua.asked});const r=yield(e=>Yo(void 0,void 0,void 0,(function*(){const{logger:t,metrics:n}=e;let r;try{const n=yield na({audio:!0,video:!0},e);if(n instanceof Error)throw n;const i=null==n?void 0:n.getTracks();let o=!1,a=!1;null==i||i.forEach((e=>{e.stop(),o=o||"audio"===e.kind,a=a||"video"===e.kind})),a&&o?r=qe.Granted:(r=qe.Prompt,t.warn(`${Qo} not all devices allowed`,{tracks:i,micsAvailable:o,camerasAvailable:a}))}catch(e){n.increment("integrations.media-devices.request_device_permissions.failed"),t.warn(`${Qo} permissions not granted`,{error:e}),r=Xo(e)}return n.increment(Wo,{result:r}),r})))(e);return r===qe.Granted?n.track(sa,{state:ua.granted}):(n.track(sa,{state:r}),t.warn("User has not granted camera/microphone permissions",{context:{permissions:r}})),t.info("Requesting browser device permissions",{permissions:r}),r}))}function fa(e){return da(this,void 0,void 0,(function*(){const{metrics:t,logger:n}=e,r=yield function({logger:e,metrics:t}){return Yo(this,void 0,void 0,(function*(){let n;try{if(!navigator.permissions)throw new Error(`navigator.permissions is "${typeof navigator.permissions}"`);const{state:e}=yield navigator.permissions.query({name:"camera"}),{state:t}=yield navigator.permissions.query({name:"microphone"});n=e===qe.Granted&&t===qe.Granted?qe.Granted:qe.Prompt}catch(t){const{userAgent:r}=navigator;n=Xo(t),e.warn("Browser does not have full support of Web Permissions API",{context:{err:t,userAgent:r}}),n=qe.Denied}return t.increment("integrations.media-devices.has_media_device_permissions",{result:n}),n}))}(e);return t.increment("integrations.sdk.media.device_permissions.request",{initialPermissions:r}),r!==qe.Granted?(n.warn("User has blocked media devices",{initialPermissions:r}),yield la(e)):r}))}const pa=e=>Gt($t.checkDevicePermissions,(({dispatch:t})=>da(void 0,void 0,void 0,(function*(){const n=yield fa(e);t(Vt.updateMediaDevicesState({mediaDevicePermissions:n})),t(Vt.openPreRecordingMenu())}))));var ha=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const va=[pa,({logger:e,metrics:t})=>Gt($t.initializeCameras,(({getState:n,dispatch:r})=>aa(void 0,void 0,void 0,(function*(){const i=yield aa(void 0,void 0,void 0,(function*(){return(yield Jo()).filter((e=>e.deviceId&&"videoinput"===e.kind)).map((e=>({deviceId:e.deviceId,label:e.label})))}));r(Vt.updateAvailableCameras(i));const{cameraId:o,defaultCameraId:a,cameraEnabled:s}=n().recorderSettings;let u=a;const c=i.map((e=>e.deviceId));t.increment("integrations.sdk.media.initialize_cameras",{cameras:c.length}),c.length>0?(s||r(Vt.turnOnCamera()),void 0!==a&&-1!==c.indexOf(a)||(u=c[0],r(Vt.updateDefaultCamera(u))),o&&-1===c.indexOf(o)&&r($t.updateMediaDevices({cameraId:u}))):(r(Vt.turnOffCamera()),e.warn("No cameras available!"))})))),({logger:e,metrics:t})=>Gt($t.initializeMicrophones,(({getState:n,dispatch:r})=>ha(void 0,void 0,void 0,(function*(){const{microphones:i,defaultMicrophoneId:o,audioEnabled:a}=n().recorderSettings,s=yield ha(void 0,void 0,void 0,(function*(){return(yield Jo()).filter((e=>e.deviceId&&"audioinput"===e.kind)).map((e=>({deviceId:e.deviceId,label:e.label})))}));if(t.increment("integrations.sdk.media.initialize_microphones",{microphones:s.length}),i.length!==s.length&&r(Vt.updateMicrophones(s)),0===s.length)return void r(Vt.turnOffMicrophone());a||r(Vt.turnOnMicrophone());const u=((e,t)=>{const n=e.find((e=>"default"===e.deviceId)),r=e.find((e=>e.deviceId===t));return(null==r?void 0:r.deviceId)||(null==n?void 0:n.deviceId)||e[0].deviceId})(s,o);e.info("audio-control: Updating microphone",{microphoneId:u}),r($t.updateMediaDevices({microphoneId:u}))})))),({logger:e})=>Gt($t.updateMediaDevices,(({dispatch:t},n)=>{Wi(t,e,{mediaDevices:n})}))];var ma=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const ga=[e=>Gt($t.quitPage,(({getState:t})=>ma(void 0,void 0,void 0,(function*(){const{previewRecording:{sessionId:n},recorder:{appStage:r,hostUrl:i}}=t();if(yield e.metrics.flush(),n&&Ct.ACTIVE_RECORDING_STAGES.includes(r)){e.metrics.increment("integrations.sdk.beacon.sent"),e.analytics.track("SDK Beacon Sent",{sessionId:n,appStage:r});const t=new Blob([JSON.stringify({sessionId:n,appStage:r})],{type:"application/json; charset=UTF-8"});navigator.sendBeacon(`${i}/integrations-app/sdk/beacon`,t)}}))))];var ya=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const wa=[e=>Gt($t.openPreRecordingMenu,(({dispatch:t,getState:n})=>ya(void 0,void 0,void 0,(function*(){const{recorder:{appStage:r}}=n();r===Me.Closed&&(yield pa(e).handler({dispatch:t,getState:n},void 0),t(Vt.openPreRecordingMenu()),t($t.checkUserAuthenticated()))}))))];var ba=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Sa(e,t){var n,r;return ba(this,void 0,void 0,(function*(){try{const i=yield t.gqlClient.mutation(pi`
          mutation DeleteVideo($id: ID!) {
            deleteVideo(id: $id)
          }
        `,{id:e}).toPromise();if(null!=i.error)throw i.error.toString();return null!==(r=null===(n=i.data)||void 0===n?void 0:n.deleteVideo)&&void 0!==r&&r}catch(e){return t.logger.error("Failed to delete recording",{error:e}),!1}}))}var Ea=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};let ka,Ca;const xa=(e,t)=>{const n=new Audio(`https://cdn.loom.com/assets/loom-sdk/${e}-recording.mp3`);return n.addEventListener("error",(e=>{const{userAgent:n}=navigator;t.crumb({level:Ce.Warning,message:"Unable to load start-recording.mp3 file",context:{err:e,userAgent:n}})})),n},Ta=(e,t,n)=>{const{handlerName:r,eventDescription:i,eventLogLevel:o=Ce.Info}=t,{onTrigger:a}=e,s=n.currentStatus();return n.log.crumb({message:`mediarecorder.build: ${r}`,level:Ce.Info,context:{options:e,status:s}}),t=>{const s=n.currentStatus();n.log.crumb({message:`${r}: MediaRecorder has ${i}`,level:o,context:{event:t,options:e,status:s}}),a.map((e=>e(t,n.log)))}},Na={interval:{setup:setInterval,teardown:clearInterval},timeout:{setup:setTimeout,teardown:clearTimeout}},Oa=(e,t)=>{const{name:n,ms:r,onTrigger:i,kind:o}=e,{setup:a,teardown:s}=Na[o],u=(e,r)=>t.crumb({level:Ce.Info,message:`${o}, ${n}: ${e}`,context:r});u("initialised",e);let c=0;const d=()=>{u("stopped",{}),s(c)};return{clear:d,reset:()=>{d(),c=a((()=>{u("triggered",{}),i()}),r),u("reset",{})}}};function Aa(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function Pa(e){return function t(n){return 0===arguments.length||Aa(n)?t:e.apply(this,arguments)}}function _a(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return Aa(n)?t:Pa((function(t){return e(n,t)}));default:return Aa(n)&&Aa(r)?t:Aa(n)?Pa((function(t){return e(t,r)})):Aa(r)?Pa((function(t){return e(n,t)})):e(n,r)}}}function Ia(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,i){return t.apply(this,arguments)};case 5:return function(e,n,r,i,o){return t.apply(this,arguments)};case 6:return function(e,n,r,i,o,a){return t.apply(this,arguments)};case 7:return function(e,n,r,i,o,a,s){return t.apply(this,arguments)};case 8:return function(e,n,r,i,o,a,s,u){return t.apply(this,arguments)};case 9:return function(e,n,r,i,o,a,s,u,c){return t.apply(this,arguments)};case 10:return function(e,n,r,i,o,a,s,u,c,d){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Ma(e,t,n){return function(){for(var r=[],i=0,o=e,a=0;a<t.length||i<arguments.length;){var s;a<t.length&&(!Aa(t[a])||i>=arguments.length)?s=t[a]:(s=arguments[i],i+=1),r[a]=s,Aa(s)||(o-=1),a+=1}return o<=0?n.apply(this,r):Ia(o,Ma(e,r,n))}}var Ra=_a((function(e,t){return 1===e?Pa(t):Ia(e,Ma(e,[],t))}));function La(e){return function t(n,r,i){switch(arguments.length){case 0:return t;case 1:return Aa(n)?t:_a((function(t,r){return e(n,t,r)}));case 2:return Aa(n)&&Aa(r)?t:Aa(n)?_a((function(t,n){return e(t,r,n)})):Aa(r)?_a((function(t,r){return e(n,t,r)})):Pa((function(t){return e(n,r,t)}));default:return Aa(n)&&Aa(r)&&Aa(i)?t:Aa(n)&&Aa(r)?_a((function(t,n){return e(t,n,i)})):Aa(n)&&Aa(i)?_a((function(t,n){return e(t,r,n)})):Aa(r)&&Aa(i)?_a((function(t,r){return e(n,t,r)})):Aa(n)?Pa((function(t){return e(t,r,i)})):Aa(r)?Pa((function(t){return e(n,t,i)})):Aa(i)?Pa((function(t){return e(n,r,t)})):e(n,r,i)}}}var Ba=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function Da(e){return null!=e&&"function"==typeof e["@@transducer/step"]}function za(e,t,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),i=r.pop();if(!Ba(i)){for(var o=0;o<e.length;){if("function"==typeof i[e[o]])return i[e[o]].apply(i,r);o+=1}if(Da(i)){var a=t.apply(null,r);return a(i)}}return n.apply(this,arguments)}}var ja=function(){return this.xf["@@transducer/init"]()},Ua=function(e){return this.xf["@@transducer/result"](e)};function Fa(e){return"[object String]"===Object.prototype.toString.call(e)}var qa=Pa((function(e){return!!Ba(e)||!!e&&("object"==typeof e&&(!Fa(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))})),Ka=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();var Ha=_a((function(e,t){return Ia(e.length,(function(){return e.apply(t,arguments)}))}));function Va(e,t,n){for(var r=n.next();!r.done;){if((t=e["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function $a(e,t,n,r){return e["@@transducer/result"](n[r](Ha(e["@@transducer/step"],e),t))}var Ga="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function Wa(e,t,n){if("function"==typeof e&&(e=function(e){return new Ka(e)}(e)),qa(n))return function(e,t,n){for(var r=0,i=n.length;r<i;){if((t=e["@@transducer/step"](t,n[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return $a(e,t,n,"fantasy-land/reduce");if(null!=n[Ga])return Va(e,t,n[Ga]());if("function"==typeof n.next)return Va(e,t,n);if("function"==typeof n.reduce)return $a(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var Ya=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=ja,e.prototype["@@transducer/result"]=Ua,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}(),Qa=_a((function(e,t){return new Ya(e,t)}));function Xa(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var Ja=Object.prototype.toString,Za=function(){return"[object Arguments]"===Ja.call(arguments)?function(e){return"[object Arguments]"===Ja.call(e)}:function(e){return Xa("callee",e)}}(),es=!{toString:null}.propertyIsEnumerable("toString"),ts=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ns=function(){return arguments.propertyIsEnumerable("length")}(),rs=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},is="function"!=typeof Object.keys||ns?Pa((function(e){if(Object(e)!==e)return[];var t,n,r=[],i=ns&&Za(e);for(t in e)!Xa(t,e)||i&&"length"===t||(r[r.length]=t);if(es)for(n=ts.length-1;n>=0;)Xa(t=ts[n],e)&&!rs(r,t)&&(r[r.length]=t),n-=1;return r})):Pa((function(e){return Object(e)!==e?[]:Object.keys(e)})),os=_a(za(["fantasy-land/map","map"],Qa,(function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return Ra(t.length,(function(){return e.call(this,t.apply(this,arguments))}));case"[object Object]":return Wa((function(n,r){return n[r]=e(t[r]),n}),{},is(t));default:return function(e,t){for(var n=0,r=t.length,i=Array(r);n<r;)i[n]=e(t[n]),n+=1;return i}(e,t)}}))),as=Number.isInteger||function(e){return e<<0===e},ss=_a((function(e,t){var n=e<0?t.length+e:e;return Fa(t)?t.charAt(n):t[n]})),us=_a((function(e,t){return e.map((function(e){for(var n,r=t,i=0;i<e.length;){if(null==r)return;n=e[i],r=as(n)?ss(n,r):r[n],i+=1}return r}))})),cs=_a((function(e,t){return us([e],t)[0]})),ds=La(Wa),ls=La((function(e,t,n){var r={};for(var i in n)r[i]=n[i];return r[e]=t,r})),fs=Pa((function(e){return null==e})),ps=La((function e(t,n,r){if(0===t.length)return n;var i=t[0];if(t.length>1){var o=!fs(r)&&Xa(i,r)?r[i]:as(t[1])?[]:{};n=e(Array.prototype.slice.call(t,1),n,o)}if(as(i)&&Ba(r)){var a=[].concat(r);return a[i]=n,a}return ls(i,n,r)}));function hs(e){return e}var vs=Pa(hs),ms=_a((function(e,t){return function(n){return function(r){return os((function(e){return t(e,r)}),n(e(r)))}}})),gs=Pa((function(e){return ms(cs(e),ps(e))})),ys=function(e){return{value:e,map:function(t){return ys(t(e))}}},ws=La((function(e,t,n){return e((function(e){return ys(t(e))}))(n).value})),bs=_a((function(e,t){return function(e,t){var n;t=t||[];var r=(e=e||[]).length,i=t.length,o=[];for(n=0;n<r;)o[o.length]=e[n],n+=1;for(n=0;n<i;)o[o.length]=t[n],n+=1;return o}([e],t)}));const Ss=_a((function(e,t){return Ra(t.length,(function(){for(var n=[],r=0;r<t.length;)n.push(t[r].call(this,arguments[r])),r+=1;return e.apply(this,n.concat(Array.prototype.slice.call(arguments,t.length)))}))}))(ws,[gs,bs,vs]),Es=e=>[[640,Math.floor(2e3*e*1e3)],[1280,Math.floor(4e3*e*1e3)],[1920,Math.floor(6e3*e*1e3)]],ks=e=>({vp8:Es(e),vp9:Es(.9*e)}),Cs={[je.Lowest]:ks(.1),[je.Low]:ks(.25),[je.Normal]:ks(1),[je.High]:ks(2),[je.Highest]:ks(5)},xs="video/webm",Ts=128e3,Ns=(e,t,n)=>{const r=e.getVideoTracks().length>0,i=e.getAudioTracks().length>0;if(!1===r&&!1===i)return{audioBitsPerSecond:0,videoBitsPerSecond:0,mimeType:""};if(!1===r&&!0===i)return{audioBitsPerSecond:Ts,videoBitsPerSecond:0,mimeType:"video/webm;codecs=opus"};let{width:o}=e.getVideoTracks()[0].getSettings();var a;null==o&&(n.crumb({level:Ce.Error,message:"recorderOptions: videotrack is missing a width. Attempting fallback",context:{mediastream:(a=e,{id:a.id,active:a.active,audioTrackCount:a.getAudioTracks().length,videoTrackCount:a.getVideoTracks().length})}}),o=320);const[s,u]=(()=>{const e=["vp9","vp8"].find((e=>MediaRecorder.isTypeSupported(`${xs};codecs=${e}`)))||"vp8";return[xs,e]})(),c=(e=>{const{settings:t,width:n,codec:r}=e,i=Cs[t.videoQuality],[,o]=i[r].reduce(((e,t)=>Math.abs(t[0]-n)<Math.abs(e[0]-n)?t:e));return o})({width:o,codec:u,settings:t});return!1===i?{audioBitsPerSecond:0,videoBitsPerSecond:c,mimeType:`${s};codecs=${u}`}:{audioBitsPerSecond:Ts,videoBitsPerSecond:c,mimeType:`${s};codecs=${u},opus`}},Os=({stream:e,settings:t,handlerOptions:n},r)=>{const i=Ns(e,t,r.log);r.log.crumb({level:Ce.Info,message:"mediarecorder: chosen recorder options",context:i});const o=new MediaRecorder(e,i),a=((e,t,n)=>{const{thresholds:r}=e,i=Oa({name:"data-available",ms:r.datatimeout,onTrigger:()=>{t.stop()},kind:"timeout"},n),o=Oa({name:"request-step",ms:r.requestInterval,onTrigger:()=>{t.requestData()},kind:"interval"},n);return ds(((e,t)=>Ss(t[0],t[1],e)),e,[[["onpauseOptions","onTrigger"],()=>i.clear()],[["onpauseOptions","onTrigger"],()=>o.clear()],[["onstopOptions","onTrigger"],()=>i.clear()],[["onstopOptions","onTrigger"],()=>o.clear()],[["onstartOptions","onTrigger"],()=>i.reset()],[["onstartOptions","onTrigger"],()=>o.reset()],[["onresumeOptions","onTrigger"],()=>o.reset()],[["onresumeOptions","onTrigger"],()=>i.reset()],[["ondataOptions","onTrigger"],()=>i.reset()]])})(n,o,r.log);return o.ondataavailable=((e,t,n)=>{const{onTrigger:r,onErrorTeardown:i,uploadFn:o}=t;n.log.crumb({message:"mediarecorder.build: ondata",level:Ce.Info,context:{options:t}});let a=0;return t=>{r.map((e=>e(t,n.log)));const{data:s,data:{size:u}}=t;if(u>0)return n.log.crumb({message:"ondata: Received blob, triggering upload function",level:Ce.Info,context:{size:u,previousConsecutiveEmptyEvents:a}}),o(s),void(a=0);const c=n.currentStatus();a++,n.log.crumb({message:"ondata: Empty blob received from mediarecorder",level:Ce.Warning,context:{consecutiveEmptyEvents:a,status:c}}),a>=10&&(n.log.crumb({message:"ondata: Too many empty events from the mediarecorder",level:Ce.Error,context:{consecutiveEmptyEvents:a,status:c}}),i(e))}})(o,a.ondata,r),o.onerror=Ta(a.onerror,{handlerName:"onerror",eventDescription:"thrown an error",eventLogLevel:Ce.Error},r),o.onpause=Ta(a.onpause,{handlerName:"onpause",eventDescription:"paused"},r),o.onresume=Ta(a.onresume,{handlerName:"onresume",eventDescription:"resumed"},r),o.onstart=Ta(a.onstart,{handlerName:"onstart",eventDescription:"started"},r),o.onstop=Ta(a.onstop,{handlerName:"onstop",eventDescription:"stopped"},r),[{abandon:()=>{["recording","paused"].includes(o.state)&&o.stop()},start:e=>o.start(e),stop:()=>o.stop(),pause:()=>o.pause(),resume:()=>o.resume()},o]},As=(e,t,n)=>{const{hooks:r}=e,i=(e,t)=>{const i=`mediarecorder.${e}: Unexpected error`,o=new Error(i);n.log.crumb({level:Ce.Error,message:i,context:Object.assign({error:o},t)}),r.onUnrecoverable(o)};return{ondata:{onTrigger:[()=>{const e=n.currentStatus();!1===[ze.Recording,ze.MediaStreamStopped,ze.Completing].includes(e)&&n.log.crumb({level:Ce.Warning,message:`ondata: Triggered while in unexpected state ${e}`,context:{status:e}})}],onErrorTeardown:e=>{i("ondata",{mediarecorder:e})},uploadFn:t.uploadFn},onerror:{onTrigger:[e=>{i("onError",{event:e})}]},onstop:{onTrigger:[()=>{switch(n.currentStatus()){case ze.MediaStreamStopped:return void r.onMediaStreamStopped();case ze.Cancelling:case ze.Abandoning:return void t.cancelRecording();case ze.Completing:return void t.completeRecording()}}]},onpause:{onTrigger:[]},onstart:{onTrigger:[()=>t.setFinishedStarting()]},onresume:{onTrigger:[]},thresholds:{datatimeout:1e4,requestInterval:5e3}}};var Ps=ri((function(e,t){t.statusFinder=void 0;const n=(e,t,r)=>{const[i,...o]=t;if(!0===i.test(e)){const{subStates:t,status:r}=i;return 0===t.length?r:n(e,t,r)}return 0===o.length?r:n(e,o,r)};t.statusFinder=n}));const _s=[{status:ze.Abandoning,test:({markers:e})=>e.startedAbandoning,subStates:[{status:ze.Abandoned,test:({markers:e})=>e.finishedTeardown,subStates:[]}]},{status:ze.Intitializing,test:({mediarecorder:e,markers:t})=>null==e&&!1===t.finishedInitializing&&!1===t.startedStarting&&!1===t.finishedStarting&&!1===t.startedCancel&&!1===t.finishedTeardown&&!1===t.startedCompletion&&!1===t.finishedCompletion,subStates:[]},{status:ze.Ready,test:({mediarecorder:e,markers:t})=>null!=e&&"inactive"===e.state&&!0===t.finishedInitializing&&!1===t.startedStarting&&!1===t.finishedStarting&&!1===t.startedCancel&&!1===t.finishedTeardown&&!1===t.startedCompletion&&!1===t.finishedCompletion,subStates:[]},{status:ze.Starting,test:({mediarecorder:e,markers:t})=>null!=e&&["inactive","recording"].includes(e.state)&&!0===t.finishedInitializing&&!0===t.startedStarting&&!1===t.finishedStarting&&!1===t.startedCancel&&!1===t.finishedTeardown&&!1===t.startedCompletion&&!1===t.finishedCompletion,subStates:[]},{status:ze.Recording,test:({mediarecorder:e,markers:t})=>null!=e&&"recording"===e.state&&!0===t.finishedInitializing&&!0===t.startedStarting&&!0===t.finishedStarting&&!1===t.startedCancel&&!1===t.finishedTeardown&&!1===t.startedCompletion&&!1===t.finishedCompletion,subStates:[]},{status:ze.Paused,test:({mediarecorder:e,markers:t})=>null!=e&&"paused"===e.state&&!1===t.startedCancel&&!1===t.startedCompletion,subStates:[]},{status:ze.MediaStreamStopped,test:({mediarecorder:e,markers:t})=>null!=e&&"inactive"===e.state&&!0===t.finishedInitializing&&!0===t.startedStarting&&!0===t.finishedStarting&&!1===t.startedCancel&&!1===t.startedAbandoning&&!1===t.startedCompletion,subStates:[]},{status:ze.Cancelling,test:({mediarecorder:e,markers:t})=>null!=e&&["paused","recording","inactive"].includes(e.state)&&!0===t.startedCancel,subStates:[{status:ze.Cancelled,test:({mediarecorder:e,markers:t})=>null!=e&&"inactive"===e.state&&!0===t.finishedTeardown,subStates:[]}]},{status:ze.Completing,test:({mediarecorder:e,markers:t})=>null!=e&&["paused","recording","inactive"].includes(e.state)&&!0===t.startedCompletion,subStates:[{status:ze.FinishedUploading,test:({mediarecorder:e,markers:t})=>null!=e&&"inactive"===e.state&&!0===t.finishedUploading,subStates:[{status:ze.Completed,test:({markers:e})=>!0===e.finishedCompletion,subStates:[]}]}]}],Is=(e,t)=>new URL(`/v1/videos/${t}`,e).href,Ms=e=>Is(e.host,e.videoId),Rs=e=>Is(e.host,`${e.videoId}/complete`),Ls=e=>Is(e.host,`${e.videoId}/upload_credentials?bucketVersion=v2`),Bs=e=>Is(e.host,`${e.videoId}/metadata`),Ds=e=>Is(e.host,`${e.videoId}/message_progress`),zs=e=>Is(e.host,`${e.videoId}/total_parts`);var js=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const Us=(e,t)=>js(void 0,void 0,void 0,(function*(){const{url:n,method:r,headers:i={}}=e,o=new URL(n);let a;try{a=yield(()=>{const e={credentials:"include",headers:Object.assign(Object.assign({},i),{"content-type":"application/json"}),method:r,timeout:3e4};return"GET"===r?(o.search=new URLSearchParams(t).toString(),fetch(o.toString(),e)):fetch(o.toString(),Object.assign({body:JSON.stringify(t)},e))})()}catch(t){return{kind:Be.Failed,message:`Fetch failed: ${t.message}`,context:{args:e,extra:{error:t.toString()}},stackContext:[]}}const s=yield a.text();if(a.ok){if(0===s.length)return{kind:Be.Success,payload:{}};try{return{kind:Be.Success,payload:JSON.parse(s)}}catch(t){return{kind:Be.Failed,message:"invalid http body provided by api",context:{args:e,extra:{httpBody:s,status:a.status,statusText:a.statusText,headers:a.headers,url:a.url,redirected:a.redirected}},stackContext:[]}}}return{kind:Be.Failed,message:"invalid response, outside of 200-300 range",context:{args:e,extra:{status:a.status,statusText:a.statusText,headers:a.headers,url:a.url,redirected:a.redirected,rawBody:s}},stackContext:[]}}));var Fs=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var qs=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var Ks=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var Hs=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var Vs=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const $s=(e,t)=>Vs(void 0,void 0,void 0,(function*(){t=t||e.remainingAttempts;const{fn:n,shouldRetry:r,remainingAttempts:i}=e,o=yield n();return r(o)&&i>0?(yield(a=(e=>{const t=Math.pow(e,2)-Math.pow(e,1.9)+2,n=1e3*Math.min(30,t);return Math.floor(n)})(t-i),new Promise((e=>setTimeout(e,a)))),yield $s(Object.assign(Object.assign({},e),{remainingAttempts:i-1}),t)):{hadSuccess:!1===r(o),result:o};var a})),Gs=(e,t)=>{const n=t instanceof Array,r="object"==typeof t;if(!n&&!r)return t;const i=Object.assign(t);if(n)for(let t=0;t<i.length;t++)i[t]=Gs(e,i[t]);else if(r){Object.keys(i).forEach((t=>{t===e?delete i[e]:null!=i[t]&&(i[t]=Gs(e,i[t]))}))}return i};var Ws=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const Ys=(e,t)=>Ws(void 0,void 0,void 0,(function*(){const{callFn:n,purpose:r,breadcrumbs:i,allowedRetries:o}=e;t.crumb({level:Ce.Info,message:`api.callApi: Attempting to "${r}"`,context:Object.assign(Object.assign({},i),{callFn:n.toString()})});const{result:a}=yield $s({fn:()=>n(),shouldRetry:e=>e.kind===Be.Failed&&404!==e.context.extra.status,remainingAttempts:o});if(a.kind===Be.Failed){const n=Ui({failure:a,context:{args:e,extra:i},message:`api.callApi: Failed to "${r}"`});return 404!==a.context.extra.status?t.recordFail(n):t.crumb({level:Ce.Warning,message:`api.callApi: Failed to ${r}. 404, resource did not exist`,context:{}}),n}return a}));class Qs{constructor(){this.handlers=[]}on(e){this.handlers.push(e)}off(e){this.handlers=this.handlers.filter((t=>t!==e))}clear(){this.handlers=[]}trigger(e){this.handlers.slice(0).forEach((t=>{t(e)}))}expose(){return this}}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Xs=function(e,t){return(Xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Js(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Xs(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Zs=function(){return(Zs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function eu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function tu(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function nu(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function ru(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function iu(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function ou(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function au(e){return this instanceof au?(this.v=e,this):new au(e)}function su(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof au?Promise.resolve(e.value.v).then(u,c):d(o[0][2],e)}(i[e](t))}catch(e){d(o[0][3],e)}}function u(e){s("next",e)}function c(e){s("throw",e)}function d(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function uu(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=ru(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}var cu="3.27.0",du=function(e,t){return(du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function lu(e,t){function n(){this.constructor=e}du(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var fu=function(){return(fu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function pu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function hu(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vu(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function mu(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(vu(arguments[t]));return e}function gu(e){return this instanceof gu?(this.v=e,this):new gu(e)}var yu=Object.freeze({__proto__:null,__extends:lu,get __assign(){return fu},__rest:pu,__decorate:function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__param:function(e,t){return function(n,r){t(n,r,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},__generator:function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},__createBinding:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},__exportStar:function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])},__values:hu,__read:vu,__spread:mu,__spreadArrays:function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},__await:gu,__asyncGenerator:function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof gu?Promise.resolve(e.value.v).then(u,c):d(o[0][2],e)}(i[e](t))}catch(e){d(o[0][3],e)}}function u(e){s("next",e)}function c(e){s("throw",e)}function d(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}},__asyncDelegator:function(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:gu(e[r](t)),done:"return"===r}:i?i(t):t}:i}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=hu(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet:function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}}),wu=ri((function(e,t){t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}})),bu=ri((function(e,t){t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])}));var Su=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},Eu=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var a="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(a)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)},ku=Object.freeze({__proto__:null,fromUtf8:Su,toUtf8:Eu}),Cu={};for(var xu=Object.freeze({__proto__:null,locateWindow:function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:Cu}}),Tu=ni(ku),Nu=ni(xu),Ou=ri((function(e,t){t.Sha256=void 0;var n=function(){function e(e){e?(this.operation=function(e){return new Promise((function(t,n){var i=Nu.locateWindow().msCrypto.subtle.importKey("raw",r(e),bu.SHA_256_HMAC_ALGO,!1,["sign"]);i.oncomplete=function(){i.result&&t(i.result),n(new Error("ImportKey completed without importing key."))},i.onerror=function(){n(new Error("ImportKey failed to import key."))}}))}(e).then((function(e){return Nu.locateWindow().msCrypto.subtle.sign(bu.SHA_256_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve(Nu.locateWindow().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;wu.isEmptyData(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(r(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n(new Error("Error encountered finalizing hash"))},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n(new Error("Error encountered finalizing hash"))},e.finish()}))}))},e}();function r(e){return"string"==typeof e?Tu.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=n})),Au=ri((function(e,t){t.Sha256=void 0;var n=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise((function(t,n){Nu.locateWindow().crypto.subtle.importKey("raw",r(e),bu.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))}return e.prototype.update=function(e){if(!wu.isEmptyData(e)){var t=r(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return Nu.locateWindow().crypto.subtle.sign(bu.SHA_256_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):wu.isEmptyData(this.toHash)?Promise.resolve(bu.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return Nu.locateWindow().crypto.subtle.digest(bu.SHA_256_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e}();function r(e){return"string"==typeof e?Tu.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=n})),Pu=ri((function(e,t){t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1})),_u=ri((function(e,t){t.RawSha256=void 0;var n=function(){function e(){this.state=Int32Array.from(Pu.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>Pu.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===Pu.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%Pu.BLOCK_SIZE>=Pu.BLOCK_SIZE-8){for(var r=this.bufferLength;r<Pu.BLOCK_SIZE;r++)t.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(r=this.bufferLength;r<Pu.BLOCK_SIZE-8;r++)t.setUint8(r,0);t.setUint32(Pu.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(Pu.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var i=new Uint8Array(Pu.DIGEST_LENGTH);for(r=0;r<8;r++)i[4*r]=this.state[r]>>>24&255,i[4*r+1]=this.state[r]>>>16&255,i[4*r+2]=this.state[r]>>>8&255,i[4*r+3]=this.state[r]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],d=0;d<Pu.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var l=this.temp[d-2],f=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,p=((l=this.temp[d-15])>>>7|l<<25)^(l>>>18|l<<14)^l>>>3;this.temp[d]=(f+this.temp[d-7]|0)+(p+this.temp[d-16]|0)}var h=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&s^~a&u)|0)+(c+(Pu.KEY[d]+this.temp[d]|0)|0)|0,v=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&r^n&i^r&i)|0;c=u,u=s,s=a,a=o+h|0,o=i,i=r,r=n,n=h+v|0}t[0]+=n,t[1]+=r,t[2]+=i,t[3]+=o,t[4]+=a,t[5]+=s,t[6]+=u,t[7]+=c},e}();t.RawSha256=n})),Iu=ni(yu),Mu=ri((function(e,t){t.Sha256=void 0;var n=function(){function e(e){if(this.hash=new _u.RawSha256,e){this.outer=new _u.RawSha256;var t=function(e){var t=r(e);if(t.byteLength>Pu.BLOCK_SIZE){var n=new _u.RawSha256;n.update(t),t=n.digest()}var i=new Uint8Array(Pu.BLOCK_SIZE);return i.set(t),i}(e),n=new Uint8Array(Pu.BLOCK_SIZE);n.set(t);for(var i=0;i<Pu.BLOCK_SIZE;i++)t[i]^=54,n[i]^=92;this.hash.update(t),this.outer.update(n);for(i=0;i<t.byteLength;i++)t[i]=0}}return e.prototype.update=function(e){if(!function(e){if("string"==typeof e)return 0===e.length;return 0===e.byteLength}(e)&&!this.error)try{this.hash.update(r(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return Iu.__awaiter(this,void 0,void 0,(function(){return Iu.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();function r(e){return"string"==typeof e?Tu.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=n})),Ru=ri((function(e,t){Iu.__exportStar(Mu,t)})),Lu=ri((function(e,t){t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var n=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function r(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function i(e){return e&&n.every((function(t){return"function"==typeof e[t]}))}t.supportsWebCrypto=function(e){return!(!r(e)||"object"!=typeof e.crypto.subtle)&&i(e.crypto.subtle)},t.supportsSecureRandom=r,t.supportsSubtleCrypto=i,t.supportsZeroByteGCM=function(e){return Iu.__awaiter(this,void 0,void 0,(function(){var t;return Iu.__generator(this,(function(n){switch(n.label){case 0:if(!i(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}}))}))}})),Bu=ri((function(e,t){Iu.__exportStar(Lu,t)})),Du=Object.freeze({__proto__:null}),zu=Object.freeze({__proto__:null}),ju=Object.freeze({__proto__:null}),Uu=Object.freeze({__proto__:null}),Fu=ri((function(e,t){t.isMsWindow=void 0;var n=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,r=t.getRandomValues,i=t.subtle;return n.map((function(e){return i[e]})).concat(r).every((function(e){return"function"==typeof e}))}return!1}})),qu=ni(Du),Ku=ni(zu),Hu=ni(ju),Vu=ni(Uu),$u=ri((function(e,t){Iu.__exportStar(qu,t),Iu.__exportStar(Ku,t),Iu.__exportStar(Hu,t),Iu.__exportStar(Vu,t),Iu.__exportStar(Fu,t)})),Gu=ri((function(e,t){t.Sha256=void 0;var n=function(){function e(e){Bu.supportsWebCrypto(Nu.locateWindow())?this.hash=new Au.Sha256(e):$u.isMsWindow(Nu.locateWindow())?this.hash=new Ou.Sha256(e):this.hash=new Ru.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();t.Sha256=n})),Wu=ri((function(e,t){t.WebCryptoSha256=t.Ie11Sha256=void 0,Iu.__exportStar(Gu,t),Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return Ou.Sha256}}),Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return Au.Sha256}})})),Yu=ri((function(e,t){t.Crc32=t.crc32=void 0,t.crc32=function(e){return(new n).update(e).digest()};var n=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,n;try{for(var i=Iu.__values(e),o=i.next();!o.done;o=i.next()){var a=o.value;this.checksum=this.checksum>>>8^r[255&(this.checksum^a)]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32=n;var r=Uint32Array.from([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117])})),Qu={},Xu={},Ju=0;Ju<256;Ju++){var Zu=Ju.toString(16).toLowerCase();1===Zu.length&&(Zu="0"+Zu),Qu[Ju]=Zu,Xu[Zu]=Ju}function ec(e){for(var t="",n=0;n<e.byteLength;n++)t+=Qu[e[n]];return t}var tc=function(){function e(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new Error(t+" is too large (or, if negative, too small) to represent as an Int64");for(var n=new Uint8Array(8),r=7,i=Math.abs(Math.round(t));r>-1&&i>0;r--,i/=256)n[r]=i;return t<0&&nc(n),new e(n)},e.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&nc(e),parseInt(ec(e),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function nc(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;t>-1&&(e[t]++,0===e[t]);t--);}var rc,ic=function(){function e(e,t){this.toUtf8=e,this.fromUtf8=t}return e.prototype.format=function(e){var t,n,r,i,o=[];try{for(var a=ru(Object.keys(e)),s=a.next();!s.done;s=a.next()){var u=s.value,c=this.fromUtf8(u);o.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}var d=new Uint8Array(o.reduce((function(e,t){return e+t.byteLength}),0)),l=0;try{for(var f=ru(o),p=f.next();!p.done;p=f.next()){var h=p.value;d.set(h,l),l+=h.byteLength}}catch(e){r={error:e}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return d},e.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":var r=new Uint8Array(9);return r[0]=5,r.set(e.value.bytes,1),r;case"binary":var i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);var o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":var a=this.fromUtf8(e.value),s=new DataView(new ArrayBuffer(3+a.byteLength));s.setUint8(0,7),s.setUint16(1,a.byteLength,!1);var u=new Uint8Array(s.buffer);return u.set(a,3),u;case"timestamp":var c=new Uint8Array(9);return c[0]=8,c.set(tc.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!hc.test(e.value))throw new Error("Invalid UUID received: "+e.value);var d=new Uint8Array(17);return d[0]=9,d.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in Xu))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=Xu[r]}return t}(e.value.replace(/\-/g,"")),1),d}},e.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[i]={type:oc,value:!0};break;case 1:t[i]={type:oc,value:!1};break;case 2:t[i]={type:ac,value:e.getInt8(n++)};break;case 3:t[i]={type:sc,value:e.getInt16(n,!1)},n+=2;break;case 4:t[i]={type:uc,value:e.getInt32(n,!1)},n+=4;break;case 5:t[i]={type:cc,value:new tc(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var o=e.getUint16(n,!1);n+=2,t[i]={type:dc,value:new Uint8Array(e.buffer,e.byteOffset+n,o)},n+=o;break;case 7:var a=e.getUint16(n,!1);n+=2,t[i]={type:lc,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,a))},n+=a;break;case 8:t[i]={type:fc,value:new Date(new tc(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:var s=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,t[i]={type:pc,value:ec(s.subarray(0,4))+"-"+ec(s.subarray(4,6))+"-"+ec(s.subarray(6,8))+"-"+ec(s.subarray(8,10))+"-"+ec(s.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},e}();!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(rc||(rc={}));var oc="boolean",ac="byte",sc="short",uc="integer",cc="long",dc="binary",lc="string",fc="timestamp",pc="uuid",hc=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var vc=function(){function e(e,t){this.headerMarshaller=new ic(e,t)}return e.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),i=r.byteLength+n.byteLength+16,o=new Uint8Array(i),a=new DataView(o.buffer,o.byteOffset,o.byteLength),s=new Yu.Crc32;return a.setUint32(0,i,!1),a.setUint32(4,r.byteLength,!1),a.setUint32(8,s.update(o.subarray(0,8)).digest(),!1),o.set(r,12),o.set(n,r.byteLength+12),a.setUint32(i-4,s.update(o.subarray(8,i-4)).digest(),!1),o},e.prototype.unmarshall=function(e){var t=function(e){var t=e.byteLength,n=e.byteOffset,r=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var i=new DataView(r,n,t),o=i.getUint32(0,!1);if(t!==o)throw new Error("Reported message length does not match received message length");var a=i.getUint32(4,!1),s=i.getUint32(8,!1),u=i.getUint32(t-4,!1),c=(new Yu.Crc32).update(new Uint8Array(r,n,8));if(s!==c.digest())throw new Error("The prelude checksum specified in the message ("+s+") does not match the calculated CRC32 checksum ("+c.digest()+")");if(c.update(new Uint8Array(r,n+8,t-12)),u!==c.digest())throw new Error("The message checksum ("+c.digest()+") did not match the expected value of "+u);return{headers:new DataView(r,n+8+4,a),body:new Uint8Array(r,n+8+4+a,o-a-16)}}(e),n=t.headers,r=t.body;return{headers:this.headerMarshaller.parse(n),body:r}},e.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},e}();var mc=function(){function e(e){var t=e.utf8Encoder,n=e.utf8Decoder;this.eventMarshaller=new vc(t,n),this.utfEncoder=t}return e.prototype.deserialize=function(e,t){return function(e,t){var n;return(n={})[Symbol.asyncIterator]=function(){return su(this,arguments,(function(){var n,r,i,o,a,s,u,c,d,l,f,p,h,v,m,g,y;return nu(this,(function(w){switch(w.label){case 0:w.trys.push([0,12,13,18]),n=uu(e),w.label=1;case 1:return[4,au(n.next())];case 2:if((r=w.sent()).done)return[3,11];if(i=r.value,o=t.eventMarshaller.unmarshall(i),"error"!==(a=o.headers[":message-type"].value))return[3,3];throw(s=new Error(o.headers[":error-message"].value||"UnknownError")).name=o.headers[":error-code"].value,s;case 3:return"exception"!==a?[3,5]:(u=o.headers[":exception-type"].value,(v={})[u]=o,c=v,[4,au(t.deserializer(c))]);case 4:if((d=w.sent()).$unknown)throw(l=new Error(t.toUtf8(o.body))).name=u,l;throw d[u];case 5:return"event"!==a?[3,9]:((m={})[o.headers[":event-type"].value]=o,f=m,[4,au(t.deserializer(f))]);case 6:return(p=w.sent()).$unknown?[3,10]:[4,au(p)];case 7:return[4,w.sent()];case 8:return w.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+o.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return h=w.sent(),g={error:h},[3,18];case 13:return w.trys.push([13,,16,17]),r&&!r.done&&(y=n.return)?[4,au(y.call(n))]:[3,15];case 14:w.sent(),w.label=15;case 15:return[3,17];case 16:if(g)throw g.error;return[7];case 17:return[7];case 18:return[2]}}))}))},n}(function(e){var t,n=0,r=0,i=null,o=null,a=function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);n=e,r=4,i=new Uint8Array(e),new DataView(i.buffer).setUint32(0,e,!1)};return(t={})[Symbol.asyncIterator]=function(){return su(this,arguments,(function(){var t,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:t=e[Symbol.asyncIterator](),h.label=1;case 1:return[4,au(t.next())];case 2:return s=h.sent(),u=s.value,s.done?n?[3,4]:[4,au(void 0)]:[3,10];case 3:return[2,h.sent()];case 4:return n!==r?[3,7]:[4,au(i)];case 5:return[4,h.sent()];case 6:return h.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,au(void 0)];case 9:return[2,h.sent()];case 10:c=u.length,d=0,h.label=11;case 11:if(!(d<c))return[3,15];if(!i){if(l=c-d,o||(o=new Uint8Array(4)),f=Math.min(4-r,l),o.set(u.slice(d,d+f),r),d+=f,(r+=f)<4)return[3,15];a(new DataView(o.buffer).getUint32(0,!1)),o=null}return p=Math.min(n-r,c-d),i.set(u.slice(d,d+p),r),r+=p,d+=p,n&&n===r?[4,au(i)]:[3,14];case 12:return[4,h.sent()];case 13:h.sent(),i=null,n=0,r=0,h.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}}))}))},t}(e),{eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder})},e.prototype.serialize=function(e,t){var n,r=this;return(n={})[Symbol.asyncIterator]=function(){return su(this,arguments,(function(){var n,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:c.trys.push([0,7,8,13]),n=uu(e),c.label=1;case 1:return[4,au(n.next())];case 2:return(i=c.sent()).done?[3,6]:(o=i.value,[4,au(r.eventMarshaller.marshall(t(o)))]);case 3:return[4,c.sent()];case 4:c.sent(),c.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return a=c.sent(),s={error:a},[3,13];case 8:return c.trys.push([8,,11,12]),i&&!i.done&&(u=n.return)?[4,au(u.call(n))]:[3,10];case 9:c.sent(),c.label=10;case 10:return[3,12];case 11:if(s)throw s.error;return[7];case 12:return[7];case 13:return[4,au(new Uint8Array(0))];case 14:return[4,c.sent()];case 15:return c.sent(),[2]}}))}))},n},e}(),gc=function(){function e(e){var t=e.utf8Encoder,n=e.utf8Decoder;this.eventMarshaller=new vc(t,n),this.universalMarshaller=new mc({utf8Decoder:n,utf8Encoder:t})}return e.prototype.deserialize=function(e,t){var n=yc(e)?function(e){var t;return(t={})[Symbol.asyncIterator]=function(){return su(this,arguments,(function(){var t,n,r,i;return nu(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,au(t.read())];case 3:return n=o.sent(),r=n.done,i=n.value,r?[4,au(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,au(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))},t}(e):e;return this.universalMarshaller.deserialize(n,t)},e.prototype.serialize=function(e,t){var n,r=this.universalMarshaller.serialize(e,t);return"function"==typeof ReadableStream?(n=r[Symbol.asyncIterator](),new ReadableStream({pull:function(e){return tu(this,void 0,void 0,(function(){var t,r,i;return nu(this,(function(o){switch(o.label){case 0:return[4,n.next()];case 1:return t=o.sent(),r=t.done,i=t.value,r?[2,e.close()]:(e.enqueue(i),[2])}}))}))}})):r},e}(),yc=function(e){return"function"==typeof ReadableStream&&e instanceof ReadableStream},wc=function(e){return new gc(e)},bc=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}(),Sc=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e(Zs(Zs({},this),{headers:Zs({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce((function(e,n){var r,i=t[n];return Zs(Zs({},e),((r={})[n]=Array.isArray(i)?ou([],iu(i)):i,r))}),{}))),n},e}();var Ec=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,kc)},kc=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};for(var Cc=function(){function e(e){var t=(void 0===e?{}:e).requestTimeout;this.requestTimeout=t}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal,r=this.requestTimeout;if(null==n?void 0:n.aborted){var i=new Error("Request aborted");return i.name="AbortError",Promise.reject(i)}var o=e.path;if(e.query){var a=function(e){var t,n,r=[];try{for(var i=ru(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var a=o.value,s=e[a];if(a=Ec(a),Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+Ec(s[u]));else{var d=a;(s||"string"==typeof s)&&(d+="="+Ec(s)),r.push(d)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(e.query);a&&(o+="?"+a)}var s=e.port,u=e.method,c=e.protocol+"//"+e.hostname+(s?":"+s:"")+o,d={body:"GET"===u||"HEAD"===u?void 0:e.body,headers:new Headers(e.headers),method:u};"undefined"!=typeof AbortController&&(d.signal=n);var l,f=new Request(c,d),p=[fetch(f).then((function(e){var t,n,r=e.headers,i={};try{for(var o=ru(r.entries()),a=o.next();!a.done;a=o.next()){var s=a.value;i[s[0]]=s[1]}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new bc({headers:i,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new bc({headers:i,statusCode:e.status,body:t})}}))})),(l=r,void 0===l&&(l=0),new Promise((function(e,t){l&&setTimeout((function(){var e=new Error("Request did not complete within "+l+" ms");e.name="TimeoutError",t(e)}),l)})))];return n&&p.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),Promise.race(p)},e}(),xc={},Tc=new Array(64),Nc=0,Oc="A".charCodeAt(0),Ac="Z".charCodeAt(0);Nc+Oc<=Ac;Nc++){var Pc=String.fromCharCode(Nc+Oc);xc[Pc]=Nc,Tc[Nc]=Pc}for(Nc=0,Oc="a".charCodeAt(0),Ac="z".charCodeAt(0);Nc+Oc<=Ac;Nc++){Pc=String.fromCharCode(Nc+Oc);var _c=Nc+26;xc[Pc]=_c,Tc[_c]=Pc}for(Nc=0;Nc<10;Nc++){xc[Nc.toString(10)]=Nc+52;Pc=Nc.toString(10),_c=Nc+52;xc[Pc]=_c,Tc[_c]=Pc}xc["+"]=62,Tc[62]="+",xc["/"]=63,Tc[63]="/";function Ic(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var o=0,a=0,s=i,u=i+3;s<=u;s++)"="!==e[s]?(o|=xc[e[s]]<<6*(u-s),a+=6):o>>=6;var c=i/4*3;o>>=a%8;for(var d=Math.floor(a/8),l=0;l<d;l++){var f=8*(d-l-1);r.setUint8(c+l,(o&255<<f)>>f)}}return new Uint8Array(n)}function Mc(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,a=Math.min(n+3,e.length);o<a;o++)r|=e[o]<<8*(a-o-1),i+=8;var s=Math.ceil(i/6);r<<=6*s-i;for(var u=1;u<=s;u++){var c=6*(s-u);t+=Tc[(r&63<<c)>>c]}t+="==".slice(0,4-s)}return t}var Rc=function(e){return"function"==typeof Blob&&e instanceof Blob?function(e){return tu(this,void 0,void 0,(function(){var t,n;return nu(this,(function(r){switch(r.label){case 0:return[4,Lc(e)];case 1:return t=r.sent(),n=Ic(t),[2,new Uint8Array(n)]}}))}))}(e):function(e){return tu(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return nu(this,(function(u){switch(u.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,u.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return i=u.sent(),o=i.done,(a=i.value)&&(s=t,(t=new Uint8Array(s.length+a.length)).set(s),t.set(a,s.length)),r=o,[3,1];case 3:return[2,t]}}))}))}(e)};function Lc(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var i=null!==(e=r.result)&&void 0!==e?e:"",o=i.indexOf(","),a=o>-1?o+1:i.length;t(i.substring(a))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)}))}function Bc(e,t,n){return void 0===n&&(n=1048576),new Promise((function(r,i){var o=new FileReader;o.addEventListener("error",i),o.addEventListener("abort",i);var a=e.size,s=0;function u(){s>=a?r():o.readAsArrayBuffer(e.slice(s,Math.min(a,s+n)))}o.addEventListener("load",(function(e){var n=e.target.result;t(new Uint8Array(n)),s+=n.byteLength,u()})),u()}))}var Dc=function(e,t){return tu(this,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return n=new e,[4,Bc(t,(function(e){n.update(e)}))];case 1:return r.sent(),[2,n.digest()]}}))}))},zc=64,jc=[1732584193,4023233417,2562383102,271733878],Uc=function(){function e(){this.state=Uint32Array.from(jc),this.buffer=new DataView(new ArrayBuffer(zc)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(!function(e){if("string"==typeof e)return 0===e.length;return 0===e.byteLength}(e)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=function(e){if("string"==typeof e)return Su(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array(e)}(e),n=0,r=t.byteLength;for(this.bytesHashed+=r;r>0;)this.buffer.setUint8(this.bufferLength++,t[n++]),r--,this.bufferLength===zc&&(this.hashBuffer(),this.bufferLength=0)}},e.prototype.digest=function(){return tu(this,void 0,void 0,(function(){var e,t,n,r,i,o,a;return nu(this,(function(s){if(!this.finished){if(t=(e=this).buffer,n=e.bufferLength,r=e.bytesHashed,i=8*r,t.setUint8(this.bufferLength++,128),n%zc>=56){for(a=this.bufferLength;a<zc;a++)t.setUint8(a,0);this.hashBuffer(),this.bufferLength=0}for(a=this.bufferLength;a<56;a++)t.setUint8(a,0);t.setUint32(56,i>>>0,!0),t.setUint32(60,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}for(o=new DataView(new ArrayBuffer(16)),a=0;a<4;a++)o.setUint32(4*a,this.state[a],!0);return[2,new Uint8Array(o.buffer,o.byteOffset,o.byteLength)]}))}))},e.prototype.hashBuffer=function(){var e=this.buffer,t=this.state,n=t[0],r=t[1],i=t[2],o=t[3];n=qc(n,r,i,o,e.getUint32(0,!0),7,3614090360),o=qc(o,n,r,i,e.getUint32(4,!0),12,3905402710),i=qc(i,o,n,r,e.getUint32(8,!0),17,606105819),r=qc(r,i,o,n,e.getUint32(12,!0),22,3250441966),n=qc(n,r,i,o,e.getUint32(16,!0),7,4118548399),o=qc(o,n,r,i,e.getUint32(20,!0),12,1200080426),i=qc(i,o,n,r,e.getUint32(24,!0),17,2821735955),r=qc(r,i,o,n,e.getUint32(28,!0),22,4249261313),n=qc(n,r,i,o,e.getUint32(32,!0),7,1770035416),o=qc(o,n,r,i,e.getUint32(36,!0),12,2336552879),i=qc(i,o,n,r,e.getUint32(40,!0),17,4294925233),r=qc(r,i,o,n,e.getUint32(44,!0),22,2304563134),n=qc(n,r,i,o,e.getUint32(48,!0),7,1804603682),o=qc(o,n,r,i,e.getUint32(52,!0),12,4254626195),i=qc(i,o,n,r,e.getUint32(56,!0),17,2792965006),n=Kc(n,r=qc(r,i,o,n,e.getUint32(60,!0),22,1236535329),i,o,e.getUint32(4,!0),5,4129170786),o=Kc(o,n,r,i,e.getUint32(24,!0),9,3225465664),i=Kc(i,o,n,r,e.getUint32(44,!0),14,643717713),r=Kc(r,i,o,n,e.getUint32(0,!0),20,3921069994),n=Kc(n,r,i,o,e.getUint32(20,!0),5,3593408605),o=Kc(o,n,r,i,e.getUint32(40,!0),9,38016083),i=Kc(i,o,n,r,e.getUint32(60,!0),14,3634488961),r=Kc(r,i,o,n,e.getUint32(16,!0),20,3889429448),n=Kc(n,r,i,o,e.getUint32(36,!0),5,568446438),o=Kc(o,n,r,i,e.getUint32(56,!0),9,3275163606),i=Kc(i,o,n,r,e.getUint32(12,!0),14,4107603335),r=Kc(r,i,o,n,e.getUint32(32,!0),20,1163531501),n=Kc(n,r,i,o,e.getUint32(52,!0),5,2850285829),o=Kc(o,n,r,i,e.getUint32(8,!0),9,4243563512),i=Kc(i,o,n,r,e.getUint32(28,!0),14,1735328473),n=Hc(n,r=Kc(r,i,o,n,e.getUint32(48,!0),20,2368359562),i,o,e.getUint32(20,!0),4,4294588738),o=Hc(o,n,r,i,e.getUint32(32,!0),11,2272392833),i=Hc(i,o,n,r,e.getUint32(44,!0),16,1839030562),r=Hc(r,i,o,n,e.getUint32(56,!0),23,4259657740),n=Hc(n,r,i,o,e.getUint32(4,!0),4,2763975236),o=Hc(o,n,r,i,e.getUint32(16,!0),11,1272893353),i=Hc(i,o,n,r,e.getUint32(28,!0),16,4139469664),r=Hc(r,i,o,n,e.getUint32(40,!0),23,3200236656),n=Hc(n,r,i,o,e.getUint32(52,!0),4,681279174),o=Hc(o,n,r,i,e.getUint32(0,!0),11,3936430074),i=Hc(i,o,n,r,e.getUint32(12,!0),16,3572445317),r=Hc(r,i,o,n,e.getUint32(24,!0),23,76029189),n=Hc(n,r,i,o,e.getUint32(36,!0),4,3654602809),o=Hc(o,n,r,i,e.getUint32(48,!0),11,3873151461),i=Hc(i,o,n,r,e.getUint32(60,!0),16,530742520),n=Vc(n,r=Hc(r,i,o,n,e.getUint32(8,!0),23,3299628645),i,o,e.getUint32(0,!0),6,4096336452),o=Vc(o,n,r,i,e.getUint32(28,!0),10,1126891415),i=Vc(i,o,n,r,e.getUint32(56,!0),15,2878612391),r=Vc(r,i,o,n,e.getUint32(20,!0),21,4237533241),n=Vc(n,r,i,o,e.getUint32(48,!0),6,1700485571),o=Vc(o,n,r,i,e.getUint32(12,!0),10,2399980690),i=Vc(i,o,n,r,e.getUint32(40,!0),15,4293915773),r=Vc(r,i,o,n,e.getUint32(4,!0),21,2240044497),n=Vc(n,r,i,o,e.getUint32(32,!0),6,1873313359),o=Vc(o,n,r,i,e.getUint32(60,!0),10,4264355552),i=Vc(i,o,n,r,e.getUint32(24,!0),15,2734768916),r=Vc(r,i,o,n,e.getUint32(52,!0),21,1309151649),n=Vc(n,r,i,o,e.getUint32(16,!0),6,4149444226),o=Vc(o,n,r,i,e.getUint32(44,!0),10,3174756917),i=Vc(i,o,n,r,e.getUint32(8,!0),15,718787259),r=Vc(r,i,o,n,e.getUint32(36,!0),21,3951481745),t[0]=n+t[0]&4294967295,t[1]=r+t[1]&4294967295,t[2]=i+t[2]&4294967295,t[3]=o+t[3]&4294967295},e}();function Fc(e,t,n,r,i,o){return((t=(t+e&4294967295)+(r+o&4294967295)&4294967295)<<i|t>>>32-i)+n&4294967295}function qc(e,t,n,r,i,o,a){return Fc(t&n|~t&r,e,t,i,o,a)}function Kc(e,t,n,r,i,o,a){return Fc(t&r|n&~r,e,t,i,o,a)}function Hc(e,t,n,r,i,o,a){return Fc(t^n^r,e,t,i,o,a)}function Vc(e,t,n,r,i,o,a){return Fc(n^(t|~r),e,t,i,o,a)}var $c,Gc={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Wc=function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return tu(void 0,void 0,void 0,(function(){var i;return nu(this,(function(o){switch(o.label){case 0:return[4,e.retryStrategy()];case 1:return(null==(i=o.sent())?void 0:i.mode)&&(n.userAgent=ou(ou([],iu(n.userAgent||[])),[["cfg/retry-mode",i.mode]])),[2,i.retry(t,r)]}}))}))}}}(e),Gc)}}},Yc=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Qc=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Xc=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Jc=[500,502,503,504],Zc=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||Qc.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},ed=new Uint8Array(16);function td(){if(!$c&&!($c="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $c(ed)}var nd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function rd(e){return"string"==typeof e&&nd.test(e)}for(var id,od=[],ad=0;ad<256;++ad)od.push((ad+256).toString(16).substr(1));function sd(e,t,n){var r=(e=e||{}).random||(e.rng||td)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(od[e[t+0]]+od[e[t+1]]+od[e[t+2]]+od[e[t+3]]+"-"+od[e[t+4]]+od[e[t+5]]+"-"+od[e[t+6]]+od[e[t+7]]+"-"+od[e[t+8]]+od[e[t+9]]+"-"+od[e[t+10]]+od[e[t+11]]+od[e[t+12]]+od[e[t+13]]+od[e[t+14]]+od[e[t+15]]).toLowerCase();if(!rd(n))throw TypeError("Stringified UUID is invalid");return n}(r)}!function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"}(id||(id={}));var ud=id.STANDARD,cd=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},dd=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return Yc.includes(e.name)}(e)||Zc(e)||function(e){var t;return Xc.includes(e.name)||Jc.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},ld=function(){function e(e,t){var n,r,i;this.maxAttemptsProvider=e,this.mode=id.STANDARD,this.retryDecider=null!==(n=null==t?void 0:t.retryDecider)&&void 0!==n?n:dd,this.delayDecider=null!==(r=null==t?void 0:t.delayDecider)&&void 0!==r?r:cd,this.retryQuota=null!==(i=null==t?void 0:t.retryQuota)&&void 0!==i?i:function(e,t){var n,r,i,o=e,a=null!==(n=null==t?void 0:t.noRetryIncrement)&&void 0!==n?n:1,s=null!==(r=null==t?void 0:t.retryCost)&&void 0!==r?r:5,u=null!==(i=null==t?void 0:t.timeoutRetryCost)&&void 0!==i?i:10,c=e,d=function(e){return"TimeoutError"===e.name?u:s},l=function(e){return d(e)<=c};return Object.freeze({hasRetryTokens:l,retrieveRetryTokens:function(e){if(!l(e))throw new Error("No retry token available");var t=d(e);return c-=t,t},releaseRetryTokens:function(e){c+=null!=e?e:a,c=Math.min(c,o)}})}(500)}return e.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return tu(this,void 0,void 0,(function(){var e;return nu(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=3,[3,3];case 3:return[2,e]}}))}))},e.prototype.retry=function(e,t,n){return tu(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return i=0,o=0,[4,this.getMaxAttempts()];case 1:a=l.sent(),s=t.request,Sc.isInstance(s)&&(s.headers["amz-sdk-invocation-id"]=sd()),u=function(){var u,d,l,f,p,h;return nu(this,(function(v){switch(v.label){case 0:return v.trys.push([0,4,,7]),Sc.isInstance(s)&&(s.headers["amz-sdk-request"]="attempt="+(i+1)+"; max="+a),(null==n?void 0:n.beforeRequest)?[4,n.beforeRequest()]:[3,2];case 1:v.sent(),v.label=2;case 2:return[4,e(t)];case 3:return u=v.sent(),d=u.response,l=u.output,(null==n?void 0:n.afterRequest)&&n.afterRequest(d),c.retryQuota.releaseRetryTokens(r),l.$metadata.attempts=i+1,l.$metadata.totalRetryDelay=o,[2,{value:{response:d,output:l}}];case 4:return f=v.sent(),p=fd(f),i++,c.shouldRetry(p,i,a)?(r=c.retryQuota.retrieveRetryTokens(p),h=c.delayDecider(Zc(p)?500:100,i),o+=h,[4,new Promise((function(e){return setTimeout(e,h)}))]):[3,6];case 5:return v.sent(),[2,"continue"];case 6:throw p.$metadata||(p.$metadata={}),p.$metadata.attempts=i,p.$metadata.totalRetryDelay=o,p;case 7:return[2]}}))},c=this,l.label=2;case 2:return[5,u()];case 3:return"object"==typeof(d=l.sent())?[2,d.value]:[3,2];case 4:return[2]}}))}))},e}(),fd=function(e){return e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):"string"==typeof e?new Error(e):new Error("AWS SDK error wrapper for "+e)},pd=function(){function e(e){var t,n,r,i,o;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=null!==(t=null==e?void 0:e.beta)&&void 0!==t?t:.7,this.minCapacity=null!==(n=null==e?void 0:e.minCapacity)&&void 0!==n?n:1,this.minFillRate=null!==(r=null==e?void 0:e.minFillRate)&&void 0!==r?r:.5,this.scaleConstant=null!==(i=null==e?void 0:e.scaleConstant)&&void 0!==i?i:.4,this.smooth=null!==(o=null==e?void 0:e.smooth)&&void 0!==o?o:.8;var a=this.getCurrentTimeInSeconds();this.lastThrottleTime=a,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}return e.prototype.getCurrentTimeInSeconds=function(){return Date.now()/1e3},e.prototype.getSendToken=function(){return tu(this,void 0,void 0,(function(){return nu(this,(function(e){return[2,this.acquireTokenBucket(1)]}))}))},e.prototype.acquireTokenBucket=function(e){return tu(this,void 0,void 0,(function(){var t;return nu(this,(function(n){switch(n.label){case 0:return this.enabled?(this.refillTokenBucket(),e>this.currentCapacity?(t=(e-this.currentCapacity)/this.fillRate*1e3,[4,new Promise((function(e){return setTimeout(e,t)}))]):[3,2]):[2];case 1:n.sent(),n.label=2;case 2:return this.currentCapacity=this.currentCapacity-e,[2]}}))}))},e.prototype.refillTokenBucket=function(){var e=this.getCurrentTimeInSeconds();if(this.lastTimestamp){var t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}else this.lastTimestamp=e},e.prototype.updateClientSendingRate=function(e){var t;if(this.updateMeasuredRate(),Zc(e)){var n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());var r=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(r)},e.prototype.calculateTimeWindow=function(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))},e.prototype.cubicThrottle=function(e){return this.getPrecise(e*this.beta)},e.prototype.cubicSuccess=function(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)},e.prototype.enableTokenBucket=function(){this.enabled=!0},e.prototype.updateTokenBucketRate=function(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)},e.prototype.updateMeasuredRate=function(){var e=this.getCurrentTimeInSeconds(),t=Math.floor(2*e)/2;if(this.requestCount++,t>this.lastTxRateBucket){var n=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}},e.prototype.getPrecise=function(e){return parseFloat(e.toFixed(8))},e}(),hd=function(e){function t(t,n){var r=this,i=null!=n?n:{},o=i.rateLimiter,a=eu(i,["rateLimiter"]);return(r=e.call(this,t,a)||this).rateLimiter=null!=o?o:new pd,r.mode=id.ADAPTIVE,r}return Js(t,e),t.prototype.retry=function(t,n){return tu(this,void 0,void 0,(function(){var r=this;return nu(this,(function(i){return[2,e.prototype.retry.call(this,t,n,{beforeRequest:function(){return tu(r,void 0,void 0,(function(){return nu(this,(function(e){return[2,this.rateLimiter.getSendToken()]}))}))},afterRequest:function(e){r.rateLimiter.updateClientSendingRate(e)}})]}))}))},t}(ld),vd=function(e){if(void 0===e&&(e=3),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};function md(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2)}return t}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}var gd=ti(ri((function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,u=e.map([t,n],(function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===s)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var s=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=o.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){}var t,n,r;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,r=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}();t.default=s,e.exports=t.default},91:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=u(n(92)),i=u(n(93)),o=u(n(94)),a=u(n(95)),s=u(n(17));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach((function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"==typeof a&&(n[t]=a,r+=1)})),r>0){var a=Object.keys(n),u=s.default.find(a,(function(e){return t.isOS(e)}));if(u){var c=this.satisfies(n[u]);if(void 0!==c)return c}var d=s.default.find(a,(function(e){return t.isPlatform(e)}));if(d){var l=this.satisfies(n[d]);if(void 0!==l)return l}}if(o>0){var f=Object.keys(i),p=s.default.find(f,(function(e){return t.isBrowser(e,!0)}));if(void 0!==p)return this.compareVersion(i[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=c,e.exports=t.default},92:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=a,e.exports=t.default}})}))),yd=function(e){var t=e.serviceId,n=e.clientVersion;return function(){return tu(void 0,void 0,void 0,(function(){var e,r,i,o,a,s,u,c,d;return nu(this,(function(l){return e="undefined"!=typeof window&&(null===(i=null===window||void 0===window?void 0:window.navigator)||void 0===i?void 0:i.userAgent)?gd.parse(window.navigator.userAgent):void 0,r=[["aws-sdk-js",n],["os/"+((null===(o=null==e?void 0:e.os)||void 0===o?void 0:o.name)||"other"),null===(a=null==e?void 0:e.os)||void 0===a?void 0:a.version],["lang/js"],["md/browser",(null!==(u=null===(s=null==e?void 0:e.browser)||void 0===s?void 0:s.name)&&void 0!==u?u:"unknown")+"_"+(null!==(d=null===(c=null==e?void 0:e.browser)||void 0===c?void 0:c.version)&&void 0!==d?d:"unknown")]],t&&r.push(["api/"+t,n]),[2,r]}))}))}},wd="s3.{region}.amazonaws.com",bd=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Sd=new Set(["cn-north-1","cn-northwest-1"]),Ed=new Set(["us-iso-east-1"]),kd=new Set(["us-isob-east-1"]),Cd=new Set(["us-gov-east-1","us-gov-west-1"]),xd=function(e,t){var n=void 0;switch(e){case"accesspoint-af-south-1":n={hostname:"s3-accesspoint.af-south-1.amazonaws.com",partition:"aws"};break;case"accesspoint-ap-east-1":n={hostname:"s3-accesspoint.ap-east-1.amazonaws.com",partition:"aws"};break;case"accesspoint-ap-northeast-1":n={hostname:"s3-accesspoint.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"accesspoint-ap-northeast-2":n={hostname:"s3-accesspoint.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"accesspoint-ap-northeast-3":n={hostname:"s3-accesspoint.ap-northeast-3.amazonaws.com",partition:"aws"};break;case"accesspoint-ap-south-1":n={hostname:"s3-accesspoint.ap-south-1.amazonaws.com",partition:"aws"};break;case"accesspoint-ap-southeast-1":n={hostname:"s3-accesspoint.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"accesspoint-ap-southeast-2":n={hostname:"s3-accesspoint.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"accesspoint-ca-central-1":n={hostname:"s3-accesspoint.ca-central-1.amazonaws.com",partition:"aws"};break;case"accesspoint-cn-north-1":n={hostname:"s3-accesspoint.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"accesspoint-cn-northwest-1":n={hostname:"s3-accesspoint.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"accesspoint-eu-central-1":n={hostname:"s3-accesspoint.eu-central-1.amazonaws.com",partition:"aws"};break;case"accesspoint-eu-north-1":n={hostname:"s3-accesspoint.eu-north-1.amazonaws.com",partition:"aws"};break;case"accesspoint-eu-south-1":n={hostname:"s3-accesspoint.eu-south-1.amazonaws.com",partition:"aws"};break;case"accesspoint-eu-west-1":n={hostname:"s3-accesspoint.eu-west-1.amazonaws.com",partition:"aws"};break;case"accesspoint-eu-west-2":n={hostname:"s3-accesspoint.eu-west-2.amazonaws.com",partition:"aws"};break;case"accesspoint-eu-west-3":n={hostname:"s3-accesspoint.eu-west-3.amazonaws.com",partition:"aws"};break;case"accesspoint-me-south-1":n={hostname:"s3-accesspoint.me-south-1.amazonaws.com",partition:"aws"};break;case"accesspoint-sa-east-1":n={hostname:"s3-accesspoint.sa-east-1.amazonaws.com",partition:"aws"};break;case"accesspoint-us-east-1":n={hostname:"s3-accesspoint.us-east-1.amazonaws.com",partition:"aws"};break;case"accesspoint-us-east-2":n={hostname:"s3-accesspoint.us-east-2.amazonaws.com",partition:"aws"};break;case"accesspoint-us-gov-east-1":n={hostname:"s3-accesspoint.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"accesspoint-us-gov-west-1":n={hostname:"s3-accesspoint.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"accesspoint-us-west-1":n={hostname:"s3-accesspoint.us-west-1.amazonaws.com",partition:"aws"};break;case"accesspoint-us-west-2":n={hostname:"s3-accesspoint.us-west-2.amazonaws.com",partition:"aws"};break;case"af-south-1":n={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-northeast-3":n={hostname:"s3.ap-northeast-3.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":n={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-accesspoint-ca-central-1":n={hostname:"s3-accesspoint-fips.ca-central-1.amazonaws.com",partition:"aws"};break;case"fips-accesspoint-us-east-1":n={hostname:"s3-accesspoint-fips.us-east-1.amazonaws.com",partition:"aws"};break;case"fips-accesspoint-us-east-2":n={hostname:"s3-accesspoint-fips.us-east-2.amazonaws.com",partition:"aws"};break;case"fips-accesspoint-us-gov-east-1":n={hostname:"s3-accesspoint-fips.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"fips-accesspoint-us-gov-west-1":n={hostname:"s3-accesspoint-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"fips-accesspoint-us-west-1":n={hostname:"s3-accesspoint-fips.us-west-1.amazonaws.com",partition:"aws"};break;case"fips-accesspoint-us-west-2":n={hostname:"s3-accesspoint-fips.us-west-2.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:bd.has(e)&&(n={hostname:wd.replace("{region}",e),partition:"aws"}),Sd.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Ed.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),kd.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Cd.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:wd.replace("{region}",e),partition:"aws"})}return Promise.resolve(Zs({signingService:"s3"},n))};var Td=function(e){var t,n=new URL(e),r=n.hostname,i=n.pathname,o=n.port,a=n.protocol,s=n.search;return s&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=ru(e.split("&")),o=i.next();!o.done;o=i.next()){var a=iu(o.value.split("="),2),s=a[0],u=a[1],c=void 0===u?null:u;s=decodeURIComponent(s),c&&(c=decodeURIComponent(c)),s in r?Array.isArray(r[s])?r[s].push(c):r[s]=[r[s],c]:r[s]=c}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(s)),{hostname:r,port:o?parseInt(o):void 0,protocol:a,path:i,query:t}},Nd=function(e){var t,n,r,i,o,a,s,u,c,d,l,f,p,h,v,m;void 0===e&&(e={});var g,y=function(e){var t,n,r,i,o,a,s;return void 0===e&&(e={}),{apiVersion:"2006-03-01",disableHostPrefix:null!==(t=e.disableHostPrefix)&&void 0!==t&&t,logger:null!==(n=e.logger)&&void 0!==n?n:{},regionInfoProvider:null!==(r=e.regionInfoProvider)&&void 0!==r?r:xd,serviceId:null!==(i=e.serviceId)&&void 0!==i?i:"S3",signingEscapePath:null!==(o=e.signingEscapePath)&&void 0!==o&&o,urlParser:null!==(a=e.urlParser)&&void 0!==a?a:Td,useArnRegion:null!==(s=e.useArnRegion)&&void 0!==s&&s}}(e);return Zs(Zs(Zs({},y),e),{runtime:"browser",base64Decoder:null!==(t=e.base64Decoder)&&void 0!==t?t:Ic,base64Encoder:null!==(n=e.base64Encoder)&&void 0!==n?n:Mc,bodyLengthChecker:null!==(r=e.bodyLengthChecker)&&void 0!==r?r:md,credentialDefaultProvider:null!==(i=e.credentialDefaultProvider)&&void 0!==i?i:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(o=e.defaultUserAgentProvider)&&void 0!==o?o:yd({serviceId:y.serviceId,clientVersion:cu}),eventStreamSerdeProvider:null!==(a=e.eventStreamSerdeProvider)&&void 0!==a?a:wc,maxAttempts:null!==(s=e.maxAttempts)&&void 0!==s?s:3,md5:null!==(u=e.md5)&&void 0!==u?u:Uc,region:null!==(c=e.region)&&void 0!==c?c:(g="Region is missing",function(){return Promise.reject(g)}),requestHandler:null!==(d=e.requestHandler)&&void 0!==d?d:new Cc,retryModeProvider:null!==(l=e.retryModeProvider)&&void 0!==l?l:function(){return Promise.resolve(ud)},sha256:null!==(f=e.sha256)&&void 0!==f?f:Wu.Sha256,streamCollector:null!==(p=e.streamCollector)&&void 0!==p?p:Rc,streamHasher:null!==(h=e.streamHasher)&&void 0!==h?h:Dc,utf8Decoder:null!==(v=e.utf8Decoder)&&void 0!==v?v:Su,utf8Encoder:null!==(m=e.utf8Encoder)&&void 0!==m?m:Eu})},Od=function(e){var t=e.endpoint,n=e.urlParser;if("string"==typeof t){var r=Promise.resolve(n(t));return function(){return r}}if("object"==typeof t){var i=Promise.resolve(t);return function(){return i}}return t},Ad=function(e){return tu(void 0,void 0,void 0,(function(){var t,n,r,i,o;return nu(this,(function(a){switch(a.label){case 0:return t=e.tls,n=void 0===t||t,[4,e.region()];case 1:if(r=a.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(r)];case 2:if(!(i=(null!==(o=a.sent())&&void 0!==o?o:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+i)]}}))}))},Pd=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},_d=function(e){return"string"==typeof e&&0===e.indexOf("arn:")&&e.split(":").length>=6},Id=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Md=/(\d+\.){3}\d+/,Rd=/\.\./,Ld=/\./,Bd=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,Dd=/^s3(-external-1)?\.amazonaws\.com$/,zd="amazonaws.com",jd=function(e){return qd(e)?e.replace(/fips-|-fips/,""):e},Ud=function(e){var t=e.match(Bd);return[t[2],e.replace(new RegExp("^"+t[0]),"")]},Fd=function(e,t){if(""===e)throw new Error("ARN region is empty");if(qd(t.clientRegion)){if(!t.allowFipsRegion)throw new Error("FIPS region is not supported");if(!Kd(e,t.clientRegion))throw new Error("Client FIPS region "+t.clientRegion+" doesn't match region "+e+" in ARN")}if(!t.useArnRegion&&!Kd(e,t.clientRegion)&&!Kd(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion)},qd=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},Kd=function(e,t){return e===t||jd(e)===t||e===jd(t)},Hd=function(e,t){if(void 0===t&&(t={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||(null==t?void 0:t.tlsCompatible)&&Ld.test(e))throw new Error("Invalid DNS label "+e)},Vd=function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")},$d=function(e){var t=e.isCustomEndpoint;e.baseHostname;var n=e.dualstackEndpoint,r=e.accelerateEndpoint;if(t){if(n)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(r)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return function(e){return"string"==typeof e.bucketName}(e)?Wd(Zs(Zs({},e),{isCustomEndpoint:t})):Gd(Zs(Zs({},e),{isCustomEndpoint:t}))},Gd=function(e){var t,n=e.isCustomEndpoint,r=e.baseHostname,i=e.clientRegion,o=n?r:(t=r,Dd.test(t)?[t.replace(".amazonaws.com",""),zd]:Ud(t))[1],a=e.pathStyleEndpoint,s=e.dualstackEndpoint,u=void 0!==s&&s,c=e.accelerateEndpoint,d=void 0!==c&&c,l=e.tlsCompatible,f=void 0===l||l,p=e.useArnRegion,h=e.bucketName,v=e.clientPartition,m=void 0===v?"aws":v,g=e.clientSigningRegion,y=void 0===g?i:g;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:a,accelerateEndpoint:d,tlsCompatible:f});var w=h.service,b=h.partition,S=h.accountId,E=h.region,k=h.resource;!function(e){if("s3"!==e&&"s3-outposts"!==e&&"s3-object-lambda"!==e)throw new Error("Expect 's3' or 's3-outposts' or 's3-object-lambda' in ARN service component")}(w),function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')}(b,{clientPartition:m}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(S),function(e){if(["s3-external-1","aws-global"].includes(jd(e)))throw new Error("Client region "+e+" is not regional")}(i);var C=function(e){var t=e.includes(":")?":":"/",n=iu(e.split(t)),r=n[0],i=n.slice(1);if("accesspoint"===r){if(1!==i.length||""===i[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:i[0]}}if("outpost"===r){if(!i[0]||"accesspoint"!==i[1]||!i[2]||3!==i.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");var o=iu(i,3),a=o[0];return o[1],{outpostId:a,accesspointName:o[2]}}throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'")}(k),x=C.accesspointName,T=C.outpostId,N=x+"-"+S;Hd(N,{tlsCompatible:f});var O=p?E:i,A=p?E:y;return"s3-object-lambda"===w?(Fd(E,{useArnRegion:p,clientRegion:i,clientSigningRegion:y,allowFipsRegion:!0}),Vd(u),{bucketEndpoint:!0,hostname:N+"."+w+(qd(i)?"-fips":"")+"."+jd(O)+"."+o,signingRegion:A,signingService:w}):T?(Fd(E,{useArnRegion:p,clientRegion:i,clientSigningRegion:y}),function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(w),Hd(T,{tlsCompatible:f}),Vd(u),function(e){if(qd(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(O),{bucketEndpoint:!0,hostname:N+"."+T+(n?"":".s3-outposts."+O)+"."+o,signingRegion:A,signingService:"s3-outposts"}):(Fd(E,{useArnRegion:p,clientRegion:i,clientSigningRegion:y,allowFipsRegion:!0}),function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(w),{bucketEndpoint:!0,hostname:""+N+(n?"":".s3-accesspoint"+(qd(i)?"-fips":"")+(u?".dualstack":"")+"."+jd(O))+"."+o,signingRegion:A})},Wd=function(e){var t,n=e.accelerateEndpoint,r=void 0!==n&&n,i=e.clientRegion,o=e.baseHostname,a=e.bucketName,s=e.dualstackEndpoint,u=void 0!==s&&s,c=e.pathStyleEndpoint,d=void 0!==c&&c,l=e.tlsCompatible,f=void 0===l||l,p=e.isCustomEndpoint,h=iu(void 0!==p&&p?[i,o]:(t=o,Dd.test(t)?["us-east-1",zd]:Ud(t)),2),v=h[0],m=h[1];return d||!function(e){return Id.test(e)&&!Md.test(e)&&!Rd.test(e)}(a)||f&&Ld.test(a)?{bucketEndpoint:!1,hostname:u?"s3.dualstack."+v+"."+m:o}:(r?o="s3-accelerate"+(u?".dualstack":"")+"."+m:u&&(o="s3.dualstack."+v+"."+m),{bucketEndpoint:!0,hostname:a+"."+o})},Yd=function(e){return function(t,n){return function(r){return tu(void 0,void 0,void 0,(function(){var i,o,a,s,u,c,d,l,f,p,h,v,m,g,y,w,b,S;return nu(this,(function(E){switch(E.label){case 0:return i=r.input.Bucket,o=e.bucketEndpoint,a=r.request,Sc.isInstance(a)?e.bucketEndpoint?(a.hostname=i,[3,7]):[3,1]:[3,8];case 1:return _d(i)?(s=function(e){var t=e.split(":");if(t.length<6||"arn"!==t[0])throw new Error("Malformed ARN");var n=iu(t);return{partition:n[1],service:n[2],region:n[3],accountId:n[4],resource:n.slice(5).join(":")}}(i),u=jd,[4,e.region()]):[3,5];case 2:return g=u.apply(void 0,[E.sent()]),[4,e.regionInfoProvider(g)];case 3:return c=E.sent()||{},d=c.partition,l=c.signingRegion,f=void 0===l?g:l,[4,e.useArnRegion()];case 4:return p=E.sent(),h=$d({bucketName:s,baseHostname:a.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===a.protocol,useArnRegion:p,clientPartition:d,clientSigningRegion:f,clientRegion:g,isCustomEndpoint:e.isCustomEndpoint}),b=h.hostname,S=h.bucketEndpoint,v=h.signingRegion,m=h.signingService,v&&v!==f&&(n.signing_region=v),m&&"s3"!==m&&(n.signing_service=m),a.hostname=b,o=S,[3,7];case 5:return y=jd,[4,e.region()];case 6:g=y.apply(void 0,[E.sent()]),w=$d({bucketName:i,clientRegion:g,baseHostname:a.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===a.protocol,isCustomEndpoint:e.isCustomEndpoint}),b=w.hostname,S=w.bucketEndpoint,a.hostname=b,o=S,E.label=7;case 7:o&&(a.path=a.path.replace(/^(\/)?[^\/]+/,""),""===a.path&&(a.path="/")),E.label=8;case 8:return[2,t(Zs(Zs({},r),{request:a}))]}}))}))}}},Qd={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},Xd=function(e){return{applyToStack:function(t){t.addRelativeTo(Yd(e),Qd)}}};var Jd="content-length";var Zd={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},el=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return tu(t,void 0,void 0,(function(){var t,i,o,a,s;return nu(this,(function(u){return t=r.request,Sc.isInstance(t)&&(i=t.body,o=t.headers,i&&-1===Object.keys(o).map((function(e){return e.toLowerCase()})).indexOf(Jd)&&void 0!==(a=e(i))&&(t.headers=Zs(Zs({},t.headers),((s={})["content-length"]=String(a),s)))),[2,n(Zs(Zs({},r),{request:t}))]}))}))}}}(e.bodyLengthChecker),Zd)}}};var tl={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},nl=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return tu(t,void 0,void 0,(function(){var t;return nu(this,(function(i){return t=r.request,Sc.isInstance(t)&&t.body&&"node"===e.runtime&&(t.headers=Zs(Zs({},t.headers),{Expect:"100-continue"})),[2,n(Zs(Zs({},r),{request:t}))]}))}))}}}(e),tl)}}};var rl={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},il=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return tu(void 0,void 0,void 0,(function(){var r,i;return nu(this,(function(o){return Sc.isInstance(n.request)?(r=n.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]}))}))}}}(e),rl)}}},ol={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},al=function(e){return{applyToStack:function(e){e.add((function(e,t){return function(n){return tu(void 0,void 0,void 0,(function(){var r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return r=t.clientName,i=t.commandName,o=t.inputFilterSensitiveLog,a=t.logger,s=t.outputFilterSensitiveLog,[4,e(n)];case 1:return u=f.sent(),a?("function"==typeof a.info&&(c=u.output,d=c.$metadata,l=eu(c,["$metadata"]),a.info({clientName:r,commandName:i,input:o(n.input),output:s(l),metadata:d})),[2,u]):[2,u]}}))}))}}),ol)}}};var sl={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},ul=function(e){return{applyToStack:function(e){e.add(function(){var e=this;return function(t){return function(n){return tu(e,void 0,void 0,(function(){var e,r;return nu(this,(function(i){if("string"==typeof(e=n.input.Bucket)&&!_d(e)&&e.indexOf("/")>=0)throw(r=new Error("Bucket name shouldn't contain '/', received '"+e+"'")).name="InvalidBucketName",r;return[2,t(Zs({},n))]}))}))}}}(),sl)}}},cl={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},dl=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return tu(void 0,void 0,void 0,(function(){var r,i;return nu(this,(function(o){switch(o.label){case 0:return r=n.request,!Sc.isInstance(r)||e.isCustomEndpoint?[2,t(Zs({},n))]:"s3.amazonaws.com"!==r.hostname?[3,1]:(r.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return i="aws-global",[4,e.region()];case 2:i===o.sent()&&(r.hostname="s3.amazonaws.com"),o.label=3;case 3:return[2,t(Zs({},n))]}}))}))}}}(e),cl)}}},ll=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},fl=function(e,t){return ll(e,t).then((function(e){return t.utf8Encoder(e)}))},pl={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},hl=function(e){return{applyToStack:function(t){t.addRelativeTo(function(e){return function(t){return function(n){return tu(void 0,void 0,void 0,(function(){var r,i,o,a,s,u,c;return nu(this,(function(d){switch(d.label){case 0:return[4,t(n)];case 1:return r=d.sent(),i=r.response,bc.isInstance(i)?(o=i.statusCode,a=i.body,o<200&&o>=300?[2,r]:[4,ll(a,e)]):[2,r];case 2:return s=d.sent(),[4,fl(s,e)];case 3:if(u=d.sent(),0===s.length)throw(c=new Error("S3 aborted request")).name="InternalError",c;return u&&u.match("<Error>")&&(i.statusCode=400),i.body=s,[2,r]}}))}))}}}(e),pl)}}};!function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t)||this;return r.tryNextLink=n,r}Js(t,e),t.from=function(e,t){return void 0===t&&(t=!0),Object.defineProperty(e,"tryNextLink",{value:t,configurable:!1,enumerable:!1,writable:!1}),e}}(Error),function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t)||this;return r.tryNextLink=n,r.name="CredentialsProviderError",r}Js(t,e),t.from=function(e,t){return void 0===t&&(t=!0),Object.defineProperty(e,"tryNextLink",{value:t,configurable:!1,enumerable:!1,writable:!1}),e}}(Error);var vl="X-Amz-Date",ml="X-Amz-Signature",gl="X-Amz-Security-Token",yl="authorization",wl=vl.toLowerCase(),bl=[yl,wl,"date"],Sl=ml.toLowerCase(),El="x-amz-content-sha256",kl=gl.toLowerCase(),Cl={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},xl=/^proxy-/,Tl=/^sec-/,Nl="AWS4-HMAC-SHA256",Ol="AWS4-HMAC-SHA256-PAYLOAD",Al="aws4_request",Pl={},_l=[];function Il(e,t,n){return e+"/"+t+"/"+n+"/"+Al}function Ml(e,t,n){var r=new e(t);return r.update(n),r.digest()}function Rl(e,t,n){var r,i,o=e.headers,a={};try{for(var s=ru(Object.keys(o).sort()),u=s.next();!u.done;u=s.next()){var c=u.value,d=c.toLowerCase();(d in Cl||(null==t?void 0:t.has(d))||xl.test(d)||Tl.test(d))&&(!n||n&&!n.has(d))||(a[d]=o[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a}var Ll=function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)};function Bl(e,t){var n=e.headers,r=e.body;return tu(this,void 0,void 0,(function(){var e,i,o,a,s,u,c;return nu(this,(function(d){switch(d.label){case 0:try{for(e=ru(Object.keys(n)),i=e.next();!i.done;i=e.next())if((o=i.value).toLowerCase()===El)return[2,n[o]]}catch(e){u={error:e}}finally{try{i&&!i.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||Ll(r)?((a=new t).update(r),s=ec,[4,a.digest()]):[3,3];case 2:return[2,s.apply(void 0,[d.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}}))}))}function Dl(e){var t=e.headers,n=e.query,r=eu(e,["headers","query"]);return Zs(Zs({},r),{headers:Zs({},t),query:n?zl(n):void 0})}function zl(e){return Object.keys(e).reduce((function(t,n){var r,i=e[n];return Zs(Zs({},t),((r={})[n]=Array.isArray(i)?ou([],iu(i)):i,r))}),{})}function jl(e){var t,n;e="function"==typeof e.clone?e.clone():Dl(e);try{for(var r=ru(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;bl.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function Ul(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"==typeof e)return Number(e)?new Date(1e3*Number(e)):new Date(e);return e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var Fl=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,a=e.uriEscapePath,s=void 0===a||a;this.service=i,this.sha256=o,this.uriEscapePath=s,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=Hl(r),this.credentialProvider=Vl(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),tu(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p,h,v,m,g,y,w,b,S,E,k,C,x;return nu(this,(function(T){switch(T.label){case 0:return n=t.signingDate,r=void 0===n?new Date:n,i=t.expiresIn,o=void 0===i?3600:i,a=t.unsignableHeaders,s=t.unhoistableHeaders,u=t.signableHeaders,c=t.signingRegion,d=t.signingService,[4,this.credentialProvider()];case 1:return l=T.sent(),null==c?[3,2]:(p=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:p=T.sent(),T.label=4;case 4:return f=p,h=ql(r),v=h.longDate,m=h.shortDate,o>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(g=Il(m,f,null!=d?d:this.service),y=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():Dl(e),a=o.headers,s=o.query,u=void 0===s?{}:s;try{for(var c=ru(Object.keys(a)),d=c.next();!d.done;d=c.next()){var l=d.value,f=l.toLowerCase();"x-amz-"!==f.substr(0,6)||(null===(i=t.unhoistableHeaders)||void 0===i?void 0:i.has(f))||(u[l]=a[l],delete a[l])}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return Zs(Zs({},e),{headers:a,query:u})}(jl(e),{unhoistableHeaders:s}),l.sessionToken&&(y.query[gl]=l.sessionToken),y.query["X-Amz-Algorithm"]=Nl,y.query["X-Amz-Credential"]=l.accessKeyId+"/"+g,y.query["X-Amz-Date"]=v,y.query["X-Amz-Expires"]=o.toString(10),w=Rl(y,a,u),y.query["X-Amz-SignedHeaders"]=Kl(w),b=y.query,S=ml,E=this.getSignature,k=[v,g,this.getSigningKey(l,f,m,d)],C=this.createCanonicalRequest,x=[y,w],[4,Bl(e,this.sha256)]);case 5:return[4,E.apply(this,k.concat([C.apply(this,x.concat([T.sent()]))]))];case 6:return b[S]=T.sent(),[2,y]}}))}))},e.prototype.sign=function(e,t){return tu(this,void 0,void 0,(function(){return nu(this,(function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,i=t.signingDate,o=void 0===i?new Date:i,a=t.priorSignature,s=t.signingRegion,u=t.signingService;return tu(this,void 0,void 0,(function(){var e,t,i,c,d,l,f,p,h,v,m;return nu(this,(function(g){switch(g.label){case 0:return null==s?[3,1]:(t=s,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=g.sent(),g.label=3;case 3:return e=t,i=ql(o),c=i.shortDate,d=i.longDate,l=Il(c,e,null!=u?u:this.service),[4,Bl({headers:{},body:r},this.sha256)];case 4:return f=g.sent(),(p=new this.sha256).update(n),v=ec,[4,p.digest()];case 5:return h=v.apply(void 0,[g.sent()]),m=[Ol,d,l,a,h,f].join("\n"),[2,this.signString(m,{signingDate:o,signingRegion:e,signingService:u})]}}))}))},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signingRegion,a=n.signingService;return tu(this,void 0,void 0,(function(){var t,n,r,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,this.credentialProvider()];case 1:return t=f.sent(),null==o?[3,2]:(r=o,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=f.sent(),f.label=4;case 4:return n=r,s=ql(i).shortDate,d=(c=this.sha256).bind,[4,this.getSigningKey(t,n,s,a)];case 5:return(u=new(d.apply(c,[void 0,f.sent()]))).update(e),l=ec,[4,u.digest()];case 6:return[2,l.apply(void 0,[f.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signableHeaders,a=n.unsignableHeaders,s=n.signingRegion,u=n.signingService;return tu(this,void 0,void 0,(function(){var t,n,r,c,d,l,f,p,h,v,m;return nu(this,(function(g){switch(g.label){case 0:return[4,this.credentialProvider()];case 1:return t=g.sent(),null==s?[3,2]:(r=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=g.sent(),g.label=4;case 4:return n=r,c=jl(e),d=ql(i),l=d.longDate,f=d.shortDate,p=Il(f,n,null!=u?u:this.service),c.headers[wl]=l,t.sessionToken&&(c.headers[kl]=t.sessionToken),[4,Bl(c,this.sha256)];case 5:return h=g.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=ru(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}(El,c.headers)&&this.applyChecksum&&(c.headers[El]=h),v=Rl(c,a,o),[4,this.getSignature(l,p,this.getSigningKey(t,n,f,u),this.createCanonicalRequest(c,v,h))];case 6:return m=g.sent(),c.headers[yl]="AWS4-HMAC-SHA256 Credential="+t.accessKeyId+"/"+p+", SignedHeaders="+Kl(v)+", Signature="+m,[2,c]}}))}))},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],a={},s=function(e){if(e.toLowerCase()===Sl)return"continue";o.push(e);var t=i[e];"string"==typeof t?a[e]=Ec(e)+"="+Ec(t):Array.isArray(t)&&(a[e]=t.slice(0).sort().reduce((function(t,n){return t.concat([Ec(e)+"="+Ec(n)])}),[]).join("&"))};try{for(var u=ru(Object.keys(i).sort()),c=u.next();!c.done;c=u.next())s(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o.map((function(e){return a[e]})).filter((function(e){return e})).join("&")}(e)+"\n"+r.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+r.join(";")+"\n"+n},e.prototype.createStringToSign=function(e,t,n){return tu(this,void 0,void 0,(function(){var r,i;return nu(this,(function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+ec(i)]}}))}))},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,n,r){return tu(this,void 0,void 0,(function(){var i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return i=c.sent(),s=(a=this.sha256).bind,[4,n];case 2:return(o=new(s.apply(a,[void 0,c.sent()]))).update(i),u=ec,[4,o.digest()];case 3:return[2,u.apply(void 0,[c.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,i){return tu(void 0,void 0,void 0,(function(){var o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,Ml(e,t.secretAccessKey,t.accessKeyId)];case 1:if(o=h.sent(),(a=n+":"+r+":"+i+":"+ec(o)+":"+t.sessionToken)in Pl)return[2,Pl[a]];for(_l.push(a);_l.length>50;)delete Pl[_l.shift()];s="AWS4"+t.secretAccessKey,h.label=2;case 2:h.trys.push([2,7,8,9]),u=ru([n,r,i,Al]),c=u.next(),h.label=3;case 3:return c.done?[3,6]:(d=c.value,[4,Ml(e,s,d)]);case 4:s=h.sent(),h.label=5;case 5:return c=u.next(),[3,3];case 6:return[3,9];case 7:return l=h.sent(),f={error:l},[3,9];case 8:try{c&&!c.done&&(p=u.return)&&p.call(u)}finally{if(f)throw f.error}return[7];case 9:return[2,Pl[a]=s]}}))}))}(this.sha256,e,n,t,r||this.service)},e}(),ql=function(e){var t=Ul(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},Kl=function(e){return Object.keys(e).sort().join(";")},Hl=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},Vl=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},$l=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},Gl=function(e){return"function"==typeof e?function(e,t,n){var r,i;if(void 0===t)return function(){return tu(void 0,void 0,void 0,(function(){return nu(this,(function(t){switch(t.label){case 0:return i?[3,2]:[4,e()];case 1:r=t.sent(),i=!0,t.label=2;case 2:return[2,r]}}))}))};var o=!1;return function(){return tu(void 0,void 0,void 0,(function(){return nu(this,(function(a){switch(a.label){case 0:return i?[3,2]:[4,e()];case 1:r=a.sent(),i=!0,a.label=2;case 2:return o?[2,r]:n&&!n(r)?(o=!0,[2,r]):t(r)?[4,e()]:[3,4];case 3:return[2,r=a.sent()];case 4:return[2,r]}}))}))}}(e,(function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5}),(function(e){return void 0!==e.expiration})):$l(e)},Wl=function(e){return new Date(Date.now()+e)},Yl=function(e,t){var n=Date.parse(e);return function(e,t){return Math.abs(Wl(t).getTime()-e)>=3e5}(n,t)?n-Date.now():t},Ql={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Xl=function(e){return{applyToStack:function(t){t.addRelativeTo(function(e){return function(t,n){return function(r){return tu(this,void 0,void 0,(function(){var i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return Sc.isInstance(r.request)?[4,e.signer()]:[2,t(r)];case 1:return i=l.sent(),a=t,s=[Zs({},r)],d={},[4,i.sign(r.request,{signingDate:Wl(e.systemClockOffset),signingRegion:n.signing_region,signingService:n.signing_service})];case 2:return[4,a.apply(void 0,[Zs.apply(void 0,s.concat([(d.request=l.sent(),d)]))]).catch((function(t){throw t.ServerTime&&(e.systemClockOffset=Yl(t.ServerTime,e.systemClockOffset)),t}))];case 3:return o=l.sent(),u=o.response.headers,(c=u&&(u.date||u.Date))&&(e.systemClockOffset=Yl(c,e.systemClockOffset)),[2,o]}}))}))}}}(e),Ql)}}};var Jl="user-agent",Zl="x-amz-user-agent",ef=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,tf=function(e){var t=iu(e,2),n=t[0],r=t[1],i=n.indexOf("/"),o=n.substring(0,i),a=n.substring(i+1);return"api"===o&&(a=a.toLowerCase()),[o,a,r].filter((function(e){return e&&e.length>0})).map((function(e){return null==e?void 0:e.replace(ef,"_")})).join("/")},nf={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},rf=function(e){return{applyToStack:function(t){var n;t.add((n=e,function(e,t){return function(r){return tu(void 0,void 0,void 0,(function(){var i,o,a,s,u,c,d,l,f;return nu(this,(function(p){switch(p.label){case 0:return i=r.request,Sc.isInstance(i)?(o=i.headers,a=(null===(l=null==t?void 0:t.userAgent)||void 0===l?void 0:l.map(tf))||[],[4,n.defaultUserAgentProvider()]):[2,e(r)];case 1:return s=p.sent().map(tf),u=(null===(f=null==n?void 0:n.customUserAgent)||void 0===f?void 0:f.map(tf))||[],c=ou(ou(ou([],iu(s)),iu(a)),iu(u)).join(" "),d=ou(ou([],iu(s.filter((function(e){return e.startsWith("aws-sdk-")})))),iu(u)).join(" "),"browser"!==n.runtime?(d&&(o[Zl]=o[Zl]?o[Jl]+" "+d:d),o[Jl]=c):o[Zl]=c,[2,e(Zs(Zs({},r),{request:i}))]}}))}))}}),nf)}}},of=function(){var e=[],t=[],n=new Set,r=function(n){return e.forEach((function(e){n.add(e.middleware,Zs({},e))})),t.forEach((function(e){n.addRelativeTo(e.middleware,Zs({},e))})),n},i=function(e){var t=[];return e.before.forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,ou([],iu(i(e))))})),t.push(e),e.after.reverse().forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,ou([],iu(i(e))))})),t},o=function(){var n,r=[],o=[],a={};return e.forEach((function(e){var t=Zs(Zs({},e),{before:[],after:[]});t.name&&(a[t.name]=t),r.push(t)})),t.forEach((function(e){var t=Zs(Zs({},e),{before:[],after:[]});t.name&&(a[t.name]=t),o.push(t)})),o.forEach((function(e){if(e.toMiddleware){var t=a[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(n=r,n.sort((function(e,t){return af[t.step]-af[e.step]||sf[t.priority||"normal"]-sf[e.priority||"normal"]}))).map(i).reduce((function(e,t){return e.push.apply(e,ou([],iu(t))),e}),[]).map((function(e){return e.middleware}))},a={add:function(t,r){void 0===r&&(r={});var i=r.name,o=r.override,a=Zs({step:"initialize",priority:"normal",middleware:t},r);if(i){if(n.has(i)){if(!o)throw new Error("Duplicate middleware name '"+i+"'");var s=e.findIndex((function(e){return e.name===i})),u=e[s];if(u.step!==a.step||u.priority!==a.priority)throw new Error('"'+i+'" middleware with '+u.priority+" priority in "+u.step+" step cannot be overridden by same-name middleware with "+a.priority+" priority in "+a.step+" step.");e.splice(s,1)}n.add(i)}e.push(a)},addRelativeTo:function(e,r){var i=r.name,o=r.override,a=Zs({middleware:e},r);if(i){if(n.has(i)){if(!o)throw new Error("Duplicate middleware name '"+i+"'");var s=t.findIndex((function(e){return e.name===i})),u=t[s];if(u.toMiddleware!==a.toMiddleware||u.relation!==a.relation)throw new Error('"'+i+'" middleware '+u.relation+' "'+u.toMiddleware+'" middleware cannot be overridden by same-name middleware '+a.relation+' "'+a.toMiddleware+'" middleware.');t.splice(s,1)}n.add(i)}t.push(a)},clone:function(){return r(of())},use:function(e){e.applyToStack(a)},remove:function(r){return"string"==typeof r?function(r){var i=!1,o=function(e){return!e.name||e.name!==r||(i=!0,n.delete(r),!1)};return e=e.filter(o),t=t.filter(o),i}(r):function(r){var i=!1,o=function(e){return e.middleware!==r||(i=!0,e.name&&n.delete(e.name),!1)};return e=e.filter(o),t=t.filter(o),i}(r)},removeByTag:function(r){var i=!1,o=function(e){var t=e.tags,o=e.name;return!t||!t.includes(r)||(o&&n.delete(o),i=!0,!1)};return e=e.filter(o),t=t.filter(o),i},concat:function(e){var t=r(of());return t.use(e),t},applyToStack:r,resolve:function(e,t){var n,r;try{for(var i=ru(o().reverse()),a=i.next();!a.done;a=i.next()){e=(0,a.value)(e,t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e}};return a},af={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},sf={high:3,normal:2,low:1},uf=function(){function e(e){this.middlewareStack=of(),this.config=e}return e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return o(e).then((function(e){return e.output}));o(e).then((function(e){return i(null,e.output)}),(function(e){return i(e)})).catch((function(){}))},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),cf=function(){this.middlewareStack=of()};function df(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}var lf=function(e){return Array.isArray(e)?e:[e]},ff=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=ff(e[t]));return e},pf=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,ou([null],iu(arguments))),n=new t;return Object.setPrototypeOf(n,e.prototype),n};pf.prototype=Object.create(String.prototype,{constructor:{value:pf,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(pf,String),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Js(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))}}(pf);var hf=function(e){switch(e){case"true":return!0;case"false":return!1;default:throw new Error('Unable to parse boolean value "'+e+'"')}},vf=function(e){if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError("Expected integer, got "+typeof e)}},mf=function(e){if(null!=e){if("string"==typeof e)return e;throw new TypeError("Expected string, got "+typeof e)}},gf=function(e){return vf("string"==typeof e?parseFloat(e):e)},yf=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wf=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function bf(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),a=e.getUTCMinutes(),s=e.getUTCSeconds();return yf[r]+", "+(i<10?"0"+i:""+i)+" "+wf[n]+" "+t+" "+(o<10?"0"+o:""+o)+":"+(a<10?"0"+a:""+a)+":"+(s<10?"0"+s:""+s)+" GMT"}var Sf,Ef,kf,Cf,xf,Tf,Nf,Of,Af,Pf,_f,If,Mf,Rf,Lf,Bf,Df,zf,jf,Uf,Ff,qf,Kf,Hf,Vf,$f,Gf,Wf,Yf,Qf,Xf,Jf,Zf,ep,tp,np,rp,ip,op,ap,sp,up,cp,dp,lp,fp,pp,hp,vp,mp,gp,yp,wp,bp,Sp,Ep,kp,Cp,xp,Tp,Np,Op,Ap,Pp,_p,Ip,Mp,Rp,Lp,Bp,Dp,zp,jp,Up,Fp,qp,Kp,Hp,Vp,$p,Gp,Wp,Yp,Qp,Xp,Jp,Zp,eh,th,nh,rh,ih,oh,ah,sh,uh,ch,dh,lh,fh,ph,hh,vh,mh,gh,yh,wh,bh,Sh,Eh,kh,Ch,xh,Th,Nh,Oh,Ah,Ph,_h,Ih,Mh,Rh,Lh,Bh,Dh,zh,jh,Uh,Fh,qh,Kh,Hh,Vh,$h,Gh,Wh,Yh,Qh,Xh,Jh,Zh,ev,tv,nv,rv,iv,ov,av,sv,uv,cv,dv,lv,fv,pv,hv,vv,mv,gv,yv,wv,bv,Sv,Ev,kv,Cv,xv,Tv,Nv,Ov,Av,Pv,_v,Iv,Mv,Rv,Lv,Bv,Dv,zv,jv,Uv,Fv,qv,Kv,Hv,Vv,$v,Gv,Wv,Yv,Qv,Xv,Jv,Zv,em,tm,nm,rm,im,om,am,sm,um,cm,dm,lm,fm,pm,hm,vm,mm,gm,ym,wm,bm,Sm,Em,km,Cm,xm,Tm,Nm,Om,Am,Pm,_m,Im,Mm,Rm,Lm,Bm,Dm,zm,jm,Um,Fm,qm,Km,Hm,Vm,$m,Gm,Wm,Ym,Qm,Xm,Jm,Zm,eg,tg,ng="***SensitiveInformation***",rg=function(e){function t(t){var n,r,i=this,o=function(e){var t;return Zs(Zs({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?Od(e):function(){return Ad(e)},isCustomEndpoint:!!e.endpoint})}(function(e){if(!e.region)throw new Error("Region is missing");return Zs(Zs({},e),{region:Pd(e.region)})}(Nd(t))),a=function(e){return Zs(Zs({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(e)})}(function(e){return Zs(Zs({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}(function(e){var t=e.bucketEndpoint,n=void 0!==t&&t,r=e.forcePathStyle,i=void 0!==r&&r,o=e.useAccelerateEndpoint,a=void 0!==o&&o,s=e.useDualstackEndpoint,u=void 0!==s&&s,c=e.useArnRegion,d=void 0!==c&&c;return Zs(Zs({},e),{bucketEndpoint:n,forcePathStyle:i,useAccelerateEndpoint:a,useDualstackEndpoint:u,useArnRegion:"function"==typeof d?d:function(){return Promise.resolve(d)}})}(function(e){var t,n=e.credentials?Gl(e.credentials):e.credentialDefaultProvider(e),r=e.signingEscapePath,i=void 0===r||r,o=e.systemClockOffset,a=void 0===o?e.systemClockOffset||0:o,s=e.sha256;return t=e.signer?$l(e.signer):function(){return $l(e.region)().then((function(t){return tu(void 0,void 0,void 0,(function(){return nu(this,(function(n){switch(n.label){case 0:return[4,e.regionInfoProvider(t)];case 1:return[2,[n.sent()||{},t]]}}))}))})).then((function(t){var r=iu(t,2),o=r[0],a=r[1],u=o.signingRegion,c=o.signingService;return e.signingRegion=e.signingRegion||u||a,e.signingName=e.signingName||c||e.serviceId,new Fl({credentials:n,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:i})}))},Zs(Zs({},e),{systemClockOffset:a,signingEscapePath:i,credentials:n,signer:t})}((r=vd((n=o).maxAttempts),Zs(Zs({},n),{maxAttempts:r,retryStrategy:function(){return tu(void 0,void 0,void 0,(function(){var e;return nu(this,(function(t){switch(t.label){case 0:return n.retryStrategy?[2,n.retryStrategy]:(e=n.retryMode)?[3,2]:[4,n.retryModeProvider()];case 1:e=t.sent(),t.label=2;case 2:return e===id.ADAPTIVE?[2,new hd(r)]:[2,new ld(r)]}}))}))}}))))));return(i=e.call(this,a)||this).config=a,i.middlewareStack.use(Wc(i.config)),i.middlewareStack.use(el(i.config)),i.middlewareStack.use(il(i.config)),i.middlewareStack.use(al(i.config)),i.middlewareStack.use(Xl(i.config)),i.middlewareStack.use(ul(i.config)),i.middlewareStack.use(dl(i.config)),i.middlewareStack.use(nl(i.config)),i.middlewareStack.use(rf(i.config)),i}return Js(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(uf);!function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Sf||(Sf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Ef||(Ef={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(kf||(kf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Cf||(Cf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(xf||(xf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Tf||(Tf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Nf||(Nf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Of||(Of={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Af||(Af={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Pf||(Pf={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ng})}}(_f||(_f={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(If||(If={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Mf||(Mf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Rf||(Rf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Lf||(Lf={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs(Zs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ng}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ng})}}(Bf||(Bf={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs(Zs(Zs(Zs({},e),e.SSECustomerKey&&{SSECustomerKey:ng}),e.SSEKMSKeyId&&{SSEKMSKeyId:ng}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ng}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:ng})}}(Df||(Df={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(zf||(zf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(jf||(jf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Uf||(Uf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Ff||(Ff={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(qf||(qf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Kf||(Kf={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs(Zs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ng}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ng})}}(Hf||(Hf={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs(Zs(Zs({},e),e.SSECustomerKey&&{SSECustomerKey:ng}),e.SSEKMSKeyId&&{SSEKMSKeyId:ng}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ng})}}(Vf||(Vf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}($f||($f={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Gf||(Gf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Wf||(Wf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Yf||(Yf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Qf||(Qf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Xf||(Xf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Jf||(Jf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Zf||(Zf={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(ep||(ep={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(tp||(tp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(np||(np={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(rp||(rp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(ip||(ip={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(op||(op={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(ap||(ap={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(sp||(sp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(up||(up={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(cp||(cp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(dp||(dp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(lp||(lp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(fp||(fp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(pp||(pp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(hp||(hp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(vp||(vp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(mp||(mp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(gp||(gp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(yp||(yp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(wp||(wp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(bp||(bp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Sp||(Sp={})),function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:bp.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Sp.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(Ep||(Ep={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(kp||(kp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Cp||(Cp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(xp||(xp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Tp||(Tp={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.Filter&&{Filter:Ep.filterSensitiveLog(e.Filter)})}}(Np||(Np={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.AnalyticsConfiguration&&{AnalyticsConfiguration:Np.filterSensitiveLog(e.AnalyticsConfiguration)})}}(Op||(Op={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Ap||(Ap={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Pp||(Pp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(_p||(_p={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Ip||(Ip={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.KMSMasterKeyID&&{KMSMasterKeyID:ng})}}(Mp||(Mp={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:Mp.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)})}}(Rp||(Rp={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.Rules&&{Rules:e.Rules.map((function(e){return Rp.filterSensitiveLog(e)}))})}}(Lp||(Lp={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Lp.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})}}(Bp||(Bp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Dp||(Dp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(zp||(zp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(jp||(jp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Up||(Up={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Fp||(Fp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(qp||(qp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Kp||(Kp={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.KeyId&&{KeyId:ng})}}(Hp||(Hp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Vp||(Vp={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.SSEKMS&&{SSEKMS:Hp.filterSensitiveLog(e.SSEKMS)})}}($p||($p={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.Encryption&&{Encryption:$p.filterSensitiveLog(e.Encryption)})}}(Gp||(Gp={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.S3BucketDestination&&{S3BucketDestination:Gp.filterSensitiveLog(e.S3BucketDestination)})}}(Wp||(Wp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Yp||(Yp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Qp||(Qp={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.Destination&&{Destination:Wp.filterSensitiveLog(e.Destination)})}}(Xp||(Xp={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.InventoryConfiguration&&{InventoryConfiguration:Xp.filterSensitiveLog(e.InventoryConfiguration)})}}(Jp||(Jp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Zp||(Zp={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(eh||(eh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(th||(th={})),function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:bp.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:th.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(nh||(nh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(rh||(rh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(ih||(ih={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(oh||(oh={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.Filter&&{Filter:nh.filterSensitiveLog(e.Filter)})}}(ah||(ah={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.Rules&&{Rules:e.Rules.map((function(e){return ah.filterSensitiveLog(e)}))})}}(sh||(sh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(uh||(uh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(ch||(ch={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(dh||(dh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(lh||(lh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(fh||(fh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(ph||(ph={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(hh||(hh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(vh||(vh={})),function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:bp.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:vh.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(mh||(mh={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.Filter&&{Filter:mh.filterSensitiveLog(e.Filter)})}}(gh||(gh={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.MetricsConfiguration&&{MetricsConfiguration:gh.filterSensitiveLog(e.MetricsConfiguration)})}}(yh||(yh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(wh||(wh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(bh||(bh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Sh||(Sh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Eh||(Eh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(kh||(kh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Ch||(Ch={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(xh||(xh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Th||(Th={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Nh||(Nh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Oh||(Oh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Ah||(Ah={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Ph||(Ph={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(_h||(_h={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Ih||(Ih={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Mh||(Mh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Rh||(Rh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Lh||(Lh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Bh||(Bh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Dh||(Dh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(zh||(zh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(jh||(jh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Uh||(Uh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Fh||(Fh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(qh||(qh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Kh||(Kh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Hh||(Hh={})),function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:bp.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Hh.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(Vh||(Vh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}($h||($h={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Gh||(Gh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Wh||(Wh={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.Filter&&{Filter:Vh.filterSensitiveLog(e.Filter)})}}(Yh||(Yh={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.Rules&&{Rules:e.Rules.map((function(e){return Yh.filterSensitiveLog(e)}))})}}(Qh||(Qh={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.ReplicationConfiguration&&{ReplicationConfiguration:Qh.filterSensitiveLog(e.ReplicationConfiguration)})}}(Xh||(Xh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Jh||(Jh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Zh||(Zh={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(ev||(ev={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(tv||(tv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(nv||(nv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(rv||(rv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(iv||(iv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(ov||(ov={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(av||(av={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(sv||(sv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(uv||(uv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(cv||(cv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(dv||(dv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(lv||(lv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(fv||(fv={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ng})}}(pv||(pv={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.SSECustomerKey&&{SSECustomerKey:ng})}}(hv||(hv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(vv||(vv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(mv||(mv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(gv||(gv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(yv||(yv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(wv||(wv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(bv||(bv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Sv||(Sv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Ev||(Ev={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(kv||(kv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Cv||(Cv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(xv||(xv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Tv||(Tv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Nv||(Nv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Ov||(Ov={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Av||(Av={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Pv||(Pv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(_v||(_v={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Iv||(Iv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Mv||(Mv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Rv||(Rv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Lv||(Lv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Bv||(Bv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Dv||(Dv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(zv||(zv={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ng})}}(jv||(jv={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.SSECustomerKey&&{SSECustomerKey:ng})}}(Uv||(Uv={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.AnalyticsConfigurationList&&{AnalyticsConfigurationList:e.AnalyticsConfigurationList.map((function(e){return Np.filterSensitiveLog(e)}))})}}(Fv||(Fv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(qv||(qv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Kv||(Kv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Hv||(Hv={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map((function(e){return Xp.filterSensitiveLog(e)}))})}}(Vv||(Vv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}($v||($v={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.MetricsConfigurationList&&{MetricsConfigurationList:e.MetricsConfigurationList.map((function(e){return gh.filterSensitiveLog(e)}))})}}(Gv||(Gv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Wv||(Wv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Yv||(Yv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Qv||(Qv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Xv||(Xv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Jv||(Jv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Zv||(Zv={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(em||(em={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(tm||(tm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(nm||(nm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(rm||(rm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(im||(im={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(om||(om={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(am||(am={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(sm||(sm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(um||(um={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(cm||(cm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(dm||(dm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(lm||(lm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(fm||(fm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(pm||(pm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(hm||(hm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(vm||(vm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(mm||(mm={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.AnalyticsConfiguration&&{AnalyticsConfiguration:Np.filterSensitiveLog(e.AnalyticsConfiguration)})}}(gm||(gm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(ym||(ym={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(wm||(wm={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Lp.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})}}(bm||(bm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Sm||(Sm={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.InventoryConfiguration&&{InventoryConfiguration:Xp.filterSensitiveLog(e.InventoryConfiguration)})}}(Em||(Em={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.Rules&&{Rules:e.Rules.map((function(e){return ah.filterSensitiveLog(e)}))})}}(km||(km={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.LifecycleConfiguration&&{LifecycleConfiguration:km.filterSensitiveLog(e.LifecycleConfiguration)})}}(Cm||(Cm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(xm||(xm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Tm||(Tm={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.MetricsConfiguration&&{MetricsConfiguration:gh.filterSensitiveLog(e.MetricsConfiguration)})}}(Nm||(Nm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Om||(Om={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Am||(Am={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Pm||(Pm={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.ReplicationConfiguration&&{ReplicationConfiguration:Qh.filterSensitiveLog(e.ReplicationConfiguration)})}}(_m||(_m={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Im||(Im={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Mm||(Mm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Rm||(Rm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Lm||(Lm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Bm||(Bm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Dm||(Dm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(zm||(zm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(jm||(jm={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs(Zs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ng}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ng})}}(Um||(Um={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs(Zs(Zs({},e),e.SSECustomerKey&&{SSECustomerKey:ng}),e.SSEKMSKeyId&&{SSEKMSKeyId:ng}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:ng})}}(Fm||(Fm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(qm||(qm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Km||(Km={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Hm||(Hm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Vm||(Vm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}($m||($m={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Gm||(Gm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Wm||(Wm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Ym||(Ym={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Qm||(Qm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Xm||(Xm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Jm||(Jm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Zm||(Zm={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(eg||(eg={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(tg||(tg={}));var ig=function(){function e(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}return e.prototype.withName=function(e){return this.name=e,this},e.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},e.prototype.addChildNode=function(e){return this.children.push(e),this},e.prototype.removeAttribute=function(e){return delete this.attributes[e],this},e.prototype.toString=function(){var e,t,n=Boolean(this.children.length),r="<"+this.name,i=this.attributes;try{for(var o=ru(Object.keys(i)),a=o.next();!a.done;a=o.next()){var s=a.value,u=i[s];null!=u&&(r+=" "+s+'="'+((""+u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"'))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r+(n?">"+this.children.map((function(e){return e.toString()})).join("")+"</"+this.name+">":"/>")},e}();var og=function(){function e(e){this.value=e}return e.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")},e}(),ag={Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",amp:"&",AMP:"&",andand:"",And:"",and:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angmsd:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",apacir:"",ap:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxHd:"",boxhD:"",boxHD:"",boxhu:"",boxHu:"",boxhU:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsolb:"",bsol:"\\",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",capand:"",capbrcup:"",capcap:"",cap:"",Cap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cir:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cupbrcap:"",cupcap:"",CupCap:"",cup:"",Cup:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",Darr:"",dArr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",ddagger:"",ddarr:"",DD:"",dd:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrowBar:"",downarrow:"",DownArrow:"",Downarrow:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVectorBar:"",DownLeftVector:"",DownRightTeeVector:"",DownRightVectorBar:"",DownRightVector:"",DownTeeArrow:"",DownTee:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",Ecirc:"",ecirc:"",ecir:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",edot:"",eDot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp13:"",emsp14:"",emsp:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",ge:"",gE:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",gescc:"",ges:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",gg:"",Gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gla:"",gl:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",gtcc:"",gtcir:"",gt:">",GT:">",Gt:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",harrcir:"",harr:"",hArr:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",ifr:"",Ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",Im:"",imof:"",imped:"",Implies:"",incare:"",in:"",infin:"",infintie:"",inodot:"",intcal:"",int:"",Int:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larrb:"",larrbfs:"",larr:"",Larr:"",lArr:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",latail:"",lAtail:"",lat:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",LeftArrowBar:"",leftarrow:"",LeftArrow:"",Leftarrow:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVectorBar:"",LeftDownVector:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTeeArrow:"",LeftTee:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangleBar:"",LeftTriangle:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVectorBar:"",LeftUpVector:"",LeftVectorBar:"",LeftVector:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",lescc:"",les:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",llarr:"",ll:"",Ll:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoustache:"",lmoust:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",LongLeftArrow:"",Longleftarrow:"",longleftrightarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longmapsto:"",longrightarrow:"",LongRightArrow:"",Longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",ltcc:"",ltcir:"",lt:"<",LT:"<",Lt:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",midast:"*",midcir:"",mid:"",middot:"",minusb:"",minus:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natural:"",naturals:"",natur:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",nearhk:"",nearr:"",neArr:"",nearrow:"",ne:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlarr:"",nlArr:"",nldr:"",nlE:"",nle:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangleBar:"",NotLeftTriangle:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangleBar:"",NotRightTriangle:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",nparallel:"",npar:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",nprec:"",npreceq:"",npre:"",nrarrc:"",nrarr:"",nrArr:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",Ocirc:"",ocirc:"",ocir:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",orarr:"",Or:"",or:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",otimesas:"",Otimes:"",otimes:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",para:"",parallel:"",par:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plusacir:"",plusb:"",pluscir:"",plus:"+",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",prap:"",Pr:"",pr:"",prcue:"",precapprox:"",prec:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",pre:"",prE:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportional:"",Proportion:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarr:"",Rarr:"",rArr:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",real:"",realine:"",realpart:"",reals:"",Re:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrowBar:"",rightarrow:"",RightArrow:"",Rightarrow:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVectorBar:"",RightDownVector:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTeeArrow:"",RightTee:"",RightTeeVector:"",rightthreetimes:"",RightTriangleBar:"",RightTriangle:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVectorBar:"",RightUpVector:"",RightVectorBar:"",RightVector:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoustache:"",rmoust:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",scap:"",Scaron:"",scaron:"",Sc:"",sc:"",sccue:"",sce:"",scE:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdotb:"",sdot:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",solbar:"",solb:"",sol:"/",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squ:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succapprox:"",succ:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup1:"",sup2:"",sup3:"",sup:"",Sup:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",therefore:"",Therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",ThinSpace:"",thinsp:"",thkap:"",thksim:"",THORN:"",thorn:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",timesbar:"",timesb:"",times:"",timesd:"",tint:"",toea:"",topbot:"",topcir:"",top:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",uarr:"",Uarr:"",uArr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrowBar:"",uparrow:"",UpArrow:"",Uparrow:"",UpArrowDownArrow:"",updownarrow:"",UpDownArrow:"",Updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTeeArrow:"",UpTee:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",Vcy:"",vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",veebar:"",vee:"",Vee:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xharr:"",xhArr:"",Xi:"",xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",yuml:"",Yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",zfr:"",Zfr:"",ZHcy:"",zhcy:"",zigrarr:"",zopf:"",Zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""},sg={Aacute:"",aacute:"",Acirc:"",acirc:"",acute:"",AElig:"",aelig:"",Agrave:"",agrave:"",amp:"&",AMP:"&",Aring:"",aring:"",Atilde:"",atilde:"",Auml:"",auml:"",brvbar:"",Ccedil:"",ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",Eacute:"",eacute:"",Ecirc:"",ecirc:"",Egrave:"",egrave:"",ETH:"",eth:"",Euml:"",euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",Iacute:"",iacute:"",Icirc:"",icirc:"",iexcl:"",Igrave:"",igrave:"",iquest:"",Iuml:"",iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",Ntilde:"",ntilde:"",Oacute:"",oacute:"",Ocirc:"",ocirc:"",Ograve:"",ograve:"",ordf:"",ordm:"",Oslash:"",oslash:"",Otilde:"",otilde:"",Ouml:"",ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",THORN:"",thorn:"",times:"",Uacute:"",uacute:"",Ucirc:"",ucirc:"",Ugrave:"",ugrave:"",uml:"",Uuml:"",uuml:"",Yacute:"",yacute:"",yen:"",yuml:""},ug={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'},cg=(ei&&ei.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})({0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}),dg=String.fromCodePoint||function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)};var lg={default:function(e){return e>=55296&&e<=57343||e>1114111?"":(e in cg.default&&(e=cg.default[e]),dg(e))}},fg=ri((function(e,t){var n=ei&&ei.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.decodeHTML=t.decodeHTMLStrict=t.decodeXML=void 0;var r=n(ag),i=n(sg),o=n(ug),a=n(lg),s=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function u(e){var t=d(e);return function(e){return String(e).replace(s,t)}}t.decodeXML=u(o.default),t.decodeHTMLStrict=u(r.default);var c=function(e,t){return e<t?1:-1};function d(e){return function(t){if("#"===t.charAt(1)){var n=t.charAt(2);return"X"===n||"x"===n?a.default(parseInt(t.substr(3),16)):a.default(parseInt(t.substr(2),10))}return e[t.slice(1,-1)]||t}}t.decodeHTML=function(){for(var e=Object.keys(i.default).sort(c),t=Object.keys(r.default).sort(c),n=0,o=0;n<t.length;n++)e[o]===t[n]?(t[n]+=";?",o++):t[n]+=";";var a=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),s=d(r.default);function u(e){return";"!==e.substr(-1)&&(e+=";"),s(e)}return function(e){return String(e).replace(a,u)}}()})),pg=ri((function(e,t){var n=ei&&ei.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=void 0;var r=c(n(ug).default),i=d(r);t.encodeXML=v(r);var o,a,s=c(n(ag).default),u=d(s);function c(e){return Object.keys(e).sort().reduce((function(t,n){return t[e[n]]="&"+n+";",t}),{})}function d(e){for(var t=[],n=[],r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];1===o.length?t.push("\\"+o):n.push(o)}t.sort();for(var a=0;a<t.length-1;a++){for(var s=a;s<t.length-1&&t[s].charCodeAt(1)+1===t[s+1].charCodeAt(1);)s+=1;var u=1+s-a;u<3||t.splice(a,u,t[a]+"-"+t[s])}return n.unshift("["+t.join("")+"]"),new RegExp(n.join("|"),"g")}t.encodeHTML=(o=s,a=u,function(e){return e.replace(a,(function(e){return o[e]})).replace(l,p)}),t.encodeNonAsciiHTML=v(s);var l=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,f=null!=String.prototype.codePointAt?function(e){return e.codePointAt(0)}:function(e){return 1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536};function p(e){return"&#x"+(e.length>1?f(e):e.charCodeAt(0)).toString(16).toUpperCase()+";"}var h=new RegExp(i.source+"|"+l.source,"g");function v(e){return function(t){return t.replace(h,(function(t){return e[t]||p(t)}))}}t.escape=function(e){return e.replace(h,p)},t.escapeUTF8=function(e){return e.replace(i,p)}})),hg=ri((function(e,t){t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.encodeHTML5=t.encodeHTML4=t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=t.encode=t.decodeStrict=t.decode=void 0,t.decode=function(e,t){return(!t||t<=0?fg.decodeXML:fg.decodeHTML)(e)},t.decodeStrict=function(e,t){return(!t||t<=0?fg.decodeXML:fg.decodeHTMLStrict)(e)},t.encode=function(e,t){return(!t||t<=0?pg.encodeXML:pg.encodeHTML)(e)};var n=pg;Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return n.encodeXML}}),Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return n.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return n.encodeNonAsciiHTML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return n.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return n.escapeUTF8}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return n.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return n.encodeHTML}});var r=fg;Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return r.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return r.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return r.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return r.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return r.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return r.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return r.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return r.decodeXML}})})),vg=ri((function(e,t){const n=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r="["+n+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+r+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,n){if(t){const r=Object.keys(t),i=r.length;for(let o=0;o<i;o++)e[r[o]]="strict"===n?[t[r[o]]]:t[r[o]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.buildOptions=function(e,t,n){var r={};if(!e)return t;for(let i=0;i<n.length;i++)void 0!==e[n[i]]?r[n[i]]=e[n[i]]:r[n[i]]=t[n[i]];return r},t.isTagNameInArrayMode=function(e,t,n){return!1!==t&&(t instanceof RegExp?t.test(e):"function"==typeof t?!!t(e,n):"strict"===t)},t.isName=function(e){const t=i.exec(e);return!(null==t)},t.getAllMatches=function(e,t){const n=[];let r=t.exec(e);for(;r;){const i=[],o=r.length;for(let e=0;e<o;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n},t.nameRegexp=r}));const mg=function(e,t,n){const r={};if((!e.child||vg.isEmptyObject(e.child))&&(!e.attrsMap||vg.isEmptyObject(e.attrsMap)))return vg.isExist(e.val)?e.val:"";if(vg.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)){const i=vg.isTagNameInArrayMode(e.tagname,t.arrayMode,n);r[t.textNodeName]=i?[e.val]:e.val}vg.merge(r,e.attrsMap,t.arrayMode);const i=Object.keys(e.child);for(let o=0;o<i.length;o++){const a=i[o];if(e.child[a]&&e.child[a].length>1){r[a]=[];for(let n in e.child[a])e.child[a].hasOwnProperty(n)&&r[a].push(mg(e.child[a][n],t,a))}else{const i=mg(e.child[a][0],t,a),o=!0===t.arrayMode&&"object"==typeof i||vg.isTagNameInArrayMode(a,t.arrayMode,n);r[a]=o?[i]:i}}return r};var gg={convertToJson:mg},yg=function(e,t,n){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=n,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}};const wg=vg.buildOptions;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,vg.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const bg={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};var Sg=bg;const Eg=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];var kg=Eg;function Cg(e,t,n){return t&&(n.trimValues&&(t=t.trim()),t=Tg(t=n.tagValueProcessor(t,e),n.parseNodeValue,n.parseTrueNumberOnly)),t}function xg(e,t){if(t.ignoreNameSpace){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}function Tg(e,t,n){if(t&&"string"==typeof e){let t;return""===e.trim()||isNaN(e)?t="true"===e||"false"!==e&&e:(-1!==e.indexOf("0x")?t=Number.parseInt(e,16):-1!==e.indexOf(".")?(t=Number.parseFloat(e),e=e.replace(/\.?0+$/,"")):t=Number.parseInt(e,10),n&&(t=String(t)===e?t:e)),t}return vg.isExist(e)?e:""}const Ng=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function Og(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");const n=vg.getAllMatches(e,Ng),r=n.length,i={};for(let e=0;e<r;e++){const r=xg(n[e][1],t);r.length&&(void 0!==n[e][4]?(t.trimValues&&(n[e][4]=n[e][4].trim()),n[e][4]=t.attrValueProcessor(n[e][4],r),i[t.attributeNamePrefix+r]=Tg(n[e][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(i[t.attributeNamePrefix+r]=!0))}if(!Object.keys(i).length)return;if(t.attrNodeName){const e={};return e[t.attrNodeName]=i,e}return i}}function Ag(e,t){let n,r="";for(let i=t;i<e.length;i++){let t=e[i];if(n)t===n&&(n="");else if('"'===t||"'"===t)n=t;else{if(">"===t)return{data:r,index:i};"\t"===t&&(t=" ")}r+=t}}function Pg(e,t,n,r){const i=e.indexOf(t,n);if(-1===i)throw new Error(r);return i+t.length-1}var _g={defaultOptions:Sg,props:kg,getTraversalObj:function(e,t){e=e.replace(/\r\n?/g,"\n"),t=wg(t,bg,Eg);const n=new yg("!xml");let r=n,i="";for(let n=0;n<e.length;n++){if("<"===e[n])if("/"===e[n+1]){const o=Pg(e,">",n,"Closing Tag is not closed.");let a=e.substring(n+2,o).trim();if(t.ignoreNameSpace){const e=a.indexOf(":");-1!==e&&(a=a.substr(e+1))}r&&(r.val?r.val=vg.getValue(r.val)+""+Cg(a,i,t):r.val=Cg(a,i,t)),t.stopNodes.length&&t.stopNodes.includes(r.tagname)&&(r.child=[],null==r.attrsMap&&(r.attrsMap={}),r.val=e.substr(r.startIndex+1,n-r.startIndex-1)),r=r.parent,i="",n=o}else if("?"===e[n+1])n=Pg(e,"?>",n,"Pi Tag is not closed.");else if("!--"===e.substr(n+1,3))n=Pg(e,"--\x3e",n,"Comment is not closed.");else if("!D"===e.substr(n+1,2)){const t=Pg(e,">",n,"DOCTYPE is not closed.");n=e.substring(n,t).indexOf("[")>=0?e.indexOf("]>",n)+1:t}else if("!["===e.substr(n+1,2)){const o=Pg(e,"]]>",n,"CDATA is not closed.")-2,a=e.substring(n+9,o);if(i&&(r.val=vg.getValue(r.val)+""+Cg(r.tagname,i,t),i=""),t.cdataTagName){const e=new yg(t.cdataTagName,r,a);r.addChild(e),r.val=vg.getValue(r.val)+t.cdataPositionChar,a&&(e.val=a)}else r.val=(r.val||"")+(a||"");n=o+2}else{const o=Ag(e,n+1);let a=o.data;const s=o.index,u=a.indexOf(" ");let c=a,d=!0;if(-1!==u&&(c=a.substr(0,u).replace(/\s\s*$/,""),a=a.substr(u+1)),t.ignoreNameSpace){const e=c.indexOf(":");-1!==e&&(c=c.substr(e+1),d=c!==o.data.substr(e+1))}if(r&&i&&"!xml"!==r.tagname&&(r.val=vg.getValue(r.val)+""+Cg(r.tagname,i,t)),a.length>0&&a.lastIndexOf("/")===a.length-1){"/"===c[c.length-1]?(c=c.substr(0,c.length-1),a=c):a=a.substr(0,a.length-1);const e=new yg(c,r,"");c!==a&&(e.attrsMap=Og(a,t)),r.addChild(e)}else{const e=new yg(c,r);t.stopNodes.length&&t.stopNodes.includes(e.tagname)&&(e.startIndex=s),c!==a&&d&&(e.attrsMap=Og(a,t)),r.addChild(e),r=e}i="",n=s}else i+=e[n]}return n}};const Ig={allowBooleanAttributes:!1},Mg=["allowBooleanAttributes"];function Rg(e,t){for(var n=t;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{var r=e.substr(n,t-n);if(t>5&&"xml"===r)return Ug("InvalidXml","XML declaration allowed only at the start of the document.",qg(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function Lg(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}function Bg(e,t){let n="",r="",i=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])if(""===r)r=e[t];else{if(r!==e[t])continue;r=""}else if(">"===e[t]&&""===r){i=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:i}}const Dg=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function zg(e,t){const n=vg.getAllMatches(e,Dg),r={};for(let i=0;i<n.length;i++){if(0===n[i][1].length)return Ug("InvalidAttr","Attribute '"+n[i][2]+"' has no space in starting.",Kg(e,n[i][0]));if(void 0===n[i][3]&&!t.allowBooleanAttributes)return Ug("InvalidAttr","boolean attribute '"+n[i][2]+"' is not allowed.",Kg(e,n[i][0]));const o=n[i][2];if(!Fg(o))return Ug("InvalidAttr","Attribute '"+o+"' is an invalid name.",Kg(e,n[i][0]));if(r.hasOwnProperty(o))return Ug("InvalidAttr","Attribute '"+o+"' is repeated.",Kg(e,n[i][0]));r[o]=1}return!0}function jg(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function Ug(e,t,n){return{err:{code:e,msg:t,line:n}}}function Fg(e){return vg.isName(e)}function qg(e,t){return e.substring(0,t).split(/\r?\n/).length}function Kg(e,t){return e.indexOf(t)+t.length}var Hg=function(e,t){t=vg.buildOptions(t,Ig,Mg);const n=[];let r=!1,i=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let a=0;a<e.length;a++)if("<"===e[a]&&"?"===e[a+1]){if(a+=2,a=Rg(e,a),a.err)return a}else{if("<"!==e[a]){if(" "===e[a]||"\t"===e[a]||"\n"===e[a]||"\r"===e[a])continue;return Ug("InvalidChar","char '"+e[a]+"' is not expected.",qg(e,a))}if(a++,"!"===e[a]){a=Lg(e,a);continue}{let s=!1;"/"===e[a]&&(s=!0,a++);let u="";for(;a<e.length&&">"!==e[a]&&" "!==e[a]&&"\t"!==e[a]&&"\n"!==e[a]&&"\r"!==e[a];a++)u+=e[a];if(u=u.trim(),"/"===u[u.length-1]&&(u=u.substring(0,u.length-1),a--),o=u,!vg.isName(o)){let t;return t=0===u.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+u+"' is an invalid name.",Ug("InvalidTag",t,qg(e,a))}const c=Bg(e,a);if(!1===c)return Ug("InvalidAttr","Attributes for '"+u+"' have open quote.",qg(e,a));let d=c.value;if(a=c.index,"/"===d[d.length-1]){d=d.substring(0,d.length-1);const n=zg(d,t);if(!0!==n)return Ug(n.err.code,n.err.msg,qg(e,a-d.length+n.err.line));r=!0}else if(s){if(!c.tagClosed)return Ug("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",qg(e,a));if(d.trim().length>0)return Ug("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",qg(e,a));{const t=n.pop();if(u!==t)return Ug("InvalidTag","Closing tag '"+t+"' is expected inplace of '"+u+"'.",qg(e,a));0==n.length&&(i=!0)}}else{const o=zg(d,t);if(!0!==o)return Ug(o.err.code,o.err.msg,qg(e,a-d.length+o.err.line));if(!0===i)return Ug("InvalidXml","Multiple possible root nodes found.",qg(e,a));n.push(u),r=!0}for(a++;a<e.length;a++)if("<"===e[a]){if("!"===e[a+1]){a++,a=Lg(e,a);continue}if("?"!==e[a+1])break;if(a=Rg(e,++a),a.err)return a}else if("&"===e[a]){const t=jg(e,a);if(-1==t)return Ug("InvalidChar","char '&' is not expected.",qg(e,a));a=t}"<"===e[a]&&a--}}var o;return r?!(n.length>0)||Ug("InvalidXml","Invalid '"+JSON.stringify(n,null,4).replace(/\r?\n/g,"")+"' found.",1):Ug("InvalidXml","Start tag expected.",1)};const Vg=function(e){return String.fromCharCode(e)},$g={nilChar:Vg(176),missingChar:Vg(201),nilPremitive:Vg(175),missingPremitive:Vg(200),emptyChar:Vg(178),emptyValue:Vg(177),boundryChar:Vg(179),objStart:Vg(198),arrStart:Vg(204),arrayEnd:Vg(185)},Gg=[$g.nilChar,$g.nilPremitive,$g.missingChar,$g.missingPremitive,$g.boundryChar,$g.emptyChar,$g.emptyValue,$g.arrayEnd,$g.objStart,$g.arrStart],Wg=function(e,t,n){if("string"==typeof t)return e&&e[0]&&void 0!==e[0].val?Yg(e[0].val):Yg(e);{const i=void 0===(r=e)?$g.missingChar:null===r?$g.nilChar:!(r.child&&0===Object.keys(r.child).length&&(!r.attrsMap||0===Object.keys(r.attrsMap).length))||$g.emptyChar;if(!0===i){let r="";if(Array.isArray(t)){r+=$g.arrStart;const i=t[0],o=e.length;if("string"==typeof i)for(let t=0;t<o;t++){const n=Yg(e[t].val);r=Qg(r,n)}else for(let t=0;t<o;t++){const o=Wg(e[t],i,n);r=Qg(r,o)}r+=$g.arrayEnd}else{r+=$g.objStart;const i=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let o in i){const a=i[o];let s;s=!n.ignoreAttributes&&e.attrsMap&&e.attrsMap[a]?Wg(e.attrsMap[a],t[a],n):a===n.textNodeName?Wg(e.val,t[a],n):Wg(e.child[a],t[a],n),r=Qg(r,s)}}return r}return i}var r},Yg=function(e){switch(e){case void 0:return $g.missingPremitive;case null:return $g.nilPremitive;case"":return $g.emptyValue;default:return e}},Qg=function(e,t){return Xg(t[0])||Xg(e[e.length-1])||(e+=$g.boundryChar),e+t},Xg=function(e){return-1!==Gg.indexOf(e)};const Jg=vg.buildOptions;var Zg={convert2nimn:function(e,t,n){return n=Jg(n,_g.defaultOptions,_g.props),Wg(e,t,n)}};const ey=vg.buildOptions,ty=function(e,t,n){let r="{";const i=Object.keys(e.child);for(let n=0;n<i.length;n++){var o=i[n];if(e.child[o]&&e.child[o].length>1){for(var a in r+='"'+o+'" : [ ',e.child[o])r+=ty(e.child[o][a],t)+" , ";r=r.substr(0,r.length-1)+" ] "}else r+='"'+o+'" : '+ty(e.child[o][0],t)+" ,"}return vg.merge(r,e.attrsMap),vg.isEmptyObject(r)?vg.isExist(e.val)?e.val:"":(vg.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(r+='"'+t.textNodeName+'" : '+function(e){return!0!==e&&!1!==e&&isNaN(e)?'"'+e+'"':e}(e.val)),","===r[r.length-1]&&(r=r.substr(0,r.length-2)),r+"}")};var ny={convertToJsonString:function(e,t){return(t=ey(t,_g.defaultOptions,_g.props)).indentBy=t.indentBy||"",ty(e,t)}};const ry=vg.buildOptions,iy={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},oy=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function ay(e){this.options=ry(e,iy,oy),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=hy),this.options.cdataTagName?this.isCDATA=vy:this.isCDATA=function(){return!1},this.replaceCDATAstr=sy,this.replaceCDATAarr=uy,this.options.format?(this.indentate=py,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=fy,this.buildObjNode=dy):(this.buildTextNode=ly,this.buildObjNode=cy),this.buildTextValNode=ly,this.buildObjectNode=cy}function sy(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function uy(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let n in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[n]+"]]>");return e+this.newLine}function cy(e,t,n,r){return n&&!e.includes("<")?this.indentate(r)+"<"+t+n+">"+e+"</"+t+this.tagEndChar:this.indentate(r)+"<"+t+n+this.tagEndChar+e+this.indentate(r)+"</"+t+this.tagEndChar}function dy(e,t,n,r){return""!==e?this.buildObjectNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function ly(e,t,n,r){return this.indentate(r)+"<"+t+n+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function fy(e,t,n,r){return""!==e?this.buildTextValNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function py(e){return this.options.indentBy.repeat(e)}function hy(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function vy(e){return e===this.options.cdataTagName}ay.prototype.parse=function(e){return this.j2x(e,0).val},ay.prototype.j2x=function(e,t){let n="",r="";const i=Object.keys(e),o=i.length;for(let a=0;a<o;a++){const o=i[a];if(void 0===e[o]);else if(null===e[o])r+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)r+=this.buildTextNode(e[o],o,"",t);else if("object"!=typeof e[o]){const i=this.isAttribute(o);i?n+=" "+i+'="'+this.options.attrValueProcessor(""+e[o])+'"':this.isCDATA(o)?e[this.options.textNodeName]?r+=this.replaceCDATAstr(e[this.options.textNodeName],e[o]):r+=this.replaceCDATAstr("",e[o]):o===this.options.textNodeName?e[this.options.cdataTagName]||(r+=this.options.tagValueProcessor(""+e[o])):r+=this.buildTextNode(e[o],o,"",t)}else if(Array.isArray(e[o]))if(this.isCDATA(o))r+=this.indentate(t),e[this.options.textNodeName]?r+=this.replaceCDATAarr(e[this.options.textNodeName],e[o]):r+=this.replaceCDATAarr("",e[o]);else{const n=e[o].length;for(let i=0;i<n;i++){const n=e[o][i];if(void 0===n);else if(null===n)r+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if("object"==typeof n){const e=this.j2x(n,t+1);r+=this.buildObjNode(e.val,o,e.attrStr,t)}else r+=this.buildTextNode(n,o,"",t)}}else if(this.options.attrNodeName&&o===this.options.attrNodeName){const t=Object.keys(e[o]),r=t.length;for(let i=0;i<r;i++)n+=" "+t[i]+'="'+this.options.attrValueProcessor(""+e[o][t[i]])+'"'}else{const n=this.j2x(e[o],t+1);r+=this.buildObjNode(n.val,o,n.attrStr,t)}}return{attrStr:n,val:r}};var my=ay,gy=ri((function(e,t){const n=_g,r=vg.buildOptions;t.parse=function(e,t,i){if(i){!0===i&&(i={});const t=Hg(e,i);if(!0!==t)throw Error(t.err.msg)}t=r(t,n.defaultOptions,n.props);const o=_g.getTraversalObj(e,t);return gg.convertToJson(o,t)},t.convertTonimn=Zg.convert2nimn,t.getTraversalObj=_g.getTraversalObj,t.convertToJson=gg.convertToJson,t.convertToJsonString=ny.convertToJsonString,t.validate=Hg,t.j2xParser=my,t.parseToNimn=function(e,n,r){return t.convertTonimn(t.getTraversalObj(e,r),n,r)}})),yy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return nu(this,(function(d){switch(d.label){case 0:return r=[Zs({},e)],c={},[4,Lk(e.body,t)];case 1:switch(n=Zs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=Bk(e,n.body),o){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return a=[{}],[4,pb(n)];case 3:return i=Zs.apply(void 0,[Zs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:_k(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Zs(Zs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:_k(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},wy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},by=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return nu(this,(function(d){switch(d.label){case 0:return r=[Zs({},e)],c={},[4,Lk(e.body,t)];case 1:switch(n=Zs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=Bk(e,n.body),o){case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":return[3,2]}return[3,4];case 2:return a=[{}],[4,mb(n)];case 3:return i=Zs.apply(void 0,[Zs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:_k(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Zs(Zs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:_k(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},Sy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return r=[Zs({},e)],d={},[4,Lk(e.body,t)];case 1:switch(n=Zs.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=Bk(e,n.body),o){case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":return[3,2];case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":return[3,4]}return[3,6];case 2:return a=[{}],[4,ub(n)];case 3:return i=Zs.apply(void 0,[Zs.apply(void 0,a.concat([l.sent()])),{name:o,$metadata:_k(e)}]),[3,7];case 4:return s=[{}],[4,cb(n)];case 5:return i=Zs.apply(void 0,[Zs.apply(void 0,s.concat([l.sent()])),{name:o,$metadata:_k(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=Zs(Zs({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:_k(e)}),l.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},Ey=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},ky=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Cy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},xy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ty=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ny=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Oy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ay=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Py=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},_y=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Iy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},My=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ry=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ly=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},By=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Dy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},zy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},jy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Uy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Fy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},qy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ky=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Hy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Vy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},$y=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Gy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Wy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Yy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Qy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Xy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Jy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Zy=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},ew=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},tw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},nw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},rw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},iw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},ow=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},aw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return r=[Zs({},e)],d={},[4,Lk(e.body,t)];case 1:switch(n=Zs.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=Bk(e,n.body),o){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return a=[{}],[4,db(n)];case 3:return i=Zs.apply(void 0,[Zs.apply(void 0,a.concat([l.sent()])),{name:o,$metadata:_k(e)}]),[3,7];case 4:return s=[{}],[4,fb(n)];case 5:return i=Zs.apply(void 0,[Zs.apply(void 0,s.concat([l.sent()])),{name:o,$metadata:_k(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=Zs(Zs({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:_k(e)}),l.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},sw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return nu(this,(function(d){switch(d.label){case 0:return r=[Zs({},e)],c={},[4,Lk(e.body,t)];case 1:switch(n=Zs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=Bk(e,n.body),o){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return a=[{}],[4,fb(n)];case 3:return i=Zs.apply(void 0,[Zs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:_k(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Zs(Zs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:_k(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},uw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},cw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},dw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},lw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},fw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},pw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},hw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return nu(this,(function(d){switch(d.label){case 0:return r=[Zs({},e)],c={},[4,Lk(e.body,t)];case 1:switch(n=Zs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=Bk(e,n.body),o){case"NotFound":case"com.amazonaws.s3#NotFound":return[3,2]}return[3,4];case 2:return a=[{}],[4,hb(n)];case 3:return i=Zs.apply(void 0,[Zs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:_k(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Zs(Zs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:_k(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},vw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return nu(this,(function(d){switch(d.label){case 0:return r=[Zs({},e)],c={},[4,Lk(e.body,t)];case 1:switch(n=Zs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=Bk(e,n.body),o){case"NotFound":case"com.amazonaws.s3#NotFound":return[3,2]}return[3,4];case 2:return a=[{}],[4,hb(n)];case 3:return i=Zs.apply(void 0,[Zs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:_k(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Zs(Zs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:_k(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},mw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},gw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},yw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},ww=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},bw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Sw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ew=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return nu(this,(function(d){switch(d.label){case 0:return r=[Zs({},e)],c={},[4,Lk(e.body,t)];case 1:switch(n=Zs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=Bk(e,n.body),o){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return a=[{}],[4,lb(n)];case 3:return i=Zs.apply(void 0,[Zs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:_k(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Zs(Zs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:_k(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},kw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return nu(this,(function(d){switch(d.label){case 0:return r=[Zs({},e)],c={},[4,Lk(e.body,t)];case 1:switch(n=Zs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=Bk(e,n.body),o){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return a=[{}],[4,lb(n)];case 3:return i=Zs.apply(void 0,[Zs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:_k(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Zs(Zs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:_k(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},Cw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},xw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Tw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Nw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ow=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Aw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Pw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},_w=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Iw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Mw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Rw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Lw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Bw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Dw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},zw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},jw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Uw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Fw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},qw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Kw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Hw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Vw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return nu(this,(function(d){switch(d.label){case 0:return r=[Zs({},e)],c={},[4,Lk(e.body,t)];case 1:switch(n=Zs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=Bk(e,n.body),o){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return a=[{}],[4,fb(n)];case 3:return i=Zs.apply(void 0,[Zs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:_k(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Zs(Zs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:_k(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},$w=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Gw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ww=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Yw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Qw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Xw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return nu(this,(function(d){switch(d.label){case 0:return r=[Zs({},e)],c={},[4,Lk(e.body,t)];case 1:switch(n=Zs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=Bk(e,n.body),o){case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":return[3,2]}return[3,4];case 2:return a=[{}],[4,vb(n)];case 3:return i=Zs.apply(void 0,[Zs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:_k(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Zs(Zs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:_k(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},Jw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Zw=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},eb=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},tb=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return r=[Zs({},e)],u={},[4,Lk(e.body,t)];case 1:return n=Zs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=Bk(e,n.body),a=n.body,o=a.code||a.Code||o,i=Zs(Zs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:_k(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},nb=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a;return nu(this,(function(s){switch(s.label){case 0:return void 0===e.Records?[3,2]:(n={},[4,ab(e.Records)]);case 1:return[2,(n.Records=s.sent(),n)];case 2:return void 0===e.Stats?[3,4]:(r={},[4,sb(e.Stats,t)]);case 3:return[2,(r.Stats=s.sent(),r)];case 4:return void 0===e.Progress?[3,6]:(i={},[4,ob(e.Progress,t)]);case 5:return[2,(i.Progress=s.sent(),i)];case 6:return void 0===e.Cont?[3,8]:(o={},[4,rb(e.Cont)]);case 7:return[2,(o.Cont=s.sent(),o)];case 8:return void 0===e.End?[3,10]:(a={},[4,ib(e.End)]);case 9:return[2,(a.End=s.sent(),a)];case 10:return[2,{$unknown:e}]}}))}))},rb=function(e,t){return tu(void 0,void 0,void 0,(function(){return nu(this,(function(e){return[2,{}]}))}))},ib=function(e,t){return tu(void 0,void 0,void 0,(function(){return nu(this,(function(e){return[2,{}]}))}))},ob=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return r=n={},[4,Lk(e.body,t)];case 1:return r.Details=i.sent(),[2,n]}}))}))},ab=function(e,t){return tu(void 0,void 0,void 0,(function(){var t;return nu(this,(function(n){return(t={}).Payload=e.body,[2,t]}))}))},sb=function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return r=n={},[4,Lk(e.body,t)];case 1:return r.Details=i.sent(),[2,n]}}))}))},ub=function(e,t){return tu(void 0,void 0,void 0,(function(){var t;return nu(this,(function(n){return t={name:"BucketAlreadyExists",$fault:"client",$metadata:_k(e)},e.body,[2,t]}))}))},cb=function(e,t){return tu(void 0,void 0,void 0,(function(){var t;return nu(this,(function(n){return t={name:"BucketAlreadyOwnedByYou",$fault:"client",$metadata:_k(e)},e.body,[2,t]}))}))},db=function(e,t){return tu(void 0,void 0,void 0,(function(){var t,n;return nu(this,(function(r){return t={name:"InvalidObjectState",$fault:"client",$metadata:_k(e),AccessTier:void 0,StorageClass:void 0},void 0!==(n=e.body).AccessTier&&(t.AccessTier=mf(n.AccessTier)),void 0!==n.StorageClass&&(t.StorageClass=mf(n.StorageClass)),[2,t]}))}))},lb=function(e,t){return tu(void 0,void 0,void 0,(function(){var t;return nu(this,(function(n){return t={name:"NoSuchBucket",$fault:"client",$metadata:_k(e)},e.body,[2,t]}))}))},fb=function(e,t){return tu(void 0,void 0,void 0,(function(){var t;return nu(this,(function(n){return t={name:"NoSuchKey",$fault:"client",$metadata:_k(e)},e.body,[2,t]}))}))},pb=function(e,t){return tu(void 0,void 0,void 0,(function(){var t;return nu(this,(function(n){return t={name:"NoSuchUpload",$fault:"client",$metadata:_k(e)},e.body,[2,t]}))}))},hb=function(e,t){return tu(void 0,void 0,void 0,(function(){var t;return nu(this,(function(n){return t={name:"NotFound",$fault:"client",$metadata:_k(e)},e.body,[2,t]}))}))},vb=function(e,t){return tu(void 0,void 0,void 0,(function(){var t;return nu(this,(function(n){return t={name:"ObjectAlreadyInActiveTierError",$fault:"client",$metadata:_k(e)},e.body,[2,t]}))}))},mb=function(e,t){return tu(void 0,void 0,void 0,(function(){var t;return nu(this,(function(n){return t={name:"ObjectNotInActiveTierError",$fault:"client",$metadata:_k(e)},e.body,[2,t]}))}))},gb=function(e,t){var n=new ig("AccelerateConfiguration");if(void 0!==e.Status&&null!==e.Status){var r=new ig("BucketAccelerateStatus").addChildNode(new og(e.Status)).withName("Status");n.addChildNode(r)}return n},yb=function(e,t){var n=new ig("AccessControlPolicy");if(void 0!==e.Grants&&null!==e.Grants){var r=Db(e.Grants),i=new ig("AccessControlList");r.map((function(e){i.addChildNode(e)})),n.addChildNode(i)}if(void 0!==e.Owner&&null!==e.Owner){var o=fS(e.Owner).withName("Owner");n.addChildNode(o)}return n},wb=function(e,t){var n=new ig("AnalyticsConfiguration");if(void 0!==e.Id&&null!==e.Id){var r=new ig("AnalyticsId").addChildNode(new og(e.Id)).withName("Id");n.addChildNode(r)}if(void 0!==e.Filter&&null!==e.Filter){r=bb(e.Filter).withName("Filter");n.addChildNode(r)}if(void 0!==e.StorageClassAnalysis&&null!==e.StorageClassAnalysis){r=jS(e.StorageClassAnalysis).withName("StorageClassAnalysis");n.addChildNode(r)}return n},bb=function(e,t){var n=new ig("AnalyticsFilter");return Ep.visit(e,{Prefix:function(e){var t=new ig("Prefix").addChildNode(new og(e)).withName("Prefix");n.addChildNode(t)},Tag:function(e){var t=FS(e).withName("Tag");n.addChildNode(t)},And:function(e){var t=function(e,t){var n=new ig("AnalyticsAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var r=new ig("Prefix").addChildNode(new og(e.Prefix)).withName("Prefix");n.addChildNode(r)}return void 0!==e.Tags&&null!==e.Tags&&KS(e.Tags).map((function(e){e=e.withName("Tag"),n.addChildNode(e)})),n}(e).withName("And");n.addChildNode(t)},_:function(e,t){if(!(t instanceof ig||t instanceof og))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new ig(e).addChildNode(t))}}),n},Sb=function(e,t){var n=new ig("AnalyticsS3BucketDestination");if(void 0!==e.Format&&null!==e.Format){var r=new ig("AnalyticsS3ExportFileFormat").addChildNode(new og(e.Format)).withName("Format");n.addChildNode(r)}if(void 0!==e.BucketAccountId&&null!==e.BucketAccountId){r=new ig("AccountId").addChildNode(new og(e.BucketAccountId)).withName("BucketAccountId");n.addChildNode(r)}if(void 0!==e.Bucket&&null!==e.Bucket){r=new ig("BucketName").addChildNode(new og(e.Bucket)).withName("Bucket");n.addChildNode(r)}if(void 0!==e.Prefix&&null!==e.Prefix){r=new ig("Prefix").addChildNode(new og(e.Prefix)).withName("Prefix");n.addChildNode(r)}return n},Eb=function(e,t){var n=new ig("BucketLifecycleConfiguration");void 0!==e.Rules&&null!==e.Rules&&Xb(e.Rules).map((function(e){e=e.withName("Rule"),n.addChildNode(e)}));return n},kb=function(e,t){var n=new ig("BucketLoggingStatus");if(void 0!==e.LoggingEnabled&&null!==e.LoggingEnabled){var r=Jb(e.LoggingEnabled).withName("LoggingEnabled");n.addChildNode(r)}return n},Cb=function(e,t){var n=new ig("CompletedMultipartUpload");void 0!==e.Parts&&null!==e.Parts&&xb(e.Parts).map((function(e){e=e.withName("Part"),n.addChildNode(e)}));return n},xb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new ig("CompletedPart");if(void 0!==e.ETag&&null!==e.ETag){var r=new ig("ETag").addChildNode(new og(e.ETag)).withName("ETag");n.addChildNode(r)}void 0!==e.PartNumber&&null!==e.PartNumber&&(r=new ig("PartNumber").addChildNode(new og(String(e.PartNumber))).withName("PartNumber"),n.addChildNode(r));return n}(e).withName("member")}))},Tb=function(e,t){var n=new ig("CORSConfiguration");void 0!==e.CORSRules&&null!==e.CORSRules&&Ob(e.CORSRules).map((function(e){e=e.withName("CORSRule"),n.addChildNode(e)}));return n},Nb=function(e,t){var n=new ig("CORSRule");if(void 0!==e.ID&&null!==e.ID){var r=new ig("ID").addChildNode(new og(e.ID)).withName("ID");n.addChildNode(r)}void 0!==e.AllowedHeaders&&null!==e.AllowedHeaders&&function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:new ig("AllowedHeader").addChildNode(new og(e)).withName("member")}))}(e.AllowedHeaders).map((function(e){e=e.withName("AllowedHeader"),n.addChildNode(e)}));void 0!==e.AllowedMethods&&null!==e.AllowedMethods&&function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:new ig("AllowedMethod").addChildNode(new og(e)).withName("member")}))}(e.AllowedMethods).map((function(e){e=e.withName("AllowedMethod"),n.addChildNode(e)}));void 0!==e.AllowedOrigins&&null!==e.AllowedOrigins&&function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:new ig("AllowedOrigin").addChildNode(new og(e)).withName("member")}))}(e.AllowedOrigins).map((function(e){e=e.withName("AllowedOrigin"),n.addChildNode(e)}));void 0!==e.ExposeHeaders&&null!==e.ExposeHeaders&&Rb(e.ExposeHeaders).map((function(e){e=e.withName("ExposeHeader"),n.addChildNode(e)}));if(void 0!==e.MaxAgeSeconds&&null!==e.MaxAgeSeconds){r=new ig("MaxAgeSeconds").addChildNode(new og(String(e.MaxAgeSeconds))).withName("MaxAgeSeconds");n.addChildNode(r)}return n},Ob=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:Nb(e).withName("member")}))},Ab=function(e,t){var n=new ig("CreateBucketConfiguration");if(void 0!==e.LocationConstraint&&null!==e.LocationConstraint){var r=new ig("BucketLocationConstraint").addChildNode(new og(e.LocationConstraint)).withName("LocationConstraint");n.addChildNode(r)}return n},Pb=function(e,t){var n=new ig("Delete");void 0!==e.Objects&&null!==e.Objects&&aS(e.Objects).map((function(e){e=e.withName("Object"),n.addChildNode(e)}));if(void 0!==e.Quiet&&null!==e.Quiet){var r=new ig("Quiet").addChildNode(new og(String(e.Quiet))).withName("Quiet");n.addChildNode(r)}return n},_b=function(e,t){var n=new ig("Destination");if(void 0!==e.Bucket&&null!==e.Bucket){var r=new ig("BucketName").addChildNode(new og(e.Bucket)).withName("Bucket");n.addChildNode(r)}if(void 0!==e.Account&&null!==e.Account){r=new ig("AccountId").addChildNode(new og(e.Account)).withName("Account");n.addChildNode(r)}if(void 0!==e.StorageClass&&null!==e.StorageClass){r=new ig("StorageClass").addChildNode(new og(e.StorageClass)).withName("StorageClass");n.addChildNode(r)}if(void 0!==e.AccessControlTranslation&&null!==e.AccessControlTranslation){r=function(e,t){var n=new ig("AccessControlTranslation");if(void 0!==e.Owner&&null!==e.Owner){var r=new ig("OwnerOverride").addChildNode(new og(e.Owner)).withName("Owner");n.addChildNode(r)}return n}(e.AccessControlTranslation).withName("AccessControlTranslation");n.addChildNode(r)}if(void 0!==e.EncryptionConfiguration&&null!==e.EncryptionConfiguration){r=Ib(e.EncryptionConfiguration).withName("EncryptionConfiguration");n.addChildNode(r)}if(void 0!==e.ReplicationTime&&null!==e.ReplicationTime){r=ES(e.ReplicationTime).withName("ReplicationTime");n.addChildNode(r)}if(void 0!==e.Metrics&&null!==e.Metrics){r=Zb(e.Metrics).withName("Metrics");n.addChildNode(r)}return n},Ib=function(e,t){var n=new ig("EncryptionConfiguration");if(void 0!==e.ReplicaKmsKeyID&&null!==e.ReplicaKmsKeyID){var r=new ig("ReplicaKmsKeyID").addChildNode(new og(e.ReplicaKmsKeyID)).withName("ReplicaKmsKeyID");n.addChildNode(r)}return n},Mb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:new ig("Event").addChildNode(new og(e)).withName("member")}))},Rb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:new ig("ExposeHeader").addChildNode(new og(e)).withName("member")}))},Lb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new ig("FilterRule");if(void 0!==e.Name&&null!==e.Name){var r=new ig("FilterRuleName").addChildNode(new og(e.Name)).withName("Name");n.addChildNode(r)}void 0!==e.Value&&null!==e.Value&&(r=new ig("FilterRuleValue").addChildNode(new og(e.Value)).withName("Value"),n.addChildNode(r));return n}(e).withName("member")}))},Bb=function(e,t){var n=new ig("Grantee");if(void 0!==e.DisplayName&&null!==e.DisplayName){var r=new ig("DisplayName").addChildNode(new og(e.DisplayName)).withName("DisplayName");n.addChildNode(r)}if(void 0!==e.EmailAddress&&null!==e.EmailAddress){r=new ig("EmailAddress").addChildNode(new og(e.EmailAddress)).withName("EmailAddress");n.addChildNode(r)}if(void 0!==e.ID&&null!==e.ID){r=new ig("ID").addChildNode(new og(e.ID)).withName("ID");n.addChildNode(r)}if(void 0!==e.URI&&null!==e.URI){r=new ig("URI").addChildNode(new og(e.URI)).withName("URI");n.addChildNode(r)}return void 0!==e.Type&&null!==e.Type&&n.addAttribute("xsi:type",e.Type),n},Db=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new ig("Grant");if(void 0!==e.Grantee&&null!==e.Grantee&&((r=Bb(e.Grantee).withName("Grantee")).addAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),n.addChildNode(r)),void 0!==e.Permission&&null!==e.Permission){var r=new ig("Permission").addChildNode(new og(e.Permission)).withName("Permission");n.addChildNode(r)}return n}(e).withName("Grant")}))},zb=function(e,t){var n=new ig("InputSerialization");if(void 0!==e.CSV&&null!==e.CSV){var r=function(e,t){var n=new ig("CSVInput");if(void 0!==e.FileHeaderInfo&&null!==e.FileHeaderInfo){var r=new ig("FileHeaderInfo").addChildNode(new og(e.FileHeaderInfo)).withName("FileHeaderInfo");n.addChildNode(r)}void 0!==e.Comments&&null!==e.Comments&&(r=new ig("Comments").addChildNode(new og(e.Comments)).withName("Comments"),n.addChildNode(r));void 0!==e.QuoteEscapeCharacter&&null!==e.QuoteEscapeCharacter&&(r=new ig("QuoteEscapeCharacter").addChildNode(new og(e.QuoteEscapeCharacter)).withName("QuoteEscapeCharacter"),n.addChildNode(r));void 0!==e.RecordDelimiter&&null!==e.RecordDelimiter&&(r=new ig("RecordDelimiter").addChildNode(new og(e.RecordDelimiter)).withName("RecordDelimiter"),n.addChildNode(r));void 0!==e.FieldDelimiter&&null!==e.FieldDelimiter&&(r=new ig("FieldDelimiter").addChildNode(new og(e.FieldDelimiter)).withName("FieldDelimiter"),n.addChildNode(r));void 0!==e.QuoteCharacter&&null!==e.QuoteCharacter&&(r=new ig("QuoteCharacter").addChildNode(new og(e.QuoteCharacter)).withName("QuoteCharacter"),n.addChildNode(r));void 0!==e.AllowQuotedRecordDelimiter&&null!==e.AllowQuotedRecordDelimiter&&(r=new ig("AllowQuotedRecordDelimiter").addChildNode(new og(String(e.AllowQuotedRecordDelimiter))).withName("AllowQuotedRecordDelimiter"),n.addChildNode(r));return n}(e.CSV).withName("CSV");n.addChildNode(r)}if(void 0!==e.CompressionType&&null!==e.CompressionType){r=new ig("CompressionType").addChildNode(new og(e.CompressionType)).withName("CompressionType");n.addChildNode(r)}if(void 0!==e.JSON&&null!==e.JSON){r=Gb(e.JSON).withName("JSON");n.addChildNode(r)}if(void 0!==e.Parquet&&null!==e.Parquet){r=vS(e.Parquet).withName("Parquet");n.addChildNode(r)}return n},jb=function(e,t){var n=new ig("IntelligentTieringConfiguration");if(void 0!==e.Id&&null!==e.Id){var r=new ig("IntelligentTieringId").addChildNode(new og(e.Id)).withName("Id");n.addChildNode(r)}if(void 0!==e.Filter&&null!==e.Filter){r=Ub(e.Filter).withName("Filter");n.addChildNode(r)}if(void 0!==e.Status&&null!==e.Status){r=new ig("IntelligentTieringStatus").addChildNode(new og(e.Status)).withName("Status");n.addChildNode(r)}void 0!==e.Tierings&&null!==e.Tierings&&VS(e.Tierings).map((function(e){e=e.withName("Tiering"),n.addChildNode(e)}));return n},Ub=function(e,t){var n=new ig("IntelligentTieringFilter");if(void 0!==e.Prefix&&null!==e.Prefix){var r=new ig("Prefix").addChildNode(new og(e.Prefix)).withName("Prefix");n.addChildNode(r)}if(void 0!==e.Tag&&null!==e.Tag){r=FS(e.Tag).withName("Tag");n.addChildNode(r)}if(void 0!==e.And&&null!==e.And){r=function(e,t){var n=new ig("IntelligentTieringAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var r=new ig("Prefix").addChildNode(new og(e.Prefix)).withName("Prefix");n.addChildNode(r)}return void 0!==e.Tags&&null!==e.Tags&&KS(e.Tags).map((function(e){e=e.withName("Tag"),n.addChildNode(e)})),n}(e.And).withName("And");n.addChildNode(r)}return n},Fb=function(e,t){var n=new ig("InventoryConfiguration");if(void 0!==e.Destination&&null!==e.Destination){var r=qb(e.Destination).withName("Destination");n.addChildNode(r)}if(void 0!==e.IsEnabled&&null!==e.IsEnabled){r=new ig("IsEnabled").addChildNode(new og(String(e.IsEnabled))).withName("IsEnabled");n.addChildNode(r)}if(void 0!==e.Filter&&null!==e.Filter){r=Kb(e.Filter).withName("Filter");n.addChildNode(r)}if(void 0!==e.Id&&null!==e.Id){r=new ig("InventoryId").addChildNode(new og(e.Id)).withName("Id");n.addChildNode(r)}if(void 0!==e.IncludedObjectVersions&&null!==e.IncludedObjectVersions){r=new ig("InventoryIncludedObjectVersions").addChildNode(new og(e.IncludedObjectVersions)).withName("IncludedObjectVersions");n.addChildNode(r)}if(void 0!==e.OptionalFields&&null!==e.OptionalFields){var i=Hb(e.OptionalFields),o=new ig("OptionalFields");i.map((function(e){o.addChildNode(e)})),n.addChildNode(o)}if(void 0!==e.Schedule&&null!==e.Schedule){r=$b(e.Schedule).withName("Schedule");n.addChildNode(r)}return n},qb=function(e,t){var n=new ig("InventoryDestination");if(void 0!==e.S3BucketDestination&&null!==e.S3BucketDestination){var r=Vb(e.S3BucketDestination).withName("S3BucketDestination");n.addChildNode(r)}return n},Kb=function(e,t){var n=new ig("InventoryFilter");if(void 0!==e.Prefix&&null!==e.Prefix){var r=new ig("Prefix").addChildNode(new og(e.Prefix)).withName("Prefix");n.addChildNode(r)}return n},Hb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:new ig("InventoryOptionalField").addChildNode(new og(e)).withName("Field")}))},Vb=function(e,t){var n=new ig("InventoryS3BucketDestination");if(void 0!==e.AccountId&&null!==e.AccountId){var r=new ig("AccountId").addChildNode(new og(e.AccountId)).withName("AccountId");n.addChildNode(r)}if(void 0!==e.Bucket&&null!==e.Bucket){r=new ig("BucketName").addChildNode(new og(e.Bucket)).withName("Bucket");n.addChildNode(r)}if(void 0!==e.Format&&null!==e.Format){r=new ig("InventoryFormat").addChildNode(new og(e.Format)).withName("Format");n.addChildNode(r)}if(void 0!==e.Prefix&&null!==e.Prefix){r=new ig("Prefix").addChildNode(new og(e.Prefix)).withName("Prefix");n.addChildNode(r)}if(void 0!==e.Encryption&&null!==e.Encryption){r=function(e,t){var n=new ig("InventoryEncryption");if(void 0!==e.SSES3&&null!==e.SSES3){var r=zS(e.SSES3).withName("SSE-S3");n.addChildNode(r)}void 0!==e.SSEKMS&&null!==e.SSEKMS&&(r=BS(e.SSEKMS).withName("SSE-KMS"),n.addChildNode(r));return n}(e.Encryption).withName("Encryption");n.addChildNode(r)}return n},$b=function(e,t){var n=new ig("InventorySchedule");if(void 0!==e.Frequency&&null!==e.Frequency){var r=new ig("InventoryFrequency").addChildNode(new og(e.Frequency)).withName("Frequency");n.addChildNode(r)}return n},Gb=function(e,t){var n=new ig("JSONInput");if(void 0!==e.Type&&null!==e.Type){var r=new ig("JSONType").addChildNode(new og(e.Type)).withName("Type");n.addChildNode(r)}return n},Wb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new ig("LambdaFunctionConfiguration");if(void 0!==e.Id&&null!==e.Id){var r=new ig("NotificationId").addChildNode(new og(e.Id)).withName("Id");n.addChildNode(r)}void 0!==e.LambdaFunctionArn&&null!==e.LambdaFunctionArn&&(r=new ig("LambdaFunctionArn").addChildNode(new og(e.LambdaFunctionArn)).withName("CloudFunction"),n.addChildNode(r));void 0!==e.Events&&null!==e.Events&&Mb(e.Events).map((function(e){e=e.withName("Event"),n.addChildNode(e)})),void 0!==e.Filter&&null!==e.Filter&&(r=oS(e.Filter).withName("Filter"),n.addChildNode(r));return n}(e).withName("member")}))},Yb=function(e,t){var n=new ig("LifecycleRule");if(void 0!==e.Expiration&&null!==e.Expiration){var r=function(e,t){var n=new ig("LifecycleExpiration");if(void 0!==e.Date&&null!==e.Date){var r=new ig("Date").addChildNode(new og(e.Date.toISOString().split(".")[0]+"Z")).withName("Date");n.addChildNode(r)}void 0!==e.Days&&null!==e.Days&&(r=new ig("Days").addChildNode(new og(String(e.Days))).withName("Days"),n.addChildNode(r));void 0!==e.ExpiredObjectDeleteMarker&&null!==e.ExpiredObjectDeleteMarker&&(r=new ig("ExpiredObjectDeleteMarker").addChildNode(new og(String(e.ExpiredObjectDeleteMarker))).withName("ExpiredObjectDeleteMarker"),n.addChildNode(r));return n}(e.Expiration).withName("Expiration");n.addChildNode(r)}if(void 0!==e.ID&&null!==e.ID){r=new ig("ID").addChildNode(new og(e.ID)).withName("ID");n.addChildNode(r)}if(void 0!==e.Prefix&&null!==e.Prefix){r=new ig("Prefix").addChildNode(new og(e.Prefix)).withName("Prefix");n.addChildNode(r)}if(void 0!==e.Filter&&null!==e.Filter){r=Qb(e.Filter).withName("Filter");n.addChildNode(r)}if(void 0!==e.Status&&null!==e.Status){r=new ig("ExpirationStatus").addChildNode(new og(e.Status)).withName("Status");n.addChildNode(r)}void 0!==e.Transitions&&null!==e.Transitions&&GS(e.Transitions).map((function(e){e=e.withName("Transition"),n.addChildNode(e)}));void 0!==e.NoncurrentVersionTransitions&&null!==e.NoncurrentVersionTransitions&&rS(e.NoncurrentVersionTransitions).map((function(e){e=e.withName("NoncurrentVersionTransition"),n.addChildNode(e)}));if(void 0!==e.NoncurrentVersionExpiration&&null!==e.NoncurrentVersionExpiration){r=nS(e.NoncurrentVersionExpiration).withName("NoncurrentVersionExpiration");n.addChildNode(r)}if(void 0!==e.AbortIncompleteMultipartUpload&&null!==e.AbortIncompleteMultipartUpload){r=function(e,t){var n=new ig("AbortIncompleteMultipartUpload");if(void 0!==e.DaysAfterInitiation&&null!==e.DaysAfterInitiation){var r=new ig("DaysAfterInitiation").addChildNode(new og(String(e.DaysAfterInitiation))).withName("DaysAfterInitiation");n.addChildNode(r)}return n}(e.AbortIncompleteMultipartUpload).withName("AbortIncompleteMultipartUpload");n.addChildNode(r)}return n},Qb=function(e,t){var n=new ig("LifecycleRuleFilter");return nh.visit(e,{Prefix:function(e){var t=new ig("Prefix").addChildNode(new og(e)).withName("Prefix");n.addChildNode(t)},Tag:function(e){var t=FS(e).withName("Tag");n.addChildNode(t)},And:function(e){var t=function(e,t){var n=new ig("LifecycleRuleAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var r=new ig("Prefix").addChildNode(new og(e.Prefix)).withName("Prefix");n.addChildNode(r)}return void 0!==e.Tags&&null!==e.Tags&&KS(e.Tags).map((function(e){e=e.withName("Tag"),n.addChildNode(e)})),n}(e).withName("And");n.addChildNode(t)},_:function(e,t){if(!(t instanceof ig||t instanceof og))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new ig(e).addChildNode(t))}}),n},Xb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:Yb(e).withName("member")}))},Jb=function(e,t){var n=new ig("LoggingEnabled");if(void 0!==e.TargetBucket&&null!==e.TargetBucket){var r=new ig("TargetBucket").addChildNode(new og(e.TargetBucket)).withName("TargetBucket");n.addChildNode(r)}if(void 0!==e.TargetGrants&&null!==e.TargetGrants){var i=HS(e.TargetGrants),o=new ig("TargetGrants");i.map((function(e){o.addChildNode(e)})),n.addChildNode(o)}if(void 0!==e.TargetPrefix&&null!==e.TargetPrefix){r=new ig("TargetPrefix").addChildNode(new og(e.TargetPrefix)).withName("TargetPrefix");n.addChildNode(r)}return n},Zb=function(e,t){var n=new ig("Metrics");if(void 0!==e.Status&&null!==e.Status){var r=new ig("MetricsStatus").addChildNode(new og(e.Status)).withName("Status");n.addChildNode(r)}if(void 0!==e.EventThreshold&&null!==e.EventThreshold){r=kS(e.EventThreshold).withName("EventThreshold");n.addChildNode(r)}return n},eS=function(e,t){var n=new ig("MetricsConfiguration");if(void 0!==e.Id&&null!==e.Id){var r=new ig("MetricsId").addChildNode(new og(e.Id)).withName("Id");n.addChildNode(r)}if(void 0!==e.Filter&&null!==e.Filter){r=tS(e.Filter).withName("Filter");n.addChildNode(r)}return n},tS=function(e,t){var n=new ig("MetricsFilter");return mh.visit(e,{Prefix:function(e){var t=new ig("Prefix").addChildNode(new og(e)).withName("Prefix");n.addChildNode(t)},Tag:function(e){var t=FS(e).withName("Tag");n.addChildNode(t)},And:function(e){var t=function(e,t){var n=new ig("MetricsAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var r=new ig("Prefix").addChildNode(new og(e.Prefix)).withName("Prefix");n.addChildNode(r)}return void 0!==e.Tags&&null!==e.Tags&&KS(e.Tags).map((function(e){e=e.withName("Tag"),n.addChildNode(e)})),n}(e).withName("And");n.addChildNode(t)},_:function(e,t){if(!(t instanceof ig||t instanceof og))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new ig(e).addChildNode(t))}}),n},nS=function(e,t){var n=new ig("NoncurrentVersionExpiration");if(void 0!==e.NoncurrentDays&&null!==e.NoncurrentDays){var r=new ig("Days").addChildNode(new og(String(e.NoncurrentDays))).withName("NoncurrentDays");n.addChildNode(r)}return n},rS=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new ig("NoncurrentVersionTransition");if(void 0!==e.NoncurrentDays&&null!==e.NoncurrentDays){var r=new ig("Days").addChildNode(new og(String(e.NoncurrentDays))).withName("NoncurrentDays");n.addChildNode(r)}void 0!==e.StorageClass&&null!==e.StorageClass&&(r=new ig("TransitionStorageClass").addChildNode(new og(e.StorageClass)).withName("StorageClass"),n.addChildNode(r));return n}(e).withName("member")}))},iS=function(e,t){var n=new ig("NotificationConfiguration");void 0!==e.TopicConfigurations&&null!==e.TopicConfigurations&&$S(e.TopicConfigurations).map((function(e){e=e.withName("TopicConfiguration"),n.addChildNode(e)}));void 0!==e.QueueConfigurations&&null!==e.QueueConfigurations&&gS(e.QueueConfigurations).map((function(e){e=e.withName("QueueConfiguration"),n.addChildNode(e)}));void 0!==e.LambdaFunctionConfigurations&&null!==e.LambdaFunctionConfigurations&&Wb(e.LambdaFunctionConfigurations).map((function(e){e=e.withName("CloudFunctionConfiguration"),n.addChildNode(e)}));return n},oS=function(e,t){var n=new ig("NotificationConfigurationFilter");if(void 0!==e.Key&&null!==e.Key){var r=OS(e.Key).withName("S3Key");n.addChildNode(r)}return n},aS=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new ig("ObjectIdentifier");if(void 0!==e.Key&&null!==e.Key){var r=new ig("ObjectKey").addChildNode(new og(e.Key)).withName("Key");n.addChildNode(r)}void 0!==e.VersionId&&null!==e.VersionId&&(r=new ig("ObjectVersionId").addChildNode(new og(e.VersionId)).withName("VersionId"),n.addChildNode(r));return n}(e).withName("member")}))},sS=function(e,t){var n=new ig("ObjectLockConfiguration");if(void 0!==e.ObjectLockEnabled&&null!==e.ObjectLockEnabled){var r=new ig("ObjectLockEnabled").addChildNode(new og(e.ObjectLockEnabled)).withName("ObjectLockEnabled");n.addChildNode(r)}if(void 0!==e.Rule&&null!==e.Rule){r=dS(e.Rule).withName("Rule");n.addChildNode(r)}return n},uS=function(e,t){var n=new ig("ObjectLockLegalHold");if(void 0!==e.Status&&null!==e.Status){var r=new ig("ObjectLockLegalHoldStatus").addChildNode(new og(e.Status)).withName("Status");n.addChildNode(r)}return n},cS=function(e,t){var n=new ig("ObjectLockRetention");if(void 0!==e.Mode&&null!==e.Mode){var r=new ig("ObjectLockRetentionMode").addChildNode(new og(e.Mode)).withName("Mode");n.addChildNode(r)}if(void 0!==e.RetainUntilDate&&null!==e.RetainUntilDate){r=new ig("Date").addChildNode(new og(e.RetainUntilDate.toISOString().split(".")[0]+"Z")).withName("RetainUntilDate");n.addChildNode(r)}return n},dS=function(e,t){var n=new ig("ObjectLockRule");if(void 0!==e.DefaultRetention&&null!==e.DefaultRetention){var r=function(e,t){var n=new ig("DefaultRetention");if(void 0!==e.Mode&&null!==e.Mode){var r=new ig("ObjectLockRetentionMode").addChildNode(new og(e.Mode)).withName("Mode");n.addChildNode(r)}void 0!==e.Days&&null!==e.Days&&(r=new ig("Days").addChildNode(new og(String(e.Days))).withName("Days"),n.addChildNode(r));void 0!==e.Years&&null!==e.Years&&(r=new ig("Years").addChildNode(new og(String(e.Years))).withName("Years"),n.addChildNode(r));return n}(e.DefaultRetention).withName("DefaultRetention");n.addChildNode(r)}return n},lS=function(e,t){var n=new ig("OutputSerialization");if(void 0!==e.CSV&&null!==e.CSV){var r=function(e,t){var n=new ig("CSVOutput");if(void 0!==e.QuoteFields&&null!==e.QuoteFields){var r=new ig("QuoteFields").addChildNode(new og(e.QuoteFields)).withName("QuoteFields");n.addChildNode(r)}void 0!==e.QuoteEscapeCharacter&&null!==e.QuoteEscapeCharacter&&(r=new ig("QuoteEscapeCharacter").addChildNode(new og(e.QuoteEscapeCharacter)).withName("QuoteEscapeCharacter"),n.addChildNode(r));void 0!==e.RecordDelimiter&&null!==e.RecordDelimiter&&(r=new ig("RecordDelimiter").addChildNode(new og(e.RecordDelimiter)).withName("RecordDelimiter"),n.addChildNode(r));void 0!==e.FieldDelimiter&&null!==e.FieldDelimiter&&(r=new ig("FieldDelimiter").addChildNode(new og(e.FieldDelimiter)).withName("FieldDelimiter"),n.addChildNode(r));void 0!==e.QuoteCharacter&&null!==e.QuoteCharacter&&(r=new ig("QuoteCharacter").addChildNode(new og(e.QuoteCharacter)).withName("QuoteCharacter"),n.addChildNode(r));return n}(e.CSV).withName("CSV");n.addChildNode(r)}if(void 0!==e.JSON&&null!==e.JSON){r=function(e,t){var n=new ig("JSONOutput");if(void 0!==e.RecordDelimiter&&null!==e.RecordDelimiter){var r=new ig("RecordDelimiter").addChildNode(new og(e.RecordDelimiter)).withName("RecordDelimiter");n.addChildNode(r)}return n}(e.JSON).withName("JSON");n.addChildNode(r)}return n},fS=function(e,t){var n=new ig("Owner");if(void 0!==e.DisplayName&&null!==e.DisplayName){var r=new ig("DisplayName").addChildNode(new og(e.DisplayName)).withName("DisplayName");n.addChildNode(r)}if(void 0!==e.ID&&null!==e.ID){r=new ig("ID").addChildNode(new og(e.ID)).withName("ID");n.addChildNode(r)}return n},pS=function(e,t){var n=new ig("OwnershipControls");void 0!==e.Rules&&null!==e.Rules&&hS(e.Rules).map((function(e){e=e.withName("Rule"),n.addChildNode(e)}));return n},hS=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new ig("OwnershipControlsRule");if(void 0!==e.ObjectOwnership&&null!==e.ObjectOwnership){var r=new ig("ObjectOwnership").addChildNode(new og(e.ObjectOwnership)).withName("ObjectOwnership");n.addChildNode(r)}return n}(e).withName("member")}))},vS=function(e,t){return new ig("ParquetInput")},mS=function(e,t){var n=new ig("PublicAccessBlockConfiguration");if(void 0!==e.BlockPublicAcls&&null!==e.BlockPublicAcls){var r=new ig("Setting").addChildNode(new og(String(e.BlockPublicAcls))).withName("BlockPublicAcls");n.addChildNode(r)}if(void 0!==e.IgnorePublicAcls&&null!==e.IgnorePublicAcls){r=new ig("Setting").addChildNode(new og(String(e.IgnorePublicAcls))).withName("IgnorePublicAcls");n.addChildNode(r)}if(void 0!==e.BlockPublicPolicy&&null!==e.BlockPublicPolicy){r=new ig("Setting").addChildNode(new og(String(e.BlockPublicPolicy))).withName("BlockPublicPolicy");n.addChildNode(r)}if(void 0!==e.RestrictPublicBuckets&&null!==e.RestrictPublicBuckets){r=new ig("Setting").addChildNode(new og(String(e.RestrictPublicBuckets))).withName("RestrictPublicBuckets");n.addChildNode(r)}return n},gS=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new ig("QueueConfiguration");if(void 0!==e.Id&&null!==e.Id){var r=new ig("NotificationId").addChildNode(new og(e.Id)).withName("Id");n.addChildNode(r)}void 0!==e.QueueArn&&null!==e.QueueArn&&(r=new ig("QueueArn").addChildNode(new og(e.QueueArn)).withName("Queue"),n.addChildNode(r));void 0!==e.Events&&null!==e.Events&&Mb(e.Events).map((function(e){e=e.withName("Event"),n.addChildNode(e)})),void 0!==e.Filter&&null!==e.Filter&&(r=oS(e.Filter).withName("Filter"),n.addChildNode(r));return n}(e).withName("member")}))},yS=function(e,t){var n=new ig("ReplicationConfiguration");if(void 0!==e.Role&&null!==e.Role){var r=new ig("Role").addChildNode(new og(e.Role)).withName("Role");n.addChildNode(r)}void 0!==e.Rules&&null!==e.Rules&&SS(e.Rules).map((function(e){e=e.withName("Rule"),n.addChildNode(e)}));return n},wS=function(e,t){var n=new ig("ReplicationRule");if(void 0!==e.ID&&null!==e.ID){var r=new ig("ID").addChildNode(new og(e.ID)).withName("ID");n.addChildNode(r)}if(void 0!==e.Priority&&null!==e.Priority){r=new ig("Priority").addChildNode(new og(String(e.Priority))).withName("Priority");n.addChildNode(r)}if(void 0!==e.Prefix&&null!==e.Prefix){r=new ig("Prefix").addChildNode(new og(e.Prefix)).withName("Prefix");n.addChildNode(r)}if(void 0!==e.Filter&&null!==e.Filter){r=bS(e.Filter).withName("Filter");n.addChildNode(r)}if(void 0!==e.Status&&null!==e.Status){r=new ig("ReplicationRuleStatus").addChildNode(new og(e.Status)).withName("Status");n.addChildNode(r)}if(void 0!==e.SourceSelectionCriteria&&null!==e.SourceSelectionCriteria){r=LS(e.SourceSelectionCriteria).withName("SourceSelectionCriteria");n.addChildNode(r)}if(void 0!==e.ExistingObjectReplication&&null!==e.ExistingObjectReplication){r=function(e,t){var n=new ig("ExistingObjectReplication");if(void 0!==e.Status&&null!==e.Status){var r=new ig("ExistingObjectReplicationStatus").addChildNode(new og(e.Status)).withName("Status");n.addChildNode(r)}return n}(e.ExistingObjectReplication).withName("ExistingObjectReplication");n.addChildNode(r)}if(void 0!==e.Destination&&null!==e.Destination){r=_b(e.Destination).withName("Destination");n.addChildNode(r)}if(void 0!==e.DeleteMarkerReplication&&null!==e.DeleteMarkerReplication){r=function(e,t){var n=new ig("DeleteMarkerReplication");if(void 0!==e.Status&&null!==e.Status){var r=new ig("DeleteMarkerReplicationStatus").addChildNode(new og(e.Status)).withName("Status");n.addChildNode(r)}return n}(e.DeleteMarkerReplication).withName("DeleteMarkerReplication");n.addChildNode(r)}return n},bS=function(e,t){var n=new ig("ReplicationRuleFilter");return Vh.visit(e,{Prefix:function(e){var t=new ig("Prefix").addChildNode(new og(e)).withName("Prefix");n.addChildNode(t)},Tag:function(e){var t=FS(e).withName("Tag");n.addChildNode(t)},And:function(e){var t=function(e,t){var n=new ig("ReplicationRuleAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var r=new ig("Prefix").addChildNode(new og(e.Prefix)).withName("Prefix");n.addChildNode(r)}return void 0!==e.Tags&&null!==e.Tags&&KS(e.Tags).map((function(e){e=e.withName("Tag"),n.addChildNode(e)})),n}(e).withName("And");n.addChildNode(t)},_:function(e,t){if(!(t instanceof ig||t instanceof og))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new ig(e).addChildNode(t))}}),n},SS=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:wS(e).withName("member")}))},ES=function(e,t){var n=new ig("ReplicationTime");if(void 0!==e.Status&&null!==e.Status){var r=new ig("ReplicationTimeStatus").addChildNode(new og(e.Status)).withName("Status");n.addChildNode(r)}if(void 0!==e.Time&&null!==e.Time){r=kS(e.Time).withName("Time");n.addChildNode(r)}return n},kS=function(e,t){var n=new ig("ReplicationTimeValue");if(void 0!==e.Minutes&&null!==e.Minutes){var r=new ig("Minutes").addChildNode(new og(String(e.Minutes))).withName("Minutes");n.addChildNode(r)}return n},CS=function(e,t){var n=new ig("RequestPaymentConfiguration");if(void 0!==e.Payer&&null!==e.Payer){var r=new ig("Payer").addChildNode(new og(e.Payer)).withName("Payer");n.addChildNode(r)}return n},xS=function(e,t){var n=new ig("RequestProgress");if(void 0!==e.Enabled&&null!==e.Enabled){var r=new ig("EnableRequestProgress").addChildNode(new og(String(e.Enabled))).withName("Enabled");n.addChildNode(r)}return n},TS=function(e,t){var n=new ig("RestoreRequest");if(void 0!==e.Days&&null!==e.Days){var r=new ig("Days").addChildNode(new og(String(e.Days))).withName("Days");n.addChildNode(r)}if(void 0!==e.GlacierJobParameters&&null!==e.GlacierJobParameters){r=function(e,t){var n=new ig("GlacierJobParameters");if(void 0!==e.Tier&&null!==e.Tier){var r=new ig("Tier").addChildNode(new og(e.Tier)).withName("Tier");n.addChildNode(r)}return n}(e.GlacierJobParameters).withName("GlacierJobParameters");n.addChildNode(r)}if(void 0!==e.Type&&null!==e.Type){r=new ig("RestoreRequestType").addChildNode(new og(e.Type)).withName("Type");n.addChildNode(r)}if(void 0!==e.Tier&&null!==e.Tier){r=new ig("Tier").addChildNode(new og(e.Tier)).withName("Tier");n.addChildNode(r)}if(void 0!==e.Description&&null!==e.Description){r=new ig("Description").addChildNode(new og(e.Description)).withName("Description");n.addChildNode(r)}if(void 0!==e.SelectParameters&&null!==e.SelectParameters){r=_S(e.SelectParameters).withName("SelectParameters");n.addChildNode(r)}if(void 0!==e.OutputLocation&&null!==e.OutputLocation){r=function(e,t){var n=new ig("OutputLocation");if(void 0!==e.S3&&null!==e.S3){var r=AS(e.S3).withName("S3");n.addChildNode(r)}return n}(e.OutputLocation).withName("OutputLocation");n.addChildNode(r)}return n},NS=function(e,t){var n=new ig("RoutingRule");if(void 0!==e.Condition&&null!==e.Condition){var r=function(e,t){var n=new ig("Condition");if(void 0!==e.HttpErrorCodeReturnedEquals&&null!==e.HttpErrorCodeReturnedEquals){var r=new ig("HttpErrorCodeReturnedEquals").addChildNode(new og(e.HttpErrorCodeReturnedEquals)).withName("HttpErrorCodeReturnedEquals");n.addChildNode(r)}void 0!==e.KeyPrefixEquals&&null!==e.KeyPrefixEquals&&(r=new ig("KeyPrefixEquals").addChildNode(new og(e.KeyPrefixEquals)).withName("KeyPrefixEquals"),n.addChildNode(r));return n}(e.Condition).withName("Condition");n.addChildNode(r)}if(void 0!==e.Redirect&&null!==e.Redirect){r=function(e,t){var n=new ig("Redirect");if(void 0!==e.HostName&&null!==e.HostName){var r=new ig("HostName").addChildNode(new og(e.HostName)).withName("HostName");n.addChildNode(r)}void 0!==e.HttpRedirectCode&&null!==e.HttpRedirectCode&&(r=new ig("HttpRedirectCode").addChildNode(new og(e.HttpRedirectCode)).withName("HttpRedirectCode"),n.addChildNode(r));void 0!==e.Protocol&&null!==e.Protocol&&(r=new ig("Protocol").addChildNode(new og(e.Protocol)).withName("Protocol"),n.addChildNode(r));void 0!==e.ReplaceKeyPrefixWith&&null!==e.ReplaceKeyPrefixWith&&(r=new ig("ReplaceKeyPrefixWith").addChildNode(new og(e.ReplaceKeyPrefixWith)).withName("ReplaceKeyPrefixWith"),n.addChildNode(r));void 0!==e.ReplaceKeyWith&&null!==e.ReplaceKeyWith&&(r=new ig("ReplaceKeyWith").addChildNode(new og(e.ReplaceKeyWith)).withName("ReplaceKeyWith"),n.addChildNode(r));return n}(e.Redirect).withName("Redirect");n.addChildNode(r)}return n},OS=function(e,t){var n=new ig("S3KeyFilter");void 0!==e.FilterRules&&null!==e.FilterRules&&Lb(e.FilterRules).map((function(e){e=e.withName("FilterRule"),n.addChildNode(e)}));return n},AS=function(e,t){var n=new ig("S3Location");if(void 0!==e.BucketName&&null!==e.BucketName){var r=new ig("BucketName").addChildNode(new og(e.BucketName)).withName("BucketName");n.addChildNode(r)}if(void 0!==e.Prefix&&null!==e.Prefix){r=new ig("LocationPrefix").addChildNode(new og(e.Prefix)).withName("Prefix");n.addChildNode(r)}if(void 0!==e.Encryption&&null!==e.Encryption){r=function(e,t){var n=new ig("Encryption");if(void 0!==e.EncryptionType&&null!==e.EncryptionType){var r=new ig("ServerSideEncryption").addChildNode(new og(e.EncryptionType)).withName("EncryptionType");n.addChildNode(r)}void 0!==e.KMSKeyId&&null!==e.KMSKeyId&&(r=new ig("SSEKMSKeyId").addChildNode(new og(e.KMSKeyId)).withName("KMSKeyId"),n.addChildNode(r));void 0!==e.KMSContext&&null!==e.KMSContext&&(r=new ig("KMSContext").addChildNode(new og(e.KMSContext)).withName("KMSContext"),n.addChildNode(r));return n}(e.Encryption).withName("Encryption");n.addChildNode(r)}if(void 0!==e.CannedACL&&null!==e.CannedACL){r=new ig("ObjectCannedACL").addChildNode(new og(e.CannedACL)).withName("CannedACL");n.addChildNode(r)}if(void 0!==e.AccessControlList&&null!==e.AccessControlList){var i=Db(e.AccessControlList),o=new ig("AccessControlList");i.map((function(e){o.addChildNode(e)})),n.addChildNode(o)}if(void 0!==e.Tagging&&null!==e.Tagging){r=qS(e.Tagging).withName("Tagging");n.addChildNode(r)}if(void 0!==e.UserMetadata&&null!==e.UserMetadata){i=WS(e.UserMetadata);var a=new ig("UserMetadata");i.map((function(e){a.addChildNode(e)})),n.addChildNode(a)}if(void 0!==e.StorageClass&&null!==e.StorageClass){r=new ig("StorageClass").addChildNode(new og(e.StorageClass)).withName("StorageClass");n.addChildNode(r)}return n},PS=function(e,t){var n=new ig("ScanRange");if(void 0!==e.Start&&null!==e.Start){var r=new ig("Start").addChildNode(new og(String(e.Start))).withName("Start");n.addChildNode(r)}if(void 0!==e.End&&null!==e.End){r=new ig("End").addChildNode(new og(String(e.End))).withName("End");n.addChildNode(r)}return n},_S=function(e,t){var n=new ig("SelectParameters");if(void 0!==e.InputSerialization&&null!==e.InputSerialization){var r=zb(e.InputSerialization).withName("InputSerialization");n.addChildNode(r)}if(void 0!==e.ExpressionType&&null!==e.ExpressionType){r=new ig("ExpressionType").addChildNode(new og(e.ExpressionType)).withName("ExpressionType");n.addChildNode(r)}if(void 0!==e.Expression&&null!==e.Expression){r=new ig("Expression").addChildNode(new og(e.Expression)).withName("Expression");n.addChildNode(r)}if(void 0!==e.OutputSerialization&&null!==e.OutputSerialization){r=lS(e.OutputSerialization).withName("OutputSerialization");n.addChildNode(r)}return n},IS=function(e,t){var n=new ig("ServerSideEncryptionConfiguration");void 0!==e.Rules&&null!==e.Rules&&RS(e.Rules).map((function(e){e=e.withName("Rule"),n.addChildNode(e)}));return n},MS=function(e,t){var n=new ig("ServerSideEncryptionRule");if(void 0!==e.ApplyServerSideEncryptionByDefault&&null!==e.ApplyServerSideEncryptionByDefault){var r=function(e,t){var n=new ig("ServerSideEncryptionByDefault");if(void 0!==e.SSEAlgorithm&&null!==e.SSEAlgorithm){var r=new ig("ServerSideEncryption").addChildNode(new og(e.SSEAlgorithm)).withName("SSEAlgorithm");n.addChildNode(r)}void 0!==e.KMSMasterKeyID&&null!==e.KMSMasterKeyID&&(r=new ig("SSEKMSKeyId").addChildNode(new og(e.KMSMasterKeyID)).withName("KMSMasterKeyID"),n.addChildNode(r));return n}(e.ApplyServerSideEncryptionByDefault).withName("ApplyServerSideEncryptionByDefault");n.addChildNode(r)}if(void 0!==e.BucketKeyEnabled&&null!==e.BucketKeyEnabled){r=new ig("BucketKeyEnabled").addChildNode(new og(String(e.BucketKeyEnabled))).withName("BucketKeyEnabled");n.addChildNode(r)}return n},RS=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:MS(e).withName("member")}))},LS=function(e,t){var n=new ig("SourceSelectionCriteria");if(void 0!==e.SseKmsEncryptedObjects&&null!==e.SseKmsEncryptedObjects){var r=DS(e.SseKmsEncryptedObjects).withName("SseKmsEncryptedObjects");n.addChildNode(r)}if(void 0!==e.ReplicaModifications&&null!==e.ReplicaModifications){r=function(e,t){var n=new ig("ReplicaModifications");if(void 0!==e.Status&&null!==e.Status){var r=new ig("ReplicaModificationsStatus").addChildNode(new og(e.Status)).withName("Status");n.addChildNode(r)}return n}(e.ReplicaModifications).withName("ReplicaModifications");n.addChildNode(r)}return n},BS=function(e,t){var n=new ig("SSE-KMS");if(void 0!==e.KeyId&&null!==e.KeyId){var r=new ig("SSEKMSKeyId").addChildNode(new og(e.KeyId)).withName("KeyId");n.addChildNode(r)}return n},DS=function(e,t){var n=new ig("SseKmsEncryptedObjects");if(void 0!==e.Status&&null!==e.Status){var r=new ig("SseKmsEncryptedObjectsStatus").addChildNode(new og(e.Status)).withName("Status");n.addChildNode(r)}return n},zS=function(e,t){return new ig("SSE-S3")},jS=function(e,t){var n=new ig("StorageClassAnalysis");if(void 0!==e.DataExport&&null!==e.DataExport){var r=US(e.DataExport).withName("DataExport");n.addChildNode(r)}return n},US=function(e,t){var n=new ig("StorageClassAnalysisDataExport");if(void 0!==e.OutputSchemaVersion&&null!==e.OutputSchemaVersion){var r=new ig("StorageClassAnalysisSchemaVersion").addChildNode(new og(e.OutputSchemaVersion)).withName("OutputSchemaVersion");n.addChildNode(r)}if(void 0!==e.Destination&&null!==e.Destination){r=function(e,t){var n=new ig("AnalyticsExportDestination");if(void 0!==e.S3BucketDestination&&null!==e.S3BucketDestination){var r=Sb(e.S3BucketDestination).withName("S3BucketDestination");n.addChildNode(r)}return n}(e.Destination).withName("Destination");n.addChildNode(r)}return n},FS=function(e,t){var n=new ig("Tag");if(void 0!==e.Key&&null!==e.Key){var r=new ig("ObjectKey").addChildNode(new og(e.Key)).withName("Key");n.addChildNode(r)}if(void 0!==e.Value&&null!==e.Value){r=new ig("Value").addChildNode(new og(e.Value)).withName("Value");n.addChildNode(r)}return n},qS=function(e,t){var n=new ig("Tagging");if(void 0!==e.TagSet&&null!==e.TagSet){var r=KS(e.TagSet),i=new ig("TagSet");r.map((function(e){i.addChildNode(e)})),n.addChildNode(i)}return n},KS=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:FS(e).withName("Tag")}))},HS=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new ig("TargetGrant");if(void 0!==e.Grantee&&null!==e.Grantee&&((r=Bb(e.Grantee).withName("Grantee")).addAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),n.addChildNode(r)),void 0!==e.Permission&&null!==e.Permission){var r=new ig("BucketLogsPermission").addChildNode(new og(e.Permission)).withName("Permission");n.addChildNode(r)}return n}(e).withName("Grant")}))},VS=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new ig("Tiering");if(void 0!==e.Days&&null!==e.Days){var r=new ig("IntelligentTieringDays").addChildNode(new og(String(e.Days))).withName("Days");n.addChildNode(r)}void 0!==e.AccessTier&&null!==e.AccessTier&&(r=new ig("IntelligentTieringAccessTier").addChildNode(new og(e.AccessTier)).withName("AccessTier"),n.addChildNode(r));return n}(e).withName("member")}))},$S=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new ig("TopicConfiguration");if(void 0!==e.Id&&null!==e.Id){var r=new ig("NotificationId").addChildNode(new og(e.Id)).withName("Id");n.addChildNode(r)}void 0!==e.TopicArn&&null!==e.TopicArn&&(r=new ig("TopicArn").addChildNode(new og(e.TopicArn)).withName("Topic"),n.addChildNode(r));void 0!==e.Events&&null!==e.Events&&Mb(e.Events).map((function(e){e=e.withName("Event"),n.addChildNode(e)})),void 0!==e.Filter&&null!==e.Filter&&(r=oS(e.Filter).withName("Filter"),n.addChildNode(r));return n}(e).withName("member")}))},GS=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new ig("Transition");if(void 0!==e.Date&&null!==e.Date){var r=new ig("Date").addChildNode(new og(e.Date.toISOString().split(".")[0]+"Z")).withName("Date");n.addChildNode(r)}void 0!==e.Days&&null!==e.Days&&(r=new ig("Days").addChildNode(new og(String(e.Days))).withName("Days"),n.addChildNode(r));void 0!==e.StorageClass&&null!==e.StorageClass&&(r=new ig("TransitionStorageClass").addChildNode(new og(e.StorageClass)).withName("StorageClass"),n.addChildNode(r));return n}(e).withName("member")}))},WS=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new ig("MetadataEntry");if(void 0!==e.Name&&null!==e.Name){var r=new ig("MetadataKey").addChildNode(new og(e.Name)).withName("Name");n.addChildNode(r)}void 0!==e.Value&&null!==e.Value&&(r=new ig("MetadataValue").addChildNode(new og(e.Value)).withName("Value"),n.addChildNode(r));return n}(e).withName("MetadataEntry")}))},YS=function(e,t){var n=new ig("VersioningConfiguration");if(void 0!==e.MFADelete&&null!==e.MFADelete){var r=new ig("MFADelete").addChildNode(new og(e.MFADelete)).withName("MfaDelete");n.addChildNode(r)}if(void 0!==e.Status&&null!==e.Status){r=new ig("BucketVersioningStatus").addChildNode(new og(e.Status)).withName("Status");n.addChildNode(r)}return n},QS=function(e,t){var n=new ig("WebsiteConfiguration");if(void 0!==e.ErrorDocument&&null!==e.ErrorDocument){var r=function(e,t){var n=new ig("ErrorDocument");if(void 0!==e.Key&&null!==e.Key){var r=new ig("ObjectKey").addChildNode(new og(e.Key)).withName("Key");n.addChildNode(r)}return n}(e.ErrorDocument).withName("ErrorDocument");n.addChildNode(r)}if(void 0!==e.IndexDocument&&null!==e.IndexDocument){r=function(e,t){var n=new ig("IndexDocument");if(void 0!==e.Suffix&&null!==e.Suffix){var r=new ig("Suffix").addChildNode(new og(e.Suffix)).withName("Suffix");n.addChildNode(r)}return n}(e.IndexDocument).withName("IndexDocument");n.addChildNode(r)}if(void 0!==e.RedirectAllRequestsTo&&null!==e.RedirectAllRequestsTo){r=function(e,t){var n=new ig("RedirectAllRequestsTo");if(void 0!==e.HostName&&null!==e.HostName){var r=new ig("HostName").addChildNode(new og(e.HostName)).withName("HostName");n.addChildNode(r)}void 0!==e.Protocol&&null!==e.Protocol&&(r=new ig("Protocol").addChildNode(new og(e.Protocol)).withName("Protocol"),n.addChildNode(r));return n}(e.RedirectAllRequestsTo).withName("RedirectAllRequestsTo");n.addChildNode(r)}if(void 0!==e.RoutingRules&&null!==e.RoutingRules){var i=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:NS(e).withName("RoutingRule")}))}(e.RoutingRules),o=new ig("RoutingRules");i.map((function(e){o.addChildNode(e)})),n.addChildNode(o)}return n},XS=function(e,t){var n={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(n.Prefix=mf(e.Prefix)),""===e.Tag&&(n.Tags=[]),void 0!==e.Tag&&(n.Tags=Tk(lf(e.Tag))),n},JS=function(e,t){var n={Id:void 0,Filter:void 0,StorageClassAnalysis:void 0};return void 0!==e.Id&&(n.Id=mf(e.Id)),void 0!==e.Filter&&(n.Filter=eE(e.Filter)),void 0!==e.StorageClassAnalysis&&(n.StorageClassAnalysis=kk(e.StorageClassAnalysis)),n},ZS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:JS(e)}))},eE=function(e,t){return void 0!==e.Prefix?{Prefix:mf(e.Prefix)}:void 0!==e.Tag?{Tag:xk(e.Tag)}:void 0!==e.And?{And:XS(e.And)}:{$unknown:Object.entries(e)[0]}},tE=function(e,t){var n={Format:void 0,BucketAccountId:void 0,Bucket:void 0,Prefix:void 0};return void 0!==e.Format&&(n.Format=mf(e.Format)),void 0!==e.BucketAccountId&&(n.BucketAccountId=mf(e.BucketAccountId)),void 0!==e.Bucket&&(n.Bucket=mf(e.Bucket)),void 0!==e.Prefix&&(n.Prefix=mf(e.Prefix)),n},nE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Name:void 0,CreationDate:void 0};return void 0!==e.Name&&(n.Name=mf(e.Name)),void 0!==e.CreationDate&&(n.CreationDate=new Date(e.CreationDate)),n}(e)}))},rE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Prefix:void 0};return void 0!==e.Prefix&&(n.Prefix=mf(e.Prefix)),n}(e)}))},iE=function(e,t){var n={ETag:void 0,LastModified:void 0};return void 0!==e.ETag&&(n.ETag=mf(e.ETag)),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),n},oE=function(e,t){var n={ETag:void 0,LastModified:void 0};return void 0!==e.ETag&&(n.ETag=mf(e.ETag)),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),n},aE=function(e,t){var n={ID:void 0,AllowedHeaders:void 0,AllowedMethods:void 0,AllowedOrigins:void 0,ExposeHeaders:void 0,MaxAgeSeconds:void 0};return void 0!==e.ID&&(n.ID=mf(e.ID)),""===e.AllowedHeader&&(n.AllowedHeaders=[]),void 0!==e.AllowedHeader&&(n.AllowedHeaders=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:mf(e)}))}(lf(e.AllowedHeader))),""===e.AllowedMethod&&(n.AllowedMethods=[]),void 0!==e.AllowedMethod&&(n.AllowedMethods=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:mf(e)}))}(lf(e.AllowedMethod))),""===e.AllowedOrigin&&(n.AllowedOrigins=[]),void 0!==e.AllowedOrigin&&(n.AllowedOrigins=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:mf(e)}))}(lf(e.AllowedOrigin))),""===e.ExposeHeader&&(n.ExposeHeaders=[]),void 0!==e.ExposeHeader&&(n.ExposeHeaders=vE(lf(e.ExposeHeader))),void 0!==e.MaxAgeSeconds&&(n.MaxAgeSeconds=gf(e.MaxAgeSeconds)),n},sE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:aE(e)}))},uE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Key:void 0,VersionId:void 0,DeleteMarker:void 0,DeleteMarkerVersionId:void 0};return void 0!==e.Key&&(n.Key=mf(e.Key)),void 0!==e.VersionId&&(n.VersionId=mf(e.VersionId)),void 0!==e.DeleteMarker&&(n.DeleteMarker=hf(e.DeleteMarker)),void 0!==e.DeleteMarkerVersionId&&(n.DeleteMarkerVersionId=mf(e.DeleteMarkerVersionId)),n}(e)}))},cE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Owner:void 0,Key:void 0,VersionId:void 0,IsLatest:void 0,LastModified:void 0};return void 0!==e.Owner&&(n.Owner=JE(e.Owner)),void 0!==e.Key&&(n.Key=mf(e.Key)),void 0!==e.VersionId&&(n.VersionId=mf(e.VersionId)),void 0!==e.IsLatest&&(n.IsLatest=hf(e.IsLatest)),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),n}(e)}))},dE=function(e,t){var n={Bucket:void 0,Account:void 0,StorageClass:void 0,AccessControlTranslation:void 0,EncryptionConfiguration:void 0,ReplicationTime:void 0,Metrics:void 0};return void 0!==e.Bucket&&(n.Bucket=mf(e.Bucket)),void 0!==e.Account&&(n.Account=mf(e.Account)),void 0!==e.StorageClass&&(n.StorageClass=mf(e.StorageClass)),void 0!==e.AccessControlTranslation&&(n.AccessControlTranslation=function(e,t){var n={Owner:void 0};return void 0!==e.Owner&&(n.Owner=mf(e.Owner)),n}(e.AccessControlTranslation)),void 0!==e.EncryptionConfiguration&&(n.EncryptionConfiguration=lE(e.EncryptionConfiguration)),void 0!==e.ReplicationTime&&(n.ReplicationTime=lk(e.ReplicationTime)),void 0!==e.Metrics&&(n.Metrics=DE(e.Metrics)),n},lE=function(e,t){var n={ReplicaKmsKeyID:void 0};return void 0!==e.ReplicaKmsKeyID&&(n.ReplicaKmsKeyID=mf(e.ReplicaKmsKeyID)),n},fE=function(e,t){var n={Key:void 0};return void 0!==e.Key&&(n.Key=mf(e.Key)),n},pE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Key:void 0,VersionId:void 0,Code:void 0,Message:void 0};return void 0!==e.Key&&(n.Key=mf(e.Key)),void 0!==e.VersionId&&(n.VersionId=mf(e.VersionId)),void 0!==e.Code&&(n.Code=mf(e.Code)),void 0!==e.Message&&(n.Message=mf(e.Message)),n}(e)}))},hE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:mf(e)}))},vE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:mf(e)}))},mE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Name:void 0,Value:void 0};return void 0!==e.Name&&(n.Name=mf(e.Name)),void 0!==e.Value&&(n.Value=mf(e.Value)),n}(e)}))},gE=function(e,t){var n={DisplayName:void 0,EmailAddress:void 0,ID:void 0,URI:void 0,Type:void 0};return void 0!==e.DisplayName&&(n.DisplayName=mf(e.DisplayName)),void 0!==e.EmailAddress&&(n.EmailAddress=mf(e.EmailAddress)),void 0!==e.ID&&(n.ID=mf(e.ID)),void 0!==e.URI&&(n.URI=mf(e.URI)),void 0!==e["xsi:type"]&&(n.Type=mf(e["xsi:type"])),n},yE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Grantee:void 0,Permission:void 0};return void 0!==e.Grantee&&(n.Grantee=gE(e.Grantee)),void 0!==e.Permission&&(n.Permission=mf(e.Permission)),n}(e)}))},wE=function(e,t){var n={Suffix:void 0};return void 0!==e.Suffix&&(n.Suffix=mf(e.Suffix)),n},bE=function(e,t){var n={ID:void 0,DisplayName:void 0};return void 0!==e.ID&&(n.ID=mf(e.ID)),void 0!==e.DisplayName&&(n.DisplayName=mf(e.DisplayName)),n},SE=function(e,t){var n={Id:void 0,Filter:void 0,Status:void 0,Tierings:void 0};return void 0!==e.Id&&(n.Id=mf(e.Id)),void 0!==e.Filter&&(n.Filter=kE(e.Filter)),void 0!==e.Status&&(n.Status=mf(e.Status)),""===e.Tiering&&(n.Tierings=[]),void 0!==e.Tiering&&(n.Tierings=Ok(lf(e.Tiering))),n},EE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:SE(e)}))},kE=function(e,t){var n={Prefix:void 0,Tag:void 0,And:void 0};return void 0!==e.Prefix&&(n.Prefix=mf(e.Prefix)),void 0!==e.Tag&&(n.Tag=xk(e.Tag)),void 0!==e.And&&(n.And=function(e,t){var n={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(n.Prefix=mf(e.Prefix)),""===e.Tag&&(n.Tags=[]),void 0!==e.Tag&&(n.Tags=Tk(lf(e.Tag))),n}(e.And)),n},CE=function(e,t){var n={Destination:void 0,IsEnabled:void 0,Filter:void 0,Id:void 0,IncludedObjectVersions:void 0,OptionalFields:void 0,Schedule:void 0};return void 0!==e.Destination&&(n.Destination=TE(e.Destination)),void 0!==e.IsEnabled&&(n.IsEnabled=hf(e.IsEnabled)),void 0!==e.Filter&&(n.Filter=NE(e.Filter)),void 0!==e.Id&&(n.Id=mf(e.Id)),void 0!==e.IncludedObjectVersions&&(n.IncludedObjectVersions=mf(e.IncludedObjectVersions)),""===e.OptionalFields&&(n.OptionalFields=[]),void 0!==e.OptionalFields&&void 0!==e.OptionalFields.Field&&(n.OptionalFields=OE(lf(e.OptionalFields.Field))),void 0!==e.Schedule&&(n.Schedule=PE(e.Schedule)),n},xE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:CE(e)}))},TE=function(e,t){var n={S3BucketDestination:void 0};return void 0!==e.S3BucketDestination&&(n.S3BucketDestination=AE(e.S3BucketDestination)),n},NE=function(e,t){var n={Prefix:void 0};return void 0!==e.Prefix&&(n.Prefix=mf(e.Prefix)),n},OE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:mf(e)}))},AE=function(e,t){var n={AccountId:void 0,Bucket:void 0,Format:void 0,Prefix:void 0,Encryption:void 0};return void 0!==e.AccountId&&(n.AccountId=mf(e.AccountId)),void 0!==e.Bucket&&(n.Bucket=mf(e.Bucket)),void 0!==e.Format&&(n.Format=mf(e.Format)),void 0!==e.Prefix&&(n.Prefix=mf(e.Prefix)),void 0!==e.Encryption&&(n.Encryption=function(e,t){var n={SSES3:void 0,SSEKMS:void 0};return void 0!==e["SSE-S3"]&&(n.SSES3=Ek(e["SSE-S3"])),void 0!==e["SSE-KMS"]&&(n.SSEKMS=bk(e["SSE-KMS"])),n}(e.Encryption)),n},PE=function(e,t){var n={Frequency:void 0};return void 0!==e.Frequency&&(n.Frequency=mf(e.Frequency)),n},_E=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Id:void 0,LambdaFunctionArn:void 0,Events:void 0,Filter:void 0};return void 0!==e.Id&&(n.Id=mf(e.Id)),void 0!==e.CloudFunction&&(n.LambdaFunctionArn=mf(e.CloudFunction)),""===e.Event&&(n.Events=[]),void 0!==e.Event&&(n.Events=hE(lf(e.Event))),void 0!==e.Filter&&(n.Filter=VE(e.Filter)),n}(e)}))},IE=function(e,t){var n={Expiration:void 0,ID:void 0,Prefix:void 0,Filter:void 0,Status:void 0,Transitions:void 0,NoncurrentVersionTransitions:void 0,NoncurrentVersionExpiration:void 0,AbortIncompleteMultipartUpload:void 0};return void 0!==e.Expiration&&(n.Expiration=function(e,t){var n={Date:void 0,Days:void 0,ExpiredObjectDeleteMarker:void 0};return void 0!==e.Date&&(n.Date=new Date(e.Date)),void 0!==e.Days&&(n.Days=gf(e.Days)),void 0!==e.ExpiredObjectDeleteMarker&&(n.ExpiredObjectDeleteMarker=hf(e.ExpiredObjectDeleteMarker)),n}(e.Expiration)),void 0!==e.ID&&(n.ID=mf(e.ID)),void 0!==e.Prefix&&(n.Prefix=mf(e.Prefix)),void 0!==e.Filter&&(n.Filter=RE(e.Filter)),void 0!==e.Status&&(n.Status=mf(e.Status)),""===e.Transition&&(n.Transitions=[]),void 0!==e.Transition&&(n.Transitions=Pk(lf(e.Transition))),""===e.NoncurrentVersionTransition&&(n.NoncurrentVersionTransitions=[]),void 0!==e.NoncurrentVersionTransition&&(n.NoncurrentVersionTransitions=HE(lf(e.NoncurrentVersionTransition))),void 0!==e.NoncurrentVersionExpiration&&(n.NoncurrentVersionExpiration=KE(e.NoncurrentVersionExpiration)),void 0!==e.AbortIncompleteMultipartUpload&&(n.AbortIncompleteMultipartUpload=function(e,t){var n={DaysAfterInitiation:void 0};return void 0!==e.DaysAfterInitiation&&(n.DaysAfterInitiation=gf(e.DaysAfterInitiation)),n}(e.AbortIncompleteMultipartUpload)),n},ME=function(e,t){var n={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(n.Prefix=mf(e.Prefix)),""===e.Tag&&(n.Tags=[]),void 0!==e.Tag&&(n.Tags=Tk(lf(e.Tag))),n},RE=function(e,t){return void 0!==e.Prefix?{Prefix:mf(e.Prefix)}:void 0!==e.Tag?{Tag:xk(e.Tag)}:void 0!==e.And?{And:ME(e.And)}:{$unknown:Object.entries(e)[0]}},LE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:IE(e)}))},BE=function(e,t){var n={TargetBucket:void 0,TargetGrants:void 0,TargetPrefix:void 0};return void 0!==e.TargetBucket&&(n.TargetBucket=mf(e.TargetBucket)),""===e.TargetGrants&&(n.TargetGrants=[]),void 0!==e.TargetGrants&&void 0!==e.TargetGrants.Grant&&(n.TargetGrants=Nk(lf(e.TargetGrants.Grant))),void 0!==e.TargetPrefix&&(n.TargetPrefix=mf(e.TargetPrefix)),n},DE=function(e,t){var n={Status:void 0,EventThreshold:void 0};return void 0!==e.Status&&(n.Status=mf(e.Status)),void 0!==e.EventThreshold&&(n.EventThreshold=fk(e.EventThreshold)),n},zE=function(e,t){var n={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(n.Prefix=mf(e.Prefix)),""===e.Tag&&(n.Tags=[]),void 0!==e.Tag&&(n.Tags=Tk(lf(e.Tag))),n},jE=function(e,t){var n={Id:void 0,Filter:void 0};return void 0!==e.Id&&(n.Id=mf(e.Id)),void 0!==e.Filter&&(n.Filter=FE(e.Filter)),n},UE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:jE(e)}))},FE=function(e,t){return void 0!==e.Prefix?{Prefix:mf(e.Prefix)}:void 0!==e.Tag?{Tag:xk(e.Tag)}:void 0!==e.And?{And:zE(e.And)}:{$unknown:Object.entries(e)[0]}},qE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={UploadId:void 0,Key:void 0,Initiated:void 0,StorageClass:void 0,Owner:void 0,Initiator:void 0};return void 0!==e.UploadId&&(n.UploadId=mf(e.UploadId)),void 0!==e.Key&&(n.Key=mf(e.Key)),void 0!==e.Initiated&&(n.Initiated=new Date(e.Initiated)),void 0!==e.StorageClass&&(n.StorageClass=mf(e.StorageClass)),void 0!==e.Owner&&(n.Owner=JE(e.Owner)),void 0!==e.Initiator&&(n.Initiator=bE(e.Initiator)),n}(e)}))},KE=function(e,t){var n={NoncurrentDays:void 0};return void 0!==e.NoncurrentDays&&(n.NoncurrentDays=gf(e.NoncurrentDays)),n},HE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={NoncurrentDays:void 0,StorageClass:void 0};return void 0!==e.NoncurrentDays&&(n.NoncurrentDays=gf(e.NoncurrentDays)),void 0!==e.StorageClass&&(n.StorageClass=mf(e.StorageClass)),n}(e)}))},VE=function(e,t){var n={Key:void 0};return void 0!==e.S3Key&&(n.Key=vk(e.S3Key)),n},$E=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0};return void 0!==e.Key&&(n.Key=mf(e.Key)),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(n.ETag=mf(e.ETag)),void 0!==e.Size&&(n.Size=gf(e.Size)),void 0!==e.StorageClass&&(n.StorageClass=mf(e.StorageClass)),void 0!==e.Owner&&(n.Owner=JE(e.Owner)),n}(e)}))},GE=function(e,t){var n={ObjectLockEnabled:void 0,Rule:void 0};return void 0!==e.ObjectLockEnabled&&(n.ObjectLockEnabled=mf(e.ObjectLockEnabled)),void 0!==e.Rule&&(n.Rule=QE(e.Rule)),n},WE=function(e,t){var n={Status:void 0};return void 0!==e.Status&&(n.Status=mf(e.Status)),n},YE=function(e,t){var n={Mode:void 0,RetainUntilDate:void 0};return void 0!==e.Mode&&(n.Mode=mf(e.Mode)),void 0!==e.RetainUntilDate&&(n.RetainUntilDate=new Date(e.RetainUntilDate)),n},QE=function(e,t){var n={DefaultRetention:void 0};return void 0!==e.DefaultRetention&&(n.DefaultRetention=function(e,t){var n={Mode:void 0,Days:void 0,Years:void 0};return void 0!==e.Mode&&(n.Mode=mf(e.Mode)),void 0!==e.Days&&(n.Days=gf(e.Days)),void 0!==e.Years&&(n.Years=gf(e.Years)),n}(e.DefaultRetention)),n},XE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={ETag:void 0,Size:void 0,StorageClass:void 0,Key:void 0,VersionId:void 0,IsLatest:void 0,LastModified:void 0,Owner:void 0};return void 0!==e.ETag&&(n.ETag=mf(e.ETag)),void 0!==e.Size&&(n.Size=gf(e.Size)),void 0!==e.StorageClass&&(n.StorageClass=mf(e.StorageClass)),void 0!==e.Key&&(n.Key=mf(e.Key)),void 0!==e.VersionId&&(n.VersionId=mf(e.VersionId)),void 0!==e.IsLatest&&(n.IsLatest=hf(e.IsLatest)),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.Owner&&(n.Owner=JE(e.Owner)),n}(e)}))},JE=function(e,t){var n={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=mf(e.DisplayName)),void 0!==e.ID&&(n.ID=mf(e.ID)),n},ZE=function(e,t){var n={Rules:void 0};return""===e.Rule&&(n.Rules=[]),void 0!==e.Rule&&(n.Rules=ek(lf(e.Rule))),n},ek=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={ObjectOwnership:void 0};return void 0!==e.ObjectOwnership&&(n.ObjectOwnership=mf(e.ObjectOwnership)),n}(e)}))},tk=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0};return void 0!==e.PartNumber&&(n.PartNumber=gf(e.PartNumber)),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(n.ETag=mf(e.ETag)),void 0!==e.Size&&(n.Size=gf(e.Size)),n}(e)}))},nk=function(e,t){var n={IsPublic:void 0};return void 0!==e.IsPublic&&(n.IsPublic=hf(e.IsPublic)),n},rk=function(e,t){var n={BlockPublicAcls:void 0,IgnorePublicAcls:void 0,BlockPublicPolicy:void 0,RestrictPublicBuckets:void 0};return void 0!==e.BlockPublicAcls&&(n.BlockPublicAcls=hf(e.BlockPublicAcls)),void 0!==e.IgnorePublicAcls&&(n.IgnorePublicAcls=hf(e.IgnorePublicAcls)),void 0!==e.BlockPublicPolicy&&(n.BlockPublicPolicy=hf(e.BlockPublicPolicy)),void 0!==e.RestrictPublicBuckets&&(n.RestrictPublicBuckets=hf(e.RestrictPublicBuckets)),n},ik=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Id:void 0,QueueArn:void 0,Events:void 0,Filter:void 0};return void 0!==e.Id&&(n.Id=mf(e.Id)),void 0!==e.Queue&&(n.QueueArn=mf(e.Queue)),""===e.Event&&(n.Events=[]),void 0!==e.Event&&(n.Events=hE(lf(e.Event))),void 0!==e.Filter&&(n.Filter=VE(e.Filter)),n}(e)}))},ok=function(e,t){var n={HostName:void 0,Protocol:void 0};return void 0!==e.HostName&&(n.HostName=mf(e.HostName)),void 0!==e.Protocol&&(n.Protocol=mf(e.Protocol)),n},ak=function(e,t){var n={Role:void 0,Rules:void 0};return void 0!==e.Role&&(n.Role=mf(e.Role)),""===e.Rule&&(n.Rules=[]),void 0!==e.Rule&&(n.Rules=dk(lf(e.Rule))),n},sk=function(e,t){var n={ID:void 0,Priority:void 0,Prefix:void 0,Filter:void 0,Status:void 0,SourceSelectionCriteria:void 0,ExistingObjectReplication:void 0,Destination:void 0,DeleteMarkerReplication:void 0};return void 0!==e.ID&&(n.ID=mf(e.ID)),void 0!==e.Priority&&(n.Priority=gf(e.Priority)),void 0!==e.Prefix&&(n.Prefix=mf(e.Prefix)),void 0!==e.Filter&&(n.Filter=ck(e.Filter)),void 0!==e.Status&&(n.Status=mf(e.Status)),void 0!==e.SourceSelectionCriteria&&(n.SourceSelectionCriteria=wk(e.SourceSelectionCriteria)),void 0!==e.ExistingObjectReplication&&(n.ExistingObjectReplication=function(e,t){var n={Status:void 0};return void 0!==e.Status&&(n.Status=mf(e.Status)),n}(e.ExistingObjectReplication)),void 0!==e.Destination&&(n.Destination=dE(e.Destination)),void 0!==e.DeleteMarkerReplication&&(n.DeleteMarkerReplication=function(e,t){var n={Status:void 0};return void 0!==e.Status&&(n.Status=mf(e.Status)),n}(e.DeleteMarkerReplication)),n},uk=function(e,t){var n={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(n.Prefix=mf(e.Prefix)),""===e.Tag&&(n.Tags=[]),void 0!==e.Tag&&(n.Tags=Tk(lf(e.Tag))),n},ck=function(e,t){return void 0!==e.Prefix?{Prefix:mf(e.Prefix)}:void 0!==e.Tag?{Tag:xk(e.Tag)}:void 0!==e.And?{And:uk(e.And)}:{$unknown:Object.entries(e)[0]}},dk=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:sk(e)}))},lk=function(e,t){var n={Status:void 0,Time:void 0};return void 0!==e.Status&&(n.Status=mf(e.Status)),void 0!==e.Time&&(n.Time=fk(e.Time)),n},fk=function(e,t){var n={Minutes:void 0};return void 0!==e.Minutes&&(n.Minutes=gf(e.Minutes)),n},pk=function(e,t){var n={Condition:void 0,Redirect:void 0};return void 0!==e.Condition&&(n.Condition=function(e,t){var n={HttpErrorCodeReturnedEquals:void 0,KeyPrefixEquals:void 0};return void 0!==e.HttpErrorCodeReturnedEquals&&(n.HttpErrorCodeReturnedEquals=mf(e.HttpErrorCodeReturnedEquals)),void 0!==e.KeyPrefixEquals&&(n.KeyPrefixEquals=mf(e.KeyPrefixEquals)),n}(e.Condition)),void 0!==e.Redirect&&(n.Redirect=function(e,t){var n={HostName:void 0,HttpRedirectCode:void 0,Protocol:void 0,ReplaceKeyPrefixWith:void 0,ReplaceKeyWith:void 0};return void 0!==e.HostName&&(n.HostName=mf(e.HostName)),void 0!==e.HttpRedirectCode&&(n.HttpRedirectCode=mf(e.HttpRedirectCode)),void 0!==e.Protocol&&(n.Protocol=mf(e.Protocol)),void 0!==e.ReplaceKeyPrefixWith&&(n.ReplaceKeyPrefixWith=mf(e.ReplaceKeyPrefixWith)),void 0!==e.ReplaceKeyWith&&(n.ReplaceKeyWith=mf(e.ReplaceKeyWith)),n}(e.Redirect)),n},hk=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:pk(e)}))},vk=function(e,t){var n={FilterRules:void 0};return""===e.FilterRule&&(n.FilterRules=[]),void 0!==e.FilterRule&&(n.FilterRules=mE(lf(e.FilterRule))),n},mk=function(e,t){var n={Rules:void 0};return""===e.Rule&&(n.Rules=[]),void 0!==e.Rule&&(n.Rules=yk(lf(e.Rule))),n},gk=function(e,t){var n={ApplyServerSideEncryptionByDefault:void 0,BucketKeyEnabled:void 0};return void 0!==e.ApplyServerSideEncryptionByDefault&&(n.ApplyServerSideEncryptionByDefault=function(e,t){var n={SSEAlgorithm:void 0,KMSMasterKeyID:void 0};return void 0!==e.SSEAlgorithm&&(n.SSEAlgorithm=mf(e.SSEAlgorithm)),void 0!==e.KMSMasterKeyID&&(n.KMSMasterKeyID=mf(e.KMSMasterKeyID)),n}(e.ApplyServerSideEncryptionByDefault)),void 0!==e.BucketKeyEnabled&&(n.BucketKeyEnabled=hf(e.BucketKeyEnabled)),n},yk=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:gk(e)}))},wk=function(e,t){var n={SseKmsEncryptedObjects:void 0,ReplicaModifications:void 0};return void 0!==e.SseKmsEncryptedObjects&&(n.SseKmsEncryptedObjects=Sk(e.SseKmsEncryptedObjects)),void 0!==e.ReplicaModifications&&(n.ReplicaModifications=function(e,t){var n={Status:void 0};return void 0!==e.Status&&(n.Status=mf(e.Status)),n}(e.ReplicaModifications)),n},bk=function(e,t){var n={KeyId:void 0};return void 0!==e.KeyId&&(n.KeyId=mf(e.KeyId)),n},Sk=function(e,t){var n={Status:void 0};return void 0!==e.Status&&(n.Status=mf(e.Status)),n},Ek=function(e,t){return{}},kk=function(e,t){var n={DataExport:void 0};return void 0!==e.DataExport&&(n.DataExport=Ck(e.DataExport)),n},Ck=function(e,t){var n={OutputSchemaVersion:void 0,Destination:void 0};return void 0!==e.OutputSchemaVersion&&(n.OutputSchemaVersion=mf(e.OutputSchemaVersion)),void 0!==e.Destination&&(n.Destination=function(e,t){var n={S3BucketDestination:void 0};return void 0!==e.S3BucketDestination&&(n.S3BucketDestination=tE(e.S3BucketDestination)),n}(e.Destination)),n},xk=function(e,t){var n={Key:void 0,Value:void 0};return void 0!==e.Key&&(n.Key=mf(e.Key)),void 0!==e.Value&&(n.Value=mf(e.Value)),n},Tk=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:xk(e)}))},Nk=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Grantee:void 0,Permission:void 0};return void 0!==e.Grantee&&(n.Grantee=gE(e.Grantee)),void 0!==e.Permission&&(n.Permission=mf(e.Permission)),n}(e)}))},Ok=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Days:void 0,AccessTier:void 0};return void 0!==e.Days&&(n.Days=gf(e.Days)),void 0!==e.AccessTier&&(n.AccessTier=mf(e.AccessTier)),n}(e)}))},Ak=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Id:void 0,TopicArn:void 0,Events:void 0,Filter:void 0};return void 0!==e.Id&&(n.Id=mf(e.Id)),void 0!==e.Topic&&(n.TopicArn=mf(e.Topic)),""===e.Event&&(n.Events=[]),void 0!==e.Event&&(n.Events=hE(lf(e.Event))),void 0!==e.Filter&&(n.Filter=VE(e.Filter)),n}(e)}))},Pk=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Date:void 0,Days:void 0,StorageClass:void 0};return void 0!==e.Date&&(n.Date=new Date(e.Date)),void 0!==e.Days&&(n.Days=gf(e.Days)),void 0!==e.StorageClass&&(n.StorageClass=mf(e.StorageClass)),n}(e)}))},_k=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Ik=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},Mk=function(e,t){return Ik(e,t).then((function(e){return t.utf8Encoder(e)}))},Rk=function(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},Lk=function(e,t){return Mk(e,t).then((function(e){if(e.length){var t=gy.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,trimValues:!1,tagValueProcessor:function(e){return""===e.trim()&&e.includes("\n")?"":hg.decodeHTML(e)}}),n=Object.keys(t)[0],r=t[n];return r["#text"]&&(r[n]=r["#text"],delete r["#text"]),ff(r)}return{}}))},Bk=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},Dk={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},zk={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function jk(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(r){return tu(void 0,void 0,void 0,(function(){var i,o;return nu(this,(function(a){switch(a.label){case 0:return[4,n(r)];case 1:return i=a.sent().response,[4,t(i,e)];case 2:return o=a.sent(),[2,{response:i,output:o}]}}))}))}}}(e,n),Dk),r.add(function(e,t){return function(n,r){return function(r){return tu(void 0,void 0,void 0,(function(){var i;return nu(this,(function(o){switch(o.label){case 0:return[4,t(r.input,e)];case 1:return i=o.sent(),[2,n(Zs(Zs({},r),{request:i}))]}}))}))}}}(e,t),zk)}}}var Uk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"AbortMultipartUploadCommand",inputFilterSensitiveLog:kf.filterSensitiveLog,outputFilterSensitiveLog:Ef.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({},Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs({"x-id":"AbortMultipartUpload"},void 0!==e.UploadId&&{uploadId:e.UploadId}),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,yy(e,t)]:(n={$metadata:_k(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Fk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(hl(t)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:Rf.filterSensitiveLog,outputFilterSensitiveLog:_f.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({"content-type":"application/xml"},Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs({"x-id":"CompleteMultipartUpload"},void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.MultipartUpload&&(f=Cb(e.MultipartUpload)),void 0!==e.MultipartUpload&&(p=Cb(e.MultipartUpload),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"POST",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,wy(e,t)]:(n={$metadata:_k(e),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled=hf(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Lk(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=mf(r.Bucket)),void 0!==r.ETag&&(n.ETag=mf(r.ETag)),void 0!==r.Key&&(n.Key=mf(r.Key)),void 0!==r.Location&&(n.Location=mf(r.Location)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf);var qk={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Kk=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return tu(t,void 0,void 0,(function(){var t,i,o,a,s,u,c,d,l,f,p,h,v,m,g,y,w;return nu(this,(function(b){switch(b.label){case 0:t=Zs({},r.input),i=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],b.label=1;case 1:b.trys.push([1,6,7,8]),o=ru(i),a=o.next(),b.label=2;case 2:return a.done?[3,5]:(s=a.value,(u=t[s.target])?(c=ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):"string"==typeof u?e.utf8Decoder(u):new Uint8Array(u),d=e.base64Encoder(c),(l=new e.md5).update(c),f=[Zs({},t)],(w={})[s.target]=d,p=s.hash,v=(h=e).base64Encoder,[4,l.digest()]):[3,4]);case 3:t=Zs.apply(void 0,f.concat([(w[p]=v.apply(h,[b.sent()]),w)])),b.label=4;case 4:return a=o.next(),[3,2];case 5:return[3,8];case 6:return m=b.sent(),g={error:m},[3,8];case 7:try{a&&!a.done&&(y=o.return)&&y.call(o)}finally{if(g)throw g.error}return[7];case 8:return[2,n(Zs(Zs({},r),{input:t}))]}}))}))}}}(e),qk)}}},Hk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(hl(t)),this.middlewareStack.use(Kk(t)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CopyObjectCommand",inputFilterSensitiveLog:Df.filterSensitiveLog,outputFilterSensitiveLog:Bf.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs({},Rk(e.ACL)&&{"x-amz-acl":e.ACL}),Rk(e.CacheControl)&&{"cache-control":e.CacheControl}),Rk(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),Rk(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),Rk(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),Rk(e.ContentType)&&{"content-type":e.ContentType}),Rk(e.CopySource)&&{"x-amz-copy-source":e.CopySource}),Rk(e.CopySourceIfMatch)&&{"x-amz-copy-source-if-match":e.CopySourceIfMatch}),Rk(e.CopySourceIfModifiedSince)&&{"x-amz-copy-source-if-modified-since":bf(e.CopySourceIfModifiedSince).toString()}),Rk(e.CopySourceIfNoneMatch)&&{"x-amz-copy-source-if-none-match":e.CopySourceIfNoneMatch}),Rk(e.CopySourceIfUnmodifiedSince)&&{"x-amz-copy-source-if-unmodified-since":bf(e.CopySourceIfUnmodifiedSince).toString()}),Rk(e.Expires)&&{expires:bf(e.Expires).toString()}),Rk(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),Rk(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),Rk(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),Rk(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),Rk(e.MetadataDirective)&&{"x-amz-metadata-directive":e.MetadataDirective}),Rk(e.TaggingDirective)&&{"x-amz-tagging-directive":e.TaggingDirective}),Rk(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),Rk(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),Rk(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),Rk(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Rk(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Rk(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Rk(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),Rk(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),Rk(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),Rk(e.CopySourceSSECustomerAlgorithm)&&{"x-amz-copy-source-server-side-encryption-customer-algorithm":e.CopySourceSSECustomerAlgorithm}),Rk(e.CopySourceSSECustomerKey)&&{"x-amz-copy-source-server-side-encryption-customer-key":e.CopySourceSSECustomerKey}),Rk(e.CopySourceSSECustomerKeyMD5)&&{"x-amz-copy-source-server-side-encryption-customer-key-md5":e.CopySourceSSECustomerKeyMD5}),Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.Tagging)&&{"x-amz-tagging":e.Tagging}),Rk(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),Rk(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Rk(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),Rk(e.ExpectedSourceBucketOwner)&&{"x-amz-source-expected-bucket-owner":e.ExpectedSourceBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){var r;return Zs(Zs({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))}),{})),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:{"x-id":"CopyObject"},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,by(e,t)]:(n={$metadata:_k(e),BucketKeyEnabled:void 0,CopyObjectResult:void 0,CopySourceVersionId:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-copy-source-version-id"]&&(n.CopySourceVersionId=e.headers["x-amz-copy-source-version-id"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled=hf(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Lk(e.body,t)]);case 1:return r=i.sent(),n.CopyObjectResult=iE(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf);var Vk,$k,Gk,Wk,Yk,Qk,Xk,Jk,Zk,eC,tC,nC,rC,iC,oC,aC,sC,uC,cC,dC,lC,fC,pC,hC,vC,mC,gC,yC,wC,bC,SC,EC,kC,CC,xC,TC,NC={step:"initialize",tags:["LOCATION_CONSTRAINT","CREATE_BUCKET_CONFIGURATION"],name:"locationConstraintMiddleware",override:!0},OC=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return tu(t,void 0,void 0,(function(){var t,i;return nu(this,(function(o){switch(o.label){case 0:return t=r.input.CreateBucketConfiguration,[4,e.region()];case 1:return i=o.sent(),t&&t.LocationConstraint||(r=Zs(Zs({},r),{input:Zs(Zs({},r.input),{CreateBucketConfiguration:"us-east-1"===i?void 0:{LocationConstraint:i}})})),[2,n(r)]}}))}))}}}(e),NC)}}},AC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(OC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CreateBucketCommand",inputFilterSensitiveLog:Kf.filterSensitiveLog,outputFilterSensitiveLog:Ff.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return nu(this,(function(p){switch(p.label){case 0:return[4,t.endpoint()];case 1:if(n=p.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs(Zs(Zs(Zs({"content-type":"application/xml"},Rk(e.ACL)&&{"x-amz-acl":e.ACL}),Rk(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),Rk(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),Rk(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),Rk(e.GrantWrite)&&{"x-amz-grant-write":e.GrantWrite}),Rk(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),Rk(e.ObjectLockEnabledForBucket)&&{"x-amz-bucket-object-lock-enabled":e.ObjectLockEnabledForBucket.toString()}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),void 0!==e.CreateBucketConfiguration&&(l=Ab(e.CreateBucketConfiguration)),void 0!==e.CreateBucketConfiguration&&(f=Ab(e.CreateBucketConfiguration),l='<?xml version="1.0" encoding="UTF-8"?>',f.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),l+=f.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,body:l})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Sy(e,t)]:(n={$metadata:_k(e),Location:void 0},void 0!==e.headers.location&&(n.Location=e.headers.location),[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),PC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Kk(t)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:Vf.filterSensitiveLog,outputFilterSensitiveLog:Hf.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs({},Rk(e.ACL)&&{"x-amz-acl":e.ACL}),Rk(e.CacheControl)&&{"cache-control":e.CacheControl}),Rk(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),Rk(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),Rk(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),Rk(e.ContentType)&&{"content-type":e.ContentType}),Rk(e.Expires)&&{expires:bf(e.Expires).toString()}),Rk(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),Rk(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),Rk(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),Rk(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),Rk(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),Rk(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),Rk(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),Rk(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Rk(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Rk(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Rk(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),Rk(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),Rk(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.Tagging)&&{"x-amz-tagging":e.Tagging}),Rk(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),Rk(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Rk(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){var r;return Zs(Zs({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))}),{})),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),[2,new Sc({protocol:o,hostname:r,port:a,method:"POST",headers:u,path:c,query:{uploads:"","x-id":"CreateMultipartUpload"},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ey(e,t)]:(n={$metadata:_k(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled=hf(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Lk(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=mf(r.Bucket)),void 0!==r.Key&&(n.Key=mf(r.Key)),void 0!==r.UploadId&&(n.UploadId=mf(r.UploadId)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),_C=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketAnalyticsConfigurationCommand",inputFilterSensitiveLog:Gf.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({analytics:""},void 0!==e.Id&&{id:e.Id}),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Cy(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),IC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketCommand",inputFilterSensitiveLog:$f.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,ky(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),MC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketCorsCommand",inputFilterSensitiveLog:Wf.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:{cors:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,xy(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),RC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketEncryptionCommand",inputFilterSensitiveLog:Yf.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:{encryption:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Ty(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),LC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketIntelligentTieringConfigurationCommand",inputFilterSensitiveLog:Qf.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u={},c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({"intelligent-tiering":""},void 0!==e.Id&&{id:e.Id}),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Ny(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),BC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketInventoryConfigurationCommand",inputFilterSensitiveLog:Xf.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({inventory:""},void 0!==e.Id&&{id:e.Id}),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Oy(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),DC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketLifecycleCommand",inputFilterSensitiveLog:Jf.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:{lifecycle:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Ay(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),zC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketMetricsConfigurationCommand",inputFilterSensitiveLog:Zf.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({metrics:""},void 0!==e.Id&&{id:e.Id}),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Py(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),jC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketOwnershipControlsCommand",inputFilterSensitiveLog:ep.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:{ownershipControls:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,_y(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),UC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketPolicyCommand",inputFilterSensitiveLog:tp.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:{policy:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Iy(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),FC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketReplicationCommand",inputFilterSensitiveLog:np.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:{replication:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,My(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),qC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketTaggingCommand",inputFilterSensitiveLog:rp.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:{tagging:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Ry(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),KC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketWebsiteCommand",inputFilterSensitiveLog:ip.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:{website:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Ly(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),HC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:ap.filterSensitiveLog,outputFilterSensitiveLog:op.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs({},Rk(e.MFA)&&{"x-amz-mfa":e.MFA}),Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":e.BypassGovernanceRetention.toString()}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs({"x-id":"DeleteObject"},void 0!==e.VersionId&&{versionId:e.VersionId}),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,By(e,t)]:(n={$metadata:_k(e),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker=hf(e.headers["x-amz-delete-marker"])),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),VC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteObjectTaggingCommand",inputFilterSensitiveLog:hp.filterSensitiveLog,outputFilterSensitiveLog:pp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs({tagging:""},void 0!==e.VersionId&&{versionId:e.VersionId}),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,zy(e,t)]:(n={$metadata:_k(e),VersionId:void 0},void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),$C={name:"applyMd5BodyChecksumMiddleware",step:"build",tags:["SET_CONTENT_MD5","BODY_CHECKSUM"],override:!0},GC=function(e){return{applyToStack:function(t){var n;t.add((n=e,function(e){return function(t){return tu(void 0,void 0,void 0,(function(){var r,i,o,a,s,u,c,d,l,f,p,h;return nu(this,(function(v){switch(v.label){case 0:return r=t.request,Sc.isInstance(r)?(i=r.body,o=r.headers,WC("content-md5",o)?[3,2]:(a=void 0,void 0===i||"string"==typeof i||ArrayBuffer.isView(i)||Ll(i)?((s=new n.md5).update(i||""),a=s.digest()):a=n.streamHasher(n.md5,i),u=[Zs({},r)],p={},c=[Zs({},o)],h={},d="content-md5",f=(l=n).base64Encoder,[4,a])):[3,2];case 1:r=Zs.apply(void 0,u.concat([(p.headers=Zs.apply(void 0,c.concat([(h[d]=f.apply(l,[v.sent()]),h)])),p)])),v.label=2;case 2:return[2,e(Zs(Zs({},t),{request:r}))]}}))}))}}),$C)}}},WC=function(e,t){var n,r;e=e.toLowerCase();try{for(var i=ru(Object.keys(t)),o=i.next();!o.done;o=i.next()){if(e===o.value.toLowerCase())return!0}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1},YC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteObjectsCommand",inputFilterSensitiveLog:fp.filterSensitiveLog,outputFilterSensitiveLog:cp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs({"content-type":"application/xml"},Rk(e.MFA)&&{"x-amz-mfa":e.MFA}),Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":e.BypassGovernanceRetention.toString()}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={delete:"","x-id":"DeleteObjects"},void 0!==e.Delete&&(f=Pb(e.Delete)),void 0!==e.Delete&&(p=Pb(e.Delete),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"POST",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Dy(e,t)]:(n={$metadata:_k(e),Deleted:void 0,Errors:void 0,RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Lk(e.body,t)]);case 1:return""===(r=i.sent()).Deleted&&(n.Deleted=[]),void 0!==r.Deleted&&(n.Deleted=uE(lf(r.Deleted))),""===r.Error&&(n.Errors=[]),void 0!==r.Error&&(n.Errors=pE(lf(r.Error))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),QC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeletePublicAccessBlockCommand",inputFilterSensitiveLog:vp.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"DELETE",headers:u,path:c,query:{publicAccessBlock:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,jy(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),XC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketAccelerateConfigurationCommand",inputFilterSensitiveLog:gp.filterSensitiveLog,outputFilterSensitiveLog:mp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{accelerate:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Uy(e,t)]:(n={$metadata:_k(e),Status:void 0},[4,Lk(e.body,t)]);case 1:return void 0!==(r=i.sent()).Status&&(n.Status=mf(r.Status)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),JC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketAclCommand",inputFilterSensitiveLog:wp.filterSensitiveLog,outputFilterSensitiveLog:yp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{acl:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Fy(e,t)]:(n={$metadata:_k(e),Grants:void 0,Owner:void 0},[4,Lk(e.body,t)]);case 1:return""===(r=i.sent()).AccessControlList&&(n.Grants=[]),void 0!==r.AccessControlList&&void 0!==r.AccessControlList.Grant&&(n.Grants=yE(lf(r.AccessControlList.Grant))),void 0!==r.Owner&&(n.Owner=JE(r.Owner)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),ZC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketAnalyticsConfigurationCommand",inputFilterSensitiveLog:Ap.filterSensitiveLog,outputFilterSensitiveLog:Op.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({analytics:"","x-id":"GetBucketAnalyticsConfiguration"},void 0!==e.Id&&{id:e.Id}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,qy(e,t)]:(n={$metadata:_k(e),AnalyticsConfiguration:void 0},[4,Lk(e.body,t)]);case 1:return r=i.sent(),n.AnalyticsConfiguration=JS(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),ex=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketCorsCommand",inputFilterSensitiveLog:Ip.filterSensitiveLog,outputFilterSensitiveLog:_p.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{cors:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ky(e,t)]:(n={$metadata:_k(e),CORSRules:void 0},[4,Lk(e.body,t)]);case 1:return""===(r=i.sent()).CORSRule&&(n.CORSRules=[]),void 0!==r.CORSRule&&(n.CORSRules=sE(lf(r.CORSRule))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),tx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketEncryptionCommand",inputFilterSensitiveLog:Dp.filterSensitiveLog,outputFilterSensitiveLog:Bp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{encryption:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Hy(e,t)]:(n={$metadata:_k(e),ServerSideEncryptionConfiguration:void 0},[4,Lk(e.body,t)]);case 1:return r=i.sent(),n.ServerSideEncryptionConfiguration=mk(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),nx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketIntelligentTieringConfigurationCommand",inputFilterSensitiveLog:Kp.filterSensitiveLog,outputFilterSensitiveLog:qp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u={},c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({"intelligent-tiering":"","x-id":"GetBucketIntelligentTieringConfiguration"},void 0!==e.Id&&{id:e.Id}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Vy(e,t)]:(n={$metadata:_k(e),IntelligentTieringConfiguration:void 0},[4,Lk(e.body,t)]);case 1:return r=i.sent(),n.IntelligentTieringConfiguration=SE(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),rx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketInventoryConfigurationCommand",inputFilterSensitiveLog:Zp.filterSensitiveLog,outputFilterSensitiveLog:Jp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({inventory:"","x-id":"GetBucketInventoryConfiguration"},void 0!==e.Id&&{id:e.Id}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,$y(e,t)]:(n={$metadata:_k(e),InventoryConfiguration:void 0},[4,Lk(e.body,t)]);case 1:return r=i.sent(),n.InventoryConfiguration=CE(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),ix=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketLifecycleConfigurationCommand",inputFilterSensitiveLog:uh.filterSensitiveLog,outputFilterSensitiveLog:sh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{lifecycle:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Gy(e,t)]:(n={$metadata:_k(e),Rules:void 0},[4,Lk(e.body,t)]);case 1:return""===(r=i.sent()).Rule&&(n.Rules=[]),void 0!==r.Rule&&(n.Rules=LE(lf(r.Rule))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),ox=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketLocationCommand",inputFilterSensitiveLog:dh.filterSensitiveLog,outputFilterSensitiveLog:ch.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{location:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Wy(e,t)]:(n={$metadata:_k(e),LocationConstraint:void 0},[4,Lk(e.body,t)]);case 1:return void 0!==(r=i.sent()).LocationConstraint&&(n.LocationConstraint=mf(r.LocationConstraint)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),ax=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketLoggingCommand",inputFilterSensitiveLog:hh.filterSensitiveLog,outputFilterSensitiveLog:ph.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{logging:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Yy(e,t)]:(n={$metadata:_k(e),LoggingEnabled:void 0},[4,Lk(e.body,t)]);case 1:return void 0!==(r=i.sent()).LoggingEnabled&&(n.LoggingEnabled=BE(r.LoggingEnabled)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),sx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketMetricsConfigurationCommand",inputFilterSensitiveLog:wh.filterSensitiveLog,outputFilterSensitiveLog:yh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({metrics:"","x-id":"GetBucketMetricsConfiguration"},void 0!==e.Id&&{id:e.Id}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Qy(e,t)]:(n={$metadata:_k(e),MetricsConfiguration:void 0},[4,Lk(e.body,t)]);case 1:return r=i.sent(),n.MetricsConfiguration=jE(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),ux=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketNotificationConfigurationCommand",inputFilterSensitiveLog:bh.filterSensitiveLog,outputFilterSensitiveLog:Nh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{notification:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Xy(e,t)]:(n={$metadata:_k(e),LambdaFunctionConfigurations:void 0,QueueConfigurations:void 0,TopicConfigurations:void 0},[4,Lk(e.body,t)]);case 1:return""===(r=i.sent()).CloudFunctionConfiguration&&(n.LambdaFunctionConfigurations=[]),void 0!==r.CloudFunctionConfiguration&&(n.LambdaFunctionConfigurations=_E(lf(r.CloudFunctionConfiguration))),""===r.QueueConfiguration&&(n.QueueConfigurations=[]),void 0!==r.QueueConfiguration&&(n.QueueConfigurations=ik(lf(r.QueueConfiguration))),""===r.TopicConfiguration&&(n.TopicConfigurations=[]),void 0!==r.TopicConfiguration&&(n.TopicConfigurations=Ak(lf(r.TopicConfiguration))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),cx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketOwnershipControlsCommand",inputFilterSensitiveLog:_h.filterSensitiveLog,outputFilterSensitiveLog:Ph.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{ownershipControls:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Jy(e,t)]:(n={$metadata:_k(e),OwnershipControls:void 0},[4,Lk(e.body,t)]);case 1:return r=i.sent(),n.OwnershipControls=ZE(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),dx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketPolicyCommand",inputFilterSensitiveLog:Mh.filterSensitiveLog,outputFilterSensitiveLog:Ih.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{policy:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Zy(e,t)]:(n={$metadata:_k(e),Policy:void 0},[4,Mk(e.body,t)]);case 1:return r=i.sent(),n.Policy=mf(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),lx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketPolicyStatusCommand",inputFilterSensitiveLog:Bh.filterSensitiveLog,outputFilterSensitiveLog:Lh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{policyStatus:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ew(e,t)]:(n={$metadata:_k(e),PolicyStatus:void 0},[4,Lk(e.body,t)]);case 1:return r=i.sent(),n.PolicyStatus=nk(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),fx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketReplicationCommand",inputFilterSensitiveLog:Jh.filterSensitiveLog,outputFilterSensitiveLog:Xh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{replication:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,tw(e,t)]:(n={$metadata:_k(e),ReplicationConfiguration:void 0},[4,Lk(e.body,t)]);case 1:return r=i.sent(),n.ReplicationConfiguration=ak(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),px=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketRequestPaymentCommand",inputFilterSensitiveLog:ev.filterSensitiveLog,outputFilterSensitiveLog:Zh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{requestPayment:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,nw(e,t)]:(n={$metadata:_k(e),Payer:void 0},[4,Lk(e.body,t)]);case 1:return void 0!==(r=i.sent()).Payer&&(n.Payer=mf(r.Payer)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),hx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketTaggingCommand",inputFilterSensitiveLog:nv.filterSensitiveLog,outputFilterSensitiveLog:tv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{tagging:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,rw(e,t)]:(n={$metadata:_k(e),TagSet:void 0},[4,Lk(e.body,t)]);case 1:return""===(r=i.sent()).TagSet&&(n.TagSet=[]),void 0!==r.TagSet&&void 0!==r.TagSet.Tag&&(n.TagSet=Tk(lf(r.TagSet.Tag))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),vx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketVersioningCommand",inputFilterSensitiveLog:iv.filterSensitiveLog,outputFilterSensitiveLog:rv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{versioning:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,iw(e,t)]:(n={$metadata:_k(e),MFADelete:void 0,Status:void 0},[4,Lk(e.body,t)]);case 1:return void 0!==(r=i.sent()).MfaDelete&&(n.MFADelete=mf(r.MfaDelete)),void 0!==r.Status&&(n.Status=mf(r.Status)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),mx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketWebsiteCommand",inputFilterSensitiveLog:fv.filterSensitiveLog,outputFilterSensitiveLog:lv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{website:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ow(e,t)]:(n={$metadata:_k(e),ErrorDocument:void 0,IndexDocument:void 0,RedirectAllRequestsTo:void 0,RoutingRules:void 0},[4,Lk(e.body,t)]);case 1:return void 0!==(r=i.sent()).ErrorDocument&&(n.ErrorDocument=fE(r.ErrorDocument)),void 0!==r.IndexDocument&&(n.IndexDocument=wE(r.IndexDocument)),void 0!==r.RedirectAllRequestsTo&&(n.RedirectAllRequestsTo=ok(r.RedirectAllRequestsTo)),""===r.RoutingRules&&(n.RoutingRules=[]),void 0!==r.RoutingRules&&void 0!==r.RoutingRules.RoutingRule&&(n.RoutingRules=hk(lf(r.RoutingRules.RoutingRule))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),gx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectAclCommand",inputFilterSensitiveLog:yv.filterSensitiveLog,outputFilterSensitiveLog:gv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({},Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs({acl:""},void 0!==e.VersionId&&{versionId:e.VersionId}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,sw(e,t)]:(n={$metadata:_k(e),Grants:void 0,Owner:void 0,RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Lk(e.body,t)]);case 1:return""===(r=i.sent()).AccessControlList&&(n.Grants=[]),void 0!==r.AccessControlList&&void 0!==r.AccessControlList.Grant&&(n.Grants=yE(lf(r.AccessControlList.Grant))),void 0!==r.Owner&&(n.Owner=JE(r.Owner)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),yx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Kk(t)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:hv.filterSensitiveLog,outputFilterSensitiveLog:pv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs({},Rk(e.IfMatch)&&{"if-match":e.IfMatch}),Rk(e.IfModifiedSince)&&{"if-modified-since":bf(e.IfModifiedSince).toString()}),Rk(e.IfNoneMatch)&&{"if-none-match":e.IfNoneMatch}),Rk(e.IfUnmodifiedSince)&&{"if-unmodified-since":bf(e.IfUnmodifiedSince).toString()}),Rk(e.Range)&&{range:e.Range}),Rk(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Rk(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Rk(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs({"x-id":"GetObject"},void 0!==e.ResponseCacheControl&&{"response-cache-control":e.ResponseCacheControl}),void 0!==e.ResponseContentDisposition&&{"response-content-disposition":e.ResponseContentDisposition}),void 0!==e.ResponseContentEncoding&&{"response-content-encoding":e.ResponseContentEncoding}),void 0!==e.ResponseContentLanguage&&{"response-content-language":e.ResponseContentLanguage}),void 0!==e.ResponseContentType&&{"response-content-type":e.ResponseContentType}),void 0!==e.ResponseExpires&&{"response-expires":bf(e.ResponseExpires).toString()}),void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){return 200!==e.statusCode&&e.statusCode>=300?[2,aw(e,t)]:(n={$metadata:_k(e),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker=hf(e.headers["x-amz-delete-marker"])),void 0!==e.headers["accept-ranges"]&&(n.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-restore"]&&(n.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["last-modified"]&&(n.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers["content-length"]&&(n.ContentLength=gf(e.headers["content-length"])),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-missing-meta"]&&(n.MissingMeta=gf(e.headers["x-amz-missing-meta"])),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["cache-control"]&&(n.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-disposition"]&&(n.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["content-encoding"]&&(n.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["content-language"]&&(n.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-range"]&&(n.ContentRange=e.headers["content-range"]),void 0!==e.headers["content-type"]&&(n.ContentType=e.headers["content-type"]),void 0!==e.headers.expires&&(n.Expires=new Date(e.headers.expires)),void 0!==e.headers["x-amz-website-redirect-location"]&&(n.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled=hf(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==e.headers["x-amz-storage-class"]&&(n.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-replication-status"]&&(n.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-mp-parts-count"]&&(n.PartsCount=gf(e.headers["x-amz-mp-parts-count"])),void 0!==e.headers["x-amz-tagging-count"]&&(n.TagCount=gf(e.headers["x-amz-tagging-count"])),void 0!==e.headers["x-amz-object-lock-mode"]&&(n.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(n.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(n.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),Object.keys(e.headers).forEach((function(t){void 0===n.Metadata&&(n.Metadata={}),t.startsWith("x-amz-meta-")&&(n.Metadata[t.substring(11)]=e.headers[t])})),r=e.body,n.Body=r,[2,Promise.resolve(n)])}))}))}(e,t)},t}(cf),wx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectLegalHoldCommand",inputFilterSensitiveLog:Sv.filterSensitiveLog,outputFilterSensitiveLog:bv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({},Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs({"legal-hold":""},void 0!==e.VersionId&&{versionId:e.VersionId}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,uw(e,t)]:(n={$metadata:_k(e),LegalHold:void 0},[4,Lk(e.body,t)]);case 1:return r=i.sent(),n.LegalHold=WE(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),bx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectLockConfigurationCommand",inputFilterSensitiveLog:Tv.filterSensitiveLog,outputFilterSensitiveLog:xv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{"object-lock":""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,cw(e,t)]:(n={$metadata:_k(e),ObjectLockConfiguration:void 0},[4,Lk(e.body,t)]);case 1:return r=i.sent(),n.ObjectLockConfiguration=GE(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Sx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectRetentionCommand",inputFilterSensitiveLog:Av.filterSensitiveLog,outputFilterSensitiveLog:Ov.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({},Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs({retention:""},void 0!==e.VersionId&&{versionId:e.VersionId}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,dw(e,t)]:(n={$metadata:_k(e),Retention:void 0},[4,Lk(e.body,t)]);case 1:return r=i.sent(),n.Retention=YE(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Ex=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectTaggingCommand",inputFilterSensitiveLog:_v.filterSensitiveLog,outputFilterSensitiveLog:Pv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs({tagging:""},void 0!==e.VersionId&&{versionId:e.VersionId}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,lw(e,t)]:(n={$metadata:_k(e),TagSet:void 0,VersionId:void 0},void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),[4,Lk(e.body,t)]);case 1:return""===(r=i.sent()).TagSet&&(n.TagSet=[]),void 0!==r.TagSet&&void 0!==r.TagSet.Tag&&(n.TagSet=Tk(lf(r.TagSet.Tag))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),kx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectTorrentCommand",inputFilterSensitiveLog:Mv.filterSensitiveLog,outputFilterSensitiveLog:Iv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({},Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{torrent:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){return 200!==e.statusCode&&e.statusCode>=300?[2,fw(e,t)]:(n={$metadata:_k(e),Body:void 0,RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),r=e.body,n.Body=r,[2,Promise.resolve(n)])}))}))}(e,t)},t}(cf),Cx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetPublicAccessBlockCommand",inputFilterSensitiveLog:Bv.filterSensitiveLog,outputFilterSensitiveLog:Lv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:{publicAccessBlock:""},body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,pw(e,t)]:(n={$metadata:_k(e),PublicAccessBlockConfiguration:void 0},[4,Lk(e.body,t)]);case 1:return r=i.sent(),n.PublicAccessBlockConfiguration=rk(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),xx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"HeadBucketCommand",inputFilterSensitiveLog:Dv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return nu(this,(function(l){switch(l.label){case 0:return[4,t.endpoint()];case 1:if(n=l.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),[2,new Sc({protocol:o,hostname:r,port:a,method:"HEAD",headers:u,path:c,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,hw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Tx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Kk(t)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"HeadObjectCommand",inputFilterSensitiveLog:Uv.filterSensitiveLog,outputFilterSensitiveLog:jv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs({},Rk(e.IfMatch)&&{"if-match":e.IfMatch}),Rk(e.IfModifiedSince)&&{"if-modified-since":bf(e.IfModifiedSince).toString()}),Rk(e.IfNoneMatch)&&{"if-none-match":e.IfNoneMatch}),Rk(e.IfUnmodifiedSince)&&{"if-unmodified-since":bf(e.IfUnmodifiedSince).toString()}),Rk(e.Range)&&{range:e.Range}),Rk(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Rk(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Rk(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs(Zs({},void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),[2,new Sc({protocol:o,hostname:r,port:a,method:"HEAD",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,vw(e,t)]:(n={$metadata:_k(e),AcceptRanges:void 0,ArchiveStatus:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker=hf(e.headers["x-amz-delete-marker"])),void 0!==e.headers["accept-ranges"]&&(n.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-restore"]&&(n.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["x-amz-archive-status"]&&(n.ArchiveStatus=e.headers["x-amz-archive-status"]),void 0!==e.headers["last-modified"]&&(n.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers["content-length"]&&(n.ContentLength=gf(e.headers["content-length"])),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-missing-meta"]&&(n.MissingMeta=gf(e.headers["x-amz-missing-meta"])),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["cache-control"]&&(n.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-disposition"]&&(n.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["content-encoding"]&&(n.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["content-language"]&&(n.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-type"]&&(n.ContentType=e.headers["content-type"]),void 0!==e.headers.expires&&(n.Expires=new Date(e.headers.expires)),void 0!==e.headers["x-amz-website-redirect-location"]&&(n.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled=hf(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==e.headers["x-amz-storage-class"]&&(n.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-replication-status"]&&(n.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-mp-parts-count"]&&(n.PartsCount=gf(e.headers["x-amz-mp-parts-count"])),void 0!==e.headers["x-amz-object-lock-mode"]&&(n.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(n.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(n.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),Object.keys(e.headers).forEach((function(t){void 0===n.Metadata&&(n.Metadata={}),t.startsWith("x-amz-meta-")&&(n.Metadata[t.substring(11)]=e.headers[t])})),[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Nx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListBucketAnalyticsConfigurationsCommand",inputFilterSensitiveLog:qv.filterSensitiveLog,outputFilterSensitiveLog:Fv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({analytics:"","x-id":"ListBucketAnalyticsConfigurations"},void 0!==e.ContinuationToken&&{"continuation-token":e.ContinuationToken}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,mw(e,t)]:(n={$metadata:_k(e),AnalyticsConfigurationList:void 0,ContinuationToken:void 0,IsTruncated:void 0,NextContinuationToken:void 0},[4,Lk(e.body,t)]);case 1:return""===(r=i.sent()).AnalyticsConfiguration&&(n.AnalyticsConfigurationList=[]),void 0!==r.AnalyticsConfiguration&&(n.AnalyticsConfigurationList=ZS(lf(r.AnalyticsConfiguration))),void 0!==r.ContinuationToken&&(n.ContinuationToken=mf(r.ContinuationToken)),void 0!==r.IsTruncated&&(n.IsTruncated=hf(r.IsTruncated)),void 0!==r.NextContinuationToken&&(n.NextContinuationToken=mf(r.NextContinuationToken)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Ox=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListBucketIntelligentTieringConfigurationsCommand",inputFilterSensitiveLog:Hv.filterSensitiveLog,outputFilterSensitiveLog:Kv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u={},c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({"intelligent-tiering":"","x-id":"ListBucketIntelligentTieringConfigurations"},void 0!==e.ContinuationToken&&{"continuation-token":e.ContinuationToken}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,gw(e,t)]:(n={$metadata:_k(e),ContinuationToken:void 0,IntelligentTieringConfigurationList:void 0,IsTruncated:void 0,NextContinuationToken:void 0},[4,Lk(e.body,t)]);case 1:return void 0!==(r=i.sent()).ContinuationToken&&(n.ContinuationToken=mf(r.ContinuationToken)),""===r.IntelligentTieringConfiguration&&(n.IntelligentTieringConfigurationList=[]),void 0!==r.IntelligentTieringConfiguration&&(n.IntelligentTieringConfigurationList=EE(lf(r.IntelligentTieringConfiguration))),void 0!==r.IsTruncated&&(n.IsTruncated=hf(r.IsTruncated)),void 0!==r.NextContinuationToken&&(n.NextContinuationToken=mf(r.NextContinuationToken)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Ax=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListBucketInventoryConfigurationsCommand",inputFilterSensitiveLog:$v.filterSensitiveLog,outputFilterSensitiveLog:Vv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({inventory:"","x-id":"ListBucketInventoryConfigurations"},void 0!==e.ContinuationToken&&{"continuation-token":e.ContinuationToken}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,yw(e,t)]:(n={$metadata:_k(e),ContinuationToken:void 0,InventoryConfigurationList:void 0,IsTruncated:void 0,NextContinuationToken:void 0},[4,Lk(e.body,t)]);case 1:return void 0!==(r=i.sent()).ContinuationToken&&(n.ContinuationToken=mf(r.ContinuationToken)),""===r.InventoryConfiguration&&(n.InventoryConfigurationList=[]),void 0!==r.InventoryConfiguration&&(n.InventoryConfigurationList=xE(lf(r.InventoryConfiguration))),void 0!==r.IsTruncated&&(n.IsTruncated=hf(r.IsTruncated)),void 0!==r.NextContinuationToken&&(n.NextContinuationToken=mf(r.NextContinuationToken)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Px=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListBucketMetricsConfigurationsCommand",inputFilterSensitiveLog:Wv.filterSensitiveLog,outputFilterSensitiveLog:Gv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({metrics:"","x-id":"ListBucketMetricsConfigurations"},void 0!==e.ContinuationToken&&{"continuation-token":e.ContinuationToken}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ww(e,t)]:(n={$metadata:_k(e),ContinuationToken:void 0,IsTruncated:void 0,MetricsConfigurationList:void 0,NextContinuationToken:void 0},[4,Lk(e.body,t)]);case 1:return void 0!==(r=i.sent()).ContinuationToken&&(n.ContinuationToken=mf(r.ContinuationToken)),void 0!==r.IsTruncated&&(n.IsTruncated=hf(r.IsTruncated)),""===r.MetricsConfiguration&&(n.MetricsConfigurationList=[]),void 0!==r.MetricsConfiguration&&(n.MetricsConfigurationList=UE(lf(r.MetricsConfiguration))),void 0!==r.NextContinuationToken&&(n.NextContinuationToken=mf(r.NextContinuationToken)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),_x=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListBucketsCommand",inputFilterSensitiveLog:function(e){return e},outputFilterSensitiveLog:Qv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var e,n,r,i,o,a,s,u;return nu(this,(function(c){switch(c.label){case 0:return[4,t.endpoint()];case 1:return e=c.sent(),n=e.hostname,r=e.protocol,i=void 0===r?"https":r,o=e.port,a=e.path,s={"content-type":"application/xml"},u=((null==a?void 0:a.endsWith("/"))?a.slice(0,-1):a||"")+"/",[2,new Sc({protocol:i,hostname:n,port:o,method:"GET",headers:s,path:u,body:""})]}}))}))}(0,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,bw(e,t)]:(n={$metadata:_k(e),Buckets:void 0,Owner:void 0},[4,Lk(e.body,t)]);case 1:return""===(r=i.sent()).Buckets&&(n.Buckets=[]),void 0!==r.Buckets&&void 0!==r.Buckets.Bucket&&(n.Buckets=nE(lf(r.Buckets.Bucket))),void 0!==r.Owner&&(n.Owner=JE(r.Owner)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Ix=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListMultipartUploadsCommand",inputFilterSensitiveLog:tm.filterSensitiveLog,outputFilterSensitiveLog:em.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs(Zs(Zs(Zs(Zs(Zs({uploads:""},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.KeyMarker&&{"key-marker":e.KeyMarker}),void 0!==e.MaxUploads&&{"max-uploads":e.MaxUploads.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),void 0!==e.UploadIdMarker&&{"upload-id-marker":e.UploadIdMarker}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Sw(e,t)]:(n={$metadata:_k(e),Bucket:void 0,CommonPrefixes:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyMarker:void 0,MaxUploads:void 0,NextKeyMarker:void 0,NextUploadIdMarker:void 0,Prefix:void 0,UploadIdMarker:void 0,Uploads:void 0},[4,Lk(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=mf(r.Bucket)),""===r.CommonPrefixes&&(n.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(n.CommonPrefixes=rE(lf(r.CommonPrefixes))),void 0!==r.Delimiter&&(n.Delimiter=mf(r.Delimiter)),void 0!==r.EncodingType&&(n.EncodingType=mf(r.EncodingType)),void 0!==r.IsTruncated&&(n.IsTruncated=hf(r.IsTruncated)),void 0!==r.KeyMarker&&(n.KeyMarker=mf(r.KeyMarker)),void 0!==r.MaxUploads&&(n.MaxUploads=gf(r.MaxUploads)),void 0!==r.NextKeyMarker&&(n.NextKeyMarker=mf(r.NextKeyMarker)),void 0!==r.NextUploadIdMarker&&(n.NextUploadIdMarker=mf(r.NextUploadIdMarker)),void 0!==r.Prefix&&(n.Prefix=mf(r.Prefix)),void 0!==r.UploadIdMarker&&(n.UploadIdMarker=mf(r.UploadIdMarker)),""===r.Upload&&(n.Uploads=[]),void 0!==r.Upload&&(n.Uploads=qE(lf(r.Upload))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Mx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListObjectVersionsCommand",inputFilterSensitiveLog:lm.filterSensitiveLog,outputFilterSensitiveLog:dm.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs(Zs(Zs(Zs(Zs(Zs({versions:""},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.KeyMarker&&{"key-marker":e.KeyMarker}),void 0!==e.MaxKeys&&{"max-keys":e.MaxKeys.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),void 0!==e.VersionIdMarker&&{"version-id-marker":e.VersionIdMarker}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Cw(e,t)]:(n={$metadata:_k(e),CommonPrefixes:void 0,DeleteMarkers:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyMarker:void 0,MaxKeys:void 0,Name:void 0,NextKeyMarker:void 0,NextVersionIdMarker:void 0,Prefix:void 0,VersionIdMarker:void 0,Versions:void 0},[4,Lk(e.body,t)]);case 1:return""===(r=i.sent()).CommonPrefixes&&(n.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(n.CommonPrefixes=rE(lf(r.CommonPrefixes))),""===r.DeleteMarker&&(n.DeleteMarkers=[]),void 0!==r.DeleteMarker&&(n.DeleteMarkers=cE(lf(r.DeleteMarker))),void 0!==r.Delimiter&&(n.Delimiter=mf(r.Delimiter)),void 0!==r.EncodingType&&(n.EncodingType=mf(r.EncodingType)),void 0!==r.IsTruncated&&(n.IsTruncated=hf(r.IsTruncated)),void 0!==r.KeyMarker&&(n.KeyMarker=mf(r.KeyMarker)),void 0!==r.MaxKeys&&(n.MaxKeys=gf(r.MaxKeys)),void 0!==r.Name&&(n.Name=mf(r.Name)),void 0!==r.NextKeyMarker&&(n.NextKeyMarker=mf(r.NextKeyMarker)),void 0!==r.NextVersionIdMarker&&(n.NextVersionIdMarker=mf(r.NextVersionIdMarker)),void 0!==r.Prefix&&(n.Prefix=mf(r.Prefix)),void 0!==r.VersionIdMarker&&(n.VersionIdMarker=mf(r.VersionIdMarker)),""===r.Version&&(n.Versions=[]),void 0!==r.Version&&(n.Versions=XE(lf(r.Version))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Rx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListObjectsCommand",inputFilterSensitiveLog:im.filterSensitiveLog,outputFilterSensitiveLog:rm.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({},Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs(Zs(Zs(Zs(Zs({},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.Marker&&{marker:e.Marker}),void 0!==e.MaxKeys&&{"max-keys":e.MaxKeys.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ew(e,t)]:(n={$metadata:_k(e),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,Lk(e.body,t)]);case 1:return""===(r=i.sent()).CommonPrefixes&&(n.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(n.CommonPrefixes=rE(lf(r.CommonPrefixes))),""===r.Contents&&(n.Contents=[]),void 0!==r.Contents&&(n.Contents=$E(lf(r.Contents))),void 0!==r.Delimiter&&(n.Delimiter=mf(r.Delimiter)),void 0!==r.EncodingType&&(n.EncodingType=mf(r.EncodingType)),void 0!==r.IsTruncated&&(n.IsTruncated=hf(r.IsTruncated)),void 0!==r.Marker&&(n.Marker=mf(r.Marker)),void 0!==r.MaxKeys&&(n.MaxKeys=gf(r.MaxKeys)),void 0!==r.Name&&(n.Name=mf(r.Name)),void 0!==r.NextMarker&&(n.NextMarker=mf(r.NextMarker)),void 0!==r.Prefix&&(n.Prefix=mf(r.Prefix)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Lx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListObjectsV2Command",inputFilterSensitiveLog:sm.filterSensitiveLog,outputFilterSensitiveLog:am.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({},Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs(Zs(Zs(Zs(Zs(Zs(Zs({"list-type":"2"},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.MaxKeys&&{"max-keys":e.MaxKeys.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),void 0!==e.ContinuationToken&&{"continuation-token":e.ContinuationToken}),void 0!==e.FetchOwner&&{"fetch-owner":e.FetchOwner.toString()}),void 0!==e.StartAfter&&{"start-after":e.StartAfter}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,kw(e,t)]:(n={$metadata:_k(e),CommonPrefixes:void 0,Contents:void 0,ContinuationToken:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyCount:void 0,MaxKeys:void 0,Name:void 0,NextContinuationToken:void 0,Prefix:void 0,StartAfter:void 0},[4,Lk(e.body,t)]);case 1:return""===(r=i.sent()).CommonPrefixes&&(n.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(n.CommonPrefixes=rE(lf(r.CommonPrefixes))),""===r.Contents&&(n.Contents=[]),void 0!==r.Contents&&(n.Contents=$E(lf(r.Contents))),void 0!==r.ContinuationToken&&(n.ContinuationToken=mf(r.ContinuationToken)),void 0!==r.Delimiter&&(n.Delimiter=mf(r.Delimiter)),void 0!==r.EncodingType&&(n.EncodingType=mf(r.EncodingType)),void 0!==r.IsTruncated&&(n.IsTruncated=hf(r.IsTruncated)),void 0!==r.KeyCount&&(n.KeyCount=gf(r.KeyCount)),void 0!==r.MaxKeys&&(n.MaxKeys=gf(r.MaxKeys)),void 0!==r.Name&&(n.Name=mf(r.Name)),void 0!==r.NextContinuationToken&&(n.NextContinuationToken=mf(r.NextContinuationToken)),void 0!==r.Prefix&&(n.Prefix=mf(r.Prefix)),void 0!==r.StartAfter&&(n.StartAfter=mf(r.StartAfter)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Bx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListPartsCommand",inputFilterSensitiveLog:hm.filterSensitiveLog,outputFilterSensitiveLog:pm.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({},Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs(Zs(Zs({"x-id":"ListParts"},void 0!==e.MaxParts&&{"max-parts":e.MaxParts.toString()}),void 0!==e.PartNumberMarker&&{"part-number-marker":e.PartNumberMarker}),void 0!==e.UploadId&&{uploadId:e.UploadId}),[2,new Sc({protocol:o,hostname:r,port:a,method:"GET",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,xw(e,t)]:(n={$metadata:_k(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Lk(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=mf(r.Bucket)),void 0!==r.Initiator&&(n.Initiator=bE(r.Initiator)),void 0!==r.IsTruncated&&(n.IsTruncated=hf(r.IsTruncated)),void 0!==r.Key&&(n.Key=mf(r.Key)),void 0!==r.MaxParts&&(n.MaxParts=gf(r.MaxParts)),void 0!==r.NextPartNumberMarker&&(n.NextPartNumberMarker=mf(r.NextPartNumberMarker)),void 0!==r.Owner&&(n.Owner=JE(r.Owner)),void 0!==r.PartNumberMarker&&(n.PartNumberMarker=mf(r.PartNumberMarker)),""===r.Part&&(n.Parts=[]),void 0!==r.Part&&(n.Parts=tk(lf(r.Part))),void 0!==r.StorageClass&&(n.StorageClass=mf(r.StorageClass)),void 0!==r.UploadId&&(n.UploadId=mf(r.UploadId)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Dx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketAccelerateConfigurationCommand",inputFilterSensitiveLog:vm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({"content-type":"application/xml"},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={accelerate:""},void 0!==e.AccelerateConfiguration&&(f=gb(e.AccelerateConfiguration)),void 0!==e.AccelerateConfiguration&&(p=gb(e.AccelerateConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Tw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),zx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketAclCommand",inputFilterSensitiveLog:mm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs({"content-type":"application/xml"},Rk(e.ACL)&&{"x-amz-acl":e.ACL}),Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),Rk(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),Rk(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),Rk(e.GrantWrite)&&{"x-amz-grant-write":e.GrantWrite}),Rk(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={acl:""},void 0!==e.AccessControlPolicy&&(f=yb(e.AccessControlPolicy)),void 0!==e.AccessControlPolicy&&(p=yb(e.AccessControlPolicy),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Nw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),jx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketAnalyticsConfigurationCommand",inputFilterSensitiveLog:gm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({"content-type":"application/xml"},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({analytics:""},void 0!==e.Id&&{id:e.Id}),void 0!==e.AnalyticsConfiguration&&(f=wb(e.AnalyticsConfiguration)),void 0!==e.AnalyticsConfiguration&&(p=wb(e.AnalyticsConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ow(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Ux=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketCorsCommand",inputFilterSensitiveLog:wm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({"content-type":"application/xml"},Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={cors:""},void 0!==e.CORSConfiguration&&(f=Tb(e.CORSConfiguration)),void 0!==e.CORSConfiguration&&(p=Tb(e.CORSConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Aw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Fx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketEncryptionCommand",inputFilterSensitiveLog:bm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({"content-type":"application/xml"},Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={encryption:""},void 0!==e.ServerSideEncryptionConfiguration&&(f=IS(e.ServerSideEncryptionConfiguration)),void 0!==e.ServerSideEncryptionConfiguration&&(p=IS(e.ServerSideEncryptionConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Pw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),qx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketIntelligentTieringConfigurationCommand",inputFilterSensitiveLog:Sm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u={"content-type":"application/xml"},c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({"intelligent-tiering":""},void 0!==e.Id&&{id:e.Id}),void 0!==e.IntelligentTieringConfiguration&&(f=jb(e.IntelligentTieringConfiguration)),void 0!==e.IntelligentTieringConfiguration&&(p=jb(e.IntelligentTieringConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,_w(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Kx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketInventoryConfigurationCommand",inputFilterSensitiveLog:Em.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({"content-type":"application/xml"},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({inventory:""},void 0!==e.Id&&{id:e.Id}),void 0!==e.InventoryConfiguration&&(f=Fb(e.InventoryConfiguration)),void 0!==e.InventoryConfiguration&&(p=Fb(e.InventoryConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Iw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Hx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketLifecycleConfigurationCommand",inputFilterSensitiveLog:Cm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({"content-type":"application/xml"},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={lifecycle:""},void 0!==e.LifecycleConfiguration&&(f=Eb(e.LifecycleConfiguration)),void 0!==e.LifecycleConfiguration&&(p=Eb(e.LifecycleConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Mw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Vx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketLoggingCommand",inputFilterSensitiveLog:Tm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({"content-type":"application/xml"},Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={logging:""},void 0!==e.BucketLoggingStatus&&(f=kb(e.BucketLoggingStatus)),void 0!==e.BucketLoggingStatus&&(p=kb(e.BucketLoggingStatus),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Rw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),$x=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketMetricsConfigurationCommand",inputFilterSensitiveLog:Nm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({"content-type":"application/xml"},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l=Zs({metrics:""},void 0!==e.Id&&{id:e.Id}),void 0!==e.MetricsConfiguration&&(f=eS(e.MetricsConfiguration)),void 0!==e.MetricsConfiguration&&(p=eS(e.MetricsConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Lw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Gx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketNotificationConfigurationCommand",inputFilterSensitiveLog:Om.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs({"content-type":"application/xml"},Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={notification:""},void 0!==e.NotificationConfiguration&&(f=iS(e.NotificationConfiguration)),void 0!==e.NotificationConfiguration&&(p=iS(e.NotificationConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Bw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Wx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketOwnershipControlsCommand",inputFilterSensitiveLog:Am.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({"content-type":"application/xml"},Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={ownershipControls:""},void 0!==e.OwnershipControls&&(f=pS(e.OwnershipControls)),void 0!==e.OwnershipControls&&(p=pS(e.OwnershipControls),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Dw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Yx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketPolicyCommand",inputFilterSensitiveLog:Pm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs({"content-type":"text/plain"},Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.ConfirmRemoveSelfBucketAccess)&&{"x-amz-confirm-remove-self-bucket-access":e.ConfirmRemoveSelfBucketAccess.toString()}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={policy:""},void 0!==e.Policy&&(f=e.Policy),void 0!==e.Policy&&(p=e.Policy,f=p),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,zw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Qx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketReplicationCommand",inputFilterSensitiveLog:_m.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs({"content-type":"application/xml"},Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.Token)&&{"x-amz-bucket-object-lock-token":e.Token}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={replication:""},void 0!==e.ReplicationConfiguration&&(f=yS(e.ReplicationConfiguration)),void 0!==e.ReplicationConfiguration&&(p=yS(e.ReplicationConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,jw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Xx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketRequestPaymentCommand",inputFilterSensitiveLog:Mm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({"content-type":"application/xml"},Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={requestPayment:""},void 0!==e.RequestPaymentConfiguration&&(f=CS(e.RequestPaymentConfiguration)),void 0!==e.RequestPaymentConfiguration&&(p=CS(e.RequestPaymentConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Uw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Jx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketTaggingCommand",inputFilterSensitiveLog:Lm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({"content-type":"application/xml"},Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={tagging:""},void 0!==e.Tagging&&(f=qS(e.Tagging)),void 0!==e.Tagging&&(p=qS(e.Tagging),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Fw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),Zx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketVersioningCommand",inputFilterSensitiveLog:Dm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs({"content-type":"application/xml"},Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.MFA)&&{"x-amz-mfa":e.MFA}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={versioning:""},void 0!==e.VersioningConfiguration&&(f=YS(e.VersioningConfiguration)),void 0!==e.VersioningConfiguration&&(p=YS(e.VersioningConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,qw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),eT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketWebsiteCommand",inputFilterSensitiveLog:jm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({"content-type":"application/xml"},Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={website:""},void 0!==e.WebsiteConfiguration&&(f=QS(e.WebsiteConfiguration)),void 0!==e.WebsiteConfiguration&&(p=QS(e.WebsiteConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Kw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),tT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectAclCommand",inputFilterSensitiveLog:Km.filterSensitiveLog,outputFilterSensitiveLog:qm.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs({"content-type":"application/xml"},Rk(e.ACL)&&{"x-amz-acl":e.ACL}),Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),Rk(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),Rk(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),Rk(e.GrantWrite)&&{"x-amz-grant-write":e.GrantWrite}),Rk(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs({acl:""},void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.AccessControlPolicy&&(f=yb(e.AccessControlPolicy)),void 0!==e.AccessControlPolicy&&(p=yb(e.AccessControlPolicy),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Vw(e,t)]:(n={$metadata:_k(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),nT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Kk(t)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:Fm.filterSensitiveLog,outputFilterSensitiveLog:Um.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs({"content-type":"application/octet-stream"},Rk(e.ACL)&&{"x-amz-acl":e.ACL}),Rk(e.CacheControl)&&{"cache-control":e.CacheControl}),Rk(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),Rk(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),Rk(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),Rk(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.ContentType)&&{"content-type":e.ContentType}),Rk(e.Expires)&&{expires:bf(e.Expires).toString()}),Rk(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),Rk(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),Rk(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),Rk(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),Rk(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),Rk(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),Rk(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),Rk(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Rk(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Rk(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Rk(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),Rk(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),Rk(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.Tagging)&&{"x-amz-tagging":e.Tagging}),Rk(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),Rk(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Rk(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){var r;return Zs(Zs({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))}),{})),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l={"x-id":"PutObject"},void 0!==e.Body&&(f=e.Body),void 0!==e.Body&&(p=e.Body,f=p),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Hw(e,t)]:(n={$metadata:_k(e),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled=hf(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),rT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectLegalHoldCommand",inputFilterSensitiveLog:Vm.filterSensitiveLog,outputFilterSensitiveLog:Hm.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs({"content-type":"application/xml"},Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs({"legal-hold":""},void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.LegalHold&&(f=uS(e.LegalHold)),void 0!==e.LegalHold&&(p=uS(e.LegalHold),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,$w(e,t)]:(n={$metadata:_k(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),iT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectLockConfigurationCommand",inputFilterSensitiveLog:Gm.filterSensitiveLog,outputFilterSensitiveLog:$m.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs({"content-type":"application/xml"},Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.Token)&&{"x-amz-bucket-object-lock-token":e.Token}),Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={"object-lock":""},void 0!==e.ObjectLockConfiguration&&(f=sS(e.ObjectLockConfiguration)),void 0!==e.ObjectLockConfiguration&&(p=sS(e.ObjectLockConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Gw(e,t)]:(n={$metadata:_k(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),oT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectRetentionCommand",inputFilterSensitiveLog:Ym.filterSensitiveLog,outputFilterSensitiveLog:Wm.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs({"content-type":"application/xml"},Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":e.BypassGovernanceRetention.toString()}),Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs({retention:""},void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.Retention&&(f=cS(e.Retention)),void 0!==e.Retention&&(p=cS(e.Retention),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ww(e,t)]:(n={$metadata:_k(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),aT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectTaggingCommand",inputFilterSensitiveLog:Xm.filterSensitiveLog,outputFilterSensitiveLog:Qm.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs({"content-type":"application/xml"},Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs({tagging:""},void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.Tagging&&(f=qS(e.Tagging)),void 0!==e.Tagging&&(p=qS(e.Tagging),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Yw(e,t)]:(n={$metadata:_k(e),VersionId:void 0},void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),sT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t)),this.middlewareStack.use(GC(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutPublicAccessBlockCommand",inputFilterSensitiveLog:Jm.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({"content-type":"application/xml"},Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return c=c.replace("{Bucket}",df(d)),l={publicAccessBlock:""},void 0!==e.PublicAccessBlockConfiguration&&(f=mS(e.PublicAccessBlockConfiguration)),void 0!==e.PublicAccessBlockConfiguration&&(p=mS(e.PublicAccessBlockConfiguration),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Qw(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf);!function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.KMSKeyId&&{KMSKeyId:ng})}}(Vk||(Vk={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}($k||($k={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.Encryption&&{Encryption:Vk.filterSensitiveLog(e.Encryption)})}}(Gk||(Gk={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.S3&&{S3:Gk.filterSensitiveLog(e.S3)})}}(Wk||(Wk={})),function(e){e.IGNORE="IGNORE",e.NONE="NONE",e.USE="USE"}(Yk||(Yk={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Qk||(Qk={})),function(e){e.DOCUMENT="DOCUMENT",e.LINES="LINES"}(Xk||(Xk={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Jk||(Jk={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(Zk||(Zk={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(eC||(eC={})),function(e){e.ALWAYS="ALWAYS",e.ASNEEDED="ASNEEDED"}(tC||(tC={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(nC||(nC={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(rC||(rC={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(iC||(iC={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(oC||(oC={})),function(e){e.SELECT="SELECT"}(aC||(aC={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.OutputLocation&&{OutputLocation:Wk.filterSensitiveLog(e.OutputLocation)})}}(sC||(sC={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.RestoreRequest&&{RestoreRequest:sC.filterSensitiveLog(e.RestoreRequest)})}}(uC||(uC={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(cC||(cC={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(dC||(dC={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(lC||(lC={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(fC||(fC={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(pC||(pC={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(hC||(hC={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(vC||(vC={})),function(e){e.visit=function(e,t){return void 0!==e.Records?t.Records(e.Records):void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Cont?t.Cont(e.Cont):void 0!==e.End?t.End(e.End):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Records?{Records:pC.filterSensitiveLog(e.Records)}:void 0!==e.Stats?{Stats:vC.filterSensitiveLog(e.Stats)}:void 0!==e.Progress?{Progress:fC.filterSensitiveLog(e.Progress)}:void 0!==e.Cont?{Cont:cC.filterSensitiveLog(e.Cont)}:void 0!==e.End?{End:dC.filterSensitiveLog(e.End)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(mC||(mC={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.Payload&&{Payload:"STREAMING_CONTENT"})}}(gC||(gC={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(yC||(yC={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(wC||(wC={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.SSECustomerKey&&{SSECustomerKey:ng})}}(bC||(bC={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ng})}}(SC||(SC={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.SSECustomerKey&&{SSECustomerKey:ng})}}(EC||(EC={})),function(e){e.filterSensitiveLog=function(e){return Zs({},e)}}(kC||(kC={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ng})}}(CC||(CC={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs(Zs({},e),e.SSECustomerKey&&{SSECustomerKey:ng}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:ng})}}(xC||(xC={})),function(e){e.filterSensitiveLog=function(e){return Zs(Zs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:ng})}}(TC||(TC={}));var uT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"RestoreObjectCommand",inputFilterSensitiveLog:uC.filterSensitiveLog,outputFilterSensitiveLog:eg.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs({"content-type":"application/xml"},Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs({restore:"","x-id":"RestoreObject"},void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.RestoreRequest&&(f=TS(e.RestoreRequest)),void 0!==e.RestoreRequest&&(p=TS(e.RestoreRequest),f='<?xml version="1.0" encoding="UTF-8"?>',p.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),f+=p.toString()),[2,new Sc({protocol:o,hostname:r,port:a,method:"POST",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Xw(e,t)]:(n={$metadata:_k(e),RequestCharged:void 0,RestoreOutputPath:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-restore-output-path"]&&(n.RestoreOutputPath=e.headers["x-amz-restore-output-path"]),[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),cT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Kk(t)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"SelectObjectContentCommand",inputFilterSensitiveLog:bC.filterSensitiveLog,outputFilterSensitiveLog:gC.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p,h;return nu(this,(function(v){switch(v.label){case 0:return[4,t.endpoint()];case 1:if(n=v.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs({"content-type":"application/xml"},Rk(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Rk(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Rk(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l={select:"","select-type":"2","x-id":"SelectObjectContent"},f='<?xml version="1.0" encoding="UTF-8"?>',(p=new ig("SelectObjectContentRequest")).addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),void 0!==e.Expression&&(h=new ig("Expression").addChildNode(new og(e.Expression)).withName("Expression"),p.addChildNode(h)),void 0!==e.ExpressionType&&(h=new ig("ExpressionType").addChildNode(new og(e.ExpressionType)).withName("ExpressionType"),p.addChildNode(h)),void 0!==e.InputSerialization&&(h=zb(e.InputSerialization).withName("InputSerialization"),p.addChildNode(h)),void 0!==e.OutputSerialization&&(h=lS(e.OutputSerialization).withName("OutputSerialization"),p.addChildNode(h)),void 0!==e.RequestProgress&&(h=xS(e.RequestProgress).withName("RequestProgress"),p.addChildNode(h)),void 0!==e.ScanRange&&(h=PS(e.ScanRange).withName("ScanRange"),p.addChildNode(h)),f+=p.toString(),[2,new Sc({protocol:o,hostname:r,port:a,method:"POST",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){return 200!==e.statusCode&&e.statusCode>=300?[2,Jw(e,t)]:(n={$metadata:_k(e),Payload:void 0},r=t.eventStreamMarshaller.deserialize(e.body,(function(e){return tu(void 0,void 0,void 0,(function(){var n,r,i,o;return nu(this,(function(a){switch(a.label){case 0:return n=Object.keys(e)[0],r=Object.entries(e[n].headers).reduce((function(e,t){return e[t[0]]=t[1].value,e}),{}),i={headers:r,body:e[n].body},(o={})[n]=i,[4,nb(o,t)];case 1:return[2,a.sent()]}}))}))})),n.Payload=r,[2,Promise.resolve(n)])}))}))}(e,t)},t}(cf),dT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Kk(t)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:EC.filterSensitiveLog,outputFilterSensitiveLog:SC.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return nu(this,(function(h){switch(h.label){case 0:return[4,t.endpoint()];case 1:if(n=h.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs(Zs(Zs(Zs({"content-type":"application/octet-stream"},Rk(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),Rk(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Rk(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Rk(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Rk(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs(Zs({"x-id":"UploadPart"},void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.Body&&(f=e.Body),void 0!==e.Body&&(p=e.Body,f=p),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:f})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Zw(e,t)]:(n={$metadata:_k(e),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled=hf(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),lT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(hl(t)),this.middlewareStack.use(Kk(t)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"UploadPartCopyCommand",inputFilterSensitiveLog:xC.filterSensitiveLog,outputFilterSensitiveLog:CC.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return nu(this,(function(f){switch(f.label){case 0:return[4,t.endpoint()];case 1:if(n=f.sent(),r=n.hostname,i=n.protocol,o=void 0===i?"https":i,a=n.port,s=n.path,u=Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs({},Rk(e.CopySource)&&{"x-amz-copy-source":e.CopySource}),Rk(e.CopySourceIfMatch)&&{"x-amz-copy-source-if-match":e.CopySourceIfMatch}),Rk(e.CopySourceIfModifiedSince)&&{"x-amz-copy-source-if-modified-since":bf(e.CopySourceIfModifiedSince).toString()}),Rk(e.CopySourceIfNoneMatch)&&{"x-amz-copy-source-if-none-match":e.CopySourceIfNoneMatch}),Rk(e.CopySourceIfUnmodifiedSince)&&{"x-amz-copy-source-if-unmodified-since":bf(e.CopySourceIfUnmodifiedSince).toString()}),Rk(e.CopySourceRange)&&{"x-amz-copy-source-range":e.CopySourceRange}),Rk(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Rk(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Rk(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Rk(e.CopySourceSSECustomerAlgorithm)&&{"x-amz-copy-source-server-side-encryption-customer-algorithm":e.CopySourceSSECustomerAlgorithm}),Rk(e.CopySourceSSECustomerKey)&&{"x-amz-copy-source-server-side-encryption-customer-key":e.CopySourceSSECustomerKey}),Rk(e.CopySourceSSECustomerKeyMD5)&&{"x-amz-copy-source-server-side-encryption-customer-key-md5":e.CopySourceSSECustomerKeyMD5}),Rk(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Rk(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),Rk(e.ExpectedSourceBucketOwner)&&{"x-amz-source-expected-bucket-owner":e.ExpectedSourceBucketOwner}),c=((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(c=c.replace("{Bucket}",df(d)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return c=c.replace("{Key+}",d.split("/").map((function(e){return df(e)})).join("/")),l=Zs(Zs({"x-id":"UploadPartCopy"},void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),void 0!==e.UploadId&&{uploadId:e.UploadId}),[2,new Sc({protocol:o,hostname:r,port:a,method:"PUT",headers:u,path:c,query:l,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r;return nu(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,eb(e,t)]:(n={$metadata:_k(e),BucketKeyEnabled:void 0,CopyPartResult:void 0,CopySourceVersionId:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==e.headers["x-amz-copy-source-version-id"]&&(n.CopySourceVersionId=e.headers["x-amz-copy-source-version-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled=hf(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,Lk(e.body,t)]);case 1:return r=i.sent(),n.CopyPartResult=oE(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),fT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Js(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(jk(t,this.serialize,this.deserialize)),this.middlewareStack.use(Xd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"WriteGetObjectResponseCommand",inputFilterSensitiveLog:TC.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return nu(this,(function(p){switch(p.label){case 0:return[4,t.endpoint()];case 1:return(n=p.sent()).hostname,r=n.protocol,i=void 0===r?"https":r,o=n.port,a=n.path,s=Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs(Zs({"content-type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED-PAYLOAD"},Rk(e.RequestRoute)&&{"x-amz-request-route":e.RequestRoute}),Rk(e.RequestToken)&&{"x-amz-request-token":e.RequestToken}),Rk(e.StatusCode)&&{"x-amz-fwd-status":e.StatusCode.toString()}),Rk(e.ErrorCode)&&{"x-amz-fwd-error-code":e.ErrorCode}),Rk(e.ErrorMessage)&&{"x-amz-fwd-error-message":e.ErrorMessage}),Rk(e.AcceptRanges)&&{"x-amz-fwd-header-accept-ranges":e.AcceptRanges}),Rk(e.CacheControl)&&{"x-amz-fwd-header-cache-control":e.CacheControl}),Rk(e.ContentDisposition)&&{"x-amz-fwd-header-content-disposition":e.ContentDisposition}),Rk(e.ContentEncoding)&&{"x-amz-fwd-header-content-encoding":e.ContentEncoding}),Rk(e.ContentLanguage)&&{"x-amz-fwd-header-content-language":e.ContentLanguage}),Rk(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),Rk(e.ContentRange)&&{"x-amz-fwd-header-content-range":e.ContentRange}),Rk(e.ContentType)&&{"x-amz-fwd-header-content-type":e.ContentType}),Rk(e.DeleteMarker)&&{"x-amz-fwd-header-x-amz-delete-marker":e.DeleteMarker.toString()}),Rk(e.ETag)&&{"x-amz-fwd-header-etag":e.ETag}),Rk(e.Expires)&&{"x-amz-fwd-header-expires":bf(e.Expires).toString()}),Rk(e.Expiration)&&{"x-amz-fwd-header-x-amz-expiration":e.Expiration}),Rk(e.LastModified)&&{"x-amz-fwd-header-last-modified":bf(e.LastModified).toString()}),Rk(e.MissingMeta)&&{"x-amz-fwd-header-x-amz-missing-meta":e.MissingMeta.toString()}),Rk(e.ObjectLockMode)&&{"x-amz-fwd-header-x-amz-object-lock-mode":e.ObjectLockMode}),Rk(e.ObjectLockLegalHoldStatus)&&{"x-amz-fwd-header-x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),Rk(e.ObjectLockRetainUntilDate)&&{"x-amz-fwd-header-x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Rk(e.PartsCount)&&{"x-amz-fwd-header-x-amz-mp-parts-count":e.PartsCount.toString()}),Rk(e.ReplicationStatus)&&{"x-amz-fwd-header-x-amz-replication-status":e.ReplicationStatus}),Rk(e.RequestCharged)&&{"x-amz-fwd-header-x-amz-request-charged":e.RequestCharged}),Rk(e.Restore)&&{"x-amz-fwd-header-x-amz-restore":e.Restore}),Rk(e.ServerSideEncryption)&&{"x-amz-fwd-header-x-amz-server-side-encryption":e.ServerSideEncryption}),Rk(e.SSECustomerAlgorithm)&&{"x-amz-fwd-header-x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Rk(e.SSEKMSKeyId)&&{"x-amz-fwd-header-x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),Rk(e.SSECustomerKeyMD5)&&{"x-amz-fwd-header-x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Rk(e.StorageClass)&&{"x-amz-fwd-header-x-amz-storage-class":e.StorageClass}),Rk(e.TagCount)&&{"x-amz-fwd-header-x-amz-tagging-count":e.TagCount.toString()}),Rk(e.VersionId)&&{"x-amz-fwd-header-x-amz-version-id":e.VersionId}),Rk(e.BucketKeyEnabled)&&{"x-amz-fwd-header-x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){var r;return Zs(Zs({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))}),{})),u=((null==a?void 0:a.endsWith("/"))?a.slice(0,-1):a||"")+"/WriteGetObjectResponse",c={"x-id":"WriteGetObjectResponse"},void 0!==e.Body&&(d=e.Body),void 0!==e.Body&&(l=e.Body,d=l),[4,t.endpoint()];case 2:if(f=p.sent().hostname,!0!==t.disableHostPrefix){if(f="{RequestRoute}."+f,void 0===e.RequestRoute)throw new Error("Empty value provided for input host prefix: RequestRoute.");if(f=f.replace("{RequestRoute}",e.RequestRoute),!/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(f))throw new Error("ValidationError: prefixed hostname must be hostname compatible.")}return[2,new Sc({protocol:i,hostname:f,port:o,method:"POST",headers:s,path:u,query:c,body:d})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return tu(void 0,void 0,void 0,(function(){var n;return nu(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,tb(e,t)]:(n={$metadata:_k(e)},[4,Ik(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(cf),pT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Js(t,e),t.prototype.abortMultipartUpload=function(e,t,n){var r=new Uk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.completeMultipartUpload=function(e,t,n){var r=new Fk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.copyObject=function(e,t,n){var r=new Hk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.createBucket=function(e,t,n){var r=new AC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.createMultipartUpload=function(e,t,n){var r=new PC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucket=function(e,t,n){var r=new IC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketAnalyticsConfiguration=function(e,t,n){var r=new _C(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketCors=function(e,t,n){var r=new MC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketEncryption=function(e,t,n){var r=new RC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketIntelligentTieringConfiguration=function(e,t,n){var r=new LC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketInventoryConfiguration=function(e,t,n){var r=new BC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketLifecycle=function(e,t,n){var r=new DC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketMetricsConfiguration=function(e,t,n){var r=new zC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketOwnershipControls=function(e,t,n){var r=new jC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketPolicy=function(e,t,n){var r=new UC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketReplication=function(e,t,n){var r=new FC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketTagging=function(e,t,n){var r=new qC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketWebsite=function(e,t,n){var r=new KC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteObject=function(e,t,n){var r=new HC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteObjects=function(e,t,n){var r=new YC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteObjectTagging=function(e,t,n){var r=new VC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deletePublicAccessBlock=function(e,t,n){var r=new QC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketAccelerateConfiguration=function(e,t,n){var r=new XC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketAcl=function(e,t,n){var r=new JC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketAnalyticsConfiguration=function(e,t,n){var r=new ZC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketCors=function(e,t,n){var r=new ex(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketEncryption=function(e,t,n){var r=new tx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketIntelligentTieringConfiguration=function(e,t,n){var r=new nx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketInventoryConfiguration=function(e,t,n){var r=new rx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketLifecycleConfiguration=function(e,t,n){var r=new ix(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketLocation=function(e,t,n){var r=new ox(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketLogging=function(e,t,n){var r=new ax(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketMetricsConfiguration=function(e,t,n){var r=new sx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketNotificationConfiguration=function(e,t,n){var r=new ux(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketOwnershipControls=function(e,t,n){var r=new cx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketPolicy=function(e,t,n){var r=new dx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketPolicyStatus=function(e,t,n){var r=new lx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketReplication=function(e,t,n){var r=new fx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketRequestPayment=function(e,t,n){var r=new px(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketTagging=function(e,t,n){var r=new hx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketVersioning=function(e,t,n){var r=new vx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketWebsite=function(e,t,n){var r=new mx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getObject=function(e,t,n){var r=new yx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getObjectAcl=function(e,t,n){var r=new gx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getObjectLegalHold=function(e,t,n){var r=new wx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getObjectLockConfiguration=function(e,t,n){var r=new bx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getObjectRetention=function(e,t,n){var r=new Sx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getObjectTagging=function(e,t,n){var r=new Ex(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getObjectTorrent=function(e,t,n){var r=new kx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getPublicAccessBlock=function(e,t,n){var r=new Cx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.headBucket=function(e,t,n){var r=new xx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.headObject=function(e,t,n){var r=new Tx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listBucketAnalyticsConfigurations=function(e,t,n){var r=new Nx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listBucketIntelligentTieringConfigurations=function(e,t,n){var r=new Ox(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listBucketInventoryConfigurations=function(e,t,n){var r=new Ax(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listBucketMetricsConfigurations=function(e,t,n){var r=new Px(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listBuckets=function(e,t,n){var r=new _x(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listMultipartUploads=function(e,t,n){var r=new Ix(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listObjects=function(e,t,n){var r=new Rx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listObjectsV2=function(e,t,n){var r=new Lx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listObjectVersions=function(e,t,n){var r=new Mx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listParts=function(e,t,n){var r=new Bx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketAccelerateConfiguration=function(e,t,n){var r=new Dx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketAcl=function(e,t,n){var r=new zx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketAnalyticsConfiguration=function(e,t,n){var r=new jx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketCors=function(e,t,n){var r=new Ux(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketEncryption=function(e,t,n){var r=new Fx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketIntelligentTieringConfiguration=function(e,t,n){var r=new qx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketInventoryConfiguration=function(e,t,n){var r=new Kx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketLifecycleConfiguration=function(e,t,n){var r=new Hx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketLogging=function(e,t,n){var r=new Vx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketMetricsConfiguration=function(e,t,n){var r=new $x(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketNotificationConfiguration=function(e,t,n){var r=new Gx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketOwnershipControls=function(e,t,n){var r=new Wx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketPolicy=function(e,t,n){var r=new Yx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketReplication=function(e,t,n){var r=new Qx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketRequestPayment=function(e,t,n){var r=new Xx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketTagging=function(e,t,n){var r=new Jx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketVersioning=function(e,t,n){var r=new Zx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketWebsite=function(e,t,n){var r=new eT(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putObject=function(e,t,n){var r=new nT(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putObjectAcl=function(e,t,n){var r=new tT(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putObjectLegalHold=function(e,t,n){var r=new rT(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putObjectLockConfiguration=function(e,t,n){var r=new iT(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putObjectRetention=function(e,t,n){var r=new oT(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putObjectTagging=function(e,t,n){var r=new aT(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putPublicAccessBlock=function(e,t,n){var r=new sT(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.restoreObject=function(e,t,n){var r=new uT(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.selectObjectContent=function(e,t,n){var r=new cT(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.uploadPart=function(e,t,n){var r=new dT(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.uploadPartCopy=function(e,t,n){var r=new lT(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.writeGetObjectResponse=function(e,t,n){var r=new fT(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t}(rg),hT=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}(),vT=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,mT)},mT=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};for(var gT=function(){function e(e){var t=(void 0===e?{}:e).requestTimeout;this.requestTimeout=t}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal,r=this.requestTimeout;if(null==n?void 0:n.aborted){var i=new Error("Request aborted");return i.name="AbortError",Promise.reject(i)}var o=e.path;if(e.query){var a=function(e){var t,n,r=[];try{for(var i=hu(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var a=o.value,s=e[a];if(a=vT(a),Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+vT(s[u]));else{var d=a;(s||"string"==typeof s)&&(d+="="+vT(s)),r.push(d)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(e.query);a&&(o+="?"+a)}var s=e.port,u=e.method,c=e.protocol+"//"+e.hostname+(s?":"+s:"")+o,d={body:"GET"===u||"HEAD"===u?void 0:e.body,headers:new Headers(e.headers),method:u};"undefined"!=typeof AbortController&&(d.signal=n);var l,f=new Request(c,d),p=[fetch(f).then((function(e){var t,n,r=e.headers,i={};try{for(var o=hu(r.entries()),a=o.next();!a.done;a=o.next()){var s=a.value;i[s[0]]=s[1]}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new hT({headers:i,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new hT({headers:i,statusCode:e.status,body:t})}}))})),(l=r,void 0===l&&(l=0),new Promise((function(e,t){l&&setTimeout((function(){var e=new Error("Request did not complete within "+l+" ms");e.name="TimeoutError",t(e)}),l)})))];return n&&p.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),Promise.race(p)},e}(),yT={},wT=new Array(64),bT=0,ST="A".charCodeAt(0),ET="Z".charCodeAt(0);bT+ST<=ET;bT++){yT[CT=String.fromCharCode(bT+ST)]=bT,wT[bT]=CT}for(bT=0,ST="a".charCodeAt(0),ET="z".charCodeAt(0);bT+ST<=ET;bT++){var kT=bT+26;yT[CT=String.fromCharCode(bT+ST)]=kT,wT[kT]=CT}for(bT=0;bT<10;bT++){yT[bT.toString(10)]=bT+52;var CT=bT.toString(10);kT=bT+52;yT[CT]=kT,wT[kT]=CT}yT["+"]=62,wT[62]="+",yT["/"]=63,wT[63]="/";var xT=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class TT{constructor(){this.queue=[],this.resolveEmptyQueue=()=>{},this.emptyQueuePromise=new Promise((e=>{e()})),this.resetEmptyQueuePromise()}push(e){this.queue.push(e)}shift(){const e=this.queue.shift();return void 0===e?null:(0===this.queue.length&&(this.resolveEmptyQueue(),this.resetEmptyQueuePromise()),e)}getSize(){return this.queue.length}clear(){this.queue=[],this.resolveEmptyQueue()}waitUntilEmpty(){return xT(this,void 0,void 0,(function*(){0!==this.getSize()&&(yield this.emptyQueuePromise)}))}resetEmptyQueuePromise(){this.emptyQueuePromise=new Promise((e=>{this.resolveEmptyQueue=e}))}}class NT{constructor(e,t,n){this.inProgress={},this.uploaderProgress={total:0,pending:0},this.queue=new TT,this.fileNamePrefix="",this.cancelled=!1,this.onDrained=new Qs,this.onProgressUpdate=new Qs,this.onFileUploaded=new Qs,this.onError=new Qs,this.logger=n,this.s3=e,this.options=t}static get maximumConcurrentUploads(){return 2}static createUploader(e,t,n,r){const i=Object.assign({},e),o=new pT(Object.assign(Object.assign({maxAttempts:10,requestHandler:new gT({requestTimeout:24e4}),forcePathStyle:!0},i),{credentials:n}));return new NT(o,t,r)}get Drained(){return this.onDrained.expose()}get ProgressUpdate(){return this.onProgressUpdate.expose()}get FileUploaded(){return this.onFileUploaded.expose()}get Error(){return this.onError.expose()}uploadFile(e,t){if(this.cancelled)return;const n={body:e,s3Key:`${this.fileNamePrefix}${t}`};this.canPerformUpload()?this.performUpload(n):this.queue.push(n),this.notifyNewPendingFile()}setFileNamePrefix(e){this.fileNamePrefix=e}cancel(){this.cancelled||(this.cancelled=!0,this.queue.clear(),this.uploaderProgress.pending=this.queue.getSize(),this.onProgressUpdate.trigger(this.uploaderProgress))}canPerformUpload(){return Object.values(this.inProgress).length<NT.maximumConcurrentUploads}drain(){return xT(this,void 0,void 0,(function*(){this.cancelled||(this.logger.crumb({message:"s3-uploader: draining upload queue",level:Ce.Info,context:{queueSize:this.queue.getSize()}}),yield this.waitForPendingUploads(),this.onDrained.trigger())}))}waitForPendingUploads(){return xT(this,void 0,void 0,(function*(){yield this.queue.waitUntilEmpty(),yield Promise.all(Object.values(this.inProgress))}))}notifyNewPendingFile(){this.uploaderProgress.pending+=1,this.uploaderProgress.total+=1,this.onProgressUpdate.trigger(this.uploaderProgress)}notifyFileUploaded(e){this.uploaderProgress.pending-=1,this.onProgressUpdate.trigger(this.uploaderProgress),this.onFileUploaded.trigger(e)}performUpload(e){const t=`${(new Date).getTime()}`;this.inProgress[t]=(()=>xT(this,void 0,void 0,(function*(){var n;const r=`${this.options.keyPrefix}${e.s3Key}`;this.logger.crumb({message:`s3-uploader: uploading ${r}`,level:Ce.Info,context:{}});const i=e.body instanceof ArrayBuffer?new Uint8Array(e.body):e.body,o=this.s3.putObject({Body:i,Bucket:this.options.bucketName,Key:r}),a=yield o,s=null===(n=a.$metadata)||void 0===n?void 0:n.httpStatusCode;if(s&&s.toString().match(/^[4|5]/))return this.onError.trigger(new Error(`Error uploading to S3: aws-error code: ${s}`)),a;this.notifyFileUploaded(r),delete this.inProgress[t];const u=this.queue.shift();return!this.cancelled&&u&&this.performUpload(u),a})))()}}var OT=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class AT{constructor(){this.onData=new Qs,this.onError=new Qs,this.fileReader=new FileReader,this.readChain=new Promise((e=>e())),this.readChainResolve=()=>{},this.fileReader.onloadend=()=>{const e=this.fileReader.result;if(e&&e instanceof ArrayBuffer)try{this.onData.trigger(e.slice(0)),this.readChainResolve()}catch(e){this.onError.trigger(e)}else this.onError.trigger(new Error(`FileReader: invalid result ${e}`))},this.fileReader.onerror=()=>{this.onError.trigger(new Error(`FileReader error: ${this.fileReader.error}`))}}get Data(){return this.onData.expose()}get Error(){return this.onError.expose()}read(e){this.readChain=this.readChain.then((()=>new Promise((t=>{this.readChainResolve=t,this.fileReader.readAsArrayBuffer(e)}))))}drain(){return OT(this,void 0,void 0,(function*(){yield this.readChain}))}}class PT{constructor(e,t,n){this.onComplete=new Qs,this.onError=new Qs,this.blobReader=new AT,this.is_finishing=!1,this.logger=n,this.uploader=t,this.packager=e,this.registerEventHandlers()}get Complete(){return this.onComplete.expose()}get Error(){return this.onError.expose()}static get mimeType(){return"video/webm"}upload(e){this.blobReader.read(e)}cancel(){this.unregisterEventHandlers(),this.uploader.cancel()}finish(){this.blobReader.drain().then((()=>{this.packager.drain()}))}registerEventHandlers(){this.packager.InitSegment.on(this.packagerInitSegmentHandler.bind(this)),this.packager.MediaSegment.on(this.packagerMediaSegmentHandler.bind(this)),this.packager.Drained.on(this.packagerDrainedHandler.bind(this)),this.packager.Error.on(this.onError.trigger.bind(this.onError)),this.blobReader.Error.on(this.onError.trigger.bind(this.onError)),this.blobReader.Data.on((e=>{this.is_finishing?this.logger.warn(`Discarding ArrayBuffer with ${e.byteLength} bytes`,{},{}):this.packager.addSample(e)}))}unregisterEventHandlers(){this.packager.InitSegment.clear(),this.packager.MediaSegment.clear(),this.packager.Drained.clear()}packagerInitSegmentHandler(e){this.requestUpload(e.data,e.name)}packagerMediaSegmentHandler(e){this.requestUpload(e.data,e.name)}packagerDrainedHandler(e){this.logger.crumb({message:"segment-uploader: packager drained, uploading manifest",level:Ce.Info,context:{}}),this.uploader.Drained.on((()=>{this.logger.crumb({message:"segment-uploader: all parts uploaded, triggering onComplete",level:Ce.Info,context:{}}),this.onComplete.trigger()})),this.requestUpload(e,`${this.packager.getSegmentNamePrefix()}manifest.mpd`),this.uploader.drain()}requestUpload(e,t){try{this.uploader.uploadFile(e,t)}catch(e){this.onError.trigger(e)}}}var _T=function(e,t,n){t=t||0;for(var r=1;r<=8&&!(e[t]>=Math.pow(2,8-r));r++);if(r>8)throw new Error("Unrepresentable length: "+r+" "+e.toString("hex",t,t+r));if(t+r>e.length)return null;var i,o=e[t]&(1<<8-r)-1;for(i=1;i<r;i++){if(7===i&&o>=Math.pow(2,45)&&e[t+7]>0)return{length:r,value:-1};o*=Math.pow(2,8),o+=e[t+i]}return n&&(o-=Math.pow(2,7*r-1)-1),{length:r,value:o}};function IT(e){this.buffer=e,this.offset=0}IT.prototype.nextInt16BE=function(){var e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e},IT.prototype.nextUInt8=function(){var e=this.buffer.readUInt8(this.offset);return this.offset+=1,e},IT.prototype.nextUIntV=function(){var e=_T(this.buffer,this.offset);return this.offset+=e.length,e.value},IT.prototype.nextIntV=function(){var e=_T(this.buffer,this.offset,!0);return this.offset+=e.length,e.value},IT.prototype.nextBuffer=function(e){var t=e?this.buffer.slice(this.offset,this.offset+e):this.buffer.slice(this.offset);return this.offset+=e||this.length,t},Object.defineProperty(IT.prototype,"length",{get:function(){return this.buffer.length-this.offset}});var MT=IT;var RT={128:{name:"ChapterDisplay",level:4,type:"m",multiple:!0,minver:1,webm:!0,description:"Contains all possible strings to use for the chapter display."},131:{name:"TrackType",level:3,type:"u",mandatory:!0,minver:1,range:"1-254",description:"A set of track types coded on 8 bits (1: video, 2: audio, 3: complex, 0x10: logo, 0x11: subtitle, 0x12: buttons, 0x20: control)."},133:{name:"ChapString",cppname:"ChapterString",level:5,type:"8",mandatory:!0,minver:1,webm:!0,description:"Contains the string to use as the chapter atom."},134:{name:"CodecID",level:3,type:"s",mandatory:!0,minver:1,description:"An ID corresponding to the codec, see the codec page for more info."},136:{name:"FlagDefault",cppname:"TrackFlagDefault",level:3,type:"u",mandatory:!0,minver:1,default:1,range:"0-1",description:"Set if that track (audio, video or subs) SHOULD be active if no language found matches the user preference. (1 bit)"},137:{name:"ChapterTrackNumber",level:5,type:"u",mandatory:!0,multiple:!0,minver:1,webm:!1,range:"not 0",description:"UID of the Track to apply this chapter too. In the absense of a control track, choosing this chapter will select the listed Tracks and deselect unlisted tracks. Absense of this element indicates that the Chapter should be applied to any currently used Tracks."},145:{name:"ChapterTimeStart",level:4,type:"u",mandatory:!0,minver:1,webm:!0,description:"Timestamp of the start of Chapter (not scaled)."},146:{name:"ChapterTimeEnd",level:4,type:"u",minver:1,webm:!1,description:"Timestamp of the end of Chapter (timestamp excluded, not scaled)."},150:{name:"CueRefTime",level:5,type:"u",mandatory:!0,minver:2,webm:!1,description:"Timestamp of the referenced Block."},151:{name:"CueRefCluster",level:5,type:"u",mandatory:!0,webm:!1,description:"The Position of the Cluster containing the referenced Block."},152:{name:"ChapterFlagHidden",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If a chapter is hidden (1), it should not be available to the user interface (but still to Control Tracks; see flag notes). (1 bit)"},16980:{name:"ContentCompAlgo",level:6,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The compression algorithm used. Algorithms that have been specified so far are: 0 - zlib,   3 - Header Stripping"},16981:{name:"ContentCompSettings",level:6,type:"b",minver:1,webm:!1,description:"Settings that might be needed by the decompressor. For Header Stripping (ContentCompAlgo=3), the bytes that were removed from the beggining of each frames of the track."},17026:{name:"DocType",level:1,type:"s",mandatory:!0,default:"matroska",minver:1,description:"A string that describes the type of document that follows this EBML header. 'matroska' in our case or 'webm' for webm files."},17029:{name:"DocTypeReadVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The minimum DocType version an interpreter has to support to read this file."},17030:{name:"EBMLVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The version of EBML parser used to create the file."},17031:{name:"DocTypeVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The version of DocType interpreter used to create the file."},17476:{name:"SegmentFamily",level:2,type:"b",multiple:!0,minver:1,webm:!1,bytesize:16,description:"A randomly generated unique ID that all segments related to each other must use (128 bits)."},17505:{name:"DateUTC",level:2,type:"d",minver:1,description:"Date of the origin of timestamp (value 0), i.e. production date."},17540:{name:"TagDefault",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"0-1",description:"Indication to know if this is the default/original language to use for the given tag. (1 bit)"},17541:{name:"TagBinary",level:4,type:"b",minver:1,webm:!1,description:"The values of the Tag if it is binary. Note that this cannot be used in the same SimpleTag as TagString."},17543:{name:"TagString",level:4,type:"8",minver:1,webm:!1,description:"The value of the Element."},17545:{name:"Duration",level:2,type:"f",minver:1,range:"> 0",description:"Duration of the segment (based on TimecodeScale)."},17816:{name:"ChapterFlagEnabled",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"0-1",description:"Specify wether the chapter is enabled. It can be enabled/disabled by a Control Track. When disabled, the movie should skip all the content between the TimeStart and TimeEnd of this chapter (see flag notes). (1 bit)"},18016:{name:"FileMimeType",level:3,type:"s",mandatory:!0,minver:1,webm:!1,description:"MIME type of the file."},18017:{name:"FileUsedStartTime",level:3,type:"u",divx:!0,description:"DivX font extension"},18018:{name:"FileUsedEndTime",level:3,type:"u",divx:!0,description:"DivX font extension"},18037:{name:"FileReferral",level:3,type:"b",webm:!1,description:"A binary value that a track/codec can refer to when the attachment is needed."},20529:{name:"ContentEncodingOrder",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"Tells when this modification was used during encoding/muxing starting with 0 and counting upwards. The decoder/demuxer has to start with the highest order number it finds and work its way down. This value has to be unique over all ContentEncodingOrder elements in the segment."},20530:{name:"ContentEncodingScope",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"not 0",description:"A bit field that describes which elements have been modified in this way. Values (big endian) can be OR'ed. Possible values: 1 - all frame contents, 2 - the track's private data, 4 - the next ContentEncoding (next ContentEncodingOrder. Either the data inside ContentCompression and/or ContentEncryption)"},20531:{name:"ContentEncodingType",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"A value describing what kind of transformation has been done. Possible values: 0 - compression, 1 - encryption"},20532:{name:"ContentCompression",level:5,type:"m",minver:1,webm:!1,description:"Settings describing the compression used. Must be present if the value of ContentEncodingType is 0 and absent otherwise. Each block must be decompressable even if no previous block is available in order not to prevent seeking."},20533:{name:"ContentEncryption",level:5,type:"m",minver:1,webm:!1,description:"Settings describing the encryption used. Must be present if the value of ContentEncodingType is 1 and absent otherwise."},21368:{name:"CueBlockNumber",level:4,type:"u",minver:1,default:1,range:"not 0",description:"Number of the Block in the specified Cluster."},22100:{name:"ChapterStringUID",level:4,type:"8",mandatory:!1,minver:3,webm:!0,description:"A unique string ID to identify the Chapter. Use for WebVTT cue identifier storage."},22337:{name:"WritingApp",level:2,type:"8",mandatory:!0,minver:1,description:'Writing application ("mkvmerge-0.3.3").'},22612:{name:"SilentTracks",cppname:"ClusterSilentTracks",level:2,type:"m",minver:1,webm:!1,description:"The list of tracks that are not used in that part of the stream. It is useful when using overlay tracks on seeking. Then you should decide what track to use."},25152:{name:"ContentEncoding",level:4,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Settings for one content encoding like compression or encryption."},25188:{name:"BitDepth",cppname:"AudioBitDepth",level:4,type:"u",minver:1,range:"not 0",description:"Bits per sample, mostly used for PCM."},25906:{name:"SignedElement",level:3,type:"b",multiple:!0,webm:!1,description:"An element ID whose data will be used to compute the signature."},26148:{name:"TrackTranslate",level:3,type:"m",multiple:!0,minver:1,webm:!1,description:"The track identification for the given Chapter Codec."},26897:{name:"ChapProcessCommand",cppname:"ChapterProcessCommand",level:5,type:"m",multiple:!0,minver:1,webm:!1,description:"Contains all the commands associated to the Atom."},26914:{name:"ChapProcessTime",cppname:"ChapterProcessTime",level:6,type:"u",mandatory:!0,minver:1,webm:!1,description:"Defines when the process command should be handled (0: during the whole chapter, 1: before starting playback, 2: after playback of the chapter)."},26916:{name:"ChapterTranslate",level:2,type:"m",multiple:!0,minver:1,webm:!1,description:"A tuple of corresponding ID used by chapter codecs to represent this segment."},26931:{name:"ChapProcessData",cppname:"ChapterProcessData",level:6,type:"b",mandatory:!0,minver:1,webm:!1,description:"Contains the command information. The data should be interpreted depending on the ChapProcessCodecID value. For ChapProcessCodecID = 1, the data correspond to the binary DVD cell pre/post commands."},26948:{name:"ChapProcess",cppname:"ChapterProcess",level:4,type:"m",multiple:!0,minver:1,webm:!1,description:"Contains all the commands associated to the Atom."},26965:{name:"ChapProcessCodecID",cppname:"ChapterProcessCodecID",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"Contains the type of the codec used for the processing. A value of 0 means native Matroska processing (to be defined), a value of 1 means the DVD command set is used. More codec IDs can be added later."},29555:{name:"Tag",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Element containing elements specific to Tracks/Chapters."},29572:{name:"SegmentFilename",level:2,type:"8",minver:1,webm:!1,description:"A filename corresponding to this segment."},29766:{name:"AttachmentLink",cppname:"TrackAttachmentLink",level:3,type:"u",minver:1,webm:!1,range:"not 0",description:"The UID of an attachment that is used by this codec."},2459272:{name:"CodecName",level:3,type:"8",minver:1,description:"A human-readable string specifying the codec."},408125543:{name:"Segment",level:"0",type:"m",mandatory:!0,multiple:!0,minver:1,description:"This element contains all other top-level (level 1) elements. Typically a Matroska file is composed of 1 segment."},17530:{name:"TagLanguage",level:4,type:"s",mandatory:!0,minver:1,webm:!1,default:"und",description:"Specifies the language of the tag specified, in the Matroska languages form."},17827:{name:"TagName",level:4,type:"8",mandatory:!0,minver:1,webm:!1,description:"The name of the Tag that is going to be stored."},26568:{name:"SimpleTag",cppname:"TagSimple",level:3,recursive:"1",type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Contains general information about the target."},25542:{name:"TagAttachmentUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Attachment(s) the tags belong to. If the value is 0 at this level, the tags apply to all the attachments in the Segment."},25540:{name:"TagChapterUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Chapter(s) the tags belong to. If the value is 0 at this level, the tags apply to all chapters in the Segment."},25545:{name:"TagEditionUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the EditionEntry(s) the tags belong to. If the value is 0 at this level, the tags apply to all editions in the Segment."},25541:{name:"TagTrackUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Track(s) the tags belong to. If the value is 0 at this level, the tags apply to all tracks in the Segment."},25546:{name:"TargetType",cppname:"TagTargetType",level:4,type:"s",minver:1,webm:!1,strong:"informational",description:'An  string that can be used to display the logical level of the target like "ALBUM", "TRACK", "MOVIE", "CHAPTER", etc (see TargetType).'},26826:{name:"TargetTypeValue",cppname:"TagTargetTypeValue",level:4,type:"u",minver:1,webm:!1,default:50,description:"A number to indicate the logical level of the target (see TargetType)."},25536:{name:"Targets",cppname:"TagTargets",level:3,type:"m",mandatory:!0,minver:1,webm:!1,description:"Contain all UIDs where the specified meta data apply. It is empty to describe everything in the segment."},307544935:{name:"Tags",level:1,type:"m",multiple:!0,minver:1,webm:!1,description:"Element containing elements specific to Tracks/Chapters. A list of valid tags can be found here."},17677:{name:"ChapProcessPrivate",cppname:"ChapterProcessPrivate",level:5,type:"b",minver:1,webm:!1,description:'Some optional data attached to the ChapProcessCodecID information. For ChapProcessCodecID = 1, it is the "DVD level" equivalent.'},17278:{name:"ChapCountry",cppname:"ChapterCountry",level:5,type:"s",multiple:!0,minver:1,webm:!1,description:"The countries corresponding to the string, same 2 octets as in Internet domains."},17276:{name:"ChapLanguage",cppname:"ChapterLanguage",level:5,type:"s",mandatory:!0,multiple:!0,minver:1,webm:!0,default:"eng",description:"The languages corresponding to the string, in the bibliographic ISO-639-2 form."},143:{name:"ChapterTrack",level:4,type:"m",minver:1,webm:!1,description:"List of tracks on which the chapter applies. If this element is not present, all tracks apply"},25539:{name:"ChapterPhysicalEquiv",level:4,type:"u",minver:1,webm:!1,description:'Specify the physical equivalent of this ChapterAtom like "DVD" (60) or "SIDE" (50), see complete list of values.'},28348:{name:"ChapterSegmentEditionUID",level:4,type:"u",minver:1,webm:!1,range:"not 0",description:"The EditionUID to play from the segment linked in ChapterSegmentUID."},28263:{name:"ChapterSegmentUID",level:4,type:"b",minver:1,webm:!1,range:">0",bytesize:16,description:"A segment to play in place of this chapter. Edition ChapterSegmentEditionUID should be used for this segment, otherwise no edition is used."},29636:{name:"ChapterUID",level:4,type:"u",mandatory:!0,minver:1,webm:!0,range:"not 0",description:"A unique ID to identify the Chapter."},182:{name:"ChapterAtom",level:3,recursive:"1",type:"m",mandatory:!0,multiple:!0,minver:1,webm:!0,description:"Contains the atom information to use as the chapter atom (apply to all tracks)."},17885:{name:"EditionFlagOrdered",level:3,type:"u",minver:1,webm:!1,default:0,range:"0-1",description:"Specify if the chapters can be defined multiple times and the order to play them is enforced. (1 bit)"},17883:{name:"EditionFlagDefault",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If a flag is set (1) the edition should be used as the default one. (1 bit)"},17853:{name:"EditionFlagHidden",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If an edition is hidden (1), it should not be available to the user interface (but still to Control Tracks; see flag notes). (1 bit)"},17852:{name:"EditionUID",level:3,type:"u",minver:1,webm:!1,range:"not 0",description:"A unique ID to identify the edition. It's useful for tagging an edition."},17849:{name:"EditionEntry",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!0,description:"Contains all information about a segment edition."},272869232:{name:"Chapters",level:1,type:"m",minver:1,webm:!0,description:"A system to define basic menus and partition data. For more detailed information, look at the Chapters Explanation."},18094:{name:"FileUID",level:3,type:"u",mandatory:!0,minver:1,webm:!1,range:"not 0",description:"Unique ID representing the file, as random as possible."},18012:{name:"FileData",level:3,type:"b",mandatory:!0,minver:1,webm:!1,description:"The data of the file."},18030:{name:"FileName",level:3,type:"8",mandatory:!0,minver:1,webm:!1,description:"Filename of the attached file."},18046:{name:"FileDescription",level:3,type:"8",minver:1,webm:!1,description:"A human-friendly name for the attached file."},24999:{name:"AttachedFile",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"An attached file."},423732329:{name:"Attachments",level:1,type:"m",minver:1,webm:!1,description:"Contain attached files."},235:{name:"CueRefCodecState",level:5,type:"u",webm:!1,default:0,description:"The position of the Codec State corresponding to this referenced element. 0 means that the data is taken from the initial Track Entry."},21343:{name:"CueRefNumber",level:5,type:"u",webm:!1,default:1,range:"not 0",description:"Number of the referenced Block of Track X in the specified Cluster."},219:{name:"CueReference",level:4,type:"m",multiple:!0,minver:2,webm:!1,description:"The Clusters containing the required referenced Blocks."},234:{name:"CueCodecState",level:4,type:"u",minver:2,webm:!1,default:0,description:"The position of the Codec State corresponding to this Cue element. 0 means that the data is taken from the initial Track Entry."},178:{name:"CueDuration",level:4,type:"u",mandatory:!1,minver:4,webm:!1,description:"The duration of the block according to the segment time base. If missing the track's DefaultDuration does not apply and no duration information is available in terms of the cues."},240:{name:"CueRelativePosition",level:4,type:"u",mandatory:!1,minver:4,webm:!1,description:"The relative position of the referenced block inside the cluster with 0 being the first possible position for an element inside that cluster.",position:"clusterRelative"},241:{name:"CueClusterPosition",level:4,type:"u",mandatory:!0,minver:1,description:"The position of the Cluster containing the required Block.",position:"segment"},247:{name:"CueTrack",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"The track for which a position is given."},183:{name:"CueTrackPositions",level:3,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contain positions for different tracks corresponding to the timestamp."},179:{name:"CueTime",level:3,type:"u",mandatory:!0,minver:1,description:"Absolute timestamp according to the segment time base."},187:{name:"CuePoint",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains all information relative to a seek point in the segment."},475249515:{name:"Cues",level:1,type:"m",minver:1,description:'A top-level element to speed seeking access. All entries are local to the segment. Should be mandatory for non "live" streams.'},18406:{name:"ContentSigHashAlgo",level:6,type:"u",minver:1,webm:!1,default:0,description:"The hash algorithm used for the signature. A value of '0' means that the contents have not been signed but only encrypted. Predefined values: 1 - SHA1-160 2 - MD5"},18405:{name:"ContentSigAlgo",level:6,type:"u",minver:1,webm:!1,default:0,description:"The algorithm used for the signature. A value of '0' means that the contents have not been signed but only encrypted. Predefined values: 1 - RSA"},18404:{name:"ContentSigKeyID",level:6,type:"b",minver:1,webm:!1,description:"This is the ID of the private key the data was signed with."},18403:{name:"ContentSignature",level:6,type:"b",minver:1,webm:!1,description:"A cryptographic signature of the contents."},18402:{name:"ContentEncKeyID",level:6,type:"b",minver:1,webm:!1,description:"For public key algorithms this is the ID of the public key the the data was encrypted with."},18401:{name:"ContentEncAlgo",level:6,type:"u",minver:1,webm:!1,default:0,description:"The encryption algorithm used. The value '0' means that the contents have not been encrypted but only signed. Predefined values: 1 - DES, 2 - 3DES, 3 - Twofish, 4 - Blowfish, 5 - AES"},28032:{name:"ContentEncodings",level:3,type:"m",minver:1,webm:!1,description:"Settings for several content encoding mechanisms like compression or encryption."},196:{name:"TrickMasterTrackSegmentUID",level:3,type:"b",divx:!0,bytesize:16,description:"DivX trick track extenstions"},199:{name:"TrickMasterTrackUID",level:3,type:"u",divx:!0,description:"DivX trick track extenstions"},198:{name:"TrickTrackFlag",level:3,type:"u",divx:!0,default:0,description:"DivX trick track extenstions"},193:{name:"TrickTrackSegmentUID",level:3,type:"b",divx:!0,bytesize:16,description:"DivX trick track extenstions"},192:{name:"TrickTrackUID",level:3,type:"u",divx:!0,description:"DivX trick track extenstions"},237:{name:"TrackJoinUID",level:5,type:"u",mandatory:!0,multiple:!0,minver:3,webm:!1,range:"not 0",description:"The trackUID number of a track whose blocks are used to create this virtual track."},233:{name:"TrackJoinBlocks",level:4,type:"m",minver:3,webm:!1,description:"Contains the list of all tracks whose Blocks need to be combined to create this virtual track"},230:{name:"TrackPlaneType",level:6,type:"u",mandatory:!0,minver:3,webm:!1,description:"The kind of plane this track corresponds to (0: left eye, 1: right eye, 2: background)."},229:{name:"TrackPlaneUID",level:6,type:"u",mandatory:!0,minver:3,webm:!1,range:"not 0",description:"The trackUID number of the track representing the plane."},228:{name:"TrackPlane",level:5,type:"m",mandatory:!0,multiple:!0,minver:3,webm:!1,description:"Contains a video plane track that need to be combined to create this 3D track"},227:{name:"TrackCombinePlanes",level:4,type:"m",minver:3,webm:!1,description:"Contains the list of all video plane tracks that need to be combined to create this 3D track"},226:{name:"TrackOperation",level:3,type:"m",minver:3,webm:!1,description:"Operation that needs to be applied on tracks to create this virtual track. For more details look at the Specification Notes on the subject."},32123:{name:"ChannelPositions",cppname:"AudioPosition",level:4,type:"b",webm:!1,description:"Table of horizontal angles for each successive channel, see appendix."},159:{name:"Channels",cppname:"AudioChannels",level:4,type:"u",mandatory:!0,minver:1,default:1,range:"not 0",description:"Numbers of channels in the track."},30901:{name:"OutputSamplingFrequency",cppname:"AudioOutputSamplingFreq",level:4,type:"f",minver:1,default:"Sampling Frequency",range:"> 0",description:"Real output sampling frequency in Hz (used for SBR techniques)."},181:{name:"SamplingFrequency",cppname:"AudioSamplingFreq",level:4,type:"f",mandatory:!0,minver:1,default:8e3,range:"> 0",description:"Sampling frequency in Hz."},225:{name:"Audio",cppname:"TrackAudio",level:3,type:"m",minver:1,description:"Audio settings."},2327523:{name:"FrameRate",cppname:"VideoFrameRate",level:4,type:"f",range:"> 0",strong:"Informational",description:"Number of frames per second.  only."},3126563:{name:"GammaValue",cppname:"VideoGamma",level:4,type:"f",webm:!1,range:"> 0",description:"Gamma Value."},3061028:{name:"ColourSpace",cppname:"VideoColourSpace",level:4,type:"b",minver:1,webm:!1,bytesize:4,description:"Same value as in AVI (32 bits)."},21683:{name:"AspectRatioType",cppname:"VideoAspectRatio",level:4,type:"u",minver:1,default:0,description:"Specify the possible modifications to the aspect ratio (0: free resizing, 1: keep aspect ratio, 2: fixed)."},21682:{name:"DisplayUnit",cppname:"VideoDisplayUnit",level:4,type:"u",minver:1,default:0,description:"How DisplayWidth & DisplayHeight should be interpreted (0: pixels, 1: centimeters, 2: inches, 3: Display Aspect Ratio)."},21690:{name:"DisplayHeight",cppname:"VideoDisplayHeight",level:4,type:"u",minver:1,default:"PixelHeight",range:"not 0",description:"Height of the video frames to display. The default value is only valid when DisplayUnit is 0."},21680:{name:"DisplayWidth",cppname:"VideoDisplayWidth",level:4,type:"u",minver:1,default:"PixelWidth",range:"not 0",description:"Width of the video frames to display. The default value is only valid when DisplayUnit is 0."},21725:{name:"PixelCropRight",cppname:"VideoPixelCropRight",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove on the right of the image."},21708:{name:"PixelCropLeft",cppname:"VideoPixelCropLeft",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove on the left of the image."},21691:{name:"PixelCropTop",cppname:"VideoPixelCropTop",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove at the top of the image."},21674:{name:"PixelCropBottom",cppname:"VideoPixelCropBottom",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove at the bottom of the image (for HDTV content)."},186:{name:"PixelHeight",cppname:"VideoPixelHeight",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"Height of the encoded video frames in pixels."},176:{name:"PixelWidth",cppname:"VideoPixelWidth",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"Width of the encoded video frames in pixels."},21433:{name:"OldStereoMode",level:4,type:"u",maxver:"0",webm:!1,divx:!1,description:"DEPRECATED, DO NOT USE. Bogus StereoMode value used in old versions of libmatroska. (0: mono, 1: right eye, 2: left eye, 3: both eyes)."},21440:{name:"AlphaMode",cppname:"VideoAlphaMode",level:4,type:"u",minver:3,webm:!0,default:0,description:"Alpha Video Mode. Presence of this element indicates that the BlockAdditional element could contain Alpha data."},21432:{name:"StereoMode",cppname:"VideoStereoMode",level:4,type:"u",minver:3,webm:!0,default:0,description:"Stereo-3D video mode (0: mono, 1: side by side (left eye is first), 2: top-bottom (right eye is first), 3: top-bottom (left eye is first), 4: checkboard (right is first), 5: checkboard (left is first), 6: row interleaved (right is first), 7: row interleaved (left is first), 8: column interleaved (right is first), 9: column interleaved (left is first), 10: anaglyph (cyan/red), 11: side by side (right eye is first), 12: anaglyph (green/magenta), 13 both eyes laced in one Block (left eye is first), 14 both eyes laced in one Block (right eye is first)) . There are some more details on 3D support in the Specification Notes."},154:{name:"FlagInterlaced",cppname:"VideoFlagInterlaced",level:4,type:"u",mandatory:!0,minver:2,webm:!0,default:0,range:"0-1",description:"Set if the video is interlaced. (1 bit)"},224:{name:"Video",cppname:"TrackVideo",level:3,type:"m",minver:1,description:"Video settings."},26277:{name:"TrackTranslateTrackID",level:4,type:"b",mandatory:!0,minver:1,webm:!1,description:"The binary value used to represent this track in the chapter codec data. The format depends on the ChapProcessCodecID used."},26303:{name:"TrackTranslateCodec",level:4,type:"u",mandatory:!0,minver:1,webm:!1,description:"The chapter codec using this ID (0: Matroska Script, 1: DVD-menu)."},26364:{name:"TrackTranslateEditionUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify an edition UID on which this translation applies. When not specified, it means for all editions found in the segment."},22203:{name:"SeekPreRoll",level:3,type:"u",mandatory:!0,multiple:!1,default:0,minver:4,webm:!0,description:"After a discontinuity, SeekPreRoll is the duration in nanoseconds of the data the decoder must decode before the decoded data is valid."},22186:{name:"CodecDelay",level:3,type:"u",multiple:!1,default:0,minver:4,webm:!0,description:"CodecDelay is The codec-built-in delay in nanoseconds. This value must be subtracted from each block timestamp in order to get the actual timestamp. The value should be small so the muxing of tracks with the same actual timestamp are in the same Cluster."},28587:{name:"TrackOverlay",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify that this track is an overlay track for the Track specified (in the u-integer). That means when this track has a gap (see SilentTracks) the overlay track should be used instead. The order of multiple TrackOverlay matters, the first one is the one that should be used. If not found it should be the second, etc."},170:{name:"CodecDecodeAll",level:3,type:"u",mandatory:!0,minver:2,webm:!1,default:1,range:"0-1",description:"The codec can decode potentially damaged data (1 bit)."},2536e3:{name:"CodecDownloadURL",level:3,type:"s",multiple:!0,webm:!1,description:"A URL to download about the codec used."},3883072:{name:"CodecInfoURL",level:3,type:"s",multiple:!0,webm:!1,description:"A URL to find information about the codec used."},3839639:{name:"CodecSettings",level:3,type:"8",webm:!1,description:"A string describing the encoding setting used."},25506:{name:"CodecPrivate",level:3,type:"b",minver:1,description:"Private data only known to the codec."},2274716:{name:"Language",cppname:"TrackLanguage",level:3,type:"s",minver:1,default:"eng",description:"Specifies the language of the track in the Matroska languages form."},21358:{name:"Name",cppname:"TrackName",level:3,type:"8",minver:1,description:"A human-readable track name."},21998:{name:"MaxBlockAdditionID",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The maximum value of BlockAdditions for this track."},21375:{name:"TrackOffset",level:3,type:"i",webm:!1,default:0,description:"A value to add to the Block's Timestamp. This can be used to adjust the playback offset of a track."},2306383:{name:"TrackTimecodeScale",level:3,type:"f",mandatory:!0,minver:1,maxver:"3",webm:!1,default:1,range:"> 0",description:"DEPRECATED, DO NOT USE. The scale to apply on this track to work at normal speed in relation with other tracks (mostly used to adjust video speed when the audio length differs)."},2313850:{name:"DefaultDecodedFieldDuration",cppname:"TrackDefaultDecodedFieldDuration",level:3,type:"u",minver:4,range:"not 0",description:"The period in nanoseconds (not scaled by TimcodeScale)\nbetween two successive fields at the output of the decoding process (see the notes)"},2352003:{name:"DefaultDuration",cppname:"TrackDefaultDuration",level:3,type:"u",minver:1,range:"not 0",description:"Number of nanoseconds (not scaled via TimecodeScale) per frame ('frame' in the Matroska sense -- one element put into a (Simple)Block)."},28152:{name:"MaxCache",cppname:"TrackMaxCache",level:3,type:"u",minver:1,webm:!1,description:"The maximum cache size required to store referenced frames in and the current frame. 0 means no cache is needed."},28135:{name:"MinCache",cppname:"TrackMinCache",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The minimum number of frames a player should be able to cache during playback. If set to 0, the reference pseudo-cache system is not used."},156:{name:"FlagLacing",cppname:"TrackFlagLacing",level:3,type:"u",mandatory:!0,minver:1,default:1,range:"0-1",description:"Set if the track may contain blocks using lacing. (1 bit)"},21930:{name:"FlagForced",cppname:"TrackFlagForced",level:3,type:"u",mandatory:!0,minver:1,default:0,range:"0-1",description:"Set if that track MUST be active during playback. There can be many forced track for a kind (audio, video or subs), the player should select the one which language matches the user preference or the default + forced track. Overlay MAY happen between a forced and non-forced track of the same kind. (1 bit)"},185:{name:"FlagEnabled",cppname:"TrackFlagEnabled",level:3,type:"u",mandatory:!0,minver:2,webm:!0,default:1,range:"0-1",description:"Set if the track is usable. (1 bit)"},29637:{name:"TrackUID",level:3,type:"u",mandatory:!0,minver:1,range:"not 0",description:"A unique ID to identify the Track. This should be kept the same when making a direct stream copy of the Track to another file."},215:{name:"TrackNumber",level:3,type:"u",mandatory:!0,minver:1,range:"not 0",description:"The track number as used in the Block Header (using more than 127 tracks is not encouraged, though the design allows an unlimited number)."},174:{name:"TrackEntry",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Describes a track with all elements."},374648427:{name:"Tracks",level:1,type:"m",multiple:!0,minver:1,description:"A top-level block of information with many tracks described."},175:{name:"EncryptedBlock",level:2,type:"b",multiple:!0,webm:!1,description:"Similar to EncryptedBlock Structure)"},202:{name:"ReferenceTimeCode",level:4,type:"u",multiple:!1,mandatory:!0,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"},201:{name:"ReferenceOffset",level:4,type:"u",multiple:!1,mandatory:!0,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"},200:{name:"ReferenceFrame",level:3,type:"m",multiple:!1,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"},207:{name:"SliceDuration",level:5,type:"u",default:0,description:"The (scaled) duration to apply to the element."},206:{name:"Delay",cppname:"SliceDelay",level:5,type:"u",default:0,description:"The (scaled) delay to apply to the element."},203:{name:"BlockAdditionID",cppname:"SliceBlockAddID",level:5,type:"u",default:0,description:"The ID of the BlockAdditional element (0 is the main Block)."},205:{name:"FrameNumber",cppname:"SliceFrameNumber",level:5,type:"u",default:0,description:"The number of the frame to generate from this lace with this delay (allow you to generate many frames from the same Block/Frame)."},204:{name:"LaceNumber",cppname:"SliceLaceNumber",level:5,type:"u",minver:1,default:0,divx:!1,description:"The reverse number of the frame in the lace (0 is the last frame, 1 is the next to last, etc). While there are a few files in the wild with this element, it is no longer in use and has been deprecated. Being able to interpret this element is not required for playback."},232:{name:"TimeSlice",level:4,type:"m",multiple:!0,minver:1,divx:!1,description:"Contains extra time information about the data contained in the Block. While there are a few files in the wild with this element, it is no longer in use and has been deprecated. Being able to interpret this element is not required for playback."},142:{name:"Slices",level:3,type:"m",minver:1,divx:!1,description:"Contains slices description."},30114:{name:"DiscardPadding",level:3,type:"i",minver:4,webm:!0,description:"Duration in nanoseconds of the silent data added to the Block (padding at the end of the Block for positive value, at the beginning of the Block for negative value). The duration of DiscardPadding is not calculated in the duration of the TrackEntry and should be discarded during playback."},164:{name:"CodecState",level:3,type:"b",minver:2,webm:!1,description:"The new codec state to use. Data interpretation is private to the codec. This information should always be referenced by a seek entry."},253:{name:"ReferenceVirtual",level:3,type:"i",webm:!1,description:"Relative position of the data that should be in position of the virtual block."},251:{name:"ReferenceBlock",level:3,type:"i",multiple:!0,minver:1,description:"Timestamp of another frame used as a reference (ie: B or P frame). The timestamp is relative to the block it's attached to."},250:{name:"ReferencePriority",cppname:"FlagReferenced",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"This frame is referenced and has the specified cache priority. In cache only a frame of the same or higher priority can replace this frame. A value of 0 means the frame is not referenced."},155:{name:"BlockDuration",level:3,type:"u",minver:1,default:"TrackDuration",description:'The duration of the Block (based on TimecodeScale). This element is mandatory when DefaultDuration is set for the track (but can be omitted as other default values). When not written and with no DefaultDuration, the value is assumed to be the difference between the timestamp of this Block and the timestamp of the next Block in "display" order (not coding order). This element can be useful at the end of a Track (as there is not other Block available), or when there is a break in a track like for subtitle tracks. When set to 0 that means the frame is not a keyframe.'},165:{name:"BlockAdditional",level:5,type:"b",mandatory:!0,minver:1,webm:!1,description:"Interpreted by the codec as it wishes (using the BlockAddID)."},238:{name:"BlockAddID",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"not 0",description:"An ID to identify the BlockAdditional level."},166:{name:"BlockMore",level:4,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Contain the BlockAdditional and some parameters."},30113:{name:"BlockAdditions",level:3,type:"m",minver:1,webm:!1,description:"Contain additional blocks to complete the main one. An EBML parser that has no knowledge of the Block structure could still see and use/skip these data."},162:{name:"BlockVirtual",level:3,type:"b",webm:!1,description:"A Block with no data. It must be stored in the stream at the place the real Block should be in display order. (see Block Virtual)"},161:{name:"Block",level:3,type:"b",mandatory:!0,minver:1,description:"Block containing the actual data to be rendered and a timestamp relative to the Cluster Timecode. (see Block Structure)"},160:{name:"BlockGroup",level:2,type:"m",multiple:!0,minver:1,description:"Basic container of information containing a single Block or BlockVirtual, and information specific to that Block/VirtualBlock."},163:{name:"SimpleBlock",level:2,type:"b",multiple:!0,minver:2,webm:!0,divx:!0,description:"Similar to SimpleBlock Structure"},171:{name:"PrevSize",cppname:"ClusterPrevSize",level:2,type:"u",minver:1,description:"Size of the previous Cluster, in octets. Can be useful for backward playing.",position:"prevCluster"},167:{name:"Position",cppname:"ClusterPosition",level:2,type:"u",minver:1,webm:!1,description:"The Position of the Cluster in the segment (0 in live broadcast streams). It might help to resynchronise offset on damaged streams.",position:"segment"},22743:{name:"SilentTrackNumber",cppname:"ClusterSilentTrackNumber",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"One of the track number that are not used from now on in the stream. It could change later if not specified as silent in a further Cluster."},231:{name:"Timecode",cppname:"ClusterTimecode",level:2,type:"u",mandatory:!0,minver:1,description:"Absolute timestamp of the cluster (based on TimecodeScale)."},524531317:{name:"Cluster",level:1,type:"m",multiple:!0,minver:1,description:"The lower level element containing the (monolithic) Block structure."},19840:{name:"MuxingApp",level:2,type:"8",mandatory:!0,minver:1,description:'Muxing application or library ("libmatroska-0.4.3").'},31657:{name:"Title",level:2,type:"8",minver:1,webm:!1,description:"General name of the segment."},2807730:{name:"TimecodeScaleDenominator",level:2,type:"u",mandatory:!0,minver:4,default:"1000000000",description:"Timestamp scale numerator, see TimecodeScale."},2807729:{name:"TimecodeScale",level:2,type:"u",mandatory:!0,minver:1,default:"1000000",description:"Timestamp scale in nanoseconds (1.000.000 means all timestamps in the segment are expressed in milliseconds)."},27045:{name:"ChapterTranslateID",level:3,type:"b",mandatory:!0,minver:1,webm:!1,description:"The binary value used to represent this segment in the chapter codec data. The format depends on the ChapProcessCodecID used."},27071:{name:"ChapterTranslateCodec",level:3,type:"u",mandatory:!0,minver:1,webm:!1,description:"The chapter codec using this ID (0: Matroska Script, 1: DVD-menu)."},27132:{name:"ChapterTranslateEditionUID",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify an edition UID on which this correspondance applies. When not specified, it means for all editions found in the segment."},4096955:{name:"NextFilename",level:2,type:"8",minver:1,webm:!1,description:"An escaped filename corresponding to the next segment."},4110627:{name:"NextUID",level:2,type:"b",minver:1,webm:!1,bytesize:16,description:"A unique ID to identify the next chained segment (128 bits)."},3965867:{name:"PrevFilename",level:2,type:"8",minver:1,webm:!1,description:"An escaped filename corresponding to the previous segment."},3979555:{name:"PrevUID",level:2,type:"b",minver:1,webm:!1,bytesize:16,description:"A unique ID to identify the previous chained segment (128 bits)."},29604:{name:"SegmentUID",level:2,type:"b",minver:1,webm:!1,range:"not 0",bytesize:16,description:"A randomly generated unique ID to identify the current segment between many others (128 bits)."},357149030:{name:"Info",level:1,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains miscellaneous general information and statistics on the file."},21420:{name:"SeekPosition",level:3,type:"u",mandatory:!0,minver:1,description:"The position of the element in the segment in octets (0 = first level 1 element).",position:"segment"},21419:{name:"SeekID",level:3,type:"b",mandatory:!0,minver:1,description:"The binary ID corresponding to the element name.",type2:"ebmlID"},19899:{name:"Seek",cppname:"SeekPoint",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains a single seek entry to an EBML element."},290298740:{name:"SeekHead",cppname:"SeekHeader",level:1,type:"m",multiple:!0,minver:1,description:"Contains the position of other level 1 elements."},32379:{name:"SignatureElementList",level:2,type:"m",multiple:!0,webm:!1,i:"Cluster|Block|BlockAdditional",description:"A list consists of a number of consecutive elements that represent one case where data is used in signature. Ex:  means that the BlockAdditional of all Blocks in all Clusters is used for encryption."},32347:{name:"SignatureElements",level:1,type:"m",webm:!1,description:"Contains elements that will be used to compute the signature."},32437:{name:"Signature",level:1,type:"b",webm:!1,description:"The signature of the data (until a new."},32421:{name:"SignaturePublicKey",level:1,type:"b",webm:!1,description:"The public key to use with the algorithm (in the case of a PKI-based signature)."},32410:{name:"SignatureHash",level:1,type:"u",webm:!1,description:"Hash algorithm used (1=SHA1-160, 2=MD5)."},32394:{name:"SignatureAlgo",level:1,type:"u",webm:!1,description:"Signature algorithm used (1=RSA, 2=elliptic)."},458458727:{name:"SignatureSlot",level:-1,type:"m",multiple:!0,webm:!1,description:"Contain signature of some (coming) elements in the stream."},191:{name:"CRC-32",level:-1,type:"b",minver:1,webm:!1,description:"The CRC is computed on all the data of the Master element it's in. The CRC element should be the first in it's parent master for easier reading. All level 1 elements should include a CRC-32. The CRC in use is the IEEE CRC32 Little Endian",crc:!0},236:{name:"Void",level:-1,type:"b",minver:1,description:"Used to void damaged data, to avoid unexpected behaviors when using damaged data. The content is discarded. Also used to reserve space in a sub-element for later use."},17139:{name:"EBMLMaxSizeLength",level:1,type:"u",mandatory:!0,default:8,minver:1,description:"The maximum length of the sizes you'll find in this file (8 or less in Matroska). This does not override the element size indicated at the beginning of an element. Elements that have an indicated size which is larger than what is allowed by EBMLMaxSizeLength shall be considered invalid."},17138:{name:"EBMLMaxIDLength",level:1,type:"u",mandatory:!0,default:4,minver:1,description:"The maximum length of the IDs you'll find in this file (4 or less in Matroska)."},17143:{name:"EBMLReadVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The minimum EBML version a parser has to support to read this file."},440786851:{name:"EBML",level:"0",type:"m",mandatory:!0,multiple:!0,minver:1,description:"Set the EBML characteristics of the data to follow. Each EBML document has to start with this."}},LT={},BT={byEbmlID:RT,byName:LT};for(var DT in RT){LT[RT[DT].name.replace("-","_")]=parseInt(DT,10)}for(var zT=BT,jT=function(e){var t=WT(e),n=t[0],r=t[1];return 3*(n+r)/4-r},UT=function(e){var t,n,r=WT(e),i=r[0],o=r[1],a=new HT(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=KT[e.charCodeAt(n)]<<18|KT[e.charCodeAt(n+1)]<<12|KT[e.charCodeAt(n+2)]<<6|KT[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=KT[e.charCodeAt(n)]<<2|KT[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===o&&(t=KT[e.charCodeAt(n)]<<10|KT[e.charCodeAt(n+1)]<<4|KT[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},FT=function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(QT(e,a,a+o>s?s:a+o));1===r?(t=e[n-1],i.push(qT[t>>2]+qT[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(qT[t>>10]+qT[t>>4&63]+qT[t<<2&63]+"="));return i.join("")},qT=[],KT=[],HT="undefined"!=typeof Uint8Array?Uint8Array:Array,VT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$T=0,GT=VT.length;$T<GT;++$T)qT[$T]=VT[$T],KT[VT.charCodeAt($T)]=$T;function WT(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function YT(e){return qT[e>>18&63]+qT[e>>12&63]+qT[e>>6&63]+qT[63&e]}function QT(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(YT(r));return i.join("")}KT["-".charCodeAt(0)]=62,KT["_".charCodeAt(0)]=63;var XT={byteLength:jT,toByteArray:UT,fromByteArray:FT},JT=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,d=-7,l=n?i-1:0,f=n?-1:1,p=e[t+l];for(l+=f,o=p&(1<<-d)-1,p>>=-d,d+=s;d>0;o=256*o+e[t+l],l+=f,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=r;d>0;a=256*a+e[t+l],l+=f,d-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},ZT=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,d=(1<<c)-1,l=d>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=d?(s=0,a=d):a+l>=1?(s=(t*u-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=h,a/=256,c-=8);e[n+p-h]|=128*v},eN=ri((function(e,t){var n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(e){+e!=e&&(e=0);return o.alloc(+e)},t.INSPECT_MAX_BYTES=50;var r=2147483647;function i(e){if(e>r)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|f(e,t),r=i(n),a=r.write(e,t);a!==n&&(r=r.slice(0,a));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(z(e,Uint8Array)){var t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return c(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(z(e,ArrayBuffer)||e&&z(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(z(e,SharedArrayBuffer)||e&&z(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return o.from(r,t,n);var a=function(e){if(o.isBuffer(e)){var t=0|l(e.length),n=i(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||j(e.length)?i(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return s(e),i(e<0?0:0|l(e))}function c(e){for(var t=e.length<0?0:0|l(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,o.prototype),r}function l(e){if(e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(i)return r?-1:L(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),j(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var d=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===d?0:o-d)){if(-1===d&&(d=o),o-d+1===u)return d*a}else-1!==d&&(o-=o-d),d=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var l=!0,f=0;f<u;f++)if(c(e,o+f)!==c(t,f)){l=!1;break}if(l)return o}return-1}function g(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(j(s))return a;e[n+a]=s}return a}function y(e,t,n,r){return D(L(t,e.length-n),e,n,r)}function w(e,t,n,r){return D(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return D(B(t),e,n,r)}function S(e,t,n,r){return D(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?XT.fromByteArray(e):XT.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,c=e[i],d=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(d=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(d=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(d=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(d=u)}null===d?(d=65533,l=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=l}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}t.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,n){return a(e,t,n)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,n){return function(e,t,n){return s(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}(e,t,n)},o.allocUnsafe=function(e){return u(e)},o.allocUnsafeSlow=function(e){return u(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(z(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),z(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(z(a,Uint8Array))i+a.length>r.length?o.from(a).copy(r,i):Uint8Array.prototype.set.call(r,a,i);else{if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i)}i+=a.length}return r},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(e,t,n,r,i){if(z(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),u=Math.min(a,s),c=this.slice(r,i),d=e.slice(t,n),l=0;l<u;++l)if(c[l]!==d[l]){a=c[l],s=d[l];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return b(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=U[e[o]];return i}function O(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function _(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(e,t,n,r,i){return t=+t,n>>>=0,i||_(e,0,n,4),ZT(e,t,n,r,23,4),n+4}function M(e,t,n,r,i){return t=+t,n>>>=0,i||_(e,0,n,8),ZT(e,t,n,r,52,8),n+8}o.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,o.prototype),r},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),JT(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),JT(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),JT(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),JT(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,n){return I(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return I(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:o.from(e,r),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var R=/[^+/0-9A-Za-z-_]/g;function L(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function B(e){return XT.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function j(e){return e!=e}var U=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()}));
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */const tN=(e,t)=>{t=t||0;for(var n=1;n<=8&&!(e[t]>=Math.pow(2,8-n));n++);if(n>8)throw new Error("Unrepresentable length: "+n+" "+e.toString("hex",t,t+n));if(t+n>e.length)return null;let r=e[t]&(1<<8-n)-1;for(let i=1;i<n;i++){if(7===i&&r>=Math.pow(2,45)&&e[t+7]>0)return{length:n,value:-1};r*=Math.pow(2,8),r+=e[t+i]}return{length:n,value:r}},nN=e=>{if(e<0||e>Math.pow(2,53))throw new Error("Unrepresentable value: "+e);for(var t=1;t<=8&&!(e<Math.pow(2,7*t)-1);t++);const n=new eN.Buffer(t);for(let r=1;r<=t;r++){const i=255&e;n[t-r]=i,e-=i,e/=Math.pow(2,8)}return n[0]=n[0]|1<<8-t,n},{byEbmlID:rN}=zT,iN=function(e){var t={},n=new MT(e);t.trackNumber=n.nextUIntV(),t.timecode=n.nextInt16BE();var r=n.nextUInt8();t.invisible=!!(8&r),t.keyframe=!!(128&r),t.discardable=!!(1&r);var i=(6&r)>>1;return t.frames=function(e,t){if(!t)return[e.nextBuffer()];var n,r,i=[],o=e.nextUInt8()+1;if(2===t){if(e.length%o!=0)throw new Error("Fixed-Size Lacing Error");for(r=e.length/o,n=0;n<o;n++)i.push(e.nextBuffer(r));return i}var a=[];if(1===t)for(n=0;n<o-1;n++){var s;r=0;do{r+=s=e.nextUInt8()}while(255===s);a.push(r)}else if(3===t)for(r=e.nextUIntV(),a.push(r),n=1;n<o-1;n++)r+=e.nextIntV(),a.push(r);for(n=0;n<o-1;n++)i.push(e.nextBuffer(a[n]));return i.push(e.nextBuffer()),i}(n,i),t},oN=e=>eN.Buffer.concat(e),aN=(e,t,n=!1)=>oN([e,n?new eN.Buffer("01ffffffffffffff","hex"):nN(t.length),t]),sN=e=>e instanceof Date?e:new Date(new Date("2001-01-01T00:00:00.000Z").getTime()+Number(e)/1e3/1e3);var uN,cN="undefined",dN=yn,lN=cN!==typeof Uint8Array&&Uint8Array,fN=cN!==typeof ArrayBuffer&&ArrayBuffer,pN=[0,0,0,0,0,0,0,0],hN=Array.isArray||function(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)},vN=4294967296;const mN=yN("Uint64BE",!0,!0),gN=yN("Int64BE",!0,!1);function yN(e,t,n){var r=t?0:4,i=t?4:0,o=t?0:3,a=t?1:2,s=t?2:1,u=t?3:0,c=t?xN:NN,d=t?TN:ON,l=h.prototype,f="is"+e,p="_"+f;return l.buffer=void 0,l.offset=0,l[p]=!0,l.toNumber=v,l.toString=function(e){var t=this.buffer,o=this.offset,a=g(t,o+r),s=g(t,o+i),u="",c=!n&&2147483648&a;c&&(a=~a,s=vN-s);e=e||10;for(;;){var d=a%e*vN+s;if(a=Math.floor(a/e),s=Math.floor(d/e),u=(d%e).toString(e)+u,!a&&!s)break}c&&(u="-"+u);return u},l.toJSON=v,l.toArray=wN,dN&&(l.toBuffer=bN),lN&&(l.toArrayBuffer=SN),h[f]=function(e){return!(!e||!e[p])},h;function h(e,t,n,o){return this instanceof h?function(e,t,n,o,a){lN&&fN&&(t instanceof fN&&(t=new lN(t)),o instanceof fN&&(o=new lN(o)));if(!(t||n||o||uN))return void(e.buffer=CN(pN,0));if(!EN(t,n)){var s=uN||Array;a=n,o=t,n=0,t=uN===dN?dN.alloc(8):new s(8)}if(e.buffer=t,e.offset=n|=0,cN===typeof o)return;"string"==typeof o?function(e,t,n,o){var a=0,s=n.length,u=0,c=0;"-"===n[0]&&a++;var d=a;for(;a<s;){var l=parseInt(n[a++],o);if(!(l>=0))break;c=c*o+l,u=u*o+Math.floor(c/vN),c%=vN}d&&(u=~u,c?c=vN-c:u++);m(e,t+r,u),m(e,t+i,c)}(t,n,o,a||10):EN(o,a)?kN(t,n,o,a):"number"==typeof a?(m(t,n+r,o),m(t,n+i,a)):o>0?c(t,n,o):o<0?d(t,n,o):kN(t,n,pN,0)}(this,e,t,n,o):new h(e,t,n,o)}function v(){var e=this.buffer,t=this.offset,o=g(e,t+r),a=g(e,t+i);return n||(o|=0),o?o*vN+a:a}function m(e,t,n){e[t+u]=255&n,n>>=8,e[t+s]=255&n,n>>=8,e[t+a]=255&n,n>>=8,e[t+o]=255&n}function g(e,t){return 16777216*e[t+o]+(e[t+a]<<16)+(e[t+s]<<8)+e[t+u]}}function wN(e){var t=this.buffer,n=this.offset;return uN=null,!1!==e&&hN(t)?8===t.length?t:t.slice(n,n+8):CN(t,n)}function bN(e){var t=this.buffer,n=this.offset;return uN=dN,!1!==e&&dN.isBuffer(t)?8===t.length?t:t.slice(n,n+8):dN.from(SN.call(this,e))}function SN(e){var t=this.buffer,n=this.offset,r=t.buffer;if(uN=lN,!1!==e&&!t.offset&&r instanceof fN)return 8===r.byteLength?r:r.slice(n,n+8);var i=new lN(8);return kN(i,0,t,n),i.buffer}function EN(e,t){var n=e&&e.length;return t|=0,n&&t+8<=n&&"string"!=typeof e[t]}function kN(e,t,n,r){t|=0,r|=0;for(var i=0;i<8;i++)e[t++]=255&n[r++]}function CN(e,t){return Array.prototype.slice.call(e,t,t+8)}function xN(e,t,n){for(var r=t+8;r>t;)e[--r]=255&n,n/=256}function TN(e,t,n){var r=t+8;for(n++;r>t;)e[--r]=255&-n^255,n/=256}function NN(e,t,n){for(var r=t+8;t<r;)e[t++]=255&n,n/=256}function ON(e,t,n){var r=t+8;for(n++;t<r;)e[t++]=255&-n^255,n/=256}var AN;yN("Uint64LE",!1,!0),yN("Int64LE",!1,!1),function(e){e[e.STATE_TAG=1]="STATE_TAG",e[e.STATE_SIZE=2]="STATE_SIZE",e[e.STATE_CONTENT=3]="STATE_CONTENT"}(AN||(AN={}));class PN{constructor(){this._buffer=new eN.Buffer(0),this._tag_stack=[],this._state=AN.STATE_TAG,this._cursor=0,this._total=0,this._schema=rN,this._result=[]}decode(e){this.readChunk(e);const t=this._result;return this._result=[],t}readChunk(e){for(this._buffer=oN([this._buffer,new eN.Buffer(e)]);this._cursor<this._buffer.length&&(this._state!==AN.STATE_TAG||this.readTag())&&(this._state!==AN.STATE_SIZE||this.readSize())&&(this._state!==AN.STATE_CONTENT||this.readContent()););}getSchemaInfo(e){return this._schema[e]||{name:"unknown",level:-1,type:"unknown",description:"unknown"}}readTag(){if(this._cursor>=this._buffer.length)return!1;const e=tN(this._buffer,this._cursor);if(null==e)return!1;const t=this._buffer.slice(this._cursor,this._cursor+e.length).reduce(((e,t,n,r)=>e+t*Math.pow(16,2*(r.length-1-n))),0),n=this.getSchemaInfo(t),r={EBML_ID:t.toString(16),schema:n,type:n.type,name:n.name,level:n.level,tagStart:this._total,tagEnd:this._total+e.length,sizeStart:this._total+e.length,sizeEnd:null,dataStart:null,dataEnd:null,dataSize:null,data:null};return this._tag_stack.push(r),this._cursor+=e.length,this._total+=e.length,this._state=AN.STATE_SIZE,!0}readSize(){if(this._cursor>=this._buffer.length)return!1;const e=tN(this._buffer,this._cursor);if(null==e)return!1;const t=this._tag_stack[this._tag_stack.length-1];return t.sizeEnd=t.sizeStart+e.length,t.dataStart=t.sizeEnd,t.dataSize=e.value,-1===e.value?(t.dataEnd=-1,"m"===t.type&&(t.unknownSize=!0)):t.dataEnd=t.sizeEnd+e.value,this._cursor+=e.length,this._total+=e.length,this._state=AN.STATE_CONTENT,!0}readContent(){const e=this._tag_stack[this._tag_stack.length-1];if("m"===e.type){if(e.isEnd=!1,this._result.push(e),this._state=AN.STATE_TAG,0===e.dataSize){const t=Object.assign({},e,{isEnd:!0});this._result.push(t),this._tag_stack.pop()}return!0}if(this._buffer.length<this._cursor+e.dataSize)return!1;const t=this._buffer.slice(this._cursor,this._cursor+e.dataSize);switch(this._buffer=this._buffer.slice(this._cursor+e.dataSize),e.data=t,e.type){case"u":e.value=t.readUIntBE(0,t.length);break;case"i":e.value=t.readIntBE(0,t.length);break;case"f":e.value=4===e.dataSize?t.readFloatBE(0):8===e.dataSize?t.readDoubleBE(0):(console.warn(`cannot read ${e.dataSize} octets float. failback to 0`),0);break;case"s":e.value=t.toString("ascii");break;case"8":e.value=t.toString("utf8");break;case"b":e.value=t;break;case"d":e.value=sN(new gN(t).toNumber())}if(null===e.value)throw new Error("unknown tag type:"+e.type);for(this._result.push(e),this._total+=e.dataSize,this._state=AN.STATE_TAG,this._cursor=0,this._tag_stack.pop();this._tag_stack.length>0;){const e=this._tag_stack[this._tag_stack.length-1];if(e.dataEnd<0)return this._tag_stack.pop(),!0;if(this._total<e.dataEnd)break;if("m"!==e.type)throw new Error("parent element is not master element");const t=Object.assign({},e,{isEnd:!0});this._result.push(t),this._tag_stack.pop()}return!0}}class _N{constructor(){this._schema=rN,this._buffers=[],this._stack=[]}encode(e){return oN(e.reduce(((e,t)=>e.concat(this.encodeChunk(t))),[])).buffer}encodeChunk(e){return"m"===e.type?e.isEnd?this.endTag(e):this.startTag(e):this.writeTag(e),this.flush()}flush(){const e=this._buffers;return this._buffers=[],e}getSchemaInfo(e){const t=Object.keys(this._schema).map(Number);for(let n=0;n<t.length;n++){const r=t[n];if(this._schema[r].name===e)return new eN.Buffer(r.toString(16),"hex")}return null}writeTag(e){const t=e.name,n=this.getSchemaInfo(t),r=e.data;if(null==n)throw new Error("No schema entry found for "+t);const i=aN(n,r);if(this._stack.length>0){this._stack[this._stack.length-1].children.push({tagId:n,elm:e,children:[],data:i})}else this._buffers=this._buffers.concat(i)}startTag(e){const t=e.name,n=this.getSchemaInfo(t);if(null==n)throw new Error("No schema entry found for "+t);if(e.unknownSize){const t=aN(n,new eN.Buffer(0),e.unknownSize);return void(this._buffers=this._buffers.concat(t))}const r={tagId:n,elm:e,children:[],data:null};this._stack.length>0&&this._stack[this._stack.length-1].children.push(r),this._stack.push(r)}endTag(e){const t=this._stack.pop();if(null==t)throw new Error("EBML structure is broken");if(t.elm.name!==e.name)throw new Error("EBML structure is broken");const n=t.children.reduce(((e,t)=>{if(null===t.data)throw new Error("EBML structure is broken");return e.concat(t.data)}),[]),r=oN(n);"m"===t.elm.type?t.data=aN(t.tagId,r,t.elm.unknownSize):t.data=aN(t.tagId,r),this._stack.length<1&&(this._buffers=this._buffers.concat(t.data))}}function IN(e){return e.reduce(((e,t)=>{if("b"!==t.type)return e;if("SimpleBlock"!==t.name)return e;return iN(t.data).frames.some((e=>"9d012a"===e.slice(3,6).toString("hex")))?e.concat(t):e}),[])}function MN(e){const t=RN("VP8 ",e);return RN("RIFF",oN([new eN.Buffer("WEBP","ascii"),t]))}function RN(e,t){const n=new eN.Buffer(4);return n.writeUInt32LE(t.byteLength,0),oN([new eN.Buffer(e.substr(0,4),"ascii"),n,t,new eN.Buffer(t.byteLength%2==0?0:1)])}function LN(e,t){let n=-1;for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e){if("m"!==i.type)return void t.splice(r,1);if(i.isEnd){if(-1===n)throw new Error(`Detected ${e} closing element before finding the start`);return void t.splice(n,r-n+1)}n=r}}}function BN(e,t){let n=[],r=-1;for(let i=0;i<t.length;i++){const o=t[i];if(o.name===e){if("m"!==o.type){n.push(t[i]);break}if(o.isEnd){if(-1===r)throw new Error(`Detected ${e} closing element before finding the start`);n=t.slice(r,i+1);break}r=i}}return n}function DN(e){const t=new _N;return e.reduce(((e,n)=>e.concat(t.encode([n]))),[]).reduce(((e,t)=>e+t.byteLength),0)}function zN(e,t,n){const{duration:r,clusterPtrs:i,cues:o}=n,a=e.slice(0);if("number"==typeof r){let e=!1;a.forEach((t=>{"f"===t.type&&"Duration"===t.name&&(e=!0,t.data=qN(r,8))})),e||jN(a,"Info",[{name:"Duration",type:"f",data:qN(r,8)}])}Array.isArray(o)&&jN(a,"Cues",function(e,t){const n=[];return e.forEach((({CueTrack:e,CueClusterPosition:r,CueTime:i})=>{n.push({name:"CuePoint",type:"m",isEnd:!1}),n.push({name:"CueTime",type:"u",data:UN(i)}),n.push({name:"CueTrackPositions",type:"m",isEnd:!1}),n.push({name:"CueTrack",type:"u",data:UN(e)}),n.push({name:"CueClusterPosition",type:"u",data:UN(r+t)}),n.push({name:"CueTrackPositions",type:"m",isEnd:!0}),n.push({name:"CuePoint",type:"m",isEnd:!0})})),n}(o,t));let s=[];return Array.isArray(i)&&(console.warn("append cluster pointers to seekhead is deprecated. please use cues"),s=function(e,t){const n=[];return e.forEach((e=>{n.push({name:"Seek",type:"m",isEnd:!1}),n.push({name:"SeekID",type:"b",data:new eN.Buffer([31,67,182,117])}),n.push({name:"SeekPosition",type:"u",data:UN(e+t)}),n.push({name:"Seek",type:"m",isEnd:!0})})),n}(i,t)),jN(a,"SeekHead",s,!0),a}function jN(e,t,n,r=!1){let i=-1;for(let n=0;n<e.length;n++){const r=e[n];if("m"===r.type&&r.name===t&&!1===r.isEnd){i=n;break}}i>=0?e.splice(i+1,0,...n):r?[].concat([{name:t,type:"m",isEnd:!1}],n,[{name:t,type:"m",isEnd:!0}]).reverse().forEach((t=>{e.unshift(t)})):(e.push({name:t,type:"m",isEnd:!1}),n.forEach((t=>{e.push(t)})),e.push({name:t,type:"m",isEnd:!0}))}function UN(e){let t=1;for(;e>=Math.pow(2,8*t);t++);if(t>=7)return console.warn("7bit or more bigger uint not supported."),new mN(e).toBuffer();const n=new eN.Buffer(t);return n.writeUIntBE(e,0,t),n}function FN(e){let t=1;for(;e>=Math.pow(2,8*t);t++);if(t>=7)return console.warn("7bit or more bigger uint not supported."),new gN(e).toBuffer();const n=new eN.Buffer(t);return n.writeIntBE(e,0,t),n}function qN(e,t=8){if(8===t){const t=new eN.Buffer(8);return t.writeDoubleBE(e,0),t}if(4===t){const t=new eN.Buffer(4);return t.writeFloatBE(e,0),t}throw new Error("float type bits must 4bytes or 8bytes")}var KN=Object.freeze({__proto__:null,WebPFrameFilter:function(e){return IN(e).reduce(((e,t)=>iN(t.data).frames.reduce(((e,t)=>{const n=MN(t),r=new Blob([n],{type:"image/webp"});return e.concat(r)}),e)),[])},WebPBlockFilter:IN,VP8BitStreamToRiffWebPBuffer:MN,createRIFFChunk:RN,makeMetadataSeekable:function(e,t,n){const r=BN("EBML",e),i=DN(r)+12,o=e[e.length-1].dataEnd-i,a=BN("Info",e);LN("Duration",a),a.splice(1,0,{name:"Duration",type:"f",data:qN(t,8)});const s=DN(a),u=BN("Tracks",e),c=DN(u);let d=47,l=[],f=5+15*n.length,p=[],h=-1;for(let e=0;e<10;e++){const t=d,r=t+s,a=r+c,u=a+f-o;if(l=[],l.push({name:"SeekHead",type:"m",isEnd:!1}),l.push({name:"Seek",type:"m",isEnd:!1}),l.push({name:"SeekID",type:"b",data:new eN.Buffer([21,73,169,102])}),l.push({name:"SeekPosition",type:"u",data:UN(t)}),l.push({name:"Seek",type:"m",isEnd:!0}),l.push({name:"Seek",type:"m",isEnd:!1}),l.push({name:"SeekID",type:"b",data:new eN.Buffer([22,84,174,107])}),l.push({name:"SeekPosition",type:"u",data:UN(r)}),l.push({name:"Seek",type:"m",isEnd:!0}),l.push({name:"Seek",type:"m",isEnd:!1}),l.push({name:"SeekID",type:"b",data:new eN.Buffer([28,83,187,107])}),l.push({name:"SeekPosition",type:"u",data:UN(a)}),l.push({name:"Seek",type:"m",isEnd:!0}),l.push({name:"SeekHead",type:"m",isEnd:!0}),d=DN(l),p=[],p.push({name:"Cues",type:"m",isEnd:!1}),n.forEach((({CueTrack:e,CueClusterPosition:t,CueTime:n})=>{p.push({name:"CuePoint",type:"m",isEnd:!1}),p.push({name:"CueTime",type:"u",data:UN(n)}),p.push({name:"CueTrackPositions",type:"m",isEnd:!1}),p.push({name:"CueTrack",type:"u",data:UN(e)}),t-=i,t+=u,p.push({name:"CueClusterPosition",type:"u",data:UN(t)}),p.push({name:"CueTrackPositions",type:"m",isEnd:!0}),p.push({name:"CuePoint",type:"m",isEnd:!0})})),p.push({name:"Cues",type:"m",isEnd:!0}),f=DN(p),h===u)break;if(h=u,9===e)throw new Error("Failed to converge to a stable metadata size")}const v=[r,{name:"Segment",type:"m",isEnd:!1,unknownSize:!0},l,a,u,p];return(new _N).encode(v)},removeElement:LN,extractElement:BN,putRefinedMetaData:function(e,t){Array.isArray(t.cueInfos)&&!Array.isArray(t.cues)&&(console.warn("putRefinedMetaData: info.cueInfos property is deprecated. please use info.cues"),t.cues=t.cueInfos);let n=[],r=[];for(let t=0;t<e.length;t++){const i=e[t];if("m"===i.type&&"Segment"===i.name){if(n=e.slice(0,t),r=e.slice(t),i.unknownSize){r.shift();break}throw new Error("this metadata is not streaming webm file")}}if(!(r[r.length-1].dataEnd>0))throw new Error("metadata dataEnd has wrong number");const i=r[r.length-1].dataEnd,o=n[n.length-1].dataEnd,a=(new _N).encode(n).byteLength-o,s=i-r[0].tagStart,u=new eN.Buffer([24,83,128,103]),c=new eN.Buffer("01ffffffffffffff","hex"),d=u.byteLength+c.byteLength;let l,f=s;for(l=1;l<20;l++){const e=zN(r,a+(o+d+f-i),t),s=(new _N).encode(e).byteLength;if(s===f)return(new _N).encode([].concat(n,[{type:"m",name:"Segment",isEnd:!1,unknownSize:!0}],e));f=s}throw new Error("unable to refine metadata, stable size could not be found in "+l+" iterations!")},encodeValueToBuffer:function(e){let t=new eN.Buffer(0);if("m"===e.type)return e;switch(e.type){case"u":t=UN(e.value);break;case"i":t=FN(e.value);break;case"f":t=qN(e.value);break;case"s":t=new eN.Buffer(e.value,"ascii");break;case"8":t=new eN.Buffer(e.value,"utf8");break;case"b":t=e.value;break;case"d":t=new gN(e.value.getTime().toString()).toBuffer()}return Object.assign({},e,{data:t})},createUIntBuffer:UN,createIntBuffer:FN,createFloatBuffer:qN,readVint:tN,writeVint:nN,byEbmlID:rN,convertEBMLDateToJSDate:sN,readBlock:e=>iN(new eN.Buffer(e)),ebmlBlock:iN,encodeTag:aN,concat:oN}),HN=ri((function(e,t){const n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(e){+e!=e&&(e=0);return o.alloc(+e)},t.INSPECT_MAX_BYTES=50;const r=2147483647;function i(e){if(e>r)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|f(e,t);let r=i(n);const a=r.write(e,t);a!==n&&(r=r.slice(0,a));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if($(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return c(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if($(e,ArrayBuffer)||e&&$(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&($(e,SharedArrayBuffer)||e&&$(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return o.from(r,t,n);const a=function(e){if(o.isBuffer(e)){const t=0|l(e.length),n=i(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||G(e.length)?i(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return s(e),i(e<0?0:0|l(e))}function c(e){const t=e.length<0?0:0|l(e.length),n=i(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,o.prototype),r}function l(e){if(e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||$(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(i)return r?-1:K(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function h(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),G(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){let o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===u)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){let n=!0;for(let r=0;r<u;r++)if(c(e,o+r)!==c(t,r)){n=!1;break}if(n)return o}return-1}function g(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let a;for(r>o/2&&(r=o/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(G(r))return a;e[n+a]=r}return a}function y(e,t,n,r){return V(K(t,e.length-n),e,n,r)}function w(e,t,n,r){return V(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return V(H(t),e,n,r)}function S(e,t,n,r){return V(function(e,t){let n,r,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?XT.fromByteArray(e):XT.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,u;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(u=(31&t)<<6|63&n,u>127&&(o=u));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(u=(15&t)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(u=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return function(e){const t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}t.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,n){return a(e,t,n)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,n){return function(e,t,n){return s(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}(e,t,n)},o.allocUnsafe=function(e){return u(e)},o.allocUnsafeSlow=function(e){return u(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if($(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),$(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=o.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if($(t,Uint8Array))i+t.length>r.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!o.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)h(this,t,t+1);return this},o.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},o.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},o.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(e,t,n,r,i){if($(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0);const u=Math.min(a,s),c=this.slice(r,i),d=e.slice(t,n);for(let e=0;e<u;++e)if(c[e]!==d[e]){a=c[e],s=d[e];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return b(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function x(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=W[e[r]];return i}function O(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function _(e,t,n,r,i){j(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function I(e,t,n,r,i){j(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function M(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,i){return t=+t,n>>>=0,i||M(e,0,n,4),ZT(e,t,n,r,23,4),n+4}function L(e,t,n,r,i){return t=+t,n>>>=0,i||M(e,0,n,8),ZT(e,t,n,r,52,8),n+8}o.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,o.prototype),r},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=Y((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||F(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),o.prototype.readBigUInt64BE=Y((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||F(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=Y((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||F(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),o.prototype.readBigInt64BE=Y((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||F(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),o.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),JT(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),JT(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),JT(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),JT(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){P(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){P(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigUInt64LE=Y((function(e,t=0){return _(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=Y((function(e,t=0){return I(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);P(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);P(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigInt64LE=Y((function(e,t=0){return _(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=Y((function(e,t=0){return I(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const a=o.isBuffer(e)?e:o.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};const B={};function D(e,t,n){B[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function z(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function j(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new B.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){U(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||F(t,e.length-(n+1))}(r,i,o)}function U(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function F(e,t,n){if(Math.floor(e)!==e)throw U(e,n),new B.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}D("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),D("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),D("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=z(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=z(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function K(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(e){return XT.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function $(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function G(e){return e!=e}const W=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function Y(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}}));
/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <https://feross.org>
	 * @license  MIT
	 */var VN=Object.entries({Cluster:"1F43B675",TimestampScale:"2AD7B1",Timestamp:"E7",Info:"1549A966",Tracks:"1654AE6B",TrackEntry:"AE",TrackNumber:"D7",TrackUID:"73C5",TrackType:"83",CodecId:"86",Segment:"18538067",MuxingApp:"4D80",WritingApp:"5741",SimpleBlock:"A3",Void:"EC",BlockGroup:"A0",Block:"A1",ReferenceBlock:"FB",BlockDuration:"9B",Video:"E0",Audio:"E1",PixelWidth:"B0",PixelHeight:"BA",DisplayWidth:"54B0",DisplayHeight:"54BA",SamplingFrequency:"B5",Channels:"9F"}).reduce(((e,[t,n])=>(e[t]=HN.Buffer.from(n,"hex"),e)),{});const{removeElement:$N,encodeTag:GN,createUIntBuffer:WN,writeVint:YN}=KN,QN=({timestamp:e,simpleBlocks:t,blockGroup:n})=>GN(VN.Cluster,HN.Buffer.concat([GN(VN.Timestamp,WN(e)),...t.map((e=>GN(VN.SimpleBlock,HN.Buffer.from(e)))),HN.Buffer.from(n||new ArrayBuffer(0))])),XN=({trackNumber:e,timecode:t,duration:n,frames:r,referenceTimestamp:i})=>{const o=new Uint8Array([255&t>>8,255&t]),a=null===i?null:new Uint8Array([255&i>>24,255&i>>16,255&i>>8,255&i]);return GN(VN.BlockGroup,HN.Buffer.concat([GN(VN.Block,HN.Buffer.concat([YN(e),HN.Buffer.from(o),HN.Buffer.from([0]),HN.Buffer.from(r)])),a?GN(VN.ReferenceBlock,HN.Buffer.from(a)):HN.Buffer.alloc(0),GN(VN.BlockDuration,WN(n))]))};function JN(e){const t=new MT(HN.Buffer.from(e)),n=t.nextUIntV(),r=t.nextInt16BE(),i=t.nextUInt8();return{trackNumber:n,timecode:r,keyframe:Boolean(128&i)}}function ZN(e){const t=new Uint8Array(e),n=3&t[0];let r=0;switch(n){case 0:r=1;break;case 1:case 2:r=2;break;case 3:if(t.byteLength<2)return console.error("Second byte missing from 'Code 3' Opus packet; demuxed block duration may be imprecise."),0;if(r=63&t[1],0===r)return console.error("Illegal 'Code 3' Opus packet with frame count zero; demuxed block duration may be imprecise."),0;break;default:return console.error(`Unexpected Opus frame count type: ${n}; demuxed block duration may be imprecise.`),0}const i=(248&t[0])>>3;if(i<0)throw new Error(`Unexpected opusConfig: ${i}`);if(0===r)return console.warn("Received opus packet without frames"),0;const o=[1e4,2e4,4e4,6e4,1e4,2e4,4e4,6e4,1e4,2e4,4e4,6e4,1e4,2e4,1e4,2e4,2500,5e3,1e4,2e4,2500,5e3,1e4,2e4,2500,5e3,1e4,2e4,2500,5e3,1e4,2e4][i]*r/1e3;return o>120&&console.warn(`Warning, demuxed Opus packet with encoded duration: ${o}ms. Should be no greater than 120`),o}function eO(e){const t=e.reduce(((e,t)=>e+t.byteLength),0),n=new Uint8Array(t);let r=0;return e.forEach((e=>{n.set(new Uint8Array(e),r),r+=e.byteLength})),n}class tO{constructor(e,t){this.simpleBlocks=[],this.timestamp=0,this.endTimestamp=0,this.firstTimecode=1/0,this.lastTimecode=-1/0,this.trackNumber=e,this.streamType=t}static get defaultVideoFrameDurationMs(){return 33}addSimpleBlock(e){const{trackNumber:t,timecode:n}=JN(e);if(this.firstTimecode=Math.min(this.firstTimecode,n),this.lastTimecode=Math.min(this.lastTimecode,n),t!==this.trackNumber)throw new Error(`received SimpleBlock from Track ${t}, expected ${this.trackNumber}`);this.simpleBlocks.push(e)}setTimestamp(e){this.timestamp=e}hasData(){return this.simpleBlocks.length>0}setEndTimestamp(e){this.endTimestamp=e}getTrackNumber(){return this.trackNumber}getDuration(e=tO.defaultVideoFrameDurationMs){if(0===this.simpleBlocks.length)return 0;if(1===this.simpleBlocks.length&&!this.endTimestamp)return e;const t=JN(this.simpleBlocks[0]).timecode;if(this.endTimestamp)return this.endTimestamp-(this.timestamp+this.firstTimecode);return JN(this.simpleBlocks[this.simpleBlocks.length-1]).timecode-t+this.getMostFrequentDuration()}getTimestamp(){return this.timestamp}startsWithKeyframe(){return!!this.simpleBlocks.length&&JN(this.simpleBlocks[0]).keyframe}getEncoded(){if(0===this.simpleBlocks.length)return new ArrayBuffer(0);if(1===this.simpleBlocks.length)return QN({timestamp:this.getTimestamp(),simpleBlocks:this.simpleBlocks});const e=this.simpleBlocks[this.simpleBlocks.length-1],{timecode:t,trackNumber:n,keyframe:r}=JN(e),i=JN(this.simpleBlocks[this.simpleBlocks.length-2]),o="audio"===this.streamType?ZN(e.slice(4)):this.endTimestamp?this.endTimestamp-(this.timestamp+t):this.getMostFrequentDuration(),a=e.slice(4,e.byteLength);return QN({timestamp:this.getTimestamp(),simpleBlocks:this.simpleBlocks.slice(0,this.simpleBlocks.length-1),blockGroup:XN({trackNumber:n,timecode:t,duration:o,frames:a,referenceTimestamp:r?null:this.timestamp+i.timecode})})}getMostFrequentDuration(){const e={},t=this.simpleBlocks.map((e=>JN(e).timecode)).sort(((e,t)=>e>t?1:-1));for(let n=0;n<t.length-1;n+=2){const r=Math.round(t[n+1]-t[n]);e[r]=e[r]?e[r]+1:1}return Object.keys(e).map((e=>Number(e))).sort(((t,n)=>e[t]>e[n]?-1:1))[0]}}var nO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class rO{constructor(e=0){this.size=0,this.offset=0,this.data=new ArrayBuffer(e)}add(e){if(this.getCapacity()<this.size+e.byteLength)return this.data=eO([this.data,e]),void(this.size=this.data.byteLength);new Uint8Array(this.data).set(new Uint8Array(e),this.size),this.size+=e.byteLength}getCopy({begin:e,end:t}){if(e<0||t<0)throw new Error("Range delimiters must be positive");if(t-this.offset>this.size)throw new Error(`End index beyond buffer bounds: ${t} > ${this.size+this.offset}`);return this.data.slice(e-this.offset,t-this.offset)}getSize(){return this.size}release(){this.offset+=this.size,this.size=0}getCapacity(){return this.data.byteLength}}class iO{constructor(){this.onEbmlHeader=new Qs,this.onTrackEntry=new Qs,this.onTimestampScale=new Qs,this.onCluster=new Qs,this.onDrained=new Qs,this.onError=new Qs,this.trackClusters={},this.decoder=new PN,this.decodeTasks=new Promise((e=>{e()})),this.accumulatedOpusDuration=0,this.undecoded=new rO,this.parsingHeader=!0}get EbmlHeader(){return this.onEbmlHeader.expose()}get TrackEntry(){return this.onTrackEntry.expose()}get TimestampScale(){return this.onTimestampScale.expose()}get Cluster(){return this.onCluster.expose()}get Drained(){return this.onDrained.expose()}get Error(){return this.onError.expose()}read(e){this.decodeTasks=this.decodeTasks.then((()=>{try{this.parseEbml(e)}catch(e){this.onError.trigger(e)}}))}drain(){return nO(this,void 0,void 0,(function*(){yield this.decodeTasks,this.onDrained.trigger(Object.values(this.trackClusters).reduce(((e,t)=>[...e,t.cluster]),[]))}))}parseEbml(e){this.parsingHeader&&this.undecoded.add(e),this.decoder.decode(e).forEach((e=>{this.parsingHeader=!!this.parsingHeader&&!("Cluster"===e.name),"TimecodeScale"===e.name?this.onTimestampScale.trigger(e.value):"Timecode"===e.name?this.setClustersTimecode(e.value):["SimpleBlock","Block"].includes(e.name)&&this.addSimpleBlockToCluster(e.value);if("m"===e.type&&e.isEnd)switch(e.name){case"EBML":this.onEbmlHeader.trigger(this.undecoded.getCopy({begin:e.tagStart,end:e.dataEnd}));break;case"TrackEntry":this.parseTrackEntry(this.undecoded.getCopy({begin:e.tagStart,end:e.dataEnd}))}}))}parseTrackEntry(e){const t=function(e,t){const n=(new PN).decode(e).filter((e=>"unknown"!==e.name));return t.forEach((e=>$N(e,n))),(new _N).encode(n)}(e,["DefaultDuration","MaxBlockAdditionID","BitDepth"]),n=function(e){const t={},n={};function r(e,t){const n=e[t];if(!n)throw new Error(`${t} not found`);return n}let i=null;(new PN).decode(e).forEach((e=>{"Video"===e.name?i="video":"Audio"===e.name&&(i="audio"),"u"===e.type||"f"===e.type?n[e.name]=e.value:"s"!==e.type&&"8"!==e.type||(t[e.name]=e.value)}));const o={TrackNumber:r(n,"TrackNumber"),TrackUID:r(n,"TrackUID"),TrackType:r(n,"TrackType"),CodecID:r(t,"CodecID")};if("video"===i)return Object.assign(Object.assign({},o),{__typename:"VideoTrackEntry",Video:{PixelWidth:r(n,"PixelWidth"),PixelHeight:r(n,"PixelHeight")}});if("audio"===i)return Object.assign(Object.assign({},o),{__typename:"AudioTrackEntry",Audio:{SamplingFrequency:r(n,"SamplingFrequency"),Channels:r(n,"Channels")}});throw new Error(`unsupported track type ${t.TrackType} (should be Video or Audio)`)}(t),r="VideoTrackEntry"===n.__typename?"video":"audio";this.trackClusters[n.TrackNumber]={cluster:new tO(n.TrackNumber,r),mustFlush:!1,nextTimestamp:0,streamType:r},this.onTrackEntry.trigger({data:t,trackEntry:n})}setClustersTimecode(e){for(const t of Object.values(this.trackClusters))t.nextTimestamp=e,t.mustFlush=t.cluster.hasData()}addSimpleBlockToCluster(e){const{trackNumber:t,timecode:n}=JN(e),r=this.trackClusters[t];if(r){if(r.mustFlush&&"audio"===r.streamType){if(null===r.nextTimestamp)throw new Error("missing timestamp of the next cluster");const e=r.cluster.getTimestamp()+this.accumulatedOpusDuration;this.accumulatedOpusDuration=Math.max(e-r.nextTimestamp,0)}if(r.mustFlush){if(!r.nextTimestamp)throw new Error("missing timestamp of the next cluster");r.cluster.setEndTimestamp(n+r.nextTimestamp),this.onCluster.trigger(r.cluster),r.cluster=new tO(r.cluster.getTrackNumber(),r.streamType),r.cluster.setTimestamp(r.nextTimestamp),r.nextTimestamp=null,r.mustFlush=!1}switch(r.streamType){case"video":r.cluster.addSimpleBlock(e);break;case"audio":r.cluster.addSimpleBlock(n<this.accumulatedOpusDuration?function(e,t){if(t<0)throw new Error("negative timestamps are not allowed");const n=new Uint8Array(e);return n[1]=t>>8&255,n[2]=255&t,n}(e,this.accumulatedOpusDuration):e),this.accumulatedOpusDuration=Math.max(n,this.accumulatedOpusDuration)+ZN(e.slice(4));break;default:this.onError.trigger(new Error(`Unrecognized stream type: ${r.streamType} | Cluster: ${r}`))}}else this.onError.trigger(new Error(`Missing Cluster for track ${t}`))}}var oO=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.from("string"==typeof e?[e]:e.raw);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce((function(e,t){var n=t.match(/\n[\t ]+/g);return n?e.concat(n.map((function(e){return e.length-1}))):e}),[]);if(i.length){var o=new RegExp("\n[\t ]{"+Math.min.apply(Math,i)+"}","g");r=r.map((function(e){return e.replace(o,"\n")}))}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return t.forEach((function(e,t){a+=e+r[t+1]})),a};class aO{constructor(e){this.segmentTimeline={video:[],audio:[]},this.videoInfo=null,this.audioInfo=null,this.segmentPrefix=e}addAudioStream(e){this.audioInfo=e}addVideoStream(e){this.videoInfo=e}addSegment(e,t,n,r){isNaN(t)||0===Number(t)||this.segmentTimeline[r].push({timestamp:e,duration:t,byteLength:n})}getSegmentName(e,t){return`${this.segmentPrefix}${e}-${t}.webm`}getInitSegmentName(e){return`${this.segmentPrefix}${e}-init.webm`}getManifest(){return oO`<?xml version="1.0" encoding="UTF-8"?>
    <!--Generated by Loom-->
    <MPD xmlns="urn:mpeg:dash:schema:mpd:2011" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:mpeg:dash:schema:mpd:2011 DASH-MPD.xsd" profiles="urn:mpeg:dash:profile:isoff-live:2011" minBufferTime="PT2S" type="static" mediaPresentationDuration="PT${this.getDuration()}S">
    <Period id="0">
        ${this.buildAudioAdaptationSet()}${this.buildVideoAdaptationSet()}
    </Period>
    </MPD>`}getDuration(){var e,t;const n=this.segmentTimeline.video[this.segmentTimeline.video.length-1],r=this.segmentTimeline.audio[this.segmentTimeline.audio.length-1],i=Math.pow(10,9),o=n&&(null===(e=this.videoInfo)||void 0===e?void 0:e.timescale)?(n.duration+n.timestamp)/(i/this.videoInfo.timescale):0,a=r&&(null===(t=this.audioInfo)||void 0===t?void 0:t.timescale)?(r.duration+r.timestamp)/i/this.audioInfo.timescale:0;return Math.max(o,a)}buildAudioAdaptationSet(){if(!this.audioInfo)return"";const e=Math.pow(10,9)/this.audioInfo.timescale;return oO`<AdaptationSet id="0" contentType="audio" lang="en" segmentAlignment="true">
      <Representation id="0" bandwidth="${this.getAudioBandwidth()}" codecs="${this.audioInfo.codec}" mimeType="audio/webm" audioSamplingRate="${this.audioInfo.sampleRate}">
          <AudioChannelConfiguration schemeIdUri="urn:mpeg:dash:23003:3:audio_channel_configuration:2011" value="${this.audioInfo.channels}"/>
          <SegmentTemplate timescale="${this.audioInfo.timescale}" initialization="${this.audioInfo.initializationFileName}" media="${this.segmentPrefix}audio-$Number$.webm" startNumber="0">
              <SegmentTimeline>
                  ${this.segmentTimeline.audio.map((t=>`<S t="${t.timestamp*e}" d="${t.duration*e}"/>`)).join("\n")}
              </SegmentTimeline>
          </SegmentTemplate>
      </Representation>
  </AdaptationSet>`}buildVideoAdaptationSet(){if(!this.videoInfo)return"";const e=Math.pow(10,9)/this.videoInfo.timescale;return oO`<AdaptationSet id="1" contentType="video" width="${this.videoInfo.width}" height="${this.videoInfo.height}" segmentAlignment="true">
      <Representation id="1" bandwidth="${this.getVideoBandwidth()}" codecs="${this.videoInfo.codec}" mimeType="video/webm" sar="1:1">
          <SegmentTemplate timescale="${this.videoInfo.timescale}" initialization="${this.videoInfo.initializationFileName}" media="${this.segmentPrefix}video-$Number$.webm" startNumber="0">
              <SegmentTimeline>
                  ${this.segmentTimeline.video.map((t=>`<S t="${t.timestamp*e}" d="${t.duration*e}"/>`)).join("\n")}
              </SegmentTimeline>
          </SegmentTemplate>
      </Representation>
  </AdaptationSet>`}getVideoBandwidth(){return Math.floor(8*this.segmentTimeline.video.reduce(((e,t)=>e+t.byteLength),0)/this.getDuration())}getAudioBandwidth(){return Math.floor(8*this.segmentTimeline.audio.reduce(((e,t)=>e+t.byteLength),0)/this.getDuration())}}const{encodeTag:sO,createUIntBuffer:uO}=KN;class cO{constructor(e,t){this.ebml={header:new ArrayBuffer(0),timestampScale:1e6,muxingApp:"Loom",writingApp:"Loom"},this.draining=!1,this.streamTypeByTrackNumber={},this.segmentIndexes={audio:0,video:0},this.stagedClusters={audio:[],video:[]},this.onInitSegment=new Qs,this.onMediaSegment=new Qs,this.onDrained=new Qs,this.onError=new Qs,this.logger=t,this.reader=new iO,this.segmentPrefix=e,this.manifest=new aO(e),this.setReaderEventHandlers()}get InitSegment(){return this.onInitSegment.expose()}get MediaSegment(){return this.onMediaSegment.expose()}get Drained(){return this.onDrained.expose()}get Error(){return this.onError.expose()}addSample(e){this.reader.read(e)}drain(){this.reader.drain()}getSegmentNamePrefix(){return this.segmentPrefix}generateInitSegment(e,t){if(!this.ebml.header.byteLength)return void this.onError.trigger(new Error("missing EBML header"));if(!this.ebml.timestampScale)return void this.onError.trigger(new Error("missing TimecodeScale"));const n="VideoTrackEntry"===t.__typename?"video":"audio",r=sO(VN.Tracks,HN.Buffer.from(e)),i=HN.Buffer.from(this.ebml.muxingApp),o=HN.Buffer.from(this.ebml.writingApp),a=sO(VN.Info,HN.Buffer.concat([sO(VN.TimestampScale,uO(this.ebml.timestampScale)),sO(VN.WritingApp,o),sO(VN.MuxingApp,i)])),s=sO(VN.Segment,HN.Buffer.concat([sO(VN.Void,HN.Buffer.alloc(87)),a,r]),!0);this.onInitSegment.trigger(Object.assign({data:eO([this.ebml.header,s]),streamType:n,name:this.manifest.getInitSegmentName(n)},t))}addVideoStreamToManifest(e){const t=e.Video,n={width:t.PixelWidth,height:t.PixelHeight,codec:{V_VP8:"vp8",V_VP9:"vp9"}[e.CodecID],timescale:this.ebml.timestampScale,initializationFileName:this.manifest.getInitSegmentName("video")};this.logger.crumb({message:"packager: Video track detected",level:Ce.Info,context:n}),this.manifest.addVideoStream(n)}addAudioStreamToManifest(e){const t=e.Audio,n={sampleRate:t.SamplingFrequency,channels:t.Channels,codec:{A_OPUS:"opus",A_VORBIS:"vorbis"}[e.CodecID],timescale:this.ebml.timestampScale,initializationFileName:this.manifest.getInitSegmentName("audio")};this.logger.crumb({message:"packager: Audio track detected",level:Ce.Info,context:n}),this.manifest.addAudioStream(n)}associateTrackNumberToStreamType(e,t){const n={1:"video",2:"audio"};if(!Object.keys(n).map((e=>Number(e))).includes(e))throw new Error(`unsupported Track Type: ${e}`);this.streamTypeByTrackNumber[t]=n[e]}addTrackToManifest(e){const t=this.getTrackStreamType(e.TrackNumber);if("video"===t)this.addVideoStreamToManifest(e);else{if("audio"!==t)throw new Error(`unsupported track: ${e}`);this.addAudioStreamToManifest(e)}}getTrackStreamType(e){return this.streamTypeByTrackNumber[e]}clustersToMediaSegments(e,t=[]){const n=this.popClusterGroup(e);if(!n.length)return t;const r=n.reduce(((e,t)=>e+t.getDuration()),0),i=n.reduce(((e,t)=>Math.min(e,t.getTimestamp())),1/0),o={data:HN.Buffer.concat(n.map((e=>HN.Buffer.from(e.getEncoded())))),duration:r,timestamp:i,streamType:e,index:this.segmentIndexes[e],name:this.manifest.getSegmentName(e,this.segmentIndexes[e])};return this.segmentIndexes[o.streamType]+=1,this.clustersToMediaSegments(e,[...t,o])}popClusterGroup(e){const t=[];let n=0;for(const[r,i]of Object.entries(this.stagedClusters[e])){if(t.length&&i.startsWithKeyframe())break;t.push(i),n=Number(r)}return this.stagedClusters[e]=this.stagedClusters[e].slice(n+1,this.stagedClusters[e].length),t}addMediaSegmentToManifest(e){this.manifest.addSegment(e.timestamp,e.duration,e.data.byteLength,e.streamType)}createMediaSegment(e){const t=this.streamTypeByTrackNumber[e.getTrackNumber()],n=this.draining||this.stagedClusters[t].length&&e.startsWithKeyframe();if(this.stagedClusters[t].push(e),!n)return;this.clustersToMediaSegments(t).forEach((e=>{this.logger.crumb({message:"packager: media segment created",level:Ce.Info,context:{streamType:t,index:e.index,timestamp:e.timestamp,duration:e.duration}}),this.addMediaSegmentToManifest(e),this.onMediaSegment.trigger(e)}))}setReaderEventHandlers(){this.reader.EbmlHeader.on((e=>{this.ebml.header=e,this.logger.crumb({message:"packager: EBML header received",level:Ce.Info,context:{size:e.byteLength}})})),this.reader.TimestampScale.on((e=>{this.ebml.timestampScale=e})),this.reader.TrackEntry.on((({data:e,trackEntry:t})=>{try{this.associateTrackNumberToStreamType(t.TrackType,t.TrackNumber),this.addTrackToManifest(t),this.generateInitSegment(e,t)}catch(e){this.onError.trigger(e)}})),this.reader.Cluster.on((e=>{try{this.createMediaSegment(e)}catch(e){this.onError.trigger(e)}})),this.reader.Drained.on((e=>{this.draining=!0,e.forEach((e=>this.createMediaSegment(e))),this.onDrained.trigger(this.manifest.getManifest())})),this.reader.Error.on((e=>{this.onError.trigger(e)}))}}var dO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const lO=(e,t)=>()=>dO(void 0,void 0,void 0,(function*(){const n=e.currentStatus(),{result:r}=yield $s({fn:()=>(e=>Ks(void 0,void 0,void 0,(function*(){const t=yield Us({method:"POST",url:Ls(e),headers:e.headers},{});return t.kind===Be.Failed?Ui({failure:t,message:"api.credentials: Failed",context:{args:[e],extra:{}}}):{kind:Be.Success,payload:t.payload}})))(Object.assign({videoId:t.videoId},e.api)),shouldRetry:e=>e.kind===Be.Failed&&n!==ze.Abandoning,remainingAttempts:3});if(r.kind===Be.Failed)throw Ui({failure:r,context:{args:t,extra:{}},message:"Failed to refresh credentials for webm-uploader-sdk"}),new Error("Failed to refresh S3 credentials");const i=r.payload;return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken}}));var fO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const pO=(e,t,n)=>{const{videoId:r,s3Config:i}=e,o=n.getState();let a=!1;return{hooks:e.hooks,videoId:r,s3Config:i,onProgress:e=>{t.setProgress(e)},onFileComplete:e=>fO(void 0,void 0,void 0,(function*(){const t=n.currentStatus(),i={state:o,status:t},s=e.match(/-video-\d+\.webm/),u=[ze.Recording,ze.Pausing,ze.Paused,ze.Resuming,ze.Resumed,ze.MediaStreamStopped,ze.Completing];!1===a&&s&&u.includes(t)?(yield Ys({callFn:()=>((e,t)=>Hs(void 0,void 0,void 0,(function*(){const{s3FileKey:n}=t;return yield Us({method:"POST",url:Bs(e),headers:e.headers},{s3FileKey:n})})))(Object.assign({videoId:r},n.api),{s3FileKey:e}),purpose:"Request metadata of the recording to be extracted",breadcrumbs:i,allowedRetries:1},n.log),a=!0):!1===a&&s&&n.log.crumb({level:Ce.Warning,message:"onFileComplete: Ignoring completed video segment, we are in the wrong state to extract metadata",context:Object.assign({},i)}),t===ze.Completing&&(yield Ys({callFn:()=>((e,t)=>{const{packets:n}=t;return Us({method:"POST",url:Ds(e),headers:e.headers},{packets:n})})(Object.assign({videoId:r},n.api),{packets:o.progress.total-o.progress.pending}),breadcrumbs:i,purpose:"Send the current upload progress",allowedRetries:0},n.log))})),onComplete:()=>fO(void 0,void 0,void 0,(function*(){t.setUploadCompleted();(yield Ys({callFn:()=>((e,t=vO)=>qs(void 0,void 0,void 0,(function*(){return yield Us({method:"POST",url:Rs(e),headers:e.headers},Object.assign(Object.assign({format:"dash",recording_version:Ae.V5},e.environmentMetadata),{duration:Math.round(t.duration/1e3),trueBitrate:t.trueBitrate}))})))(Object.assign({videoId:r},n.api),n.recordingStats),purpose:"Mark a recording as complete",breadcrumbs:o,allowedRetries:8},n.log)).kind===Be.Failed&&n.log.crumb({level:Ce.Warning,message:"uploader.onComplete: Failed to request the complete endpooint",context:{videoId:r}}),t.setCompleted()}))}};var hO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const vO={duration:0,totalByteSize:0,totalParts:0,trueBitrate:0},mO=(e,t)=>{const{stream:n,hooks:r,api:i,videoId:o}=e,a={progress:{total:0,pending:0},markers:{startedAbandoning:!1,startedCancel:!1,startedCompletion:!1,startedStarting:!1,finishedInitializing:!1,finishedTeardown:!1,finishedCompletion:!1,finishedUploading:!1,finishedStarting:!1},mediarecorder:null},s=()=>(e=>Ps.statusFinder(e,_s,ze.Unknown))(a),u=()=>{const e=s();try{r.onLifecycleEvent(e)}catch(n){t.error(`Lifecycle event hook failed: ${(null==n?void 0:n.message)||n}`,{error:n,status:e})}},c=Object.assign({},vO),d={currentStatus:s,getState:()=>a,log:t,api:i,recordingStats:c,triggerAnalytics:u};u();const l=((e,t)=>{const{videoId:n,s3Config:r,onComplete:i,onProgress:o,onFileComplete:a}=e,{accessKeyId:s,secretAccessKey:u,sessionToken:c,bucket:d,endpoint:l}=r;if(!Object.values(Ue).includes(d))return{kind:Be.Failed,context:{args:e,extra:{}},stackContext:[],message:`unauthorized bucket ${d}`};const{log:f,currentStatus:p,recordingStats:h}=t,v={credentials:{accessKeyId:s,secretAccessKey:u,sessionToken:c},region:"us-west-2"};d===Ue.Test&&(v.endpoint=l);const m=NT.createUploader(v,{bucketName:d,keyPrefix:"sessions/raw/"},lO(t,e),t.log),g=new cO(`${n}-`,t.log);g.MediaSegment.on((e=>{e.index+1>h.totalParts&&e.duration&&(h.totalParts+=1,h.duration+=e.duration),h.totalByteSize+=e.data.byteLength,h.trueBitrate=Math.round(8*h.totalByteSize/(h.duration/1e3))}));const y=new PT(g,m,t.log),w={dashPackager:g,s3Uploader:m,segmentUploader:y};m.ProgressUpdate.on((e=>{o(e,w)})),m.FileUploaded.on((e=>{a(e)}));const b=t=>n=>{f.crumb({level:Ce.Error,message:`uploader.${t}: ${n.message}`,context:{status:status,error:n}}),e.hooks.onUnrecoverable(n)};return g.Error.on(b("dashPackager")),m.Error.on(b("s3Uploader")),y.Error.on(b("segmentUploader")),y.Complete.on((()=>{const e=p();e===ze.Completing?i():f.crumb({level:Ce.Warning,message:"uploader.segmentUploader: Ignoring the Complete callback.",context:{status:e,recorders:w}})})),{kind:Be.Success,payload:w}})(pO(e,{setCompleted:()=>{a.markers.finishedCompletion=!0,u()},setProgress:e=>{a.progress=e},setUploadCompleted:()=>{a.markers.finishedUploading=!0,u()}},d),d);if(l.kind===Be.Failed)return console.error({uploaderResult:l}),Ui({failure:l,context:{args:e,extra:{}},message:`Failed to: Prepare the uploader for wru-core: ${l.message}`});const{payload:{segmentUploader:f}}=l,p=()=>hO(void 0,void 0,void 0,(function*(){f.cancel(),yield Ys({callFn:()=>(e=>Fs(void 0,void 0,void 0,(function*(){return yield Us({method:"DELETE",url:Ms(e),headers:e.headers},{cancelling_recording:!0,video_properties:e.environmentMetadata})})))(Object.assign({videoId:o},d.api)),purpose:"Tell the api that this recording has been cancelled",breadcrumbs:a,allowedRetries:3},d.log),a.markers.finishedTeardown=!0,u()})),h=()=>hO(void 0,void 0,void 0,(function*(){f.finish(),yield Ys({callFn:()=>((e,t)=>Us({method:"POST",url:zs(e),headers:e.headers},Object.assign({packets:t.packets,pendingPackets:t.pendingPackets},e.environmentMetadata)))(Object.assign({videoId:o},d.api),{packets:a.progress.total+3,pendingPackets:a.progress.pending}),purpose:"Send the total number of parts for the current recording",breadcrumbs:a,allowedRetries:0},d.log)})),[v,m]=Os({stream:n,settings:e.settings,handlerOptions:As(e,{uploadFn:e=>f.upload(e),setFinishedStarting:()=>{a.markers.finishedStarting=!0,u()},cancelRecording:p,completeRecording:h},d)},d);a.mediarecorder=m,a.markers.finishedInitializing=!0,u();const g=([e,t,n])=>((e,t)=>{const{name:n,validStates:r,fn:i}=e;return()=>{t.log.crumb({level:Ce.Info,message:`wru-core.control/${n}: Attempting`,context:{}});const e=t.currentStatus();if(!1===r.includes(e)){const r=t.getState();return{kind:Be.Failed,message:`wru-core.control/${n}: Ignoring attempt, we are in the wrong state`,context:{args:{},extra:{status:e,state_markers:JSON.stringify(r.markers),state_mediarecorder:r.mediarecorder?r.mediarecorder.state:"null"}},stackContext:[]}}try{return i(),{kind:Be.Success,payload:null}}catch(t){return{kind:Be.Failed,message:`wru-core.control/${n}: Threw an unexpected error`,context:{args:{},extra:{error:t,status:e}},stackContext:[]}}}})({name:e,validStates:t,fn:n},d);return{kind:Be.Success,payload:{controls:{abandon:g(["abandon",[ze.Intitializing,ze.Ready,ze.Starting,ze.Recording,ze.Paused,ze.Completing,ze.FinishedUploading,ze.Cancelling,ze.MediaStreamStopped],()=>{const e=s();a.markers.startedAbandoning=!0,u(),[ze.Intitializing,ze.Ready].includes(e)&&v.start(3e3),v.abandon(),e===ze.MediaStreamStopped&&p()}]),cancel:g(["cancel",[ze.Recording,ze.Paused,ze.MediaStreamStopped],()=>{const e=s();a.markers.startedCancel=!0,u(),e===ze.MediaStreamStopped?p():v.stop()}]),start:g(["start",[ze.Ready],()=>{a.markers.startedStarting=!0,u(),v.start(3e3)}]),complete:g(["complete",[ze.Recording,ze.Paused,ze.MediaStreamStopped],()=>{const e=s();switch(a.markers.startedCompletion=!0,u(),e){case ze.Paused:case ze.Recording:v.stop();break;case ze.MediaStreamStopped:h()}}]),pause:g(["pause",[ze.Recording],()=>{r.onLifecycleEvent(ze.Pausing),v.pause(),u()}]),resume:g(["resume",[ze.Paused],()=>{r.onLifecycleEvent(ze.Resuming),v.resume(),r.onLifecycleEvent(ze.Resumed),u()}])},currentStatus:s,getRecordingStats:()=>Object.assign({},c),__hacks:{assocWithMetadata:e=>{d.api.environmentMetadata=Object.assign(Object.assign({},d.api.environmentMetadata),e)}}}}};var gO=ri((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RECORDING_ALL_EVENTS=t.EVENT_FORCE_QUIT_FOUND=t.EVENT_RECORDING_NETWORK_LOST_CONNECTION=t.EVENT_RECORDING_COMPLETE=t.EVENT_RECORDING_UPLOAD_CANCELLED=t.EVENT_RECORDING_UPLOADED=t.EVENT_RECORDING_STOPPED=t.EVENT_RECORDING_LAYER_STOPPED=t.EVENT_RECORDING_STOP=t.EVENT_RECORDING_CANCEL_PROMPT_REJECT=t.EVENT_RECORDING_CANCEL_PROMPT_CONFIRM=t.EVENT_RECORDING_CANCELLED=t.EVENT_RECORDING_LAYER_CANCELLED=t.EVENT_RECORDING_CANCEL=t.EVENT_RECORDING_LAYER_RESUMED=t.EVENT_RECORDING_RESUME=t.EVENT_RECORDING_LAYER_PAUSED=t.EVENT_RECORDING_PAUSE=t.EVENT_RECORDING_LAYER_STARTED=t.EVENT_RECORDING_START=void 0;var n="Recording Start";t.EVENT_RECORDING_START=n;var r="Recording Layer Started";t.EVENT_RECORDING_LAYER_STARTED=r;var i="Recording Pause";t.EVENT_RECORDING_PAUSE=i;var o="Recording Layer Paused";t.EVENT_RECORDING_LAYER_PAUSED=o;var a="Recording Resume";t.EVENT_RECORDING_RESUME=a;var s="Recording Layer Resumed";t.EVENT_RECORDING_LAYER_RESUMED=s;var u="Recording Cancel";t.EVENT_RECORDING_CANCEL=u;var c="Recording Layer Cancelled";t.EVENT_RECORDING_LAYER_CANCELLED=c;var d="Recording Cancelled";t.EVENT_RECORDING_CANCELLED=d;var l="Recording Cancel Prompt Confirm";t.EVENT_RECORDING_CANCEL_PROMPT_CONFIRM=l;var f="Recording Cancel Prompt Reject";t.EVENT_RECORDING_CANCEL_PROMPT_REJECT=f;var p="Recording Stop";t.EVENT_RECORDING_STOP=p;var h="Recording Layer Stopped";t.EVENT_RECORDING_LAYER_STOPPED=h;var v="Recording Stopped";t.EVENT_RECORDING_STOPPED=v;var m="Recording Uploaded";t.EVENT_RECORDING_UPLOADED=m;var g="Recording Upload Canceled";t.EVENT_RECORDING_UPLOAD_CANCELLED=g;var y="Recording Complete";t.EVENT_RECORDING_COMPLETE=y;var w="Recording Lost Network Connection";t.EVENT_RECORDING_NETWORK_LOST_CONNECTION=w;var b="App was Force Quit";t.EVENT_FORCE_QUIT_FOUND=b;var S=[n,r,i,o,a,s,u,c,d,l,f,p,h,v,m,g,y,w,b];t.RECORDING_ALL_EVENTS=S})),yO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const wO=e=>yO(void 0,void 0,void 0,(function*(){const t=yield e.getAnonymousId();if(t)return{headers:{"segment-anonymous-id":t}}}));var bO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const SO=(e,t,n,r,i)=>bO(void 0,void 0,void 0,(function*(){const o=(e=>{switch(e){case ze.Recording:return gO.EVENT_RECORDING_LAYER_STARTED;case ze.Pausing:return gO.EVENT_RECORDING_PAUSE;case ze.Paused:return gO.EVENT_RECORDING_LAYER_PAUSED;case ze.Resuming:return gO.EVENT_RECORDING_RESUME;case ze.Resumed:return gO.EVENT_RECORDING_LAYER_RESUMED;case ze.Cancelling:case ze.Abandoning:return gO.EVENT_RECORDING_CANCEL;case ze.Cancelled:case ze.Abandoned:return gO.EVENT_RECORDING_LAYER_CANCELLED;case ze.Completing:return gO.EVENT_RECORDING_STOP;case ze.FinishedUploading:return gO.EVENT_RECORDING_UPLOADED;case ze.Completed:return gO.EVENT_RECORDING_LAYER_STOPPED;default:return null}})(r);if(!o)return;const{hadSuccess:a,result:s}=yield $s({fn:()=>bO(void 0,void 0,void 0,(function*(){return yield e.mutation(pi`
          mutation SendRecordingEvent(
            $eventName: String!
            $recordingMetadata: RecordingEventAttributes
          ) {
            success: sendRecordingEvent(
              eventName: $eventName
              attributes: $recordingMetadata
            )
          }
        `,{eventName:o,recordingMetadata:i},{fetchOptions:yield wO(n)}).toPromise()})),shouldRetry:e=>{var t;return!(null===(t=e.data)||void 0===t?void 0:t.success)},remainingAttempts:3});a||t.error("Fail to send recording event",{event:o,error:s.error})}));var EO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const kO=Object.freeze({cancel:"cancel",complete:"complete",pause:"pause",resume:"resume",start:"start"});function CO(e){if(e.kind!==Be.Success)throw new Error(e.message)}function xO(e,{logger:t}){const n=`wrucore-recorder: Attempted to ${e}, but recorder does not exist`;throw t.crumb({level:Ce.Error,message:n,context:{}}),new Error(n)}var TO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const NO={recorderTools:void 0,startedBuilding:!1,finishedBuilding:!1,intentionToBuild:!1,onFinish:[]};const OO=new class{constructor(){this.state=Object.assign({},NO)}identifyRecorderVersion(){return Ae.V5}resetState(){this.state=Object.assign({},NO)}setIntentionToBuild({logger:e}){this.state.intentionToBuild=!0,e.crumb({level:Ce.Info,message:"recorder: setting intention to build",context:{category:"recorder"}})}resetFromNonNullRecorder({logger:e}){return TO(this,void 0,void 0,(function*(){e.crumb({level:Ce.Warning,message:"Found an unexpected recording instance. Attempting to tear down",context:Object.assign({category:"recorder"},this.state)});try{if(!this.state.recorderTools)throw new Error("recorderTools instance not found");yield this.state.recorderTools.cancel()}catch(t){e.error(new Error("Could not gracefully terminate existing recording instance"),{message:t.message,stack:t.stack})}finally{this.resetState(),e.crumb({level:Ce.Error,message:"Attempted to overwrite a recorder before it has been torn down",context:Object.assign({category:"recorder"},this.state)})}}))}build(e,t){return TO(this,void 0,void 0,(function*(){const{logger:n}=t;if(this.state.startedBuilding=!0,n.crumb({level:Ce.Info,message:"recorder.js: let's build the recorder",context:Object.assign(Object.assign(Object.assign({},e),{category:"recorder"}),this.state)}),this.state.recorderTools&&(yield this.resetFromNonNullRecorder(t)),void 0===e)throw new Error("builder.ts: Has not been initialised with options!");return n.info("Lets build the recorder"),this.state.recorderTools=yield((e,t)=>{const{logger:n,gqlClient:r,analytics:i}=t,{recorderOptions:o,getCaptureStream:a,onMediaStreamStopped:s,onUnrecoverable:u,onLifecycleEvent:c}=e;let d;const l=a();if(void 0===l)throw n.crumb({level:Ce.Error,message:"wrucore-recorder: MediaStream is unavailable. Cannot start initializing wru-core",context:{buildOptions:e,getCaptureStream:a}}),new Error("Failed to initializd wru, no media stream provided");const{streamConfig:{videoID:f,highQuality:p},recordingMetadata:h,credentials:v}=o;n.info("Constructing wru with credentials ",{credentials:v});const m=mO({stream:l,s3Config:v,videoId:f,api:{host:window.location.origin,environmentMetadata:h},settings:{videoQuality:p?je.Normal:je.Low},hooks:{onLifecycleEvent:e=>EO(void 0,void 0,void 0,(function*(){c(e),yield SO(r,n,i,e,h)})),onUnrecoverable:e=>{n.error(e),u(e)},onMediaStreamStopped:s}},n);if(m.kind!==Be.Success)throw new Error(m.message);return d=m.payload,{cancel:()=>{void 0===d&&xO(kO.cancel,t);const e=d.currentStatus();if([ze.Recording,ze.Paused].includes(e))CO(d.controls.cancel());else{let t="wrucore-recorder: Cancel control was called, but the recorder was not in a recording.";e===ze.Completing&&(t="wrucore-recorder: Attempting to abandon current recording before marking it as complete."),n.crumb({level:Ce.Info,message:t,context:{currentStatus:e}}),CO(d.controls.abandon())}},end:e=>{void 0===d&&xO(kO.complete,t),n.crumb({level:Ce.Info,message:"Recorder: recorder_s3: End recording options",context:{options:e}}),d.__hacks.assocWithMetadata(e),CO(d.controls.complete())},pause:()=>{void 0===d&&xO(kO.pause,t),CO(d.controls.pause())},start:()=>{void 0===d&&xO(kO.start,t),CO(d.controls.start())},resume:()=>{void 0===d&&xO(kO.complete,t),CO(d.controls.resume())}}})(e,t),n.info("The recorder has been built"),this.state.finishedBuilding=!0,this.state.onFinish.map((e=>e())),this.state.recorderTools}))}get({logger:e}){return void 0!==this.state.recorderTools||!1===this.state.intentionToBuild?Promise.resolve(this.state.recorderTools):(e.warn("recorder: Attempting to retrieve recorder before it has been built",{state:this.state}),new Promise((t=>{let n=!1,r=!1;this.state.onFinish.push((()=>{!0!==n&&!0!==r&&(n=!0,t(this.state.recorderTools))})),window.setTimeout((()=>{!0!==n&&!0!==r&&(r=!0,e.error("Waiting for recorder to build has timed out",{state:this.state}),t(this.state.recorderTools))}),15e3)})))}detach(){this.resetState()}};var AO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var PO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};
/*!@license
	 * UAParser.js v0.7.28
	 * Lightweight JavaScript-based User-Agent string parser
	 * https://github.com/faisalman/ua-parser-js
	 *
	 * Copyright  2012-2021 Faisal Salman <f@faisalman.com>
	 * Licensed under MIT License
	 */
var _O=ri((function(e,t){!function(n,r){var i="function",o="object",a="string",s="model",u="name",c="type",d="vendor",l="version",f="architecture",p="console",h="mobile",v="tablet",m="smarttv",g="wearable",y="embedded",w={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return typeof e===a&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===a?e.replace(/[^\d\.]/g,"").split(".")[0]:r},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===t?e:e.substring(0,255)}},b={rgx:function(e,t){for(var n,a,s,u,c,d,l=0;l<t.length&&!c;){var f=t[l],p=t[l+1];for(n=a=0;n<f.length&&!c;)if(c=f[n++].exec(e))for(s=0;s<p.length;s++)d=c[++a],typeof(u=p[s])===o&&u.length>0?2==u.length?typeof u[1]==i?this[u[0]]=u[1].call(this,d):this[u[0]]=u[1]:3==u.length?typeof u[1]!==i||u[1].exec&&u[1].test?this[u[0]]=d?d.replace(u[1],u[2]):r:this[u[0]]=d?u[1].call(this,d,u[2]):r:4==u.length&&(this[u[0]]=d?u[3].call(this,d.replace(u[1],u[2])):r):this[u]=d||r;l+=2}},str:function(e,t){for(var n in t)if(typeof t[n]===o&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(w.has(t[n][i],e))return"?"===n?r:n}else if(w.has(t[n],e))return"?"===n?r:n;return e}},S={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},E={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[l,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[l,[u,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[u,l],[/opios[\/\s]+([\w\.]+)/i],[l,[u,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[l,[u,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[u,l],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[l,[u,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[l,[u,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[l,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[l,[u,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[l,[u,"IE"]],[/yabrowser\/([\w\.]+)/i],[l,[u,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure Browser"],l],[/focus\/([\w\.]+)/i],[l,[u,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[l,[u,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[l,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[l,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[l,[u,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[u,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[l,[u,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[u,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 Browser"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],l],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[u,l],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[u],[/;fbav\/([\w\.]+);/i],[l,[u,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[u,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[u,l],[/\bgsa\/([\w\.]+)\s.*safari\//i],[l,[u,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[l,[u,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[u,"Chrome WebView"],l],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[l,[u,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[u,l],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[l,[u,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[l,u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[u,[l,b.str,S.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[u,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[u,"Netscape"],l],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[l,[u,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[u,l]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,w.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[f,/ower/,"",w.lowerize]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,w.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[s,[d,"Samsung"],[c,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[s,[d,"Samsung"],[c,h]],[/\((ip(?:hone|od)[\s\w]*);/i],[s,[d,"Apple"],[c,h]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[s,[d,"Apple"],[c,v]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[s,[d,"Huawei"],[c,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[s,[d,"Huawei"],[c,h]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[s,/_/g," "],[d,"Xiaomi"],[c,h]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[s,/_/g," "],[d,"Xiaomi"],[c,v]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[s,[d,"OPPO"],[c,h]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[s,[d,"Vivo"],[c,h]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[s,[d,"Realme"],[c,h]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[s,[d,"Motorola"],[c,h]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[s,[d,"Motorola"],[c,v]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[s,[d,"LG"],[c,v]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[s,[d,"LG"],[c,h]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[s,[d,"Lenovo"],[c,v]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[s,/_/g," "],[d,"Nokia"],[c,h]],[/droid.+;\s(pixel\sc)[\s)]/i],[s,[d,"Google"],[c,v]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[s,[d,"Google"],[c,h]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[d,"Sony"],[c,h]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[s,"Xperia Tablet"],[d,"Sony"],[c,v]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[s,[d,"OnePlus"],[c,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[s,[d,"Amazon"],[c,v]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[s,"Fire Phone"],[d,"Amazon"],[c,h]],[/\((playbook);[\w\s\),;-]+(rim)/i],[s,d,[c,v]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[s,[d,"BlackBerry"],[c,h]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[s,[d,"ASUS"],[c,v]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[s,[d,"ASUS"],[c,h]],[/(nexus\s9)/i],[s,[d,"HTC"],[c,v]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[d,[s,/_/g," "],[c,h]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[s,[d,"Acer"],[c,v]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[s,[d,"Meizu"],[c,h]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[d,s,[c,h]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[d,s,[c,v]],[/\s(surface\sduo)\s/i],[s,[d,"Microsoft"],[c,v]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[s,[d,"Fairphone"],[c,h]],[/\s(u304aa)\sbuild/i],[s,[d,"AT&T"],[c,h]],[/sie-(\w*)/i],[s,[d,"Siemens"],[c,h]],[/[;\/]\s?(rct\w+)\sbuild/i],[s,[d,"RCA"],[c,v]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[s,[d,"Dell"],[c,v]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[s,[d,"Verizon"],[c,v]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[s,[d,"Barnes & Noble"],[c,v]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[s,[d,"NuVision"],[c,v]],[/;\s(k88)\sbuild/i],[s,[d,"ZTE"],[c,v]],[/;\s(nx\d{3}j)\sbuild/i],[s,[d,"ZTE"],[c,h]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[s,[d,"Swiss"],[c,h]],[/[;\/]\s?(zur\d{3})\sbuild/i],[s,[d,"Swiss"],[c,v]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[s,[d,"Zeki"],[c,v]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[d,"Dragon Touch"],s,[c,v]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[s,[d,"Insignia"],[c,v]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[s,[d,"NextBook"],[c,v]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[d,"Voice"],s,[c,h]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[d,"LvTel"],s,[c,h]],[/;\s(ph-1)\s/i],[s,[d,"Essential"],[c,h]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[s,[d,"Envizen"],[c,v]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[s,[d,"MachSpeed"],[c,v]],[/[;\/]\s?tu_(1491)\sbuild/i],[s,[d,"Rotor"],[c,v]],[/(shield[\w\s]+)\sbuild/i],[s,[d,"Nvidia"],[c,v]],[/(sprint)\s(\w+)/i],[d,s,[c,h]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[d,"Microsoft"],[c,h]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[s,[d,"Zebra"],[c,v]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[s,[d,"Zebra"],[c,h]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[d,s,[c,p]],[/droid.+;\s(shield)\sbuild/i],[s,[d,"Nvidia"],[c,p]],[/(playstation\s[345portablevi]+)/i],[s,[d,"Sony"],[c,p]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[s,[d,"Microsoft"],[c,p]],[/smart-tv.+(samsung)/i],[d,[c,m]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[d,"Samsung"],[c,m]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[d,"LG"],[c,m]],[/(apple)\s?tv/i],[d,[s,"Apple TV"],[c,m]],[/crkey/i],[[s,"Chromecast"],[d,"Google"],[c,m]],[/droid.+aft([\w])(\sbuild\/|\))/i],[s,[d,"Amazon"],[c,m]],[/\(dtv[\);].+(aquos)/i],[s,[d,"Sharp"],[c,m]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[d,w.trim],[s,w.trim],[c,m]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[c,m]],[/((pebble))app\/[\d\.]+\s/i],[d,s,[c,g]],[/droid.+;\s(glass)\s\d/i],[s,[d,"Google"],[c,g]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[s,[d,"Zebra"],[c,g]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[d,[c,y]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[s,[c,h]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[s,[c,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[c,w.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[s,[d,"Generic"]],[/(phone)/i],[[c,h]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[l,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[l,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[u,l],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[l,u]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[u,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[u,[l,b.str,S.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[u,"Windows"],[l,b.str,S.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[l,/_/g,"."],[u,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[u,"Mac OS"],[l,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[u,l],[/\(bb(10);/i],[l,[u,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[l,[u,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[u,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[l,[u,"webOS"]],[/crkey\/([\d\.]+)/i],[l,[u,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[u,"Chromium OS"],l],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[u,l],[/(sunos)\s?([\w\.\d]*)/i],[[u,"Solaris"],l],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[u,l]]},k=function(e,t){if("object"==typeof e&&(t=e,e=r),!(this instanceof k))return new k(e,t).getResult();var i=e||(void 0!==n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),o=t?w.extend(E,t):E;return this.getBrowser=function(){var e={name:r,version:r};return b.rgx.call(e,i,o.browser),e.major=w.major(e.version),e},this.getCPU=function(){var e={architecture:r};return b.rgx.call(e,i,o.cpu),e},this.getDevice=function(){var e={vendor:r,model:r,type:r};return b.rgx.call(e,i,o.device),e},this.getEngine=function(){var e={name:r,version:r};return b.rgx.call(e,i,o.engine),e},this.getOS=function(){var e={name:r,version:r};return b.rgx.call(e,i,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===a&&e.length>255?w.trim(e,255):e,this},this.setUA(i),this};k.VERSION="0.7.28",k.BROWSER={NAME:u,MAJOR:"major",VERSION:l},k.CPU={ARCHITECTURE:f},k.DEVICE={MODEL:s,VENDOR:d,TYPE:c,CONSOLE:p,MOBILE:h,SMARTTV:m,TABLET:v,WEARABLE:g,EMBEDDED:y},k.ENGINE={NAME:u,VERSION:l},k.OS={NAME:u,VERSION:l},e.exports&&(t=e.exports=k),t.UAParser=k;var C=void 0!==n&&(n.jQuery||n.Zepto);if(C&&!C.ua){var x=new k;C.ua=x.getResult(),C.ua.get=function(){return x.getUA()},C.ua.set=function(e){x.setUA(e);var t=x.getResult();for(var n in t)C.ua[n]=t[n]}}}("object"==typeof window?window:ei)}));const IO="sdk_recorder";var MO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function RO(e){var t;return void 0!==(null===(t=e)||void 0===t?void 0:t.error)}const LO=(e,t,n,r)=>MO(void 0,void 0,void 0,(function*(){const{metrics:i,logger:o}=r;if(i.increment(Jt+".count",{recordingType:e}),e===Re.CameraOnly){const n=yield((e,t)=>ea(void 0,void 0,void 0,(function*(){const{deviceId:n}=e,{logger:r}=t,i=yield Jo();let o;if(o=n?i.find((e=>e.deviceId===n)):i.find((e=>"videoinput"===e.kind)),!o)return void r.crumb({level:Ce.Warning,message:"Media Utilities: No active video camera input",context:{devices:i}});if(ta.camera)return ta.camera;const a=yield na({audio:!1,video:{deviceId:{exact:o.deviceId},frameRate:30,width:1280,height:720}},t);if(!(a instanceof Error))return ta.camera=a,a;r.error(a,{devices:i})})))({deviceId:t},r);return n||(i.increment(Jt+".undefined",{recordingType:e}),{error:Zo.UnableToOpen})}const a=yield((e,t)=>ea(void 0,void 0,void 0,(function*(){const{logger:n}=e;try{if(ta.display)return ta.display;const n=navigator.mediaDevices,r=yield n.getDisplayMedia({audio:!1,video:{cursor:"always",width:1920,height:1080,frameRate:30}});return r.getTracks().map((n=>{n.onended=()=>{t({})};const r=n.getSettings().displaySurface;e.analytics.track("User Share Screen Selection",{screen:r})})),ta.display=r,r}catch(e){const{userAgent:t}=navigator,r={err:e,userAgent:t};return(e=>{const{name:t,message:n}=e;return"NotFoundError"===t||"NotAllowedError"===t&&"Permission denied by system"===n})(e)?(n.warn("Media Utilities: Missing required OS permissions",r),{error:Zo.MissingPermissions}):"NotAllowedError"===e.name?(n.info("Media Utilities: User declined to share screen",r),{error:Zo.UserDeclined}):(n.warn("Media Utilities: Unable to open display media stream",r),{error:Zo.UnableToOpen})}})))(r,n);return RO(a)?(o.warn("Failed to getVisualStream",{error:a}),i.increment(Jt+".failed",{recordingType:e}),a):a})),BO=(e,t,n)=>MO(void 0,void 0,void 0,(function*(){return e?yield((e,t)=>ea(void 0,void 0,void 0,(function*(){const{deviceId:n}=e,{logger:r}=t,i=yield Jo();let o;if(o=n?i.find((e=>e.deviceId===n)):i.find((e=>"audioinput"===e.kind)),!o)return void r.crumb({level:Ce.Warning,message:"Media Utilities: No active audio input",context:{devices:i}});if(ta.audio)return ta.audio;const a=yield na({audio:{deviceId:{exact:o.deviceId},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},video:!1},t);if(!(a instanceof Error))return ta.audio=a,a;r.error(a,{devices:i})})))({deviceId:t},n):Promise.resolve(void 0)}));function DO(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function zO(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function jO(e){zO(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function UO(e,t){zO(2,arguments);var n=jO(e).getTime(),r=DO(t);return new Date(n+r)}var FO=6e4;function qO(e){return e.getTime()%FO}function KO(e){var t=new Date(e.getTime()),n=Math.ceil(t.getTimezoneOffset());t.setSeconds(0,0);var r=n>0?(FO+qO(t))%FO:qO(t);return n*FO+r}function HO(e){zO(1,arguments);var t=jO(e);return!isNaN(t)}var VO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function $O(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var GO={date:$O({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:$O({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:$O({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},WO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function YO(e){return function(t,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,a=i.width?String(i.width):o;r=e.formattingValues[a]||e.formattingValues[o]}else{var s=e.defaultWidth,u=i.width?String(i.width):e.defaultWidth;r=e.values[u]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function QO(e){return function(t,n){var r=String(t),i=n||{},o=i.width,a=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],s=r.match(a);if(!s)return null;var u,c=s[0],d=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth];return u="[object Array]"===Object.prototype.toString.call(d)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(d,(function(e){return e.test(c)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(d,(function(e){return e.test(c)})),u=e.valueCallback?e.valueCallback(u):u,{value:u=i.valueCallback?i.valueCallback(u):u,rest:r.slice(c.length)}}}var XO,JO={code:"en-US",formatDistance:function(e,t,n){var r;return n=n||{},r="string"==typeof VO[e]?VO[e]:1===t?VO[e].one:VO[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:GO,formatRelative:function(e,t,n,r){return WO[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:YO({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:YO({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:YO({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:YO({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:YO({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(XO={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var n=String(e),r=t||{},i=n.match(XO.matchPattern);if(!i)return null;var o=i[0],a=n.match(XO.parsePattern);if(!a)return null;var s=XO.valueCallback?XO.valueCallback(a[0]):a[0];return{value:s=r.valueCallback?r.valueCallback(s):s,rest:n.slice(o.length)}}),era:QO({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:QO({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:QO({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:QO({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:QO({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function ZO(e,t){zO(2,arguments);var n=DO(t);return UO(e,-n)}function eA(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var tA=function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return eA("yy"===t?r%100:r,t.length)},nA=function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):eA(n+1,2)},rA=function(e,t){return eA(e.getUTCDate(),t.length)},iA=function(e,t){return eA(e.getUTCHours()%12||12,t.length)},oA=function(e,t){return eA(e.getUTCHours(),t.length)},aA=function(e,t){return eA(e.getUTCMinutes(),t.length)},sA=function(e,t){return eA(e.getUTCSeconds(),t.length)},uA=function(e,t){var n=t.length,r=e.getUTCMilliseconds();return eA(Math.floor(r*Math.pow(10,n-3)),t.length)},cA=864e5;function dA(e){zO(1,arguments);var t=1,n=jO(e),r=n.getUTCDay(),i=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function lA(e){zO(1,arguments);var t=jO(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=dA(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=dA(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function fA(e){zO(1,arguments);var t=lA(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=dA(n);return r}var pA=6048e5;function hA(e,t){zO(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:DO(i),a=null==n.weekStartsOn?o:DO(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=jO(e),u=s.getUTCDay(),c=(u<a?7:0)+u-a;return s.setUTCDate(s.getUTCDate()-c),s.setUTCHours(0,0,0,0),s}function vA(e,t){zO(1,arguments);var n=jO(e,t),r=n.getUTCFullYear(),i=t||{},o=i.locale,a=o&&o.options&&o.options.firstWeekContainsDate,s=null==a?1:DO(a),u=null==i.firstWeekContainsDate?s:DO(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,u),c.setUTCHours(0,0,0,0);var d=hA(c,t),l=new Date(0);l.setUTCFullYear(r,0,u),l.setUTCHours(0,0,0,0);var f=hA(l,t);return n.getTime()>=d.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function mA(e,t){zO(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:DO(i),a=null==n.firstWeekContainsDate?o:DO(n.firstWeekContainsDate),s=vA(e,t),u=new Date(0);u.setUTCFullYear(s,0,a),u.setUTCHours(0,0,0,0);var c=hA(u,t);return c}var gA=6048e5;var yA="midnight",wA="noon",bA="morning",SA="afternoon",EA="evening",kA="night",CA={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return tA(e,t)},Y:function(e,t,n,r){var i=vA(e,r),o=i>0?i:1-i;return"YY"===t?eA(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):eA(o,t.length)},R:function(e,t){return eA(lA(e),t.length)},u:function(e,t){return eA(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return eA(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return eA(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return nA(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return eA(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=function(e,t){zO(1,arguments);var n=jO(e),r=hA(n,t).getTime()-mA(n,t).getTime();return Math.round(r/gA)+1}(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):eA(i,t.length)},I:function(e,t,n){var r=function(e){zO(1,arguments);var t=jO(e),n=dA(t).getTime()-fA(t).getTime();return Math.round(n/pA)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):eA(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):rA(e,t)},D:function(e,t,n){var r=function(e){zO(1,arguments);var t=jO(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),i=n-r;return Math.floor(i/cA)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):eA(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return eA(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return eA(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return eA(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?wA:0===i?yA:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?EA:i>=12?SA:i>=4?bA:kA,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return iA(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):oA(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):eA(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):eA(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):aA(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):sA(e,t)},S:function(e,t){return uA(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return TA(i);case"XXXX":case"XX":return NA(i);case"XXXXX":case"XXX":default:return NA(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return TA(i);case"xxxx":case"xx":return NA(i);case"xxxxx":case"xxx":default:return NA(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+xA(i,":");case"OOOO":default:return"GMT"+NA(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+xA(i,":");case"zzzz":default:return"GMT"+NA(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return eA(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return eA((r._originalDate||e).getTime(),t.length)}};function xA(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t||"";return n+String(i)+a+eA(o,2)}function TA(e,t){return e%60==0?(e>0?"-":"+")+eA(Math.abs(e)/60,2):NA(e,t)}function NA(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+eA(Math.floor(i/60),2)+n+eA(i%60,2)}function OA(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function AA(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}var PA={p:AA,P:function(e,t){var n,r=e.match(/(P+)(p+)?/),i=r[1],o=r[2];if(!o)return OA(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",OA(i,t)).replace("{{time}}",AA(o,t))}},_A=["D","DD"],IA=["YY","YYYY"];function MA(e){return-1!==_A.indexOf(e)}function RA(e){return-1!==IA.indexOf(e)}function LA(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var BA=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,DA=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,zA=/^'([^]*?)'?$/,jA=/''/g,UA=/[a-zA-Z]/;function FA(e){return e.match(zA)[1].replace(jA,"'")}var qA=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const KA=(e,t,n,r)=>qA(void 0,void 0,void 0,(function*(){var i;const o=`${function(e,t,n){zO(2,arguments);var r=String(t),i=n||{},o=i.locale||JO,a=o.options&&o.options.firstWeekContainsDate,s=null==a?1:DO(a),u=null==i.firstWeekContainsDate?s:DO(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=o.options&&o.options.weekStartsOn,d=null==c?0:DO(c),l=null==i.weekStartsOn?d:DO(i.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var f=jO(e);if(!HO(f))throw new RangeError("Invalid time value");var p=KO(f),h=ZO(f,p),v={firstWeekContainsDate:u,weekStartsOn:l,locale:o,_originalDate:f};return r.match(DA).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,PA[t])(e,o.formatLong,v):e})).join("").match(BA).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return FA(n);var a=CA[r];if(a)return!i.useAdditionalWeekYearTokens&&RA(n)&&LA(n,t,e),!i.useAdditionalDayOfYearTokens&&MA(n)&&LA(n,t,e),a(h,n,o.localize,v);if(r.match(UA))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("")}(new Date,"d MMMM, yyyy")} - Loom Recording`,a=null===(i=(yield n.mutation(pi`
        mutation StartNewRecordingSession(
          $title: String!
          $flippedCamera: Boolean!
          $videoProperties: InputVideoProperties!
        ) {
          startNewRecordingSession(
            title: $title
            flippedCamera: $flippedCamera
            videoProperties: $videoProperties
          ) {
            id
            credentials {
              AccessKeyId
              SecretAccessKey
              SessionToken
              Bucket
            }
          }
        }
      `,{title:o,flippedCamera:e,videoProperties:t},{fetchOptions:yield wO(r)}).toPromise()).data)||void 0===i?void 0:i.startNewRecordingSession;if(!a)throw"Unable to get session for user";return(({id:e,credentials:t})=>({id:e,credentials:{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.SessionToken,bucket:t.Bucket}}))(a)}));var HA=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const VA=e=>new Promise((t=>setTimeout(t,e)));var $A=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var GA=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const WA=[e=>Gt($t.endRecording,(({dispatch:t,getState:n},{fromError:r,reason:i,errorMessage:o,fromRecordingLimit:a})=>AO(void 0,void 0,void 0,(function*(){const{logger:s,metrics:u}=e,{recorder:c,previewRecording:{dimensions:d}}=n(),{session:l,mediaDevicePermissions:f,screenType:p}=c;u.increment("integrations.sdk.consumers.end_recording",Object.assign(Object.assign({},i&&{reason:i}),{mediaDevicePermissions:f,screenType:p})),o&&s.warn("Recording ended due to error: ",{errorMessage:o});const h=(e=>(Ca||(Ca=xa("end",e)),Ca))(e.logger);null==h||h.play();const v=yield OO.get(e);if(void 0===l||void 0===v)ra(e),t(Vt.endRecording());else{t(Vt.updateBubbleMessageShown(!1)),yield v.end({fromError:r,videoHasReachedRecordingLimit:a}),ra(e),t(Vt.endRecording());const n=e.config.publicUrl.replace("/api",""),i=`${n}/share/${l.id}`,o=`${n}/embed/${l.id}`;t(Vt.updateLoomVideo({id:l.id,sharedUrl:i,embedUrl:o,title:"Loom video",height:d.height,width:d.width,providerUrl:n}))}})))),e=>Gt($t.startRecording,(t=>HA(void 0,void 0,void 0,(function*(){const{getState:n,dispatch:r}=t,{logger:i,gqlClient:o,metrics:a,analytics:s}=e,u=e=>{let t=`Unable to get video ${e}, attempting to cancel recording`;"stream"===e&&(t="Recording stream blocked by the user, cancelling recording");const{preRecording:o}=n(),{modalToDisplay:s}=o;i.warn(t,{error:e}),a.increment(en+".error",{errorType:e}),s!==Ie.SystemPermissions&&r($t.cancelRecording({detach:!1}))},{recorder:c,recorderSettings:d,countdown:{enabled:l,secondsLeft:f}}=n(),{appStage:p,isCapturing:h,recordingType:v,screenType:m,tab:g,mediaDevicePermissions:y}=c,{audioEnabled:w,availableCameras:b,cameraId:S,cameraEnabled:E,defaultCameraId:k,highQuality:C,microphoneId:x,microphones:T,flipCamera:N}=d;if(p===Me.Recording)return void i.warn("tried to record  while recording",{recorderState:c});if(!h)return void i.warn("tried to record with no capture",{recorderState:c});y!==qe.Denied&&(yield pa(e).handler({dispatch:r,getState:n},void 0)),OO.setIntentionToBuild(e);const[O,A]=yield Promise.all([LO(v,S||k,(()=>{i.warn("Ending recording due to stream being closed"),r($t.endRecording({fromError:!1,fromRecordingLimit:!1,reason:Kt.ScreenRecordingEnded}))}),e),BO(w,x,e)]);if(RO(O))return O.error===Zo.MissingPermissions&&r(Vt.openSystemPermissionsModal(Ie.RecordingControls)),O.error===Zo.UserDeclined?void a.increment(en+".user_declined_share",{recordingType:v}):void u("stream");if(w&&!A)return void u("stream");w&&A&&(e=>{const t=ta.display||ta.camera,n=e.getAudioTracks()[0];null==t||t.addTrack(n)})(A);const P=(e=>{const t=new _O(window.navigator.userAgent).getResult();return{client:IO,client_version:e.config.sdkVersion,recordingClient:IO,recording_version:OO.identifyRecorderVersion(),os:t.os.name,os_version:t.os.version,sdkPartnerId:e.config.partnerData.sdkPartnerId}})(e),_=T.find((e=>e.deviceId===x)),I=b.find((e=>e.deviceId===S)),M=Object.assign(Object.assign({},P),{currentAudioDeviceValue:null==_?void 0:_.label,currentAudioDeviceLabel:null==_?void 0:_.deviceId,currentVideoDeviceLabel:null==I?void 0:I.label,currentVideoDeviceValue:null==I?void 0:I.deviceId,camera_enabled:E,countdown:l,recording_type:v,microphone_enabled:w,screen_type:m}),R=yield KA(N,M,o,s);if(!R)return void u("session");const L=(e=>(ka||(ka=xa("start",e)),ka))(i);r(Vt.updateRecordingSession({session:R,tab:g})),l?(r(Vt.startCountdown()),yield function(e){return HA(this,void 0,void 0,(function*(){for(;e>0;)yield VA(1e3),e--,r(Vt.decrementCountdown())}))}(f)):yield VA(500),null==L||L.play();const B=yield OO.build({getCaptureStream:()=>O,recorderOptions:{credentials:R.credentials,streamConfig:{highQuality:C,videoID:R.id},recordingMetadata:Object.assign(Object.assign({},P),{client_timestamp:new Date,countdown:l,microphone_enabled:w,recording_type:v,video_id:R.id})},onLifecycleEvent:e=>((e,t)=>{t===ze.Completed&&e.dispatch(Vt.finishedUploading())})(t,e),onUnrecoverable:e=>{i.error("Encountered unrecoverable error, attempting to end recording",{recorderState:c}),r($t.endRecording({fromError:!0,fromRecordingLimit:!1,reason:Kt.UnrecoverableError,errorMessage:e.message}))},onMediaStreamStopped:()=>{i.info("Media stream has stopped during recording, attempting to end recording"),r($t.endRecording({fromError:!0,fromRecordingLimit:!1,reason:Kt.MediaStreamStopped}))}},e);try{a.increment(en,{mediaDevicePermissions:y}),B.start();const e=(e=>{const t={width:0,height:0};if(!e)return t;const n=e.getVideoTracks();if(0===n.length)return t;const{width:r,height:i}=n[0].getSettings();return i&&r?{width:r,height:i}:t})(O);r(Vt.startRecording(e))}catch(e){OO.detach(),i.error("recording: failed to start recording",{error:e}),r($t.endRecording({fromError:!0,fromRecordingLimit:!1,reason:Kt.FailedToStartRecording,errorMessage:e.message}))}})))),e=>Gt($t.redoRecording,(({dispatch:t},{id:n})=>PO(void 0,void 0,void 0,(function*(){(yield Sa(n,e))&&(t(Vt.cancelRecording()),t($t.startRecording()))})))),e=>Gt($t.cancelRecording,(({dispatch:t},{detach:n=!0})=>GA(void 0,void 0,void 0,(function*(){if(n){const t=yield OO.get(e);null!=t&&(yield t.cancel(),OO.detach())}ra(e),t(Vt.cancelRecording())})))),e=>Gt($t.deleteRecording,(({},{id:t})=>Ea(void 0,void 0,void 0,(function*(){yield Sa(t,e)})))),()=>Gt($t.togglePauseRecording,(({dispatch:e,getState:t})=>{const{appStage:n}=t().recorder;[Me.Paused,Me.Recording].includes(n)&&(n===Me.Paused?e($t.resumeRecording()):e($t.pauseRecording()))})),e=>Gt($t.pauseRecording,(({dispatch:t,getState:n})=>GA(void 0,void 0,void 0,(function*(){const{appStage:r}=n().recorder;if(![Me.Paused,Me.Recording].includes(r))return;const i=yield OO.get(e);if(!i)throw"Could not find recorder!";i.pause(),t(Vt.pauseRecording())})))),e=>Gt($t.resumeRecording,(({dispatch:t,getState:n})=>GA(void 0,void 0,void 0,(function*(){const{appStage:r}=n().recorder;if(![Me.Paused,Me.Recording].includes(r))return;const i=yield OO.get(e);if(!i)throw"Could not find recorder!";i.resume(),t(Vt.resumeRecording())})))),()=>Gt($t.copyVideoUrl,(({dispatch:e},{closeAfterCopy:t})=>{t&&e($t.finishRecordingPreview())})),()=>Gt($t.finishRecordingPreview,(({dispatch:e})=>{OO.detach(),e(Vt.closePreviewModal())})),...[({logger:e})=>Gt($t.updateUserRecordingSettings,(({getState:t,dispatch:n},r)=>$A(void 0,void 0,void 0,(function*(){var i;const{isSdkSharedUser:o}=t().authentication;if(e.info("Updating recording settings",{userSettings:r}),function(e,t){void 0!==t.countdown_enabled&&e(Vt.updateCountdownEnabled(t.countdown_enabled))}(n,r),!o){const t=yield Us({method:"POST",url:`${null===(i=null===window||void 0===window?void 0:window.location)||void 0===i?void 0:i.origin}/api/users/recorder-settings`},r);if(t.kind===Be.Failed)throw e.error("Failed to update recording settings",{result:t}),new Error(t.message)}}))))]];var YA=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var QA=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const XA=[e=>Gt($t.getWorkspaces,(t=>YA(void 0,void 0,void 0,(function*(){var n,r,i,o,a;const{authentication:{user:s},featureFlags:{activeFlags:u}}=t.getState(),c=yield function(e){var t,n;return YA(this,void 0,void 0,(function*(){try{const r=yield e.gqlClient.query(pi`
          query userWorkspaceMemberships {
            userWorkspaceMemberships {
              id
              isSelected
              member_limits
              member_role
              organization {
                id
                limits
                name
                counts {
                  videos
                }
              }
            }
          }
        `).toPromise();if(r.error)throw r.error.toString();return null!==(n=null===(t=r.data)||void 0===t?void 0:t.userWorkspaceMemberships)&&void 0!==n?n:[]}catch(t){return e.logger.error("Failed to fetch user workspace memberships",{error:t}),[]}}))}(e);if(s){const d=c.find((e=>e.organization.id===s.default_workspace_id)),l=(null==d?void 0:d.member_role)===ke.Guest;l||e.analytics.identify(s.id,{isSdkSharedUser:l,hasDefaultWorkspace:null!=d}),e.logger.addToBaseContext({defaultWorkspace:{id:null==d?void 0:d.id,member_role:null==d?void 0:d.member_role,organization_name:null===(n=null==d?void 0:d.organization)||void 0===n?void 0:n.name}}),t.dispatch(Vt.setWorkspaces({defaultWorkspace:d,workspaces:c,isSdkSharedUser:l}));const f=((e,t)=>{const n=e.versions.requiresHack("2.6.4")?void 0:0;return 0===e.config.partnerData.guestRecordingLimit?n:t?t.organization.limits.VIDEO_DURATION||t.member_limits.VIDEO_DURATION||n:300})(e,d);t.dispatch(Vt.setDurationLimit(f));const p=null===(r=null==d?void 0:d.member_limits)||void 0===r?void 0:r.TOTAL_VIDEOS,h=(null===(a=null===(o=null===(i=null==d?void 0:d.organization)||void 0===i?void 0:i.counts)||void 0===o?void 0:o.videos)||void 0===a?void 0:a.total_member_created_videos)||0;!0===(u.includes($e.ENABLE_SDK_MEMBER_VIDEO_LIMITS)&&!1===l&&0!==e.config.partnerData.guestRecordingLimit&&null!=p&&p>0&&h>=p)&&t.dispatch(Vt.setMemberPaywall())}})))),e=>Gt($t.getDefaultWorkspaceAdmins,(t=>QA(void 0,void 0,void 0,(function*(){const{defaultWorkspace:n}=t.getState().workspaces;if(n){const r=yield function(e,t){var n,r,i;return QA(this,void 0,void 0,(function*(){try{const o=yield e.gqlClient.query(pi`
          query ($orgId: ID!) {
            orgAdmins: getOrganizationAdmins(orgId: $orgId) {
              ... on OrgAdmins {
                user {
                  email
                }
              }
              ... on Error {
                message
              }
            }
          }
        `,{orgId:t}).toPromise();if(o.error)throw o.error.toString();return null!==(i=null===(r=null===(n=o.data)||void 0===n?void 0:n.orgAdmins)||void 0===r?void 0:r.user)&&void 0!==i?i:[]}catch(t){return e.logger.error("Failed to fetch workspace admins",{error:t}),[]}}))}(e,n.organization.id);t.dispatch(Vt.setDefaultWorkspaceAdmins({admins:r}))}}))))],JA="Are you sure you want to cancel your recording?",ZA=({logger:e,metrics:t})=>()=>n=>r=>{t.increment(Zt,{consumer:r.type});try{return n(r)}catch(n){throw e.error(`Redux action failed ${r.type}`,{err:n}),t.increment("integrations.sdk.consumers.failed",{consumer:r.type}),n}},eP=e=>{var t,n,r,i,o;if("undefined"!=typeof window&&(()=>{try{return window.self!==window.top}catch(e){return!0}})()){const a=null!==(t=(new _O).getBrowser().name)&&void 0!==t?t:"unknown";e.metrics.increment(Yt,{browserType:a});const s=(e=>t=>n=>r=>{const i=e.find((e=>e.trigger.match(r)));return void 0!==i?i.handler(t,r.payload):r.type.startsWith("consumer_trigger/")&&console.warn("[redux-consumer] - Missing trigger consumer for trigger",r),n(r)})([...nn,...xo,...No,...$o,...va,...ga,...wa,...WA,...XA].map((t=>t(e)))),{store:u}=(i=[s,ZA(e)],o="development"===e.config.trackerConfig.environment,{store:Ye({reducer:Ht,middleware:i,devTools:o})});((e,{diffStrategy:t=jo}={diffStrategy:jo})=>{if("function"!=typeof t)throw new Error("diffStrategy must be one of the included diffing strategies or a custom diff function");const n=zo({methods:{dispatch:Uo(e)}}),r=((e,t)=>n=>{let r=e.getState();e.subscribe((()=>{const i=e.getState(),o=t(r,i);o.length&&(r=i,n.syncState({type:"iframe.patch_state",payload:o}))})),n.syncState({type:"iframe.state",payload:r})})(e,t);n.promise.then(r)})(u);const c=null===(r=null===(n=e.config)||void 0===n?void 0:n.publicUrl)||void 0===r?void 0:r.replace("/api",""),d=e.config.partnerData.guestRecordingEnabled||!1;u.dispatch(Vt.updateHostUrl(c)),u.dispatch(Vt.setGuestRecordingEnabled(d)),(e=>{window.onbeforeunload=t=>{const{recorder:{appStage:n}}=e.getState();if(e.dispatch($t.quitPage()),Ct.ACTIVE_RECORDING_STAGES.includes(n))return t.preventDefault(),t.returnValue=JA,JA}})(u)}else e.metrics.increment("integrations.sdk.initialize_background.failed"),console.error("The SDK background must be run within an iframe, and have a window object available!")};var tP={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},nP=Object.freeze({});function rP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tP,r=void 0,i=Array.isArray(e),o=[e],a=-1,s=[],u=void 0,c=void 0,d=void 0,l=[],f=[],p=e;do{var h=++a===o.length,v=h&&0!==s.length;if(h){if(c=0===f.length?void 0:l[l.length-1],u=d,d=f.pop(),v){if(i)u=u.slice();else{for(var m={},g=0,y=Object.keys(u);g<y.length;g++){var w=y[g];m[w]=u[w]}u=m}for(var b=0,S=0;S<s.length;S++){var E=s[S][0],k=s[S][1];i&&(E-=b),i&&null===k?(u.splice(E,1),b++):u[E]=k}}a=r.index,o=r.keys,s=r.edits,i=r.inArray,r=r.prev}else{if(c=d?i?a:o[a]:void 0,null==(u=d?d[c]:p))continue;d&&l.push(c)}var C,x=void 0;if(!Array.isArray(u)){if(!Nr(u))throw new Error("Invalid AST Node: ".concat(Pr(u),"."));var T=iP(t,u.kind,h);if(T){if((x=T.call(t,u,c,d,l,f))===nP)break;if(!1===x){if(!h){l.pop();continue}}else if(void 0!==x&&(s.push([c,x]),!h)){if(!Nr(x)){l.pop();continue}u=x}}}if(void 0===x&&v&&s.push([c,u]),h)l.pop();else r={inArray:i,index:a,keys:o,edits:s,prev:r},o=(i=Array.isArray(u))?u:null!==(C=n[u.kind])&&void 0!==C?C:[],a=-1,s=[],d&&f.push(d),d=u}while(void 0!==r);return 0!==s.length&&(p=s[s.length-1][1]),p}function iP(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var a=o[t];if("function"==typeof a)return a}}}function oP(e){return rP(e,{leave:aP})}var aP={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return uP(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=dP("(",uP(e.variableDefinitions,", "),")"),i=uP(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?uP([t,uP([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+dP(" = ",r)+dP(" ",uP(i," "))},SelectionSet:function(e){return cP(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet,a=dP("",t,": ")+n,s=a+dP("(",uP(r,", "),")");return s.length>80&&(s=a+dP("(\n",lP(uP(r,"\n")),"\n)")),uP([s,uP(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+dP(" ",uP(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return uP(["...",dP("on ",t),uP(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(dP("(",uP(r,", "),")")," ")+"on ".concat(n," ").concat(dP("",uP(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),i=" "===e[0]||"\t"===e[0],o='"'===e[e.length-1],a="\\"===e[e.length-1],s=!r||o||a||n,u="";return!s||r&&i||(u+="\n"+t),u+=t?e.replace(/\n/g,"\n"+t):e,s&&(u+="\n"),'"""'+u.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+uP(e.values,", ")+"]"},ObjectValue:function(e){return"{"+uP(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+dP("(",uP(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:sP((function(e){var t=e.directives,n=e.operationTypes;return uP(["schema",uP(t," "),cP(n)]," ")})),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:sP((function(e){return uP(["scalar",e.name,uP(e.directives," ")]," ")})),ObjectTypeDefinition:sP((function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return uP(["type",t,dP("implements ",uP(n," & ")),uP(r," "),cP(i)]," ")})),FieldDefinition:sP((function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(pP(n)?dP("(\n",lP(uP(n,"\n")),"\n)"):dP("(",uP(n,", "),")"))+": "+r+dP(" ",uP(i," "))})),InputValueDefinition:sP((function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return uP([t+": "+n,dP("= ",r),uP(i," ")]," ")})),InterfaceTypeDefinition:sP((function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return uP(["interface",t,dP("implements ",uP(n," & ")),uP(r," "),cP(i)]," ")})),UnionTypeDefinition:sP((function(e){var t=e.name,n=e.directives,r=e.types;return uP(["union",t,uP(n," "),r&&0!==r.length?"= "+uP(r," | "):""]," ")})),EnumTypeDefinition:sP((function(e){var t=e.name,n=e.directives,r=e.values;return uP(["enum",t,uP(n," "),cP(r)]," ")})),EnumValueDefinition:sP((function(e){return uP([e.name,uP(e.directives," ")]," ")})),InputObjectTypeDefinition:sP((function(e){var t=e.name,n=e.directives,r=e.fields;return uP(["input",t,uP(n," "),cP(r)]," ")})),DirectiveDefinition:sP((function(e){var t=e.name,n=e.arguments,r=e.repeatable,i=e.locations;return"directive @"+t+(pP(n)?dP("(\n",lP(uP(n,"\n")),"\n)"):dP("(",uP(n,", "),")"))+(r?" repeatable":"")+" on "+uP(i," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return uP(["extend schema",uP(t," "),cP(n)]," ")},ScalarTypeExtension:function(e){return uP(["extend scalar",e.name,uP(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return uP(["extend type",t,dP("implements ",uP(n," & ")),uP(r," "),cP(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return uP(["extend interface",t,dP("implements ",uP(n," & ")),uP(r," "),cP(i)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return uP(["extend union",t,uP(n," "),r&&0!==r.length?"= "+uP(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return uP(["extend enum",t,uP(n," "),cP(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return uP(["extend input",t,uP(n," "),cP(r)]," ")}};function sP(e){return function(t){return uP([t.description,e(t)],"\n")}}function uP(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter((function(e){return e})).join(n))&&void 0!==t?t:""}function cP(e){return dP("{\n",lP(uP(e,"\n")),"\n}")}function dP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+n:""}function lP(e){return dP("  ",e.replace(/\n/g,"\n  "))}function fP(e){return-1!==e.indexOf("\n")}function pP(e){return null!=e&&e.some(fP)}var hP,vP,mP,gP,yP,wP,bP=Object.freeze({__proto__:null,print:oP});function SP(e){return"string"==typeof e?new br(e):"object"==typeof e&&e.message?new br(e.message,e.nodes,e.source,e.positions,e.path,e,e.extensions||{}):e}function EP(){return this.message}function kP(e,t){e|=0;for(var n=0,r=0|t.length;n<r;n++)e=(e<<5)+e+t.charCodeAt(n);return e}function CP(e){var t,n,r,i,o,a;if(null===e||vP.has(e))return"null";if("object"!=typeof e)return JSON.stringify(e)||"";if(e.toJSON)return CP(e.toJSON());if(Array.isArray(e)){for(t="[",n=0,r=e.length;n<r;n++)0<n&&(t+=","),t+=0<(i=CP(e[n])).length?i:"null";return t+"]"}if(!(t=Object.keys(e).sort()).length&&e.constructor&&e.constructor!==Object)return t=mP.get(e)||Math.random().toString(36).slice(2),mP.set(e,t),'{"__key":"'+t+'"}';for(vP.add(e),n="{",r=0,i=t.length;r<i;r++)(a=CP(e[o=t[r]]))&&(1<n.length&&(n+=","),n+=CP(o)+":"+a);return vP.delete(e),n+"}"}function xP(e){return vP.clear(),CP(e)}function TP(e){var t=("string"!=typeof e?e.loc&&e.loc.source.body||oP(e):e).replace(/([\s,]|#[^\n\r]+)+/g," ").trim();return"string"!=typeof e&&(e.loc?(e="definitions"in e&&OP(e))&&(t="# "+e+"\n"+t):e.loc={start:0,end:t.length,source:{body:t,name:"gql",locationOffset:{line:1,column:1}}}),t}function NP(e){if("string"==typeof e){var t=kP(5381,TP(e))>>>0;e=gP.get(t)||Qr(e,{noLocation:!0})}else t=e.__key||kP(5381,TP(e))>>>0,e=gP.get(t)||e;return e.loc||TP(e),e.__key=t,gP.set(t,e),e}function OP(e){var t,n,r;for(t=0,n=e.definitions.length;t<n;t++)if((r=e.definitions[t]).kind===Er.OPERATION_DEFINITION&&r.name)return r.name.value}function AP(e,t,n){return{operation:e,data:t.data,error:Array.isArray(t.errors)?new hP({graphQLErrors:t.errors,response:n}):void 0,extensions:"object"==typeof t.extensions&&t.extensions||void 0}}function PP(e,t,n){return{operation:e,data:void 0,error:new hP({networkError:t,response:n}),extensions:void 0}}function _P(){return(_P=Object.assign||function(e){var t,n,r;for(t=1;t<arguments.length;t++)for(r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)}function IP(e,t){return e=NP(e),{key:t?kP(e.__key,xP(t))>>>0:e.__key,query:e,variables:t||{}}}function MP(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)MP(e[n],t);else if("object"==typeof e&&null!==e)for(n in e)"__typename"===n&&"string"==typeof e[n]?t[e[n]]=0:MP(e[n],t);return t}function RP(e){return e.kind===Er.FIELD&&"__typename"===e.name.value&&!e.alias}function LP(e){if(e.selectionSet&&!e.selectionSet.selections.some(RP))return _P({},e,{selectionSet:_P({},e.selectionSet,{selections:e.selectionSet.selections.concat([{kind:Er.FIELD,name:{kind:Er.NAME,value:"__typename"}}])})})}function BP(e){return e&&"object"==typeof e?Object.keys(e).reduce((function(t,n){var r=e[n];return"__typename"===n?Object.defineProperty(t,"__typename",{enumerable:!1,value:r}):Array.isArray(r)?t[n]=r.map(BP):t[n]=r&&"object"==typeof r&&"__typename"in r?BP(r):r,t}),{}):e}function DP(e){return e.toPromise=function(){return function(e){return new Promise((function(t){Ci(1)(e)((function(e){"number"!=typeof e&&(e.tag?t(e[0]):e[0](0))}))}))}(Li(1)(e))},e}function zP(e,t,n){return n||(n=t.context),{key:t.key,query:t.query,variables:t.variables,kind:e,context:n}}function jP(e,t){return zP(e.kind,e,_P({},e.context,{meta:_P({},e.context.meta,t)}))}function UP(){}function FP(e){return"mutation"!==(e=e.kind)&&"query"!==e}function qP(e){var t=zP(e.kind,e);return t.query=function(e){e=NP(e);var t=yP.get(e.__key);return t||((t=rP(e,{Field:LP,InlineFragment:LP})).__key=e.__key,yP.set(e.__key,t)),t}(e.query),t}function KP(e){return"query"!==e.kind||"cache-only"!==e.context.requestPolicy}function HP(e){return jP(e,{cacheOutcome:"miss"})}function VP(e){return FP(e)}function $P(e){function t(e){var t=e.context.requestPolicy;return"query"===e.kind&&"network-only"!==t&&("cache-only"===t||u.has(e.key))}function n(e){var t=u.get(e.key);return t=_P({},t,{operation:jP(e,{cacheOutcome:t?"hit":"miss"})}),"cache-and-network"===e.context.requestPolicy&&(t.stale=!0,GP(s,e)),t}function r(e){return!FP(e)&&t(e)}function i(e){function t(e){r.add(e)}var n,r,i,o=e.operation;if(o)if(n=Object.keys(MP(e.data,{})).concat(o.context.additionalTypenames||[]),"mutation"===e.operation.kind){for(r=new Set,e=0;e<n.length;e++)(i=c[i=n[e]]||(c[i]=new Set)).forEach(t),i.clear();r.forEach((function(e){u.has(e)&&(o=u.get(e).operation,u.delete(e),GP(s,o))}))}else if("query"===o.kind&&e.data)for(u.set(o.key,e),e=0;e<n.length;e++)(c[i=n[e]]||(c[i]=new Set)).add(o.key)}function o(e){return!FP(e)&&!t(e)}var a=e.forward,s=e.client;e.dispatchDebug;var u=new Map,c=Object.create(null);return function(e){var t=Ri(e);return e=_i(n)(Ni(r)(t)),t=Ei(i)(a(Ni(KP)(_i(HP)(Ii([_i(qP)(Ni(o)(t)),Ni(VP)(t)]))))),Ii([e,t])}}function GP(e,t){return e.reexecuteOperation(zP(t.kind,t,_P({},t.context,{requestPolicy:"network-only"})))}function WP(e){function t(e){i.delete(e.operation.key)}function n(e){var t=e.key,n=e.kind;return"teardown"===n?(i.delete(t),!0):"query"!==n&&"subscription"!==n||(n=i.has(t),i.add(t),!n)}var r=e.forward,i=(e.dispatchDebug,new Set);return function(e){return e=Ni(n)(e),Ei(t)(r(e))}}function YP(e){return"query"===e.kind||"mutation"===e.kind}function QP(e){return"query"!==e.kind&&"mutation"!==e.kind}function XP(e){var t=e.forward;return e.dispatchDebug,function(e){var n=Ri(e);return Ii([e=bi((function(e){var t=e.key,r=Ni((function(e){return"teardown"===e.kind&&e.key===t}))(n),i=function(e){return{query:oP(e.query),operationName:OP(e.query),variables:e.variables||void 0,extensions:void 0}}(e),o=function(e,t){var n=e.context.url;return"query"===e.kind&&e.context.preferGetMethod&&t?(e=[],t.operationName&&e.push("operationName="+encodeURIComponent(t.operationName)),t.query&&e.push("query="+encodeURIComponent(t.query.replace(/([\s,]|#[^\n\r]+)+/g," ").trim())),t.variables&&e.push("variables="+encodeURIComponent(xP(t.variables))),t.extensions&&e.push("extensions="+encodeURIComponent(xP(t.extensions))),n+"?"+e.join("&")):n}(e,i),a=function(e,t){var n="query"===e.kind&&!!e.context.preferGetMethod;return _P({},e="function"==typeof e.context.fetchOptions?e.context.fetchOptions():e.context.fetchOptions||{},{body:!n&&t?JSON.stringify(t):void 0,method:n?"GET":"POST",headers:n?e.headers:_P({},{"content-type":"application/json"},e.headers)})}(e,i);return Ei((function(e){e.data||e.error}))(Bi(r)(function(e,t,n){return Ai((function(r){var i=r.next,o=r.complete,a="undefined"!=typeof AbortController?new AbortController:null,s=!1;return Promise.resolve().then((function(){if(!s)return a&&(n.signal=a.signal),function(e,t,n){var r,i=!1;return(e.context.fetch||fetch)(t,n).then((function(e){return r=e,i=200>e.status||e.status>=("manual"===n.redirect?400:300),e.json()})).then((function(t){if(!("data"in t)&&!("errors"in t))throw Error("No Content");return AP(e,t,r)})).catch((function(t){if("AbortError"!==t.name)return PP(e,i?Error(r.statusText):t,r)}))}(e,t,n)})).then((function(e){s||(s=!0,e&&i(e),o())})),function(){s=!0,a&&a.abort()}}))}(e,o,a)))}))(Ni(YP)(n)),t(Ni(QP)(n))])}}function JP(){return!1}function ZP(e){function t(e){e.kind}return e.dispatchDebug,function(e){return Ni(JP)(Ei(t)(e))}}function e_(e){var t,n,r,i,o=this;this.activeOperations=Object.create(null),this.queue=[],this.createOperationContext=function(e){return e||(e={}),_P({},{url:o.url,fetchOptions:o.fetchOptions,fetch:o.fetch,preferGetMethod:o.preferGetMethod},e,{suspense:e.suspense||!1!==e.suspense&&o.suspense,requestPolicy:e.requestPolicy||o.requestPolicy})},this.createRequestOperation=function(e,t,n){return zP(e,t,o.createOperationContext(n))},this.executeQuery=function(e,t){return e=o.createRequestOperation("query",e,t),o.executeRequestOperation(e)},this.executeSubscription=function(e,t){return e=o.createRequestOperation("subscription",e,t),o.executeRequestOperation(e)},this.executeMutation=function(e,t){return e=o.createRequestOperation("mutation",e,t),o.executeRequestOperation(e)},t=UP,this.url=e.url,this.fetchOptions=e.fetchOptions,this.fetch=e.fetch,this.suspense=!!e.suspense,this.requestPolicy=e.requestPolicy||"cache-first",this.preferGetMethod=!!e.preferGetMethod,this.maskTypename=!!e.maskTypename,n=Pi(),r=n.next,this.operations$=n.source,i=!1,this.dispatchOperation=function(e){for(i=!0,e&&r(e);e=o.queue.shift();)r(e);i=!1},this.reexecuteOperation=function(e){("mutation"===e.kind||0<(o.activeOperations[e.key]||0))&&(o.queue.push(e),i||Promise.resolve().then(o.dispatchOperation))},e=function(e){return function(t){var n=t.client;return t.dispatchDebug,e.reduceRight((function(e,t){return t({client:n,forward:e,dispatchDebug:function(e){}})}),t.forward)}}(void 0!==e.exchanges?e.exchanges:wP),this.results$=Ri(e({client:this,dispatchDebug:t,forward:ZP({dispatchDebug:t})})(this.operations$)),function(e){xi(Ti)(e)}(this.results$)}function t_(e){return e.data=BP(e.data),e}function n_(e){function t(e){var t=e.error;e=e.operation,t&&n(t,e)}var n=e.onError;return function(e){var n=e.forward;return function(e){return Ei(t)(n(e))}}}hP=function(e){function t(t){var n,r=t.networkError,i=t.response;n=function(e,t){var n="";return void 0!==e?n="[Network] "+e.message:(void 0!==t&&t.forEach((function(e){n+="[GraphQL] "+e.message+"\n"})),n.trim())}(r,t=(t.graphQLErrors||[]).map(SP)),e.call(this,n),this.name="CombinedError",this.message=n,this.graphQLErrors=t,this.networkError=r,this.response=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=EP,t}(Error),vP=new Set,mP=new WeakMap,gP=new Map,yP=new Map,ZP({dispatchDebug:UP}),wP=[WP,$P,XP],e_.prototype.onOperationStart=function(e){var t=e.key;this.activeOperations[t]=(this.activeOperations[t]||0)+1,this.dispatchOperation(e)},e_.prototype.onOperationEnd=function(e){var t=e.key,n=this.activeOperations[t]||0;if(0>=(this.activeOperations[t]=0>=n?0:n-1)){for(t=this.queue.length-1;0<=t;t--)this.queue[t].key===e.key&&this.queue.splice(t,1);this.dispatchOperation(zP("teardown",e,e.context))}},e_.prototype.executeRequestOperation=function(e){var t,n,r=this,i=Ni((function(t){return t.operation.key===e.key}))(this.results$);return this.maskTypename&&(i=_i(t_)(i)),"mutation"===e.kind?Li(1)(Mi((function(){return r.dispatchOperation(e)}))(i)):(t=Ni((function(t){return"teardown"===t.kind&&t.key===e.key}))(this.operations$),n=Ni((function(t){return t.kind===e.kind&&t.key===e.key&&"cache-only"!==t.context.requestPolicy}))(this.operations$),function(e){return function(t){return function(n){let r=!1;return t((function(t){if("number"==typeof t){if(r)return;return r=!0,n(t),e()}if(t.tag)r||n(t);else{var i=t[0];n(hi(0,[function(t){if(!r)return t?(r=!0,i(t),e()):i(t)}]))}}))}}}((function(){r.onOperationEnd(e)}))(Mi((function(){r.onOperationStart(e)}))(function(e){return function(t){return function(n){function r(e){s&&("number"==typeof e?(s=!1,c?n(e):o||(o=!0,i(0))):e.tag?(n(e),u?u=!1:a(0)):(a=e=e[0],u=!1,e(0)))}let i=vi,o=!1,a=vi,s=!1,u=!1,c=!1;t((function(t){"number"==typeof t?c||(c=!0,s||n(0)):t.tag?c||(s&&(a(1),a=vi),o?o=!1:(o=!0,i(0)),t=e(t[0]),s=!0,t(r)):i=t[0]})),n(hi(0,[function(e){if(e){if(c||(c=!0,i(1)),s)return s=!1,a(1)}else c||o||(o=!0,i(0)),s&&!u&&(u=!0,a(0))}]))}}}((function(e){return e.stale?Oi(e):Ii([Oi(e),_i((function(){return _P({},e,{stale:!0})}))(Li(1)(n))])}))(Bi(t)(i)))))},e_.prototype.query=function(e,t,n){return n&&"boolean"==typeof n.suspense||(n=_P({},n,{suspense:!1})),DP(this.executeQuery(IP(e,t),n))},e_.prototype.readQuery=function(e,t,n){var r=null;return xi((function(e){r=e}))(this.executeQuery(IP(e,t),n)).unsubscribe(),r},e_.prototype.subscription=function(e,t,n){return this.executeSubscription(IP(e,t),n)},e_.prototype.mutation=function(e,t,n){return DP(this.executeMutation(IP(e,t),n))};var r_=ri((function(e,t){e.exports=function(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}}));function i_(e,t,n,r,i,o){if("undefined"!=typeof window)return arguments.length>1?document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString()+(r?"; path="+r:"")+(i?"; domain="+i:"")+(o?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}var o_=i_,a_=i_;function s_(e){return i_(e,"",-1)}function u_(e){return(u_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c_(e){var t;try{void 0===(t=JSON.parse(e))&&(t=e),"true"===t&&(t=!0),"false"===t&&(t=!1),parseFloat(t)===t&&"object"!==u_(t)&&(t=parseFloat(t))}catch(n){t=e}return t}var d_="object"===("undefined"==typeof self?"undefined":u_(self))&&self.self===self&&self||"object"===(void 0===e?"undefined":u_(e))&&e.global===e&&e||void 0,l_="localStorage",f_="cookie",p_="global",h_=function(){try{if("undefined"==typeof localStorage||"undefined"==typeof JSON)return!1;localStorage.setItem("_t_","1"),localStorage.removeItem("_t_")}catch(e){return!1}return!0}(),v_=function(){try{var e="_c_";i_(e,"1");var t=-1!==document.cookie.indexOf(e);return i_(e,"",-1),t}catch(e){return!1}}();function m_(e){return{cookie:c_(o_(e)),localStorage:c_(localStorage.getItem(e)),global:d_[e]||null}}function g_(e){return"string"==typeof e?e:e.storage}function y_(e){return h_&&(!e||e===l_)}function w_(e){return v_&&(!e||e===f_)}var b_={getItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return null;var n=g_(t);if("all"===n)return m_(e);if(y_(n)){var r=localStorage.getItem(e);if(r||n===l_)return c_(r)}if(w_(n)){var i=o_(e);if(i||n===f_)return c_(i)}return d_[e]||null},setItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return!1;var r=g_(n),i=JSON.stringify(t);if(y_(r)){var o=c_(localStorage.getItem(e));return localStorage.setItem(e,i),{value:t,oldValue:o,location:l_}}if(w_(r)){var a=c_(o_(e));return a_(e,i),{value:t,oldValue:a,location:f_}}var s=d_[e];return d_[e]=t,{value:t,oldValue:s,location:p_}},removeItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return!1;var n=g_(t);return y_(n)?(localStorage.removeItem(e),l_):w_(n)?(s_(e),f_):(d_[e]=void 0,p_)}};function S_(e){return(S_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E_(e){return"function"==typeof e}function k_(e){return"string"==typeof e}function C_(e){return"boolean"==typeof e}function x_(e){if("object"!==S_(e)||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function T_(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}var N_="undefined"!=typeof document;function O_(e){return function(e){var t,n={},r=/([^&=]+)=?([^&]*)/g;for(;t=r.exec(e);){var i=T_(t[1]),o=T_(t[2]);"[]"===i.substring(i.length-2)?(n[i=i.substring(0,i.length-2)]||(n[i]=[])).push(o):n[i]=""===o||o}for(var a in n){var s=a.split("[");s.length>1&&(A_(n,s.map((function(e){return e.replace(/[?[\]\\ ]/g,"")})),n[a]),delete n[a])}return n}(function(e){if(e){var t=e.match(/\?(.*)/);return t&&t[1]?t[1].split("#")[0]:""}return N_&&window.location.search.substring(1)}(e))}function A_(e,t,n){for(var r=t.length-1,i=0;i<r;++i){var o=t[i];o in e||(e[o]={}),e=e[o]}e[t[r]]=n}function P_(){for(var e="",t=0,n=4294967295*Math.random()|0;t++<36;){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[t-1],i=15&n;e+="-"==r||"4"==r?r:("x"==r?i:3&i|8).toString(16),n=t%8==0?4294967295*Math.random()|0:n>>4}return e}var __=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}};var I_=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)};var M_=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var R_=function(e){return __(e)||I_(e)||M_()};function L_(e,t){return e(t={exports:{}},t.exports),t.exports}var B_=L_((function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(r){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=n=function(e){return t(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n})),D_=L_((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(e,t,n){var r=l;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=d(e,t,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",f="suspendedYield",p="executing",h="completed",v={};function m(){}function g(){}function y(){}var w={};w[o]=function(){return this};var b=Object.getPrototypeOf,S=b&&b(b(A([])));S&&S!==n&&r.call(S,o)&&(w=S);var E=y.prototype=m.prototype=Object.create(w);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,a,s){var u=d(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=d(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:t,done:!0}}return g.prototype=E.constructor=y,y.constructor=g,g.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},k(C.prototype),C.prototype[a]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new C(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(E),u(E,s,"Generator"),E[o]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function z_(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}var j_=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){z_(o,r,i,a,s,"next",e)}function s(e){z_(o,r,i,a,s,"throw",e)}a(void 0)}))}};var U_=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};function F_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var q_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F_(n,!0).forEach((function(t){U_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},K_="function",H_="undefined",V_="reducer",$_="@@redux/",G_=$_+"INIT",W_=$_+Math.random().toString(36),Y_=function(){return("undefined"==typeof Symbol?"undefined":B_(Symbol))===K_&&Symbol.observable||"@@observable"}(),Q_=" != "+K_;function X_(e,t,n){if(B_(t)===K_&&B_(n)===H_&&(n=t,t=void 0),B_(n)!==H_){if(B_(n)!==K_)throw new Error("enhancer"+Q_);return n(X_)(e,t)}if(B_(e)!==K_)throw new Error(V_+Q_);var r=e,i=t,o=[],a=o,s=!1;function u(){a===o&&(a=o.slice())}function c(){return i}function d(e){if(B_(e)!==K_)throw new Error("Listener"+Q_);var t=!0;return u(),a.push(e),function(){if(t){t=!1,u();var n=a.indexOf(e);a.splice(n,1)}}}function l(e){if(!x_(e))throw new Error("Act != obj");if(B_(e.type)===H_)throw new Error("ActType "+H_);if(s)throw new Error("Dispatch in reducer");try{s=!0,i=r(i,e)}finally{s=!1}for(var t=o=a,n=0;n<t.length;n++){(0,t[n])()}return e}return l({type:G_}),U_({dispatch:l,subscribe:d,getState:c,replaceReducer:function(e){if(B_(e)!==K_)throw new Error("next reducer"+Q_);r=e,l({type:G_})}},Y_,(function(){var e=d;return U_({subscribe:function(t){if("object"!==B_(t))throw new TypeError("Observer != obj");function n(){t.next&&t.next(c())}return n(),{unsubscribe:e(n)}}},Y_,(function(){return this}))}))}function J_(e,t){var n=t&&t.type;return"action "+(n&&n.toString()||"?")+"reducer "+e+" returns "+H_}function Z_(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];B_(e[i])===K_&&(n[i]=e[i])}var o,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t],r=n(void 0,{type:G_});if(B_(r)===H_||B_(n(void 0,{type:W_}))===H_)throw new Error("reducer "+t+" "+H_)}))}(n)}catch(e){o=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(o)throw o;for(var r=!1,i={},s=0;s<a.length;s++){var u=a[s],c=n[u],d=e[u],l=c(d,t);if(B_(l)===H_){var f=J_(u,t);throw new Error(f)}i[u]=l,r=r||l!==d}return r?i:e}}function eI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function tI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,i){var o,a=e(n,r,i),s=a.dispatch,u={getState:a.getState,dispatch:function(e){return s(e)}};return o=t.map((function(e){return e(u)})),s=eI.apply(void 0,R_(o))(a.dispatch),q_(q_({},a),{},{dispatch:s})}}}var nI=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],rI=["name","EVENTS","config","loaded"],iI=nI.reduce((function(e,t){return e[t]=t,e}),{registerPluginType:function(e){return"registerPlugin:".concat(e)},pluginReadyType:function(e){return"ready:".concat(e)}});function oI(e){return nI.includes(e)}var aI="analytics",sI="userId",uI="anonymousId",cI="https://lytics.dev/errors/",dI="__anon_id",lI="__user_id",fI="__user_traits",pI=/^utm_/,hI=/^an_prop_/,vI=/^an_trait_/;function mI(e){var t=e.storage,n=t.setItem;return t.getItem,function(t){return function(r){return function(i){if(i.type===iI.bootstrap){var o=i.params,a=i.user,s=i.persistedUser;s.anonymousId!==a.anonymousId&&n(dI,a.anonymousId),s.userId!==a.userId&&n(lI,a.userId);var u=Object.keys(i.params);if(u.length){var c=o.an_uid,d=o.an_event,l=u.reduce((function(e,t){if(t.match(pI)||t.match(/^(d|g)clid/)){var n=t.replace(pI,""),r="campaign"===n?"name":n;e.campaign[r]=o[t]}return t.match(hI)&&(e.props[t.replace(hI,"")]=o[t]),t.match(vI)&&(e.traits[t.replace(vI,"")]=o[t]),e}),{campaign:{},props:{},traits:{}});t.dispatch(q_(q_({type:iI.params,raw:o},l),c?{userId:c}:{})),c&&setTimeout((function(){return e.identify(c,l.traits)}),0),d&&setTimeout((function(){return e.track(d,l.props)}),0),Object.keys(l.campaign).length&&t.dispatch({type:iI.campaign,campaign:l.campaign})}}return r(i)}}}}function gI(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.type===iI.setItemEnd){if(n.key===dI)return q_(q_({},t),{anonymousId:n.value});if(n.key===lI)return q_(q_({},t),{userId:n.value})}switch(n.type){case iI.identify:return Object.assign({},t,{userId:n.userId,traits:q_(q_({},t.traits),n.traits)});case iI.reset:return[lI,dI,fI].forEach((function(t){e.removeItem(t)})),Object.assign({},t,{userId:null,anonymousId:null,traits:{}});default:return t}}}function yI(e){return{userId:e.getItem(lI),anonymousId:e.getItem(dI),traits:e.getItem(fI)||{}}}var wI=function(e){return"__TEMP__"+e};function bI(e){return function(t,n,r){var i=n.getState("user")[t];if(i)return i;if(r&&x_(r)&&r[t])return r[t];var o=yI(e)[t];return o||(d_[wI(t)]?d_[wI(t)]:null)}}function SI(e){var t=e.storage,n=t.setItem,r=t.removeItem,i=t.getItem;return function(e){return function(t){return function(o){var a=o.userId,s=o.traits,u=o.options;if(o.type===iI.reset&&([lI,fI,dI].forEach((function(e){r(e)})),[sI,uI,"traits"].forEach((function(e){d_[wI(e)]=void 0}))),o.type===iI.identify){i(dI)||n(dI,P_());var c=i(lI),d=i(fI)||{};c&&c!==a&&e.dispatch({type:iI.userIdChanged,old:{userId:c,traits:d},new:{userId:a,traits:s},options:u}),a&&n(lI,a),s&&n(fI,q_(q_({},d),s))}return t(o)}}}}var EI={};function kI(e,t){EI[e]&&E_(EI[e])&&(EI[e](t),delete EI[e])}function CI(e,t,n){return new Promise((function(r,i){return t()?r(e):n<1?i(q_(q_({},e),{},{queue:!0})):(o=10,new Promise((function(e){return setTimeout(e,o)}))).then((function(o){return CI(e,t,n-10).then(r,i)}));var o}))}function xI(e,t,n){var r=t(),i=e.getState(),o=i.plugins,a=i.context,s=i.queue,u=i.user;if(!a.offline&&s&&s.actions&&s.actions.length){var c=s.actions.reduce((function(e,t,n){return o[t.plugin].loaded?(e.process.push(t),e.processIndex.push(n)):(e.requeue.push(t),e.requeueIndex.push(n)),e}),{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(c.processIndex&&c.processIndex.length){c.processIndex.forEach((function(t){var i=s.actions[t],a=i.plugin,c=i.payload.type,d=r[a][c];if(d&&E_(d)){var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[sI,uI].reduce((function(n,r){return e.hasOwnProperty(r)&&t[r]&&t[r]!==e[r]&&(n[r]=t[r]),n}),e)}(i.payload,u);d({payload:l,config:o[a].config,instance:n});var f="".concat(c,":").concat(a);e.dispatch(q_(q_({},l),{},{type:f,_:{called:f,from:"queueDrain"}}))}}));var d=s.actions.filter((function(e,t){return!~c.processIndex.indexOf(t)}));s.actions=d}}}function TI(e,t,n){return setInterval((function(){return xI(e,t,n)}),3e3)}var NI=function(e){if(Array.isArray(e))return e};var OI=function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n};var AI=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")};var PI=function(e,t){return NI(e)||OI(e,t)||AI()};function _I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(e).filter((function(e){var r=n.plugins||{};return C_(r[e])?r[e]:!1!==r.all&&(!t[e]||!1!==t[e].enabled)})).map((function(t){return e[t]}))}var II=/Start$/,MI=/^bootstrap/,RI=/^ready/;function LI(e,t,n,r,i){return BI.apply(this,arguments)}function BI(){return(BI=j_(D_.mark((function e(t,n,r,i,o){var a,s,u,c,d,l,f,p,h,v,m;return D_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=E_(n)?n():n,s=t.type,u=s.replace(II,""),!t._||!t._.called){e.next=5;break}return e.abrupt("return",t);case 5:return c=r.getState(),d=_I(a,c.plugins,t.options),s===iI.initializeStart&&t.fromEnable&&(d=Object.keys(c.plugins).filter((function(e){var n=c.plugins[e];return t.plugins.includes(e)&&!n.initialized})).map((function(e){return a[e]}))),l=d.map((function(e){return e.name})),f=KI(s,d),e.next=12,DI({action:t,data:{exact:f.before,namespaced:f.beforeNS},state:c,allPlugins:a,allMatches:f,instance:r,store:i,EVENTS:o});case 12:if(!VI(p=e.sent,l.length)){e.next=15;break}return e.abrupt("return",p);case 15:if(s!==u){e.next=19;break}h=p,e.next=22;break;case 19:return e.next=21,DI({action:q_(q_({},p),{},{type:u}),data:{exact:f.during,namespaced:f.duringNS},state:c,allPlugins:a,allMatches:f,instance:r,store:i,EVENTS:o});case 21:h=e.sent;case 22:if(!s.match(II)){e.next=28;break}return v="".concat(u,"End"),e.next=26,DI({action:q_(q_({},h),{},{type:v}),data:{exact:f.after,namespaced:f.afterNS},state:c,allPlugins:a,allMatches:f,instance:r,store:i,EVENTS:o});case 26:(m=e.sent).meta&&m.meta.hasCallback&&kI(m.meta.rid,{payload:m});case 28:return e.abrupt("return",p);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DI(e){return zI.apply(this,arguments)}function zI(){return(zI=j_(D_.mark((function e(t){var n,r,i,o,a,s,u,c,d,l,f,p,h,v,m,g,y,w;return D_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,r=t.action,i=t.instance,o=t.state,a=t.allPlugins,s=t.allMatches,u=t.store,c=t.EVENTS,d=o.plugins,l=o.context,f=r.type,p=f.match(II),h=n.exact.map((function(e){return e.pluginName})),p&&(h=s.during.map((function(e){return e.pluginName}))),v=WI(i,h),m=n.exact.reduce((function(e,t){var n=t.pluginName,r=t.methodName,i=!1;return r.match(/^initialize/)||r.match(/^reset/)||(i=!d[n].loaded),l.offline&&r.match(/^(page|track|identify)/)&&(i=!0),e["".concat(n)]=i,e}),{}),e.next=10,n.exact.reduce(function(){var e=j_(D_.mark((function e(t,o,s){var u,c,l;return D_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=o.pluginName,e.next=3,t;case 3:if(c=e.sent,!n.namespaced||!n.namespaced[u]){e.next=11;break}return e.next=7,n.namespaced[u].reduce(function(){var e=j_(D_.mark((function e(t,n,r){var o,s,c,l;return D_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e,t,n){return function(r,i){var o=n||t;return q_(q_({},e),{},{abort:{reason:r,plugins:i||[t],caller:f,from:o}})}},e.next=3,t;case 3:if(o=e.sent,n.method&&E_(n.method)){e.next=6;break}return e.abrupt("return",o);case 6:return YI(n.methodName,n.pluginName),e.next=9,n.method({payload:o,instance:i,abort:s(o,u,n.pluginName),config:UI(n.pluginName,d,a),plugins:d});case 9:return c=e.sent,l=x_(c)?c:{},e.abrupt("return",Promise.resolve(q_(q_({},o),l)));case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Promise.resolve(r));case 7:l=e.sent,c[u]=l,e.next=12;break;case 11:c[u]=r;case 12:return e.abrupt("return",Promise.resolve(c));case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Promise.resolve({}));case 10:return g=e.sent,e.next=13,n.exact.reduce(function(){var e=j_(D_.mark((function e(t,r,o){var s,c,l,h,y,w,b,S,E,k,C,x;return D_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.exact.length===o+1,c=r.pluginName,l=a[c],e.next=5,t;case 5:if(h=e.sent,y=g[c]?g[c]:{},p&&(y=h),!HI(y,c)){e.next=11;break}return jI({data:y,method:f,instance:i,pluginName:c,store:u}),e.abrupt("return",Promise.resolve(h));case 11:if(!HI(h,c)){e.next=14;break}return s&&jI({data:h,method:f,instance:i,store:u}),e.abrupt("return",Promise.resolve(h));case 14:if(!m.hasOwnProperty(c)||!0!==m[c]){e.next=17;break}return u.dispatch({type:"queue",plugin:c,payload:y,_:{called:"queue",from:"queueMechanism"}}),e.abrupt("return",Promise.resolve(h));case 17:return w=v(g[c],a[c]),e.next=20,l[f]({abort:w.abort,payload:y,instance:i,config:UI(c,d,a),plugins:d});case 20:return b=e.sent,S=x_(b)?b:{},E=q_(q_({},h),S),HI(k=g[c],c)?jI({data:k,method:f,instance:i,pluginName:c,store:u}):(C="".concat(f,":").concat(c),(C.match(/:/g)||[]).length<2&&!f.match(MI)&&!f.match(RI)&&(x=p?E:y,i.dispatch(q_(q_({},x),{},{type:C,_:{called:C,from:"submethod"}})))),e.abrupt("return",Promise.resolve(E));case 26:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Promise.resolve(r));case 13:if(y=e.sent,f.match(II)||f.match(/^registerPlugin/)||f.match(RI)||f.match(MI)||f.match(/^params/)||f.match(/^userIdChanged/)){e.next=21;break}if(c.plugins.includes(f),!y._||y._.originalAction!==f){e.next=18;break}return e.abrupt("return",y);case 18:w=q_(q_({},y),{_:{originalAction:y.type,called:y.type,from:"engineEnd"}}),VI(y,n.exact.length)&&!f.match(/End$/)&&(w=q_(q_({},w),{type:y.type+"Aborted"})),u.dispatch(w);case 21:return e.abrupt("return",y);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jI(e){var t=e.data,n=e.method;e.instance;var r=e.pluginName,i=n+"Aborted"+(r?":"+r:"");e.store.dispatch(q_(q_({},t),{},{type:i,_:{called:i,from:"abort"}}))}function UI(e,t,n){var r=t[e]||n[e];return r&&r.config?r.config:{}}function FI(e,t){return t.reduce((function(t,n){return n[e]?t.concat({methodName:e,pluginName:n.name,method:n[e]}):t}),[])}function qI(e,t){var n=function(e){return e.replace(II,"")}(e),r=t?":".concat(t):"";return["".concat(e).concat(r),"".concat(n).concat(r),"".concat(n,"End").concat(r)]}function KI(e,t,n){var r=qI(e).map((function(e){return FI(e,t)}));return t.reduce((function(n,r){var i=r.name,o=qI(e,i).map((function(e){return FI(e,t)})),a=PI(o,3),s=a[0],u=a[1],c=a[2];return s.length&&(n.beforeNS[i]=s),u.length&&(n.duringNS[i]=u),c.length&&(n.afterNS[i]=c),n}),{before:r[0],beforeNS:{},during:r[1],duringNS:{},after:r[2],afterNS:{}})}function HI(e,t){var n=e.abort;return!!n&&(!0===n||(GI(n,t)||n&&GI(n.plugins,t)))}function VI(e,t){var n=e.abort;if(!n)return!1;if(!0===n||k_(n))return!0;var r=n.plugins;return $I(n)&&n.length===t||$I(r)&&r.length===t}function $I(e){return Array.isArray(e)}function GI(e,t){return!(!e||!$I(e))&&e.includes(t)}function WI(e,t){return function(n,r,i){var o=r.config,a=r.name,s="".concat(a,".").concat(n.type);i&&(s=i.event);var u=n.type.match(II)?function(e,t,n,r,i){return function(o,a){var s=r?r.name:e,u=a&&$I(a)?a:n;if(r&&(!(u=a&&$I(a)?a:[e]).includes(e)||1!==u.length))throw new Error("Method ".concat(t," can only abort ").concat(e," plugin. ").concat(JSON.stringify(u)," input valid"));return q_(q_({},i),{},{abort:{reason:o,plugins:u,caller:t,_:s}})}}(a,s,t,i,n):function(e,t){return function(){throw new Error(e.type+" action not cancellable. Remove abort in "+t)}}(n,s);return{payload:XI(n),instance:e,config:o||{},abort:u}}}function YI(e,t){var n=QI(e);if(n&&n.name===t){var r=QI(n.method),i=r?"or "+r.method:"";throw new Error([t+" plugin is calling method "+e,"Plugins cant call self","Use ".concat(n.method," ").concat(i," in ").concat(t," plugin insteadof ").concat(e)].join("\n"))}}function QI(e){var t=e.match(/(.*):(.*)/);return!!t&&{method:t[1],name:t[2]}}function XI(e){return Object.keys(e).reduce((function(t,n){return"type"===n||(x_(e[n])?t[n]=Object.assign({},e[n]):t[n]=e[n]),t}),{})}function JI(e,t,n){var r={};return function(i){return function(o){return function(){var a=j_(D_.mark((function a(s){var u,c,d,l,f,p,h,v,m,g,y,w;return D_.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(u=s.type,c=s.abort,d=s.plugins,l=s,!c){a.next=4;break}return a.abrupt("return",o(s));case 4:if(u===iI.enablePlugin&&i.dispatch({type:iI.initializeStart,plugins:d,disabled:[],fromEnable:!0,meta:s.meta}),u===iI.disablePlugin&&setTimeout((function(){return kI(s.meta.rid,{payload:s})}),0),u===iI.initializeEnd&&(f=t(),p=Object.keys(f),h=p.filter((function(e){return d.includes(e)})).map((function(e){return f[e]})),v=[],m=[],g=s.disabled,y=h.map((function(e){var t=e.loaded,n=e.name;return CI(e,t,1e4).then((function(t){return r[n]||(i.dispatch({type:iI.pluginReadyType(n),name:n,events:Object.keys(e).filter((function(e){return!rI.includes(e)}))}),r[n]=!0),v=v.concat(n),e})).catch((function(e){if(e instanceof Error)throw new Error(e);return m=m.concat(e.name),e}))})),Promise.all(y).then((function(e){var t={plugins:v,failed:m,disabled:g};setTimeout((function(){p.length===y.length+g.length&&i.dispatch(q_(q_({},{type:iI.ready}),t))}),0)}))),u===iI.bootstrap){a.next=13;break}return/^ready:([^:]*)$/.test(u)&&setTimeout((function(){return xI(i,t,e)}),0),a.next=11,LI(s,t,e,i,n);case 11:return w=a.sent,a.abrupt("return",o(w));case 13:return a.abrupt("return",o(l));case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}}function ZI(e){return function(t){return function(t){return function(n){var r=n.type,i=n.key,o=n.value,a=n.options;if(r===iI.setItem||r===iI.removeItem){if(n.abort)return t(n);r===iI.setItem?e.setItem(i,o,a):e.removeItem(i,a)}return t(n)}}}}var eM,tM,nM,rM,iM=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},oM=function e(){var t=this;iM(this,e),U_(this,"before",[]),U_(this,"after",[]),U_(this,"addMiddleware",(function(e,n){t[n]=t[n].concat(e)})),U_(this,"removeMiddleware",(function(e,n){var r=t[n].findIndex((function(t){return t===e}));-1!==r&&(t[n]=[].concat(R_(t[n].slice(0,r)),R_(t[n].slice(r+1))))})),U_(this,"dynamicMiddlewares",(function(e){return function(n){return function(r){return function(i){var o={getState:n.getState,dispatch:function(e){return n.dispatch(e)}},a=t[e].map((function(e){return e(o)}));return eI.apply(void 0,R_(a))(r)(i)}}}}))};function aM(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r={};if("initialize:aborted"===n.type)return t;if(/^registerPlugin:([^:]*)$/.test(n.type)){var i=sM(n.type,"registerPlugin"),o=e()[i];if(!o||!i)return t;var a=n.enabled;return r[i]={enabled:a,initialized:!!a&&Boolean(!o.initialize),loaded:!!a&&Boolean(o.loaded()),config:o.config||{}},q_(q_({},t),r)}if(/^initialize:([^:]*)$/.test(n.type)){var s=sM(n.type,iI.initialize),u=e()[s];return u&&s?(r[s]=q_(q_({},t[s]),{initialized:!0,loaded:Boolean(u.loaded())}),q_(q_({},t),r)):t}if(/^ready:([^:]*)$/.test(n.type))return r[n.name]=q_(q_({},t[n.name]),{loaded:!0}),q_(q_({},t),r);switch(n.type){case iI.disablePlugin:return q_(q_({},t),uM(n.plugins,!1,t));case iI.enablePlugin:return q_(q_({},t),uM(n.plugins,!0,t));default:return t}}}function sM(e,t){return e.substring(t.length+1,e.length)}function uM(e,t,n){return e.reduce((function(e,r){return e[r]=q_(q_({},n[r]),{enabled:t}),e}),n)}eM=function(){if(!N_)return!1;var e=navigator.appVersion;return~e.indexOf("Win")?"Windows":~e.indexOf("Mac")?"MacOS":~e.indexOf("X11")?"UNIX":~e.indexOf("Linux")?"Linux":"Unknown OS"}(),tM=N_?document.referrer:null,nM=function(){if(N_){var e=navigator,t=e.language,n=e.languages;return e.userLanguage||(n&&n.length?n[0]:t)}}(),rM=function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}}();var cM={initialized:!1,sessionId:P_(),app:null,version:null,debug:!1,offline:!!N_&&!navigator.onLine,os:{name:eM},userAgent:N_?navigator.userAgent:"node",library:{name:aI,version:"0.10.2"},timezone:rM,locale:nM,campaign:{},referrer:tM};function dM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cM,t=arguments.length>1?arguments[1]:void 0,n=e.initialized,r=t.type,i=t.campaign;switch(r){case iI.campaign:return q_(q_({},e),{campaign:i});case iI.offline:return q_(q_({},e),{offline:!0});case iI.online:return q_(q_({},e),{offline:!1});default:return n?e:q_(q_(q_({},cM),e),{initialized:!0})}}var lM=["plugins","reducers","storage"];function fM(e){return Object.keys(e).reduce((function(t,n){return lM.includes(n)||(t[n]=e[n]),t}),{})}function pM(e){var t=e;try{t=JSON.parse(JSON.stringify(e))}catch(e){}return t}var hM=/#.*$/;function vM(e){var t=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(e);return"/"+(t&&t[3]?t[3].split("?")[0].replace(hM,""):"")}function mM(e){var t=function(){if(N_)for(var e,t=document.getElementsByTagName("link"),n=0;e=t[n];n++)if("canonical"===e.getAttribute("rel"))return e.getAttribute("href")}();return t?t.match(/\?/)?t:t+e:window.location.href.replace(hM,"")}var gM=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!N_)return e;var t=document,n=t.title,r=t.referrer,i=window,o=i.location,a=i.innerWidth,s=i.innerHeight,u=o.hash,c=o.search,d=mM(c),l={title:n,url:d,path:vM(d),hash:u,search:c,width:a,height:s};return r&&""!==r&&(l.referrer=r),q_(q_({},l),e)},yM={last:{},history:[]};function wM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yM,t=arguments.length>1?arguments[1]:void 0,n=t.properties,r=t.options,i=t.meta;switch(t.type){case iI.page:var o=pM(q_({properties:n,meta:i},Object.keys(r).length&&{options:r}));return q_(q_({},e),{last:o,history:e.history.concat(o)});default:return e}}var bM={last:{},history:[]};function SM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bM,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.meta,i=t.options,o=t.event,a=t.properties;switch(n){case iI.track:var s=pM(q_(q_({event:o,properties:a},Object.keys(i).length&&{options:i}),{},{meta:r}));return q_(q_({},e),{last:s,history:e.history.concat(s)});default:return e}}var EM={actions:[]};function kM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:EM,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"queue":var i;return i=r&&r.type&&r.type===iI.identify?[t].concat(e.actions):e.actions.concat(t),q_(q_({},e),{},{actions:i});case"dequeue":return[];default:return e}}function CM(e,t,n){if(!N_)return!1;var r=window[(n?"add":"remove")+"EventListener"];e.split(" ").forEach((function(e){r(e,t)}))}function xM(e){var t=CM.bind(null,"online offline",(function(t){return Promise.resolve(!navigator.onLine).then(e)}));return t(!0),function(e){return t(!1)}}function TM(){return d_.__analytics__=[],function(e){return function(t,n,r){var i=e(t,n,r),o=i.dispatch;return Object.assign(i,{dispatch:function(e){var t=e.action||e;return d_.__analytics__.push(t),o(e)}})}}}function NM(e){return function(){return eI(eI.apply(null,arguments),TM())}}function OM(e){return e?function(e){return Array.isArray(e)}(e)?e:[e]:[]}function AM(e){var t=e||Array.prototype.slice.call(arguments);return t.reduce((function(e,t){return e||(E_(t)?t:e)}),!1)}function PM(){return(new Date).getTime()}function _M(e,t){return function(n){t&&t(n),e(n)}}function IM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=P_();return t&&(EI[r]=_M(t,AM(n))),q_(q_({},e),{},{rid:r,ts:PM()},t?{hasCallback:!0}:{})}function MM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.reducers||{},n=e.initialUser||{},r=(e.plugins||[]).reduce((function(e,t){if(E_(t))return e.middlewares=e.middlewares.concat(t),e;if(t.NAMESPACE&&(t.name=t.NAMESPACE),!t.name)throw new Error(cI+"1");var n=t.EVENTS?Object.keys(t.EVENTS).map((function(e){return t.EVENTS[e]})):[],r=!(!1===t.enabled),i=!(t.config&&!1===t.config.enabled);e.pluginEnabled[t.name]=r&&i,delete t.enabled,t.methods&&(e.methods[t.name]=Object.keys(t.methods).reduce((function(e,n){return e[n]=j(t.methods[n]),e}),{}),delete t.methods);var o=Object.keys(t).concat(n),a=new Set(e.events.concat(o));if(e.events=Array.from(a),e.pluginsArray=e.pluginsArray.concat(t),e.plugins[t.name])throw new Error(t.name+"AlreadyLoaded");return e.plugins[t.name]=t,e.plugins[t.name].loaded||(e.plugins[t.name].loaded=function(){return!0}),e}),{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),i=e.storage?e.storage:{getItem:function(e){return d_[e]},setItem:function(e,t){return d_[e]=t},removeItem:function(e){return d_[e]=void 0}},o=bI(i),a=r.plugins,s=r.events.filter((function(e){return!rI.includes(e)})),u=new Set(s.concat(nI).filter((function(e){return!rI.includes(e)}))),c=Array.from(u).sort(),d=s.sort(),l=function(){return a},f=new oM,p=f.addMiddleware,h=f.removeMiddleware,v=f.dynamicMiddlewares,m=function(){throw new Error("Abort disabled inListener")},g=O_(),y=yI(i),w=q_(q_(q_(q_({},y),n),g.an_uid?{userId:g.an_uid}:{}),g.an_aid?{anonymousId:g.an_aid}:{});w.anonymousId||(w.anonymousId=P_());var b,S,E,k=q_({enable:function(e,t){return new Promise((function(n){R.dispatch({type:iI.enablePlugin,plugins:OM(e),_:{originalAction:iI.enablePlugin}},n,[t])}))},disable:function(e,t){return new Promise((function(n){R.dispatch({type:iI.disablePlugin,plugins:OM(e),_:{originalAction:iI.disablePlugin}},n,[t])}))}},r.methods),C={identify:(E=j_(D_.mark((function e(t,n,r,i){var a,s,u,c,d;return D_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k_(t)?t:null,s=x_(t)?t:n,u=r||{},c=C.user(),d_[wI(sI)]=a,d=a||s.userId||o(sI,C,s),e.abrupt("return",new Promise((function(e){R.dispatch(q_({type:iI.identifyStart,userId:d,traits:s||{},options:u,anonymousId:c.anonymousId},c.id&&c.id!==a&&{previousId:c.id}),e,[n,r,i])})));case 7:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return E.apply(this,arguments)}),track:(S=j_(D_.mark((function e(t,n,r,i){var a,s,u;return D_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=x_(t)?t.event:t)&&k_(a)){e.next=3;break}throw new Error("EventMissing");case 3:return s=x_(t)?t:n||{},u=x_(r)?r:{},e.abrupt("return",new Promise((function(e){R.dispatch({type:iI.trackStart,event:a,properties:s,options:u,userId:o(sI,C,n),anonymousId:o(uI,C,n)},e,[n,r,i])})));case 6:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return S.apply(this,arguments)}),page:(b=j_(D_.mark((function e(t,n,r){var i,a;return D_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=x_(t)?t:{},a=x_(n)?n:{},e.abrupt("return",new Promise((function(e,s){R.dispatch({type:iI.pageStart,properties:gM(i),options:a,userId:o(sI,C,i),anonymousId:o(uI,C,i)},e,[t,n,r])})));case 3:case"end":return e.stop()}}),e)}))),function(e,t,n){return b.apply(this,arguments)}),user:function(e){if(e===sI||"id"===e)return o(sI,C);if(e===uI||"anonId"===e)return o(uI,C);var t=C.getState("user");return e?r_(t,e):t},reset:function(e){return new Promise((function(t,n){R.dispatch({type:iI.resetStart},t,e)}))},ready:function(e){return C.on(iI.ready,e)},on:function(e,t){if(!e||!E_(t))return!1;if(e===iI.bootstrap)throw new Error(".on disabled for "+e);var n=/Start$|Start:/;if("*"===e){var r=function(e){return function(e){return function(r){return r.type.match(n)&&t({payload:r,instance:C,plugins:a}),e(r)}}},i=function(e){return function(e){return function(r){return r.type.match(n)||t({payload:r,instance:C,plugins:a}),e(r)}}};return p(r,RM),p(i,LM),function(){h(r,RM),h(i,LM)}}var o=e.match(n)?RM:LM,s=function(n){return function(n){return function(r){return r.type===e&&t({payload:r,instance:C,plugins:a,abort:m}),n(r)}}};return p(s,o),function(){return h(s,o)}},once:function(e,t){if(!e||!E_(t))return!1;if(e===iI.bootstrap)throw new Error(".once disabled for "+e);var n=C.on(e,(function(e){var r=e.payload;t({payload:r,instance:C,plugins:a,abort:m}),n()}));return n},getState:function(e){var t=R.getState();return e?r_(t,e):Object.assign({},t)},dispatch:function(e){var t=k_(e)?{type:e}:e;if(oI(t.type))throw new Error("reserved action "+t.type);var n=e._||{},r=q_(q_({},t),{},{_:q_({originalAction:t.type},n)});R.dispatch(r)},enablePlugin:k.enable,disablePlugin:k.disable,plugins:k,storage:{getItem:i.getItem,setItem:function(e,t,n){R.dispatch({type:iI.setItemStart,key:e,value:t,options:n})},removeItem:function(e,t){R.dispatch({type:iI.removeItemStart,key:e,options:t})}},setAnonymousId:function(e,t){C.storage.setItem(dI,e,t)},events:{all:c,core:nI,plugins:d}},x=function(e){return function(e){return function(t){return t.meta||(t.meta=IM()),e(t)}}},T=r.middlewares.concat([x,v(RM),JI(C,l,{all:c,plugins:d}),ZI(i),mI(C),SI(C),v(LM)]),N={context:dM,user:gI(i),page:wM,track:SM,plugins:aM(l),queue:kM},O=eI,A=eI;if(N_&&e.debug){var P=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;P&&(O=P({trace:!0,traceLimit:25})),A=function(){return 0===arguments.length?TM():x_(B_(arguments[0]))?NM():NM().apply(null,arguments)}}var _=fM(e),I=r.pluginsArray.reduce((function(e,t){var n=t.name,i=t.config,o=t.loaded,a=r.pluginEnabled[n];return e[n]={enabled:a,initialized:!!a&&Boolean(!t.initialize),loaded:Boolean(o()),config:i||{}},e}),{}),M={context:_,user:w,plugins:I},R=X_(Z_(q_(q_({},N),t)),M,A(O(tI.apply(void 0,R_(T)))));function L(e){return function(t,n,r){var i=IM(t.meta,n,OM(r)),o=q_(q_({},t),{meta:i});return e.apply(null,[o])}}R.dispatch=L(R.dispatch);var B=Object.keys(a);R.dispatch({type:iI.bootstrap,plugins:B,config:_,params:g,user:w,persistedUser:y});var D=B.filter((function(e){return r.pluginEnabled[e]})),z=B.filter((function(e){return!r.pluginEnabled[e]}));function j(e){return function(){var t=Array.prototype.slice.call(arguments),n=Array.apply(null,Array(e.length)).map((function(){})).map((function(e,n){if(t[n]||!1===t[n]||null===t[n])return t[n]})).concat(C);return e.apply({instance:C},n)}}return R.dispatch({type:iI.registerPlugins,plugins:B,enabled:r.pluginEnabled}),r.pluginsArray.map((function(e,t){var n=e.bootstrap,i=e.config,o=e.name;n&&E_(n)&&n({instance:C,config:i,payload:e}),R.dispatch({type:iI.registerPluginType(o),name:o,enabled:r.pluginEnabled[o],plugin:e}),r.pluginsArray.length===t+1&&R.dispatch({type:iI.initializeStart,plugins:D,disabled:z})})),xM((function(e){R.dispatch({type:e?iI.offline:iI.online})})),TI(R,l,C),C}var RM="before",LM="after";var BM=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};function DM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var zM=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DM(n,!0).forEach((function(t){BM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DM(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e};function jM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){jM(e,t,n[t])}))}return e}var FM={writeKey:null,disableAnonymousTraffic:!1,syncAnonymousId:!1,integrations:{}};var qM=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:"segment",config:UM({},FM,e),methods:{group:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;void 0!==window.analytics&&window.analytics.group(e,t,n,r)}},bootstrap:function(e){var t=e.config,n=e.instance;t.disableAnonymousTraffic&&!n.user("userId")&&n.once("identifyStart",(function(e){e.plugins.segment.loaded()||n.loadPlugin("segment")}))},initialize:function(e){var t=e.config,n=e.instance;e.payload;var r=t.disableAnonymousTraffic,i=t.writeKey,o=t.customScriptSrc;if(!i)throw new Error("No segment writeKey");if(!n.user("userId")&&r)return!1;!function(){var e=window.analytics=window.analytics||[];if(!e.initialize&&!function(){var e=document.getElementsByTagName("script"),t=o||"cdn.segment.com/analytics.js/v1/";return!!Object.keys(e).filter((function(n){return((e[n]||{}).src||"").indexOf(t)>-1})).length}()){e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],e.factory=function(t){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(var t=0;t<e.methods.length;t++){var n=e.methods[t];e[n]=e.factory(n)}e.load=function(t,n){var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=o||"https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js",r.id="segment-io";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i),e._loadOptions=n},e.SNIPPET_VERSION="4.1.0",e.load(i)}}()},page:function(e){var t=e.payload,n=e.config;"undefined"!=typeof analytics&&analytics.page(t.properties,UM({integrations:n.integrations},t.options))},track:function(e){var t=e.payload,n=e.config;"undefined"!=typeof analytics&&analytics.track(t.event,t.properties,UM({integrations:n.integrations},t.options))},identify:function(e){var t=e.payload,n=e.config;if("undefined"!=typeof analytics){var r=t.userId,i=t.traits,o=t.options;"string"==typeof r?analytics.identify(r,i,UM({integrations:n.integrations},o)):analytics.identify(i,UM({integrations:n.integrations},o))}},reset:function(){analytics.reset()},ready:function(e){var t=e.instance;if(e.config.syncAnonymousId&&"undefined"!=typeof analytics){var n=analytics.user();if(n){var r=n.anonymousId(),i=t.user("anonymousId");r&&r!==i&&t.setAnonymousId(r)}}},loaded:function(){return window.analytics&&!!analytics.initialized}}};const KM="ajs_anonymous_id",HM=(e,t)=>{const{segmentWriteKey:n,app:r,baseContext:i}=e;let o=i||{};if(!n)throw new Error("segmentWriteKey must be provided to analytics.");if(!r)throw new Error("app must be provided to analytics.");const a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return MM(zM(zM({},{storage:b_}),e))}({app:r,plugins:[qM({writeKey:n})]});let s;return a.ready((()=>{void 0!==window.analytics&&void 0!==window.analytics.user||t.warn("Segment failed to load."),s=(()=>{const e=Hi.get(KM),t=(e||"").replace(/"/g,"");if(e&&"null"!==t&&"undefined"!==t)return t;const n=sd();return Hi.set(KM,`"${n}"`,{domain:window.location.hostname,expires:365,secure:!0,sameSite:"none"}),n})()})),{getAnonymousId:()=>{const e=new Date;return new Promise((n=>{const r=setInterval((()=>{if(s)return clearInterval(r),n(s);(new Date).getTime()-e.getTime()>3e3&&(clearInterval(r),t.warn("getAnonymousId call timed out."),n(void 0))}),200)}))},identify:(e,t)=>{a.identify(e,t)},track:(e,t={},n={})=>{const r=Object.assign({event:e},n);r.properties=Object.assign(Object.assign({},o),t),a.track(e,r)},addToBaseContext:e=>{o=Object.assign(Object.assign({},o),e)}}};function VM(){return(VM=Object.assign||function(e){var t,n,r;for(t=1;t<arguments.length;t++)for(r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)}function $M(e){return e&&e.networkError}function GM(e){var t=e.initialDelayMs||1e3,n=e.maxDelayMs||15e3,r=e.maxNumberAttempts||2,i=e.randomDelay||!0,o=e.retryIf||$M;return function(e){var a=e.forward;return e.dispatchDebug,function(e){var s,u,c=Ri(e);return s=(e=Pi()).source,u=e.next,e=bi((function(e){var r,o=e.key,a=e.context,s=(a.retryCount||0)+1;return a=a.retryDelay||t,r=Math.random()+1.5,i&&a*r<n&&(a*=r),Bi(r=Ni((function(e){return("query"===e.kind||"teardown"===e.kind)&&e.key===o}))(c))(function(e){return function(t){return function(n){let r=0;return t((function(t){"number"==typeof t||t.tag?(r=r+1|0,setTimeout((function(){0!==r&&(r=r-1|0,n(t))}),e)):n(t)}))}}}(a)(Oi(zP(e.kind,e,VM({},e.context,{retryDelay:a,retryCount:s})))))}))(s),Ni((function(e){return!e.error||!o(e.error,e.operation)||((e.operation.context.retryCount||0)>=r-1||(u(e.operation),!1))}))(Ri(a(Ii([c,e]))))}}}var WM=YM;function YM(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}YM.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},YM.prototype.reset=function(){this.attempts=0},YM.prototype.setMin=function(e){this.ms=e},YM.prototype.setMax=function(e){this.max=e},YM.prototype.setJitter=function(e){this.jitter=e};var QM=ri((function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var u,c,d=this._events[s],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),l){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,i),!0;case 5:return d.fn.call(d.context,t,r,i,o),!0;case 6:return d.fn.call(d.context,t,r,i,o,a),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];d.fn.apply(d.context,u)}else{var f,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),l){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,r);break;case 4:d[c].fn.call(d[c].context,t,r,i);break;default:if(!u)for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];d[c].fn.apply(d[c].context,u)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,c=[],d=s.length;u<d;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}));var XM={default:function(e){return"string"==typeof e}};var JM={default:function(e){return null!==e&&"object"==typeof e}};var ZM=Object.freeze({__proto__:null,getOperationAST:function(e,t){for(var n=null,r=0,i=e.definitions;r<i.length;r++){var o,a=i[r];if(a.kind===Er.OPERATION_DEFINITION)if(null==t){if(n)return null;n=a}else if((null===(o=a.name)||void 0===o?void 0:o.value)===t)return a}return n}}),eR=ri((function(e,t){t.GRAPHQL_SUBSCRIPTIONS=t.GRAPHQL_WS=void 0;t.GRAPHQL_WS="graphql-ws";t.GRAPHQL_SUBSCRIPTIONS="graphql-subscriptions"})),tR=ri((function(e,t){t.WS_TIMEOUT=t.MIN_WS_TIMEOUT=void 0;t.MIN_WS_TIMEOUT=1e3;t.WS_TIMEOUT=3e4})),nR={default:function(){function e(){throw new Error("Static Class")}return e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_CONNECTION_TERMINATE="connection_terminate",e.GQL_START="start",e.GQL_DATA="data",e.GQL_ERROR="error",e.GQL_COMPLETE="complete",e.GQL_STOP="stop",e.SUBSCRIPTION_START="subscription_start",e.SUBSCRIPTION_DATA="subscription_data",e.SUBSCRIPTION_SUCCESS="subscription_success",e.SUBSCRIPTION_FAIL="subscription_fail",e.SUBSCRIPTION_END="subscription_end",e.INIT="init",e.INIT_SUCCESS="init_success",e.INIT_FAIL="init_fail",e.KEEP_ALIVE="keepalive",e}()},rR=ni(bP),iR=ni(ZM),oR=ni(X),aR=ri((function(e,t){var n=ei&&ei.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},r=ei&&ei.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=ei&&ei.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=ei&&ei.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};t.SubscriptionClient=void 0;var a=void 0!==ei?ei:"undefined"!=typeof window?window:{},s=a.WebSocket||a.MozWebSocket,u=function(){function e(e,t,n,r){var i=t||{},o=i.connectionCallback,a=void 0===o?void 0:o,u=i.connectionParams,c=void 0===u?{}:u,d=i.minTimeout,l=void 0===d?tR.MIN_WS_TIMEOUT:d,f=i.timeout,p=void 0===f?tR.WS_TIMEOUT:f,h=i.reconnect,v=void 0!==h&&h,m=i.reconnectionAttempts,g=void 0===m?1/0:m,y=i.lazy,w=void 0!==y&&y,b=i.inactivityTimeout,S=void 0===b?0:b,E=i.wsOptionArguments,k=void 0===E?[]:E;if(this.wsImpl=n||s,!this.wsImpl)throw new Error("Unable to find native implementation, or alternative implementation for WebSocket!");this.wsProtocols=r||eR.GRAPHQL_WS,this.connectionCallback=a,this.url=e,this.operations={},this.nextOperationId=0,this.minWsTimeout=l,this.wsTimeout=p,this.unsentMessagesQueue=[],this.reconnect=v,this.reconnecting=!1,this.reconnectionAttempts=g,this.lazy=!!w,this.inactivityTimeout=S,this.closedByUser=!1,this.backoff=new WM({jitter:.5}),this.eventEmitter=new QM.EventEmitter,this.middlewares=[],this.client=null,this.maxConnectTimeGenerator=this.createMaxConnectTimeGenerator(),this.connectionParams=this.getConnectionParams(c),this.wsOptionArguments=k,this.lazy||this.connect()}return Object.defineProperty(e.prototype,"status",{get:function(){return null===this.client?this.wsImpl.CLOSED:this.client.readyState},enumerable:!1,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.clearInactivityTimeout(),null!==this.client&&(this.closedByUser=t,e&&(this.clearCheckConnectionInterval(),this.clearMaxConnectTimeout(),this.clearTryReconnectTimeout(),this.unsubscribeAll(),this.sendMessage(void 0,nR.default.GQL_CONNECTION_TERMINATE,null)),this.client.close(),this.client.onopen=null,this.client.onclose=null,this.client.onerror=null,this.client.onmessage=null,this.client=null,this.eventEmitter.emit("disconnected"),e||this.tryReconnect())},e.prototype.request=function(e){var t,n,r=this.getObserver.bind(this),i=this.executeOperation.bind(this),o=this.unsubscribe.bind(this);return this.clearInactivityTimeout(),(t={})[oR.default]=function(){return this},t.subscribe=function(t,a,s){var u=r(t,a,s);return n=i(e,(function(e,t){null===e&&null===t?u.complete&&u.complete():e?u.error&&u.error(e[0]):u.next&&u.next(t)})),{unsubscribe:function(){n&&(o(n),n=null)}}},t},e.prototype.on=function(e,t,n){var r=this.eventEmitter.on(e,t,n);return function(){r.off(e,t,n)}},e.prototype.onConnected=function(e,t){return this.on("connected",e,t)},e.prototype.onConnecting=function(e,t){return this.on("connecting",e,t)},e.prototype.onDisconnected=function(e,t){return this.on("disconnected",e,t)},e.prototype.onReconnected=function(e,t){return this.on("reconnected",e,t)},e.prototype.onReconnecting=function(e,t){return this.on("reconnecting",e,t)},e.prototype.onError=function(e,t){return this.on("error",e,t)},e.prototype.unsubscribeAll=function(){var e=this;Object.keys(this.operations).forEach((function(t){e.unsubscribe(t)}))},e.prototype.applyMiddlewares=function(e){var t=this;return new Promise((function(n,r){var i,a,s;i=o(t.middlewares),a=t,(s=function(t){if(t)r(t);else if(i.length>0){var o=i.shift();o&&o.applyMiddleware.apply(a,[e,s])}else n(e)})()}))},e.prototype.use=function(e){var t=this;return e.map((function(e){if("function"!=typeof e.applyMiddleware)throw new Error("Middleware must implement the applyMiddleware function.");t.middlewares.push(e)})),this},e.prototype.getConnectionParams=function(e){return function(){return new Promise((function(t,n){if("function"==typeof e)try{return t(e.call(null))}catch(e){return n(e)}t(e)}))}},e.prototype.executeOperation=function(e,t){var n=this;null===this.client&&this.connect();var r=this.generateOperationId();return this.operations[r]={options:e,handler:t},this.applyMiddlewares(e).then((function(e){n.checkOperationOptions(e,t),n.operations[r]&&(n.operations[r]={options:e,handler:t},n.sendMessage(r,nR.default.GQL_START,e))})).catch((function(e){n.unsubscribe(r),t(n.formatErrors(e))})),r},e.prototype.getObserver=function(e,t,n){return"function"==typeof e?{next:function(t){return e(t)},error:function(e){return t&&t(e)},complete:function(){return n&&n()}}:e},e.prototype.createMaxConnectTimeGenerator=function(){var e=this.minWsTimeout,t=this.wsTimeout;return new WM({min:e,max:t,factor:1.2})},e.prototype.clearCheckConnectionInterval=function(){this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnectionIntervalId=null)},e.prototype.clearMaxConnectTimeout=function(){this.maxConnectTimeoutId&&(clearTimeout(this.maxConnectTimeoutId),this.maxConnectTimeoutId=null)},e.prototype.clearTryReconnectTimeout=function(){this.tryReconnectTimeoutId&&(clearTimeout(this.tryReconnectTimeoutId),this.tryReconnectTimeoutId=null)},e.prototype.clearInactivityTimeout=function(){this.inactivityTimeoutId&&(clearTimeout(this.inactivityTimeoutId),this.inactivityTimeoutId=null)},e.prototype.setInactivityTimeout=function(){var e=this;this.inactivityTimeout>0&&0===Object.keys(this.operations).length&&(this.inactivityTimeoutId=setTimeout((function(){0===Object.keys(e.operations).length&&e.close()}),this.inactivityTimeout))},e.prototype.checkOperationOptions=function(e,t){var n=e.query,r=e.variables,i=e.operationName;if(!n)throw new Error("Must provide a query.");if(!t)throw new Error("Must provide an handler.");if(!XM.default(n)&&!iR.getOperationAST(n,i)||i&&!XM.default(i)||r&&!JM.default(r))throw new Error("Incorrect option types. query must be a string or a document,`operationName` must be a string, and `variables` must be an object.")},e.prototype.buildMessage=function(e,t,r){return{id:e,type:t,payload:r&&r.query?n(n({},r),{query:"string"==typeof r.query?r.query:rR.print(r.query)}):r}},e.prototype.formatErrors=function(e){return Array.isArray(e)?e:e&&e.errors?this.formatErrors(e.errors):e&&e.message?[e]:[{name:"FormatedError",message:"Unknown error",originalError:e}]},e.prototype.sendMessage=function(e,t,n){this.sendMessageRaw(this.buildMessage(e,t,n))},e.prototype.sendMessageRaw=function(e){switch(this.status){case this.wsImpl.OPEN:var t=JSON.stringify(e);try{JSON.parse(t)}catch(t){this.eventEmitter.emit("error",new Error("Message must be JSON-serializable. Got: "+e))}this.client.send(t);break;case this.wsImpl.CONNECTING:this.unsentMessagesQueue.push(e);break;default:this.reconnecting||this.eventEmitter.emit("error",new Error("A message was not sent because socket is not connected, is closing or is already closed. Message was: "+JSON.stringify(e)))}},e.prototype.generateOperationId=function(){return String(++this.nextOperationId)},e.prototype.tryReconnect=function(){var e=this;if(this.reconnect&&!(this.backoff.attempts>=this.reconnectionAttempts)){this.reconnecting||(Object.keys(this.operations).forEach((function(t){e.unsentMessagesQueue.push(e.buildMessage(t,nR.default.GQL_START,e.operations[t].options))})),this.reconnecting=!0),this.clearTryReconnectTimeout();var t=this.backoff.duration();this.tryReconnectTimeoutId=setTimeout((function(){e.connect()}),t)}},e.prototype.flushUnsentMessagesQueue=function(){var e=this;this.unsentMessagesQueue.forEach((function(t){e.sendMessageRaw(t)})),this.unsentMessagesQueue=[]},e.prototype.checkConnection=function(){this.wasKeepAliveReceived?this.wasKeepAliveReceived=!1:this.reconnecting||this.close(!1,!0)},e.prototype.checkMaxConnectTimeout=function(){var e=this;this.clearMaxConnectTimeout(),this.maxConnectTimeoutId=setTimeout((function(){e.status!==e.wsImpl.OPEN&&(e.reconnecting=!0,e.close(!1,!0))}),this.maxConnectTimeGenerator.duration())},e.prototype.connect=function(){var e,t=this;this.client=new((e=this.wsImpl).bind.apply(e,o([void 0,this.url,this.wsProtocols],this.wsOptionArguments))),this.checkMaxConnectTimeout(),this.client.onopen=function(){return r(t,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:if(this.status!==this.wsImpl.OPEN)return[3,4];this.clearMaxConnectTimeout(),this.closedByUser=!1,this.eventEmitter.emit(this.reconnecting?"reconnecting":"connecting"),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.connectionParams()];case 2:return e=n.sent(),this.sendMessage(void 0,nR.default.GQL_CONNECTION_INIT,e),this.flushUnsentMessagesQueue(),[3,4];case 3:return t=n.sent(),this.sendMessage(void 0,nR.default.GQL_CONNECTION_ERROR,t),this.flushUnsentMessagesQueue(),[3,4];case 4:return[2]}}))}))},this.client.onclose=function(){t.closedByUser||t.close(!1,!1)},this.client.onerror=function(e){t.eventEmitter.emit("error",e)},this.client.onmessage=function(e){var n=e.data;t.processReceivedData(n)}},e.prototype.processReceivedData=function(e){var t,r;try{r=(t=JSON.parse(e)).id}catch(t){throw new Error("Message must be JSON-parseable. Got: "+e)}if(-1===[nR.default.GQL_DATA,nR.default.GQL_COMPLETE,nR.default.GQL_ERROR].indexOf(t.type)||this.operations[r])switch(t.type){case nR.default.GQL_CONNECTION_ERROR:this.connectionCallback&&this.connectionCallback(t.payload);break;case nR.default.GQL_CONNECTION_ACK:this.eventEmitter.emit(this.reconnecting?"reconnected":"connected",t.payload),this.reconnecting=!1,this.backoff.reset(),this.maxConnectTimeGenerator.reset(),this.connectionCallback&&this.connectionCallback();break;case nR.default.GQL_COMPLETE:var i=this.operations[r].handler;delete this.operations[r],i.call(this,null,null);break;case nR.default.GQL_ERROR:this.operations[r].handler(this.formatErrors(t.payload),null),delete this.operations[r];break;case nR.default.GQL_DATA:var o=t.payload.errors?n(n({},t.payload),{errors:this.formatErrors(t.payload.errors)}):t.payload;this.operations[r].handler(null,o);break;case nR.default.GQL_CONNECTION_KEEP_ALIVE:var a=void 0===this.wasKeepAliveReceived;this.wasKeepAliveReceived=!0,a&&this.checkConnection(),this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnection()),this.checkConnectionIntervalId=setInterval(this.checkConnection.bind(this),this.wsTimeout);break;default:throw new Error("Invalid message type!")}else this.unsubscribe(r)},e.prototype.unsubscribe=function(e){this.operations[e]&&(delete this.operations[e],this.setInactivityTimeout(),this.sendMessage(e,nR.default.GQL_STOP,void 0))},e}();t.SubscriptionClient=u}));const sR=(e,{uri:t,wsUri:n},r)=>{const i=[WP,$P,GM({}),XP,n_({onError(t,n){r.error(`[${e}]: Graphql Query error`,{error:t,operation:n})}})];if(n){const t=new aR.SubscriptionClient(n,{connectionParams:{headers:{"apollographql-client-name":e}},reconnect:!1,minTimeout:1e4,connectionCallback:e=>{r.crumb({level:Ce.Debug,message:" WS connectionCallback",context:{}}),e&&r.error(" WS connectionCallback error:",{err:e})}});i.push(function(e){function t(e){return"subscription"===(e=e.kind)||!!r&&("query"===e||"mutation"===e)}var n=e.forwardSubscription,r=e.enableAllOperations;return function(e){function r(e){var t=n({key:e.key.toString(36),query:oP(e.query),variables:e.variables,context:_P({},e.context)});return Ai((function(n){function r(t){return u(AP(e,t))}function i(t){return u(PP(e,t))}function a(){d||(d=!0,"subscription"===e.kind&&o.reexecuteOperation(zP("teardown",e,e.context)),c())}var s,u=n.next,c=n.complete,d=!1;return Promise.resolve().then((function(){d||(s=t.subscribe({next:r,error:i,complete:a}))})),function(){d=!0,s&&s.unsubscribe()}}))}function i(e){return!s(e)}var o=e.client,a=e.forward,s=t;return function(e){var t=Ri(e);return Ii([e=bi((function(e){var n=e.key;return Bi(Ni((function(e){return"teardown"===e.kind&&e.key===n}))(t))(r(e))}))(Ni(s)(t)),a(Ni(i)(t))])}}}({forwardSubscription:e=>t.request(e)}))}return function(e){return new e_(e)}({url:t,fetchOptions:{headers:{"apollographql-client-name":e}},exchanges:i})};var uR,cR,dR;function lR(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return bR(e,Error)}}function fR(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function pR(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function hR(e){return"[object String]"===Object.prototype.toString.call(e)}function vR(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function mR(e){return"[object Object]"===Object.prototype.toString.call(e)}function gR(e){return"undefined"!=typeof Event&&bR(e,Event)}function yR(e){return"undefined"!=typeof Element&&bR(e,Element)}function wR(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function bR(e,t){try{return e instanceof t}catch(e){return!1}}function SR(e){try{for(var t=e,n=[],r=0,i=0,o=" > ".length,a=void 0;t&&r++<5&&!("html"===(a=ER(t))||r>1&&i+n.length*o+a.length>=80);)n.push(a),i+=a.length,t=t.parentNode;return n.reverse().join(" > ")}catch(e){return"<unknown>"}}function ER(e){var t,n,r,i,o,a=e,s=[];if(!a||!a.tagName)return"";if(s.push(a.tagName.toLowerCase()),a.id&&s.push("#"+a.id),(t=a.className)&&hR(t))for(n=t.split(/\s+/),o=0;o<n.length;o++)s.push("."+n[o]);var u=["type","name","title","alt"];for(o=0;o<u.length;o++)r=u[o],(i=a.getAttribute(r))&&s.push("["+r+'="'+i+'"]');return s.join("")}!function(e){e.Ok="ok",e.Exited="exited",e.Crashed="crashed",e.Abnormal="abnormal"}(uR||(uR={})),function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(cR||(cR={})),function(e){e.fromString=function(t){switch(t){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;case"log":default:return e.Log}}}(cR||(cR={})),function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.Invalid="invalid",e.Failed="failed"}(dR||(dR={})),function(e){e.fromHttpCode=function(t){return t>=200&&t<300?e.Success:429===t?e.RateLimit:t>=400&&t<500?e.Invalid:t>=500?e.Failed:e.Unknown}}(dR||(dR={}));var kR=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e});var CR=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return r.message=t,r.name=n.prototype.constructor.name,kR(r,n.prototype),r}return lu(t,e),t}(Error),xR=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,TR="Invalid Dsn",NR=function(){function e(e){"string"==typeof e?this._fromString(e):this._fromComponents(e),this._validate()}return e.prototype.toString=function(e){void 0===e&&(e=!1);var t=this,n=t.host,r=t.path,i=t.pass,o=t.port,a=t.projectId;return t.protocol+"://"+t.user+(e&&i?":"+i:"")+"@"+n+(o?":"+o:"")+"/"+(r?r+"/":r)+a},e.prototype._fromString=function(e){var t=xR.exec(e);if(!t)throw new CR(TR);var n=vu(t.slice(1),6),r=n[0],i=n[1],o=n[2],a=void 0===o?"":o,s=n[3],u=n[4],c=void 0===u?"":u,d="",l=n[5],f=l.split("/");if(f.length>1&&(d=f.slice(0,-1).join("/"),l=f.pop()),l){var p=l.match(/^\d+/);p&&(l=p[0])}this._fromComponents({host:s,pass:a,path:d,projectId:l,port:c,protocol:r,user:i})},e.prototype._fromComponents=function(e){this.protocol=e.protocol,this.user=e.user,this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},e.prototype._validate=function(){var e=this;if(["protocol","user","host","projectId"].forEach((function(t){if(!e[t])throw new CR("Invalid Dsn: "+t+" missing")})),!this.projectId.match(/^\d+$/))throw new CR("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new CR("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new CR("Invalid Dsn: Invalid port "+this.port)},e}(),OR=function(){function e(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return e.prototype.memoize=function(e){if(this._hasWeakSet)return!!this._inner.has(e)||(this._inner.add(e),!1);for(var t=0;t<this._inner.length;t++){if(this._inner[t]===e)return!0}return this._inner.push(e),!1},e.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e){this._inner.splice(t,1);break}},e}(),AR="<anonymous>";function PR(e){try{return e&&"function"==typeof e&&e.name||AR}catch(e){return AR}}function _R(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"..."}function IR(e,t){if(!Array.isArray(e))return"";for(var n=[],r=0;r<e.length;r++){var i=e[r];try{n.push(String(i))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function MR(e,t){return!!hR(e)&&(n=t,"[object RegExp]"===Object.prototype.toString.call(n)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t));var n}function RR(e,t,n){if(t in e){var r=e[t],i=n(r);if("function"==typeof i)try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry_original__:{enumerable:!1,value:r}})}catch(e){}e[t]=i}}function LR(e){if(lR(e)){var t=e,n={message:t.message,name:t.name,stack:t.stack};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}if(gR(e)){var i=e,o={};o.type=i.type;try{o.target=yR(i.target)?SR(i.target):Object.prototype.toString.call(i.target)}catch(e){o.target="<unknown>"}try{o.currentTarget=yR(i.currentTarget)?SR(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch(e){o.currentTarget="<unknown>"}for(var r in"undefined"!=typeof CustomEvent&&bR(e,CustomEvent)&&(o.detail=i.detail),i)Object.prototype.hasOwnProperty.call(i,r)&&(o[r]=i);return o}return e}function BR(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}function DR(e,t,n){void 0===t&&(t=3),void 0===n&&(n=102400);var r=UR(e,t);return BR(r)>n?DR(e,t-1,n):r}function zR(t,n){return"domain"===n&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===n?"[DomainEmitter]":void 0!==e&&t===e?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":mR(r=t)&&"nativeEvent"in r&&"preventDefault"in r&&"stopPropagation"in r?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+PR(t)+"]":"symbol"==typeof t?"["+String(t)+"]":"bigint"==typeof t?"[BigInt: "+String(t)+"]":t;var r}function jR(e,t,n,r){if(void 0===n&&(n=1/0),void 0===r&&(r=new OR),0===n)return function(e){var t=Object.prototype.toString.call(e);if("string"==typeof e)return e;if("[object Object]"===t)return"[Object]";if("[object Array]"===t)return"[Array]";var n=zR(e);return vR(n)?n:t}(t);if(null!=t&&"function"==typeof t.toJSON)return t.toJSON();var i=zR(t,e);if(vR(i))return i;var o=LR(t),a=Array.isArray(t)?[]:{};if(r.memoize(t))return"[Circular ~]";for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(a[s]=jR(s,o[s],n-1,r));return r.unmemoize(t),a}function UR(e,t){try{return JSON.parse(JSON.stringify(e,(function(e,n){return jR(e,n,t)})))}catch(e){return"**non-serializable**"}}function FR(e,t){void 0===t&&(t=40);var n=Object.keys(LR(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return _R(n[0],t);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:_R(i,t)}return""}function qR(e){var t,n;if(mR(e)){var r=e,i={};try{for(var o=hu(Object.keys(r)),a=o.next();!a.done;a=o.next()){var s=a.value;void 0!==r[s]&&(i[s]=qR(r[s]))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}return Array.isArray(e)?e.map(qR):e}function KR(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}var HR={};function VR(){return KR()?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:HR}function $R(){var e=VR(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function GR(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}function WR(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}function YR(e){var t=VR();if(!("console"in t))return e();var n=t.console,r={};["debug","info","warn","error","log","assert"].forEach((function(e){e in t.console&&n[e].__sentry_original__&&(r[e]=n[e],n[e]=n[e].__sentry_original__)}));var i=e();return Object.keys(r).forEach((function(e){n[e]=r[e]})),i}function QR(e,t,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||n||"Error"}function XR(e,t){void 0===t&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach((function(n){e.exception.values[0].mechanism[n]=t[n]}))}catch(e){}}var JR=VR(),ZR="Sentry Logger ",eL=function(){function e(){this._enabled=!1}return e.prototype.disable=function(){this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&YR((function(){JR.console.log(ZR+"[Log]: "+e.join(" "))}))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&YR((function(){JR.console.warn(ZR+"[Warn]: "+e.join(" "))}))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&YR((function(){JR.console.error(ZR+"[Error]: "+e.join(" "))}))},e}();JR.__SENTRY__=JR.__SENTRY__||{};var tL=JR.__SENTRY__.logger||(JR.__SENTRY__.logger=new eL);function nL(){if(!("fetch"in VR()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function rL(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function iL(){if(!nL())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}var oL,aL=VR(),sL={},uL={};function cL(e){if(!uL[e])switch(uL[e]=!0,e){case"console":!function(){if(!("console"in aL))return;["debug","info","warn","error","log","assert"].forEach((function(e){e in aL.console&&RR(aL.console,e,(function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];lL("console",{args:n,level:e}),t&&Function.prototype.apply.call(t,aL.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in aL))return;aL.document.addEventListener("click",gL("click",lL.bind(null,"dom")),!1),aL.document.addEventListener("keypress",yL(lL.bind(null,"dom")),!1),["EventTarget","Node"].forEach((function(e){var t=aL[e]&&aL[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(RR(t,"addEventListener",(function(e){return function(t,n,r){return n&&n.handleEvent?("click"===t&&RR(n,"handleEvent",(function(e){return function(t){return gL("click",lL.bind(null,"dom"))(t),e.call(this,t)}})),"keypress"===t&&RR(n,"handleEvent",(function(e){return function(t){return yL(lL.bind(null,"dom"))(t),e.call(this,t)}}))):("click"===t&&gL("click",lL.bind(null,"dom"),!0)(this),"keypress"===t&&yL(lL.bind(null,"dom"))(this)),e.call(this,t,n,r)}})),RR(t,"removeEventListener",(function(e){return function(t,n,r){try{e.call(this,t,n.__sentry_wrapped__,r)}catch(e){}return e.call(this,t,n,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in aL))return;var e=[],t=[],n=XMLHttpRequest.prototype;RR(n,"open",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=this,a=r[1];o.__sentry_xhr__={method:hR(r[0])?r[0].toUpperCase():r[0],url:r[1]},hR(a)&&"POST"===o.__sentry_xhr__.method&&a.match(/sentry_key/)&&(o.__sentry_own_request__=!0);var s=function(){if(4===o.readyState){try{o.__sentry_xhr__&&(o.__sentry_xhr__.status_code=o.status)}catch(e){}try{var n=e.indexOf(o);if(-1!==n){e.splice(n);var i=t.splice(n)[0];o.__sentry_xhr__&&void 0!==i[0]&&(o.__sentry_xhr__.body=i[0])}}catch(e){}lL("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:o})}};return"onreadystatechange"in o&&"function"==typeof o.onreadystatechange?RR(o,"onreadystatechange",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return s(),e.apply(o,t)}})):o.addEventListener("readystatechange",s),n.apply(o,r)}})),RR(n,"send",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.push(this),t.push(r),lL("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}}))}();break;case"fetch":!function(){if(!function(){if(!nL())return!1;var e=VR();if(rL(e.fetch))return!0;var t=!1,n=e.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=rL(r.contentWindow.fetch)),n.head.removeChild(r)}catch(e){tL.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t}())return;RR(aL,"fetch",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={args:t,fetchData:{method:fL(t),url:pL(t)},startTimestamp:Date.now()};return lL("fetch",fu({},r)),e.apply(aL,t).then((function(e){return lL("fetch",fu(fu({},r),{endTimestamp:Date.now(),response:e})),e}),(function(e){throw lL("fetch",fu(fu({},r),{endTimestamp:Date.now(),error:e})),e}))}}))}();break;case"history":!function(){if(!function(){var e=VR(),t=e.chrome,n=t&&t.app&&t.app.runtime,r="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&r}())return;var e=aL.onpopstate;function t(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length>2?t[2]:void 0;if(r){var i=oL,o=String(r);oL=o,lL("history",{from:i,to:o})}return e.apply(this,t)}}aL.onpopstate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=aL.location.href,i=oL;if(oL=r,lL("history",{from:i,to:r}),e)return e.apply(this,t)},RR(aL.history,"pushState",t),RR(aL.history,"replaceState",t)}();break;case"error":wL=aL.onerror,aL.onerror=function(e,t,n,r,i){return lL("error",{column:r,error:i,line:n,msg:e,url:t}),!!wL&&wL.apply(this,arguments)};break;case"unhandledrejection":SL=aL.onunhandledrejection,aL.onunhandledrejection=function(e){return lL("unhandledrejection",e),!SL||SL.apply(this,arguments)};break;default:tL.warn("unknown instrumentation type:",e)}}function dL(e){e&&"string"==typeof e.type&&"function"==typeof e.callback&&(sL[e.type]=sL[e.type]||[],sL[e.type].push(e.callback),cL(e.type))}function lL(e,t){var n,r;if(e&&sL[e])try{for(var i=hu(sL[e]||[]),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(t)}catch(t){tL.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+PR(a)+"\nError: "+t)}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function fL(e){return void 0===e&&(e=[]),"Request"in aL&&bR(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function pL(e){return void 0===e&&(e=[]),"string"==typeof e[0]?e[0]:"Request"in aL&&bR(e[0],Request)?e[0].url:String(e[0])}var hL,vL,mL=0;function gL(e,t,n){return void 0===n&&(n=!1),function(r){hL=void 0,r&&vL!==r&&(vL=r,mL&&clearTimeout(mL),n?mL=setTimeout((function(){t({event:r,name:e})})):t({event:r,name:e}))}}function yL(e){return function(t){var n;try{n=t.target}catch(e){return}var r=n&&n.tagName;r&&("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)&&(hL||gL("input",e)(t),clearTimeout(hL),hL=setTimeout((function(){hL=void 0}),1e3))}}var wL=null;var bL,SL=null;!function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"}(bL||(bL={}));var EL=function(){function e(e){var t=this;this._state=bL.PENDING,this._handlers=[],this._resolve=function(e){t._setResult(bL.RESOLVED,e)},this._reject=function(e){t._setResult(bL.REJECTED,e)},this._setResult=function(e,n){t._state===bL.PENDING&&(wR(n)?n.then(t._resolve,t._reject):(t._state=e,t._value=n,t._executeHandlers()))},this._attachHandler=function(e){t._handlers=t._handlers.concat(e),t._executeHandlers()},this._executeHandlers=function(){if(t._state!==bL.PENDING){var e=t._handlers.slice();t._handlers=[],e.forEach((function(e){e.done||(t._state===bL.RESOLVED&&e.onfulfilled&&e.onfulfilled(t._value),t._state===bL.REJECTED&&e.onrejected&&e.onrejected(t._value),e.done=!0)}))}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.resolve=function(t){return new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){return new e((function(n,r){if(Array.isArray(t))if(0!==t.length){var i=t.length,o=[];t.forEach((function(t,a){e.resolve(t).then((function(e){o[a]=e,0===(i-=1)&&n(o)})).then(null,r)}))}else n([]);else r(new TypeError("Promise.all requires an array as input."))}))},e.prototype.then=function(t,n){var r=this;return new e((function(e,i){r._attachHandler({done:!1,onfulfilled:function(n){if(t)try{return void e(t(n))}catch(e){return void i(e)}else e(n)},onrejected:function(t){if(n)try{return void e(n(t))}catch(e){return void i(e)}else i(t)}})}))},e.prototype.catch=function(e){return this.then((function(e){return e}),e)},e.prototype.finally=function(t){var n=this;return new e((function(e,r){var i,o;return n.then((function(e){o=!1,i=e,t&&t()}),(function(e){o=!0,i=e,t&&t()})).then((function(){o?r(i):e(i)}))}))},e.prototype.toString=function(){return"[object SyncPromise]"},e}(),kL=function(){function e(e){this._limit=e,this._buffer=[]}return e.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},e.prototype.add=function(e){var t=this;return this.isReady()?(-1===this._buffer.indexOf(e)&&this._buffer.push(e),e.then((function(){return t.remove(e)})).then(null,(function(){return t.remove(e).then(null,(function(){}))})),e):EL.reject(new CR("Not adding Promise due to buffer limit reached."))},e.prototype.remove=function(e){return this._buffer.splice(this._buffer.indexOf(e),1)[0]},e.prototype.length=function(){return this._buffer.length},e.prototype.drain=function(e){var t=this;return new EL((function(n){var r=setTimeout((function(){e&&e>0&&n(!1)}),e);EL.all(t._buffer).then((function(){clearTimeout(r),n(!0)})).then(null,(function(){n(!0)}))}))},e}(),CL={nowSeconds:function(){return Date.now()/1e3}};var xL=KR()?function(){try{return function(e,t){return e.require(t)}(module,"perf_hooks").performance}catch(e){return}}():function(){var e=VR().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),TL=void 0===xL?CL:{nowSeconds:function(){return(xL.timeOrigin+xL.now())/1e3}},NL=CL.nowSeconds.bind(CL);TL.nowSeconds.bind(TL),function(){var e=VR().performance;if(e)e.timeOrigin?e.timeOrigin:e.timing&&e.timing.navigationStart||Date.now()}();var OL=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return e.clone=function(t){var n=new e;return t&&(n._breadcrumbs=mu(t._breadcrumbs),n._tags=fu({},t._tags),n._extra=fu({},t._extra),n._contexts=fu({},t._contexts),n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=mu(t._eventProcessors)),n},e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.setTags=function(e){return this._tags=fu(fu({},this._tags),e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var n;return this._tags=fu(fu({},this._tags),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=fu(fu({},this._extra),e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var n;return this._extra=fu(fu({},this._extra),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var n;return null===t?delete this._contexts[e]:this._contexts=fu(fu({},this._contexts),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var e,t,n,r,i=this.getSpan();return(null===(e=i)||void 0===e?void 0:e.transaction)?null===(t=i)||void 0===t?void 0:t.transaction:(null===(r=null===(n=i)||void 0===n?void 0:n.spanRecorder)||void 0===r?void 0:r.spans[0])?i.spanRecorder.spans[0]:void 0},e.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var n=t(this);return n instanceof e?n:this}return t instanceof e?(this._tags=fu(fu({},this._tags),t._tags),this._extra=fu(fu({},this._extra),t._extra),this._contexts=fu(fu({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint)):mR(t)&&(t=t,this._tags=fu(fu({},this._tags),t.tags),this._extra=fu(fu({},this._extra),t.extra),this._contexts=fu(fu({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var n=fu({timestamp:NL()},e);return this._breadcrumbs=void 0!==t&&t>=0?mu(this._breadcrumbs,[n]).slice(-t):mu(this._breadcrumbs,[n]),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(e,t){var n;if(this._extra&&Object.keys(this._extra).length&&(e.extra=fu(fu({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=fu(fu({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=fu(fu({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=fu(fu({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=fu({trace:this._span.getTraceContext()},e.contexts);var r=null===(n=this._span.transaction)||void 0===n?void 0:n.name;r&&(e.tags=fu({transaction:r},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=mu(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors(mu(AL(),this._eventProcessors),e,t)},e.prototype._notifyEventProcessors=function(e,t,n,r){var i=this;return void 0===r&&(r=0),new EL((function(o,a){var s=e[r];if(null===t||"function"!=typeof s)o(t);else{var u=s(fu({},t),n);wR(u)?u.then((function(t){return i._notifyEventProcessors(e,t,n,r+1).then(o)})).then(null,a):i._notifyEventProcessors(e,u,n,r+1).then(o).then(null,a)}}))},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}();function AL(){var e=VR();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function PL(e){AL().push(e)}var _L=function(){function e(e){this.errors=0,this.sid=$R(),this.timestamp=Date.now(),this.started=Date.now(),this.duration=0,this.status=uR.Ok,e&&this.update(e)}return e.prototype.update=function(e){void 0===e&&(e={}),e.user&&(e.user.ip_address&&(this.ipAddress=e.user.ip_address),e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||Date.now(),e.sid&&(this.sid=32===e.sid.length?e.sid:$R()),e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),"number"==typeof e.duration?this.duration=e.duration:this.duration=this.timestamp-this.started,e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),e.ipAddress&&(this.ipAddress=e.ipAddress),e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):this.status===uR.Ok?this.update({status:uR.Exited}):this.update()},e.prototype.toJSON=function(){return qR({sid:""+this.sid,init:!0,started:new Date(this.started).toISOString(),timestamp:new Date(this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:qR({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},e}(),IL=function(){function e(e,t,n){void 0===t&&(t=new OL),void 0===n&&(n=3),this._version=n,this._stack=[{}],this.getStackTop().scope=t,this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=OL.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var n=this._lastEventId=$R(),r=t;if(!t){var i=void 0;try{throw new Error("Sentry syntheticException")}catch(e){i=e}r={originalException:e,syntheticException:i}}return this._invokeClient("captureException",e,fu(fu({},r),{event_id:n})),n},e.prototype.captureMessage=function(e,t,n){var r=this._lastEventId=$R(),i=n;if(!n){var o=void 0;try{throw new Error(e)}catch(e){o=e}i={originalException:e,syntheticException:o}}return this._invokeClient("captureMessage",e,t,fu(fu({},i),{event_id:r})),r},e.prototype.captureEvent=function(e,t){var n=this._lastEventId=$R();return this._invokeClient("captureEvent",e,fu(fu({},t),{event_id:n})),n},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),r=n.scope,i=n.client;if(r&&i){var o=i.getOptions&&i.getOptions()||{},a=o.beforeBreadcrumb,s=void 0===a?null:a,u=o.maxBreadcrumbs,c=void 0===u?100:u;if(!(c<=0)){var d=NL(),l=fu({timestamp:d},e),f=s?YR((function(){return s(l,t)})):l;null!==f&&r.addBreadcrumb(f,Math.min(c,100))}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},e.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},e.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,r=t.client;n&&r&&e(n)},e.prototype.run=function(e){var t=RL(this);try{e(this)}finally{RL(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return tL.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},e.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.startSession=function(e){this.endSession();var t=this.getStackTop(),n=t.scope,r=t.client,i=r&&r.getOptions()||{},o=i.release,a=i.environment,s=new _L(fu(fu({release:o,environment:a},n&&{user:n.getUser()}),e));return n&&n.setSession(s),s},e.prototype.endSession=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var r=t.getSession&&t.getSession();r&&(r.close(),n&&n.captureSession&&n.captureSession(r),t.setSession())}},e.prototype._invokeClient=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.getStackTop(),o=i.scope,a=i.client;a&&a[e]&&(t=a)[e].apply(t,mu(n,[o]))},e.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=ML(),i=r.__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[e])return i.extensions[e].apply(this,t);tL.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}();function ML(){var e=VR();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function RL(e){var t=ML(),n=DL(t);return zL(t,e),n}function LL(){var e=ML();return BL(e)&&!DL(e).isOlderThan(3)||zL(e,new IL),KR()?function(e){try{var t=(r=ML().__SENTRY__)&&r.extensions&&r.extensions.domain&&r.extensions.domain.active;if(!t)return DL(e);if(!BL(t)||DL(t).isOlderThan(3)){var n=DL(e).getStackTop();zL(t,new IL(n.client,OL.clone(n.scope)))}return DL(t)}catch(t){return DL(e)}var r}(e):DL(e)}function BL(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function DL(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new IL),e.__SENTRY__.hub}function zL(e,t){return!!e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0)}function jL(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=LL();if(r&&r[e])return r[e].apply(r,mu(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function UL(e,t){var n;try{throw new Error("Sentry syntheticException")}catch(e){n=e}return jL("captureException",e,{captureContext:t,originalException:e,syntheticException:n})}function FL(e){jL("withScope",e)}var qL=function(){function e(e){this.dsn=e,this._dsnObject=new NR(e)}return e.prototype.getDsn=function(){return this._dsnObject},e.prototype.getBaseApiEndpoint=function(){var e=this._dsnObject,t=e.protocol?e.protocol+":":"",n=e.port?":"+e.port:"";return t+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"},e.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},e.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},e.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},e.prototype.getStoreEndpointPath=function(){var e=this._dsnObject;return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},e.prototype.getRequestHeaders=function(e,t){var n=this._dsnObject,r=["Sentry sentry_version=7"];return r.push("sentry_client="+e+"/"+t),r.push("sentry_key="+n.user),n.pass&&r.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},e.prototype.getReportDialogEndpoint=function(e){void 0===e&&(e={});var t=this._dsnObject,n=this.getBaseApiEndpoint()+"embed/error-page/",r=[];for(var i in r.push("dsn="+t.toString()),e)if("dsn"!==i)if("user"===i){if(!e.user)continue;e.user.name&&r.push("name="+encodeURIComponent(e.user.name)),e.user.email&&r.push("email="+encodeURIComponent(e.user.email))}else r.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return r.length?n+"?"+r.join("&"):n},e.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},e.prototype._getIngestEndpoint=function(e){return""+this.getBaseApiEndpoint()+this._dsnObject.projectId+"/"+e+"/"},e.prototype._encodedAuth=function(){var e,t={sentry_key:this._dsnObject.user,sentry_version:"7"};return e=t,Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},e}(),KL=[];function HL(e){var t={};return function(e){var t=e.defaultIntegrations&&mu(e.defaultIntegrations)||[],n=e.integrations,r=[];if(Array.isArray(n)){var i=n.map((function(e){return e.name})),o=[];t.forEach((function(e){-1===i.indexOf(e.name)&&-1===o.indexOf(e.name)&&(r.push(e),o.push(e.name))})),n.forEach((function(e){-1===o.indexOf(e.name)&&(r.push(e),o.push(e.name))}))}else"function"==typeof n?(r=n(t),r=Array.isArray(r)?r:[r]):r=mu(t);var a=r.map((function(e){return e.name})),s="Debug";return-1!==a.indexOf(s)&&r.push.apply(r,mu(r.splice(a.indexOf(s),1))),r}(e).forEach((function(e){t[e.name]=e,function(e){-1===KL.indexOf(e.name)&&(e.setupOnce(PL,LL),KL.push(e.name),tL.log("Integration installed: "+e.name))}(e)})),t}var VL,$L=function(){function e(e,t){this._integrations={},this._processing=0,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=new NR(t.dsn))}return e.prototype.captureException=function(e,t,n){var r=this,i=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then((function(e){return r._captureEvent(e,t,n)})).then((function(e){i=e}))),i},e.prototype.captureMessage=function(e,t,n,r){var i=this,o=n&&n.event_id,a=vR(e)?this._getBackend().eventFromMessage(String(e),t,n):this._getBackend().eventFromException(e,n);return this._process(a.then((function(e){return i._captureEvent(e,n,r)})).then((function(e){o=e}))),o},e.prototype.captureEvent=function(e,t,n){var r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((function(e){r=e}))),r},e.prototype.captureSession=function(e){e.release?this._sendSession(e):tL.warn("Discarded session because of missing release")},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.flush=function(e){var t=this;return this._isClientProcessing(e).then((function(n){return t._getBackend().getTransport().close(e).then((function(e){return n&&e}))}))},e.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,e}))},e.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=HL(this._options))},e.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return tL.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},e.prototype._updateSessionFromEvent=function(e,t){var n,r,i,o=!1,a=!1,s=t.exception&&t.exception.values;if(s){a=!0;try{for(var u=hu(s),c=u.next();!c.done;c=u.next()){var d=c.value.mechanism;if(d&&!1===d.handled){o=!0;break}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}var l=t.user;if(!e.userAgent){var f=t.request?t.request.headers:{};for(var p in f)if("user-agent"===p.toLowerCase()){i=f[p];break}}e.update(fu(fu({},o&&{status:uR.Crashed}),{user:l,userAgent:i,errors:e.errors+Number(a||o)}))},e.prototype._sendSession=function(e){this._getBackend().sendSession(e)},e.prototype._isClientProcessing=function(e){var t=this;return new EL((function(n){var r=0,i=setInterval((function(){0==t._processing?(clearInterval(i),n(!0)):(r+=1,e&&r>=e&&(clearInterval(i),n(!1)))}),1)}))},e.prototype._getBackend=function(){return this._backend},e.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},e.prototype._prepareEvent=function(e,t,n){var r=this,i=this.getOptions().normalizeDepth,o=void 0===i?3:i,a=fu(fu({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:$R()),timestamp:e.timestamp||NL()});this._applyClientOptions(a),this._applyIntegrationsMetadata(a);var s=t;n&&n.captureContext&&(s=OL.clone(s).update(n.captureContext));var u=EL.resolve(a);return s&&(u=s.applyToEvent(a,n)),u.then((function(e){return"number"==typeof o&&o>0?r._normalizeEvent(e,o):e}))},e.prototype._normalizeEvent=function(e,t){if(!e)return null;var n=fu(fu(fu(fu(fu({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return fu(fu({},e),e.data&&{data:UR(e.data,t)})}))}),e.user&&{user:UR(e.user,t)}),e.contexts&&{contexts:UR(e.contexts,t)}),e.extra&&{extra:UR(e.extra,t)});return e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace),n},e.prototype._applyClientOptions=function(e){var t=this.getOptions(),n=t.environment,r=t.release,i=t.dist,o=t.maxValueLength,a=void 0===o?250:o;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=_R(e.message,a));var s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=_R(s.value,a));var u=e.request;u&&u.url&&(u.url=_R(u.url,a))},e.prototype._applyIntegrationsMetadata=function(e){var t=e.sdk,n=Object.keys(this._integrations);t&&n.length>0&&(t.integrations=n)},e.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},e.prototype._captureEvent=function(e,t,n){return this._processEvent(e,t,n).then((function(e){return e.event_id}),(function(e){tL.error(e)}))},e.prototype._processEvent=function(e,t,n){var r=this,i=this.getOptions(),o=i.beforeSend,a=i.sampleRate;if(!this._isEnabled())return EL.reject(new CR("SDK not enabled, will not send event."));var s="transaction"===e.type;return!s&&"number"==typeof a&&Math.random()>a?EL.reject(new CR("Discarding event because it's not included in the random sample (sampling rate = "+a+")")):this._prepareEvent(e,n,t).then((function(e){if(null===e)throw new CR("An event processor returned null, will not send event.");if(t&&t.data&&!0===t.data.__sentry__||s||!o)return e;var n=o(e,t);if(void 0===n)throw new CR("`beforeSend` method has to return `null` or a valid event.");return wR(n)?n.then((function(e){return e}),(function(e){throw new CR("beforeSend rejected with "+e)})):n})).then((function(e){if(null===e)throw new CR("`beforeSend` returned `null`, will not send event.");var t=n&&n.getSession&&n.getSession();return!s&&t&&r._updateSessionFromEvent(t,e),r._sendEvent(e),e})).then(null,(function(e){if(e instanceof CR)throw e;throw r.captureException(e,{data:{__sentry__:!0},originalException:e}),new CR("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))},e.prototype._process=function(e){var t=this;this._processing+=1,e.then((function(e){return t._processing-=1,e}),(function(e){return t._processing-=1,e}))},e}(),GL=function(){function e(){}return e.prototype.sendEvent=function(e){return EL.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:dR.Skipped})},e.prototype.close=function(e){return EL.resolve(!0)},e}(),WL=function(){function e(e){this._options=e,this._options.dsn||tL.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return e.prototype.eventFromException=function(e,t){throw new CR("Backend has to implement `eventFromException` method")},e.prototype.eventFromMessage=function(e,t,n){throw new CR("Backend has to implement `eventFromMessage` method")},e.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,(function(e){tL.error("Error while sending event: "+e)}))},e.prototype.sendSession=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,(function(e){tL.error("Error while sending session: "+e)})):tL.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.getTransport=function(){return this._transport},e.prototype._setupTransport=function(){return new GL},e}();function YL(e,t){return{body:JSON.stringify({sent_at:(new Date).toISOString()})+"\n"+JSON.stringify({type:"session"})+"\n"+JSON.stringify(e),type:"session",url:t.getEnvelopeEndpointWithUrlEncodedAuth()}}function QL(e,t){var n=e.tags||{},r=n.__sentry_samplingMethod,i=n.__sentry_sampleRate,o=pu(n,["__sentry_samplingMethod","__sentry_sampleRate"]);e.tags=o;var a="transaction"===e.type,s={body:JSON.stringify(e),type:e.type||"event",url:a?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};if(a){var u=JSON.stringify({event_id:e.event_id,sent_at:(new Date).toISOString()})+"\n"+JSON.stringify({type:e.type,sample_rates:[{id:r,rate:i}]})+"\n"+s.body;s.body=u}return s}var XL=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){VL=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.__sentry_original__||this;return VL.apply(n,e)}},e.id="FunctionToString",e}(),JL=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],ZL=function(){function e(t){void 0===t&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(){PL((function(t){var n=LL();if(!n)return t;var r=n.getIntegration(e);if(r){var i=n.getClient(),o=i?i.getOptions():{},a=r._mergeOptions(o);if(r._shouldDropEvent(t,a))return null}return t}))},e.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(tL.warn("Event dropped due to being internal Sentry Error.\nEvent: "+WR(e)),!0):this._isIgnoredError(e,t)?(tL.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+WR(e)),!0):this._isDeniedUrl(e,t)?(tL.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+WR(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,t)&&(tL.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+WR(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},e.prototype._isSentryError=function(e,t){if(!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return!1}},e.prototype._isIgnoredError=function(e,t){return!(!t.ignoreErrors||!t.ignoreErrors.length)&&this._getPossibleEventMessages(e).some((function(e){return t.ignoreErrors.some((function(t){return MR(e,t)}))}))},e.prototype._isDeniedUrl=function(e,t){if(!t.denyUrls||!t.denyUrls.length)return!1;var n=this._getEventFilterUrl(e);return!!n&&t.denyUrls.some((function(e){return MR(n,e)}))},e.prototype._isAllowedUrl=function(e,t){if(!t.allowUrls||!t.allowUrls.length)return!0;var n=this._getEventFilterUrl(e);return!n||t.allowUrls.some((function(e){return MR(n,e)}))},e.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:mu(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:mu(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:mu(this._options.ignoreErrors||[],e.ignoreErrors||[],JL),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},e.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,r=void 0===n?"":n,i=t.value,o=void 0===i?"":i;return[""+o,r+": "+o]}catch(t){return tL.error("Cannot extract message for event "+WR(e)),[]}return[]},e.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return t&&t[t.length-1].filename||null}if(e.exception){var n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return n&&n[n.length-1].filename||null}return null}catch(t){return tL.error("Cannot extract url for event "+WR(e)),null}},e.id="InboundFilters",e}(),eB=Object.freeze({__proto__:null,FunctionToString:XL,InboundFilters:ZL}),tB="?",nB=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,rB=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,iB=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,oB=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,aB=/\((\S*)(?::(\d+))(?::(\d+))\)/,sB=/Minified React error #\d+;/i;function uB(e){var t=null,n=0;e&&("number"==typeof e.framesToPop?n=e.framesToPop:sB.test(e.message)&&(n=1));try{if(t=function(e){if(!e||!e.stacktrace)return null;for(var t,n=e.stacktrace,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,o=n.split("\n"),a=[],s=0;s<o.length;s+=2){var u=null;(t=r.exec(o[s]))?u={url:t[2],func:t[3],args:[],line:+t[1],column:null}:(t=i.exec(o[s]))&&(u={url:t[6],func:t[3]||t[4],args:t[5]?t[5].split(","):[],line:+t[1],column:+t[2]}),u&&(!u.func&&u.line&&(u.func=tB),a.push(u))}if(!a.length)return null;return{message:dB(e),name:e.name,stack:a}}(e))return cB(t,n)}catch(e){}try{if(t=function(e){if(!e||!e.stack)return null;for(var t,n,r,i=[],o=e.stack.split("\n"),a=0;a<o.length;++a){if(n=nB.exec(o[a])){var s=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(t=aB.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]),r={url:n[2]&&0===n[2].indexOf("address at ")?n[2].substr("address at ".length):n[2],func:n[1]||tB,args:s?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=iB.exec(o[a]))r={url:n[2],func:n[1]||tB,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=rB.exec(o[a])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(t=oB.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=t[1],n[4]=t[2],n[5]=""):0!==a||n[5]||void 0===e.columnNumber||(i[0].column=e.columnNumber+1),r={url:n[3],func:n[1]||tB,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=tB),i.push(r)}if(!i.length)return null;return{message:dB(e),name:e.name,stack:i}}(e))return cB(t,n)}catch(e){}return{message:dB(e),name:e&&e.name,stack:[],failed:!0}}function cB(e,t){try{return fu(fu({},e),{stack:e.stack.slice(t)})}catch(t){return e}}function dB(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function lB(e){var t=pB(e.stack),n={type:e.name,value:e.message};return t&&t.length&&(n.stacktrace={frames:t}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function fB(e){return{exception:{values:[lB(e)]}}}function pB(e){if(!e||!e.length)return[];var t=e,n=t[0].func||"",r=t[t.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1)),-1!==r.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,50).map((function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}})).reverse()}function hB(e,t,n){var r,i;if(void 0===n&&(n={}),fR(e)&&e.error)return r=fB(uB(e=e.error));if(pR(e)||(i=e,"[object DOMException]"===Object.prototype.toString.call(i))){var o=e,a=o.name||(pR(o)?"DOMError":"DOMException"),s=o.message?a+": "+o.message:a;return QR(r=vB(s,t,n),s),"code"in o&&(r.tags=fu(fu({},r.tags),{"DOMException.code":""+o.code})),r}return lR(e)?r=fB(uB(e)):mR(e)||gR(e)?(XR(r=function(e,t,n){var r={exception:{values:[{type:gR(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+FR(e)}]},extra:{__serialized__:DR(e)}};if(t){var i=pB(uB(t).stack);r.stacktrace={frames:i}}return r}(e,t,n.rejection),{synthetic:!0}),r):(QR(r=vB(e,t,n),""+e,void 0),XR(r,{synthetic:!0}),r)}function vB(e,t,n){void 0===n&&(n={});var r={message:e};if(n.attachStacktrace&&t){var i=pB(uB(t).stack);r.stacktrace={frames:i}}return r}var mB=function(){function e(e){this.options=e,this._buffer=new kL(30),this._rateLimits={},this._api=new qL(this.options.dsn),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}return e.prototype.sendEvent=function(e){throw new CR("Transport Class has to implement `sendEvent` method")},e.prototype.close=function(e){return this._buffer.drain(e)},e.prototype._handleResponse=function(e){var t=e.requestType,n=e.response,r=e.headers,i=e.resolve,o=e.reject,a=dR.fromHttpCode(n.status);this._handleRateLimit(r)&&tL.warn("Too many requests, backing off until: "+this._disabledUntil(t)),a!==dR.Success?o(n):i({status:a})},e.prototype._disabledUntil=function(e){return this._rateLimits[e]||this._rateLimits.all},e.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},e.prototype._handleRateLimit=function(e){var t,n,r,i,o=Date.now(),a=e["x-sentry-rate-limits"],s=e["retry-after"];if(a){try{for(var u=hu(a.trim().split(",")),c=u.next();!c.done;c=u.next()){var d=c.value.split(":",2),l=parseInt(d[0],10),f=1e3*(isNaN(l)?60:l);try{for(var p=(r=void 0,hu(d[1].split(";"))),h=p.next();!h.done;h=p.next()){var v=h.value;this._rateLimits[v||"all"]=new Date(o+f)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return!0}return!!s&&(this._rateLimits.all=new Date(o+function(e,t){if(!t)return 6e4;var n=parseInt(""+t,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+t);return isNaN(r)?6e4:r-e}(o,s)),!0)},e}(),gB=VR(),yB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return lu(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(QL(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(YL(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;if(this._isRateLimited(e.type))return Promise.reject({event:t,type:e.type,reason:"Transport locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429});var r={body:e.body,method:"POST",referrerPolicy:iL()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add(new EL((function(t,i){gB.fetch(e.url,r).then((function(r){var o={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n._handleResponse({requestType:e.type,response:r,headers:o,resolve:t,reject:i})})).catch(i)})))},t}(mB),wB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return lu(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(QL(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(YL(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;return this._isRateLimited(e.type)?Promise.reject({event:t,type:e.type,reason:"Transport locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429}):this._buffer.add(new EL((function(t,r){var i=new XMLHttpRequest;for(var o in i.onreadystatechange=function(){if(4===i.readyState){var o={"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")};n._handleResponse({requestType:e.type,response:i,headers:o,resolve:t,reject:r})}},i.open("POST",e.url),n.options.headers)n.options.headers.hasOwnProperty(o)&&i.setRequestHeader(o,n.options.headers[o]);i.send(e.body)})))},t}(mB),bB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return lu(t,e),t.prototype.eventFromException=function(e,t){return function(e,t,n){var r=hB(t,n&&n.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return XR(r,{handled:!0,type:"generic"}),r.level=cR.Error,n&&n.event_id&&(r.event_id=n.event_id),EL.resolve(r)}(this._options,e,t)},t.prototype.eventFromMessage=function(e,t,n){return void 0===t&&(t=cR.Info),function(e,t,n,r){void 0===n&&(n=cR.Info);var i=vB(t,r&&r.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),EL.resolve(i)}(this._options,e,t,n)},t.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t=fu(fu({},this._options.transportOptions),{dsn:this._options.dsn});return this._options.transport?new this._options.transport(t):nL()?new yB(t):new wB(t)},t}(WL),SB=0;function EB(){return SB>0}function kB(){SB+=1,setTimeout((function(){SB-=1}))}function CB(e,t,n){if(void 0===t&&(t={}),"function"!=typeof e)return e;try{if(e.__sentry__)return e;if(e.__sentry_wrapped__)return e.__sentry_wrapped__}catch(t){return e}var r=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var i=r.map((function(e){return CB(e,t)}));return e.handleEvent?e.handleEvent.apply(this,i):e.apply(this,i)}catch(e){throw kB(),FL((function(n){n.addEventProcessor((function(e){var n=fu({},e);return t.mechanism&&(QR(n,void 0,void 0),XR(n,t.mechanism)),n.extra=fu(fu({},n.extra),{arguments:r}),n})),UL(e)})),e}};try{for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch(e){}e.prototype=e.prototype||{},r.prototype=e.prototype,Object.defineProperty(e,"__sentry_wrapped__",{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:e}});try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:function(){return e.name}})}catch(e){}return r}function xB(e){if(void 0===e&&(e={}),e.eventId)if(e.dsn){var t=document.createElement("script");t.async=!0,t.src=new qL(e.dsn).getReportDialogEndpoint(e),e.onLoad&&(t.onload=e.onLoad),(document.head||document.body).appendChild(t)}else tL.error("Missing dsn option in showReportDialog call");else tL.error("Missing eventId option in showReportDialog call")}var TB=function(){function e(t){this.name=e.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=fu({onerror:!0,onunhandledrejection:!0},t)}return e.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(tL.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(tL.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},e.prototype._installGlobalOnErrorHandler=function(){var t=this;this._onErrorHandlerInstalled||(dL({callback:function(n){var r=n.error,i=LL(),o=i.getIntegration(e),a=r&&!0===r.__sentry_own_request__;if(o&&!EB()&&!a){var s=i.getClient(),u=vR(r)?t._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):t._enhanceEventWithInitialFrame(hB(r,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);XR(u,{handled:!1,type:"onerror"}),i.captureEvent(u,{originalException:r})}},type:"error"}),this._onErrorHandlerInstalled=!0)},e.prototype._installGlobalOnUnhandledRejectionHandler=function(){var t=this;this._onUnhandledRejectionHandlerInstalled||(dL({callback:function(n){var r=n;try{"reason"in n?r=n.reason:"detail"in n&&"reason"in n.detail&&(r=n.detail.reason)}catch(e){}var i=LL(),o=i.getIntegration(e),a=r&&!0===r.__sentry_own_request__;if(!o||EB()||a)return!0;var s=i.getClient(),u=vR(r)?t._eventFromRejectionWithPrimitive(r):hB(r,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!0});u.level=cR.Error,XR(u,{handled:!1,type:"onunhandledrejection"}),i.captureEvent(u,{originalException:r})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},e.prototype._eventFromIncompleteOnError=function(e,t,n,r){var i,o=fR(e)?e.message:e;if(hR(o)){var a=o.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);a&&(i=a[1],o=a[2])}var s={exception:{values:[{type:i||"Error",value:o}]}};return this._enhanceEventWithInitialFrame(s,t,n,r)},e.prototype._eventFromRejectionWithPrimitive=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},e.prototype._enhanceEventWithInitialFrame=function(e,t,n,r){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var i=isNaN(parseInt(r,10))?void 0:r,o=isNaN(parseInt(n,10))?void 0:n,a=hR(t)&&t.length>0?t:function(){try{return document.location.href}catch(e){return""}}();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:i,filename:a,function:"?",in_app:!0,lineno:o}),e},e.id="GlobalHandlers",e}(),NB=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],OB=function(){function e(t){this.name=e.id,this._options=fu({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}return e.prototype.setupOnce=function(){var e=VR();(this._options.setTimeout&&RR(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&RR(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&RR(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&RR(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget)&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:NB).forEach(this._wrapEventTarget.bind(this))},e.prototype._wrapTimeFunction=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0];return t[0]=CB(r,{mechanism:{data:{function:PR(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}},e.prototype._wrapRAF=function(e){return function(t){return e.call(this,CB(t,{mechanism:{data:{function:"requestAnimationFrame",handler:PR(e)},handled:!0,type:"instrument"}}))}},e.prototype._wrapEventTarget=function(e){var t=VR(),n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(RR(n,"addEventListener",(function(t){return function(n,r,i){try{"function"==typeof r.handleEvent&&(r.handleEvent=CB(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:PR(r),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.call(this,n,CB(r,{mechanism:{data:{function:"addEventListener",handler:PR(r),target:e},handled:!0,type:"instrument"}}),i)}})),RR(n,"removeEventListener",(function(e){return function(t,n,r){var i,o=n;try{var a=null===(i=o)||void 0===i?void 0:i.__sentry_wrapped__;a&&e.call(this,t,a,r)}catch(e){}return e.call(this,t,o,r)}})))},e.prototype._wrapXHR=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this,i=["onload","onerror","onprogress","onreadystatechange"];return i.forEach((function(e){e in r&&"function"==typeof r[e]&&RR(r,e,(function(t){var n={mechanism:{data:{function:e,handler:PR(t)},handled:!0,type:"instrument"}};return t.__sentry_original__&&(n.mechanism.data.handler=PR(t.__sentry_original__)),CB(t,n)}))})),e.apply(this,t)}},e.id="TryCatch",e}(),AB=function(){function e(t){this.name=e.id,this._options=fu({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}return e.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&LL().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:WR(e)},{event:e})},e.prototype.setupOnce=function(){var e=this;this._options.console&&dL({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._consoleBreadcrumb.apply(e,mu(t))},type:"console"}),this._options.dom&&dL({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._domBreadcrumb.apply(e,mu(t))},type:"dom"}),this._options.xhr&&dL({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._xhrBreadcrumb.apply(e,mu(t))},type:"xhr"}),this._options.fetch&&dL({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._fetchBreadcrumb.apply(e,mu(t))},type:"fetch"}),this._options.history&&dL({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._historyBreadcrumb.apply(e,mu(t))},type:"history"})},e.prototype._consoleBreadcrumb=function(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:cR.fromString(e.level),message:IR(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+(IR(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}LL().addBreadcrumb(t,{input:e.args,level:e.level})},e.prototype._domBreadcrumb=function(e){var t;try{t=e.event.target?SR(e.event.target):SR(e.event)}catch(e){t="<unknown>"}0!==t.length&&LL().addBreadcrumb({category:"ui."+e.name,message:t},{event:e.event,name:e.name})},e.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},n=t.method,r=t.url,i=t.status_code,o=t.body;LL().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:i},type:"http"},{xhr:e.xhr,input:o})}else;},e.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?LL().addBreadcrumb({category:"fetch",data:e.fetchData,level:cR.Error,type:"http"},{data:e.error,input:e.args}):LL().addBreadcrumb({category:"fetch",data:fu(fu({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},e.prototype._historyBreadcrumb=function(e){var t=VR(),n=e.from,r=e.to,i=GR(t.location.href),o=GR(n),a=GR(r);o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(r=a.relative),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),LL().addBreadcrumb({category:"navigation",data:{from:n,to:r}})},e.id="Breadcrumbs",e}(),PB=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._key=t.key||"cause",this._limit=t.limit||5}return e.prototype.setupOnce=function(){PL((function(t,n){var r=LL().getIntegration(e);return r?r._handler(t,n):t}))},e.prototype._handler=function(e,t){if(!(e.exception&&e.exception.values&&t&&bR(t.originalException,Error)))return e;var n=this._walkErrorTree(t.originalException,this._key);return e.exception.values=mu(n,e.exception.values),e},e.prototype._walkErrorTree=function(e,t,n){if(void 0===n&&(n=[]),!bR(e[t],Error)||n.length+1>=this._limit)return n;var r=lB(uB(e[t]));return this._walkErrorTree(e[t],t,mu([r],n))},e.id="LinkedErrors",e}(),_B=VR(),IB=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){PL((function(t){var n,r,i;if(LL().getIntegration(e)){if(!_B.navigator&&!_B.location&&!_B.document)return t;var o=(null===(n=t.request)||void 0===n?void 0:n.url)||(null===(r=_B.location)||void 0===r?void 0:r.href),a=(_B.document||{}).referrer,s=(_B.navigator||{}).userAgent,u=fu(fu(fu({},null===(i=t.request)||void 0===i?void 0:i.headers),a&&{Referer:a}),s&&{"User-Agent":s}),c=fu(fu({},o&&{url:o}),{headers:u});return fu(fu({},t),{request:c})}return t}))},e.id="UserAgent",e}(),MB=Object.freeze({__proto__:null,GlobalHandlers:TB,TryCatch:OB,Breadcrumbs:AB,LinkedErrors:PB,UserAgent:IB}),RB="5.30.0",LB=function(e){function t(t){return void 0===t&&(t={}),e.call(this,bB,t)||this}return lu(t,e),t.prototype.showReportDialog=function(e){void 0===e&&(e={}),VR().document&&(this._isEnabled()?xB(fu(fu({},e),{dsn:e.dsn||this.getDsn()})):tL.error("Trying to call showReportDialog with Sentry Client disabled"))},t.prototype._prepareEvent=function(t,n,r){return t.platform=t.platform||"javascript",t.sdk=fu(fu({},t.sdk),{name:"sentry.javascript.browser",packages:mu(t.sdk&&t.sdk.packages||[],[{name:"npm:@sentry/browser",version:RB}]),version:RB}),e.prototype._prepareEvent.call(this,t,n,r)},t.prototype._sendEvent=function(t){var n=this.getIntegration(AB);n&&n.addSentryBreadcrumb(t),e.prototype._sendEvent.call(this,t)},t}($L),BB={},DB=VR();DB.Sentry&&DB.Sentry.Integrations&&(BB=DB.Sentry.Integrations);var zB,jB=fu(fu(fu({},BB),eB),MB);!function(e){e[e.String=0]="String",e[e.Error=1]="Error",e[e.Unknown=2]="Unknown"}(zB||(zB={}));const UB=e=>"string"==typeof e?zB.String:e instanceof Error?zB.Error:zB.Unknown;Error;const FB=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],qB=({from:e,seen:t,to_:n,forceEnumerable:r})=>{const i=n||(Array.isArray(e)?[]:{});t.push(e);for(const[n,o]of Object.entries(e))"function"!=typeof o&&(o&&"object"==typeof o?t.includes(e[n])?i[n]="[Circular]":i[n]=qB({from:e[n],seen:t.slice(),forceEnumerable:r}):i[n]=o);for(const{property:t,enumerable:n}of FB)"string"==typeof e[t]&&Object.defineProperty(i,t,{value:e[t],enumerable:!!r||n,configurable:!0,writable:!0});return i};var KB=e=>"object"==typeof e&&null!==e?qB({from:e,seen:[],forceEnumerable:!0}):"function"==typeof e?`[Function: ${e.name||"anonymous"}]`:e;const HB=(e,t)=>t.includes(e);var VB=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const $B=(e,t)=>{const n=new LB(Object.assign({integrations:[new jB.Breadcrumbs({console:!1})],beforeSend:e=>(null!=e.contexts&&(e.contexts=Gs("credentials",e.contexts)),e)},t)),r=new IL(n);return{onEvent:t=>{const{level:n,message:i,context:o,tags:a}=t;!1!==HB(n,e)&&((e,t,n,r,i)=>{e.withScope((o=>{switch(o.setLevel(n),o.setContext("context",r),o.setTags(i),UB(t)){case zB.String:e.captureMessage(t);break;case zB.Error:e.captureException(t);break;case zB.Unknown:default:e.captureException("Unidentifed payload captured")}}))})(r,i,cR.fromString(n),o,a)},captureCrumb:e=>{const[t,n]=e,{level:i,message:o,context:a}=n,s={message:o,data:Object.assign({clientTimestamp:t},a),level:cR.fromString(i)};null!=a.category&&(s.category=a.category),r.addBreadcrumb(s)},teardown:()=>VB(void 0,void 0,void 0,(function*(){yield n.close(2e3)}))}};
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var GB=function(){return(GB=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function WB(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function YB(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function QB(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var XB,JB,ZB,eD=1e3,tD=6e4;!function(e){e.BEFORE_UNLOAD="beforeunload",e.CLICK="click",e.KEY_DOWN="keydown",e.LOAD="load",e.POP_STATE="popstate",e.SCROLL="scroll",e.TOUCH_START="touchstart",e.VISIBILITY_CHANGE="visibilitychange",e.DOM_CONTENT_LOADED="DOMContentLoaded"}(XB||(XB={})),function(e){e.DOCUMENT="document",e.XHR="xhr",e.BEACON="beacon",e.FETCH="fetch",e.CSS="css",e.JS="js",e.IMAGE="image",e.FONT="font",e.MEDIA="media",e.OTHER="other"}(JB||(JB={})),function(e){e.FETCH="fetch",e.XHR="xhr"}(ZB||(ZB={}));var nD,rD=function(e){return Array.isArray(e)},iD=function(e){return!Array.isArray(e)&&"object"==typeof e};function oD(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(e,t){return rD(e)&&rD(t)?QB(Array(Math.max(e.length,t.length))).map((function(n,r){return oD(e[r],t[r])})):iD(e)&&iD(t)?Object.keys(t).reduce((function(n,r){var i;return GB(GB({},n),((i={})[r]=oD(e[r],t[r]),i))}),e):void 0===t?e:t}),e)}function aD(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];t.forEach((function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))}function sD(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,sD)}function uD(){}function cD(e,t,n){if(null==e)return JSON.stringify(e);var r=[!1,void 0];dD(e)&&(r=[!0,e.toJSON],delete e.toJSON);var i,o,a=[!1,void 0];"object"==typeof e&&dD(i=Object.getPrototypeOf(e))&&(a=[!0,i.toJSON],delete i.toJSON);try{o=JSON.stringify(e,void 0,n)}catch(e){o="<error: unable to serialize object>"}finally{r[0]&&(e.toJSON=r[1]),a[0]&&(i.toJSON=a[1])}return o}function dD(e){return"object"==typeof e&&null!==e&&e.hasOwnProperty("toJSON")}function lD(e){return Math.floor(function(){void 0===nD&&(nD=performance.timing.navigationStart);return nD}()+e)}function fD(e){if(e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return e.protocol+"//"+t}function pD(e,t,n,r){var i=new Date;i.setTime(i.getTime()+n);var o="expires="+i.toUTCString(),a=r&&r.crossSite?"none":"strict",s=r&&r.domain?";domain="+r.domain:"",u=r&&r.secure?";secure":"";document.cookie=e+"="+t+";"+o+";path=/;samesite="+a+s+u}function hD(e){return function(e,t){var n=e.match("(?:^|;)\\s*"+t+"\\s*=\\s*([^;]+)");return n?n[1]:void 0}(document.cookie,e)}var vD="?",mD=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function gD(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var yD=function(){var e,t,n,r,i,o,a=[];function s(e,t,n){var r;for(var i in a)if(gD(a,i))try{a[i](e,t,n)}catch(e){r=e}if(r)throw r}function u(e,r,i,o,a){if(t)wD.augmentStackTraceWithInitialElement(t,r,i,""+e),d();else if(a)s(wD(a),!0,a);else{var u,c={url:r,column:o,line:i},l=e;if("[object String]"==={}.toString.call(e)){var f=l.match(mD);f&&(u=f[1],l=f[2])}s({name:u,message:l,stack:[c]},!0)}return!!n&&n.apply(this,arguments)}function c(e){var t=e.reason||"Empty reason";s(wD(t),!0,t)}function d(){var n=t,r=e;t=void 0,e=void 0,s(n,!1,r)}function l(n){if(t){if(e===n)return;d()}var r=wD(n);throw t=r,e=n,setTimeout((function(){e===n&&d()}),r.incomplete?2e3:0),n}return l.subscribe=function(e){!function(){if(r)return;n=window.onerror,window.onerror=_D(u),r=!0}(),function(){if(o)return;i=null!==window.onunhandledrejection?window.onunhandledrejection:void 0,window.onunhandledrejection=_D(c),o=!0}(),a.push(e)},l.unsubscribe=function(e){for(var t=a.length-1;t>=0;t-=1)a[t]===e&&a.splice(t,1);0===a.length&&(r&&(window.onerror=n,r=!1),o&&(window.onunhandledrejection=i,o=!1))},l.traceKitWindowOnError=u,l}(),wD=function(){function e(e){if(e.stack){for(var t,n,r,i,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,s=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,u=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,c=/\((\S*)(?::(\d+))(?::(\d+))\)/,d=e.stack.split("\n"),l=[],f=0,p=d.length;f<p;f+=1){if(o.exec(d[f])){var h=(r=o.exec(d[f]))[2]&&0===r[2].indexOf("native");t=r[2]&&0===r[2].indexOf("eval"),n=c.exec(r[2]),t&&n&&(r[2]=n[1],r[3]=n[2],r[4]=n[3]),i={args:h?[r[2]]:[],column:r[4]?+r[4]:void 0,func:r[1]||vD,line:r[3]?+r[3]:void 0,url:h?void 0:r[2]}}else if(s.exec(d[f]))i={args:[],column:(r=s.exec(d[f]))[4]?+r[4]:void 0,func:r[1]||vD,line:+r[3],url:r[2]};else{if(!a.exec(d[f]))continue;t=(r=a.exec(d[f]))[3]&&r[3].indexOf(" > eval")>-1,n=u.exec(r[3]),t&&n?(r[3]=n[1],r[4]=n[2],r[5]=void 0):0!==f||r[5]||void 0===e.columnNumber||(l[0].column=e.columnNumber+1),i={args:r[2]?r[2].split(","):[],column:r[5]?+r[5]:void 0,func:r[1]||vD,line:r[4]?+r[4]:void 0,url:r[3]}}!i.func&&i.line&&(i.func=vD),l.push(i)}if(l.length)return{stack:l,message:e.message,name:e.name}}}function t(e,t,n,r){var i={url:t,line:n?+n:void 0};if(i.url&&i.line){e.incomplete=!1;var o=e.stack;if(o.length>0&&o[0].url===i.url){if(o[0].line===i.line)return!1;if(!o[0].line&&o[0].func===i.func)return o[0].line=i.line,o[0].context=i.context,!1}return o.unshift(i),e.partial=!0,!0}return e.incomplete=!0,!1}function n(e,r){for(var i,o,a=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,s=[],u={},c=!1,d=n.caller;d&&!c;d=d.caller)d!==wD&&d!==yD&&(o={args:[],column:void 0,func:vD,line:void 0,url:void 0},i=a.exec(d.toString()),d.name?o.func=d.name:i&&(o.func=i[1]),void 0===o.func&&(o.func=i?i.input.substring(0,i.input.indexOf("{")):void 0),u[""+d]?c=!0:u[""+d]=!0,s.push(o));r&&s.splice(0,r);var l={stack:s,message:e.message,name:e.name};return t(l,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),l}function r(t,r){var i,o=void 0===r?0:+r;try{if(i=function(e){var t=e.stacktrace;if(t){for(var n,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,o=t.split("\n"),a=[],s=0;s<o.length;s+=2){var u=void 0;r.exec(o[s])?u={args:[],column:void 0,func:(n=r.exec(o[s]))[3],line:+n[1],url:n[2]}:i.exec(o[s])&&(u={args:(n=i.exec(o[s]))[5]?n[5].split(","):[],column:+n[2],func:n[3]||n[4],line:+n[1],url:n[6]}),u&&(!u.func&&u.line&&(u.func=vD),u.context=[o[s+1]],a.push(u))}if(a.length)return{stack:a,message:e.message,name:e.name}}}(t))return i}catch(e){}try{if(i=e(t))return i}catch(e){}try{if(i=function(e){var t=e.message.split("\n");if(!(t.length<4)){var n,r=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,i=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,o=/^\s*Line (\d+) of function script\s*$/i,a=[],s=window&&window.document&&window.document.getElementsByTagName("script"),u=[];for(var c in s)gD(s,c)&&!s[c].src&&u.push(s[c]);for(var d=2;d<t.length;d+=2){var l=void 0;r.exec(t[d])?l={args:[],column:void 0,func:(n=r.exec(t[d]))[3],line:+n[1],url:n[2]}:i.exec(t[d])?l={args:[],column:void 0,func:(n=i.exec(t[d]))[4],line:+n[1],url:n[3]}:o.exec(t[d])&&(n=o.exec(t[d]),l={url:window.location.href.replace(/#.*$/,""),args:[],column:void 0,func:"",line:+n[1]}),l&&(l.func||(l.func=vD),l.context=[t[d+1]],a.push(l))}if(a.length)return{stack:a,message:t[0],name:e.name}}}(t))return i}catch(e){}try{if(i=n(t,o+1))return i}catch(e){}return{message:t.message,name:t.name,stack:[]}}return r.augmentStackTraceWithInitialElement=t,r.computeStackTraceFromStackProp=e,r.ofCaller=function(e){var t=1+(void 0===e?0:+e);try{throw new Error}catch(e){return wD(e,t+1)}},r}(),bD=/[^\u0000-\u007F]/,SD=function(){function e(e,t,n){void 0===n&&(n=!1),this.endpointUrl=e,this.bytesLimit=t,this.withBatchTime=n}return e.prototype.send=function(e,t){var n=this.withBatchTime?function(e){return e+(-1===e.indexOf("?")?"?":"&")+"batch_time="+(new Date).getTime()}(this.endpointUrl):this.endpointUrl;if(navigator.sendBeacon&&t<this.bytesLimit&&navigator.sendBeacon(n,e))return;var r=new XMLHttpRequest;r.open("POST",n,!0),r.send(e)},e}();var ED,kD=function(){function e(e,t,n,r,i,o){void 0===o&&(o=uD),this.request=e,this.maxSize=t,this.bytesLimit=n,this.maxMessageSize=r,this.flushTimeout=i,this.beforeUnloadCallback=o,this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesSize=0,this.bufferMessageCount=0,this.flushOnVisibilityHidden(),this.flushPeriodically()}return e.prototype.add=function(e){this.addOrUpdate(e)},e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)},e.prototype.flush=function(){if(0!==this.bufferMessageCount){var e=QB(this.pushOnlyBuffer,(t=this.upsertBuffer,n=[],Object.keys(t).forEach((function(e){n.push(t[e])})),n));this.request.send(e.join("\n"),this.bufferBytesSize),this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesSize=0,this.bufferMessageCount=0}var t,n},e.prototype.sizeInBytes=function(e){return bD.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length},e.prototype.addOrUpdate=function(e,t){var n=this.process(e),r=n.processedMessage,i=n.messageBytesSize;i>=this.maxMessageSize?console.warn("Discarded a message whose size was bigger than the maximum allowed size "+this.maxMessageSize+"KB."):(this.hasMessageFor(t)&&this.remove(t),this.willReachedBytesLimitWith(i)&&this.flush(),this.push(r,i,t),this.isFull()&&this.flush())},e.prototype.process=function(e){var t=cD(e);return{processedMessage:t,messageBytesSize:this.sizeInBytes(t)}},e.prototype.push=function(e,t,n){this.bufferMessageCount>0&&(this.bufferBytesSize+=1),void 0!==n?this.upsertBuffer[n]=e:this.pushOnlyBuffer.push(e),this.bufferBytesSize+=t,this.bufferMessageCount+=1},e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var n=this.sizeInBytes(t);this.bufferBytesSize-=n,this.bufferMessageCount-=1,this.bufferMessageCount>0&&(this.bufferBytesSize-=1)},e.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},e.prototype.willReachedBytesLimitWith=function(e){return this.bufferBytesSize+e+1>=this.bytesLimit},e.prototype.isFull=function(){return this.bufferMessageCount===this.maxSize||this.bufferBytesSize>=this.bytesLimit},e.prototype.flushPeriodically=function(){var e=this;setTimeout((function(){e.flush(),e.flushPeriodically()}),this.flushTimeout)},e.prototype.flushOnVisibilityHidden=function(){var e=this;navigator.sendBeacon&&(window.addEventListener(XB.BEFORE_UNLOAD,_D(this.beforeUnloadCallback)),document.addEventListener(XB.VISIBILITY_CHANGE,_D((function(){"hidden"===document.visibilityState&&e.flush()}))),window.addEventListener(XB.BEFORE_UNLOAD,_D((function(){return e.flush()}))))},e}();!function(e){e.info="info",e.error="error"}(ED||(ED={}));var CD,xD,TD,ND,OD={maxMessagesPerPage:0,sentMessageCount:0};function AD(e){if(e.internalMonitoringEndpoint){var t=function(e){var t,n=r(e.internalMonitoringEndpoint);void 0!==e.replica&&(t=r(e.replica.internalMonitoringEndpoint));function r(t){return new kD(new SD(t,e.batchBytesLimit),e.maxBatchSize,e.batchBytesLimit,e.maxMessageSize,e.flushTimeout)}function i(e){return oD({date:(new Date).getTime(),view:{referrer:document.referrer,url:window.location.href}},void 0!==CD?CD():{},e)}return{add:function(e){var r=i(e);n.add(r),t&&t.add(r)}}}(e);aD(OD,{batch:t,maxMessagesPerPage:e.maxInternalMonitoringMessagesPerPage,sentMessageCount:0})}return{setExternalContextProvider:function(e){CD=e}}}function PD(e,t,n){var r=n.value;n.value=function(){var e=OD.batch?_D(r):r;return e.apply(this,arguments)}}function _D(e){return function(){try{return e.apply(this,arguments)}catch(e){RD(e);try{ID(e)}catch(e){RD(e)}}}}function ID(e){var t;t=GB(GB({},function(e){if(e instanceof Error){var t=wD(e);return{error:{kind:t.name,stack:rz(t)},message:t.message}}return{error:{stack:"Not an instance of error"},message:"Uncaught "+cD(e)}}(e)),{status:ED.error}),OD.batch&&OD.sentMessageCount<OD.maxMessagesPerPage&&(OD.sentMessageCount+=1,OD.batch.add(t))}function MD(e){OD.debugMode=e}function RD(e){OD.debugMode&&console.warn("[INTERNAL ERROR]",e)}function LD(e){return zD(e,fD(window.location)).href}function BD(e,t){return DD(e)===DD(t)}function DD(e){return fD(zD(e))}function zD(e,t){if(function(){if(void 0!==xD)return xD;try{var e=new URL("http://test/path");return xD="http://test/path"===e.href}catch(e){xD=!1}return xD}())return void 0!==t?new URL(e,t):new URL(e);if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: '"+e+"'");var n=document,r=n.createElement("a");if(void 0!==t){var i=(n=document.implementation.createHTMLDocument("")).createElement("base");i.href=t,n.head.appendChild(i),n.body.appendChild(r)}return r.href=e,r}var jD=[],UD=[];function FD(){return TD||(!function(){if(!window.fetch)return;ND=window.fetch,window.fetch=_D((function(e,t){var n=this,r=t&&t.method||"object"==typeof e&&e.method||"GET",i=LD("object"==typeof e&&e.url||e),o={init:t,method:r,startTime:performance.now(),url:i},a=function(e){return WB(n,void 0,void 0,(function(){var t,n;return YB(this,(function(r){switch(r.label){case 0:return o.duration=performance.now()-o.startTime,"stack"in e||e instanceof Error?(o.status=0,o.response=rz(wD(e)),UD.forEach((function(e){return e(o)})),[3,6]):[3,1];case 1:if(!("status"in e))return[3,6];t=void 0,r.label=2;case 2:return r.trys.push([2,4,,5]),[4,e.clone().text()];case 3:return t=r.sent(),[3,5];case 4:return n=r.sent(),t="Unable to retrieve response: "+n,[3,5];case 5:o.response=t,o.responseType=e.type,o.status=e.status,UD.forEach((function(e){return e(o)})),r.label=6;case 6:return[2]}}))}))};jD.forEach((function(e){return e(o)}));var s=ND.call(this,e,o.init);return s.then(_D(a),_D(a)),s}))}(),TD={beforeSend:function(e){jD.push(e)},onRequestComplete:function(e){UD.push(e)}}),TD}var qD,KD,HD,VD,$D,GD,WD,YD,QD,XD=function(){function e(){this.observers=[]}return e.prototype.subscribe=function(e){this.observers.push(e)},e.prototype.notify=function(e){this.observers.forEach((function(t){return t(e)}))},e}(),JD=[],ZD=[];function ez(){return qD||(KD=XMLHttpRequest.prototype.open,HD=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.open=_D((function(e,t){return this._datadog_xhr={method:e,url:LD(t)},KD.apply(this,arguments)})),XMLHttpRequest.prototype.send=_D((function(e){var t=this;if(this._datadog_xhr){this._datadog_xhr.startTime=performance.now();var n=this.onreadystatechange;this.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&_D(i)(),n&&n.apply(this,arguments)};var r=!1,i=function(){r||(r=!0,t._datadog_xhr.duration=performance.now()-t._datadog_xhr.startTime,t._datadog_xhr.response=t.response,t._datadog_xhr.status=t.status,ZD.forEach((function(e){return e(t._datadog_xhr)})))};this.addEventListener("loadend",_D(i)),JD.forEach((function(e){return e(t._datadog_xhr,t)}))}return HD.apply(this,arguments)})),qD={beforeSend:function(e){JD.push(e)},onRequestComplete:function(e){ZD.push(e)}}),qD}function tz(e){if(!$D){var t=new XD;!function(e,t){function n(n,r){(function(e,t){return BD(e,t.logsEndpoint)||BD(e,t.rumEndpoint)||BD(e,t.traceEndpoint)||t.internalMonitoringEndpoint&&BD(e,t.internalMonitoringEndpoint)||t.proxyHost&&BD(e,t.proxyHost)||t.replica&&(BD(e,t.replica.logsEndpoint)||BD(e,t.replica.rumEndpoint)||BD(e,t.replica.internalMonitoringEndpoint))})(r.url,e)||!function(e){return 0===e.status&&"opaque"!==e.responseType}(r)&&!function(e){return e.status>=500}(r)||t.notify({context:{error:{origin:VD.NETWORK,stack:iz(r.response,e)||"Failed to load"},http:{method:r.method,status_code:r.status,url:r.url}},message:oz(n)+" error "+r.method+" "+r.url,startTime:r.startTime})}ez().onRequestComplete((function(e){return n(ZB.XHR,e)})),FD().onRequestComplete((function(e){return n(ZB.FETCH,e)}))}(e,t),function(e){GD=console.error,console.error=_D((function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];GD.apply(console,QB([t],n)),e.notify({context:{error:{origin:VD.CONSOLE}},message:QB(["console error:",t],n).map(nz).join(" "),startTime:performance.now()})}))}(t),function(e){WD=function(t,n,r){e.notify(function(e,t){var n,r;void 0!==e.message||t instanceof Error?(n=e.message||"Empty message",r=rz(e)):(n="Uncaught "+cD(t),r="No stack, consider using an instance of Error");return{message:n,context:{error:{stack:r,kind:e.name,origin:VD.SOURCE}},startTime:performance.now()}}(t,r))},yD.subscribe(WD)}(t),$D=function(e,t){var n=0,r=new XD;return t.subscribe((function(t){n<e.maxErrorsByMinute?(n+=1,r.notify(t)):n===e.maxErrorsByMinute&&(n+=1,r.notify({context:{error:{origin:VD.AGENT}},message:"Reached max number of errors by minute: "+e.maxErrorsByMinute,startTime:performance.now()}))})),setInterval((function(){return n=0}),tD),r}(e,t)}return $D}function nz(e){return"string"==typeof e?e:e instanceof Error?rz(wD(e)):cD(e,0,2)}function rz(e){var t=(e.name||"Error")+": "+e.message;return e.stack.forEach((function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"("+e.args.join(", ")+")":"",i=e.line?":"+e.line:"",o=e.line&&e.column?":"+e.column:"";t+="\n  at "+n+r+" @ "+e.url+i+o})),t}function iz(e,t){return e&&e.length>t.requestErrorResponseLengthLimit?e.substring(0,t.requestErrorResponseLengthLimit)+"...":e}function oz(e){return ZB.XHR===e?"XHR":"Fetch"}function az(e){console.warn("'"+e+"' not yet available, please call '.init()' first.")}!function(e){e.AGENT="agent",e.CONSOLE="console",e.NETWORK="network",e.SOURCE="source",e.LOGGER="logger"}(VD||(VD={})),function(e){e.US="us",e.EU="eu"}(QD||(QD={}));var sz,uz=((YD={})[QD.EU]="datadoghq.eu",YD[QD.US]="datadoghq.com",YD);function cz(e,t){var n=function(e,t){var n={applicationId:e.applicationId,buildMode:t.buildMode,clientToken:e.clientToken,env:e.env,proxyHost:e.proxyHost,sdkVersion:t.sdkVersion,service:e.service,site:e.site||uz[e.datacenter||t.datacenter],version:e.version},r=Array.isArray(e.enableExperimentalFeatures)?e.enableExperimentalFeatures:[],i=GB({cookieOptions:{},isEnabled:function(e){return t=e,-1!==r.indexOf(t);var t},logsEndpoint:fz("browser",n),proxyHost:e.proxyHost,rumEndpoint:fz("rum",n),traceEndpoint:fz("public-trace",n)},lz);e.internalMonitoringApiKey&&(i.internalMonitoringEndpoint=fz("browser",n,"browser-agent-internal-monitoring"));"allowedTracingOrigins"in e&&(i.allowedTracingOrigins=e.allowedTracingOrigins);"isCollectingError"in e&&(i.isCollectingError=!!e.isCollectingError);"sampleRate"in e&&(i.sampleRate=e.sampleRate);"resourceSampleRate"in e&&(i.resourceSampleRate=e.resourceSampleRate);"trackInteractions"in e&&(i.trackInteractions=!!e.trackInteractions);i.cookieOptions.secure=pz(e),i.cookieOptions.crossSite=!!e.useCrossSiteSessionCookie,!e.trackSessionAcrossSubdomains||(i.cookieOptions.domain=function(){for(var e="dd_site_test",t=window.location.hostname.split("."),n=t.pop();t.length&&!hD(e);)n=t.pop()+"."+n,pD(e,"test",eD,{domain:n});return n}());n.buildMode===sz.E2E_TEST&&(void 0!==e.internalMonitoringEndpoint&&(i.internalMonitoringEndpoint=e.internalMonitoringEndpoint),void 0!==e.logsEndpoint&&(i.logsEndpoint=e.logsEndpoint),void 0!==e.rumEndpoint&&(i.rumEndpoint=e.rumEndpoint));if(n.buildMode===sz.STAGING&&void 0!==e.replica){var o=GB(GB({},n),{applicationId:e.replica.applicationId,clientToken:e.replica.clientToken,site:uz[QD.US]});i.replica={applicationId:e.replica.applicationId,internalMonitoringEndpoint:fz("browser",o,"browser-agent-internal-monitoring"),logsEndpoint:fz("browser",o),rumEndpoint:fz("rum",o)}}return i}(e,t),r=AD(n);return{configuration:n,errorObservable:n.isCollectingError?tz(n):new XD,internalMonitoring:r}}function dz(){return"file:"!==window.location.protocol||(console.error("Execution is not allowed in the current context."),!1)}!function(e){e.RELEASE="release",e.STAGING="staging",e.E2E_TEST="e2e-test"}(sz||(sz={}));var lz={allowedTracingOrigins:[],isCollectingError:!0,maxErrorsByMinute:3e3,maxInternalMonitoringMessagesPerPage:15,resourceSampleRate:100,sampleRate:100,silentMultipleInit:!1,trackInteractions:!1,requestErrorResponseLengthLimit:32768,flushTimeout:3e4,maxBatchSize:50,maxMessageSize:262144,batchBytesLimit:16384};function fz(e,t,n){var r="sdk_version:"+t.sdkVersion+(t.env?",env:"+t.env:"")+(t.service?",service:"+t.service:"")+(t.version?",version:"+t.version:""),i=e+"-http-intake.logs."+t.site,o=t.proxyHost?t.proxyHost:i,a=t.proxyHost?"ddhost="+i+"&":"",s=""+(t.applicationId?"_dd.application_id="+t.applicationId+"&":"")+a+"ddsource="+(n||"browser")+"&ddtags="+r;return"https://"+o+"/v1/input/"+t.clientToken+"?"+s}function pz(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie}var hz=9e5,vz=144e5;function mz(e,t,n){var r=function(e,t){var n,r,i=!1,o=function(){i=!0,window.clearTimeout(n),n=window.setTimeout((function(){i=!1}),1e3)};return{get:function(){return i||(r=hD(e),o()),r},set:function(n,i){pD(e,n,i,t),r=n,o()}}}("_dd_s",e);!function(e){var t=e.get(),n=hD("_dd"),r=hD("_dd_r"),i=hD("_dd_l");if(!t){var o={};n&&(o.id=n),i&&/^[01]$/.test(i)&&(o.logs=i),r&&/^[012]$/.test(r)&&(o.rum=r),Ez(o,e)}}(r);var i=new XD,o=Sz(r).id,a=function(e,t,n){var r,i=!n||void 0===n.leading||n.leading,o=!n||void 0===n.trailing||n.trailing,a=!1,s=!1;return{throttled:function(){var n=this;a?s=!0:(i?e.apply(this):s=!0,a=!0,r=window.setTimeout((function(){o&&s&&e.apply(n),a=!1,s=!1}),t))},cancel:function(){window.clearTimeout(r),a=!1,s=!1}}}((function(){var e=Sz(r),a=n(e[t]),s=a.trackingType,u=a.isTracked;e[t]=s,u&&!e.id&&(e.id=sD(),e.created=String(Date.now())),Ez(e,r),u&&o!==e.id&&(o=e.id,i.notify())}),1e3).throttled;return a(),function(e){var t=_D(e),n={capture:!0,passive:!0};[XB.CLICK,XB.TOUCH_START,XB.KEY_DOWN,XB.SCROLL].forEach((function(e){document.addEventListener(e,t,n)}))}(a),function(e){var t=_D((function(){"visible"===document.visibilityState&&e()}));window.setInterval(t,6e4),document.addEventListener(XB.VISIBILITY_CHANGE,t)}((function(){Ez(Sz(r),r)})),{getId:function(){return Sz(r).id},getTrackingType:function(){return Sz(r)[t]},renewObservable:i}}var gz,yz,wz=/^([a-z]+)=([a-z0-9-]+)$/,bz="&";function Sz(e){var t=function(e){var t=e.get(),n={};(function(e){return void 0!==e&&(-1!==e.indexOf("&")||wz.test(e))})(t)&&t.split(bz).forEach((function(e){var t=wz.exec(e);if(null!==t){var r=t[1],i=t[2];n[r]=i}}));return n}(e);return function(e){return(void 0===e.created||Date.now()-Number(e.created)<vz)&&(void 0===e.expire||Date.now()<Number(e.expire))}(t)?t:(kz(e),{})}function Ez(e,t){if(n=e,0!==Object.keys(n).length){var n;e.expire=String(Date.now()+hz);var r=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}(e).map((function(e){return e[0]+"="+e[1]})).join(bz);t.set(r,hz)}else kz(t)}function kz(e){e.set("",0)}!function(e){e.debug="debug",e.info="info",e.warn="warn",e.error="error"}(yz||(yz={}));var Cz,xz,Tz=((gz={})[yz.debug]=0,gz[yz.info]=1,gz[yz.warn]=2,gz[yz.error]=3,gz);function Nz(e,t,n,r){var i,o={};r.setExternalContextProvider((function(){return oD({session_id:n.getId()},o,Pz())}));var a=function(e,t,n){var r,i=o(e.logsEndpoint);void 0!==e.replica&&(r=o(e.replica.logsEndpoint));function o(t){return new kD(new SD(t,e.batchBytesLimit),e.maxBatchSize,e.batchBytesLimit,e.maxMessageSize,e.flushTimeout)}function a(e){return oD({date:(new Date).getTime(),session_id:t.getId(),view:{referrer:document.referrer,url:window.location.href}},n(),Pz(),e)}return{add:function(e){var t=a(e);i.add(t),r&&r.add(t)}}}(t,n,(function(){return o})),s=((i={})[Cz.console]=function(e){return console.log(e.status+": "+e.message)},i[Cz.http]=function(e){return a.add(e)},i[Cz.silent]=uD,i),u=new Az(n,s);xz={},e.subscribe((function(e){return u.error(e.message,oD(GB({date:lD(e.startTime)},e.context),Pz(e.startTime)))}));var c={setLoggerGlobalContext:function(e){o=e},addLoggerGlobalContext:function(e,t){o[e]=t}};return c.createLogger=function(e,t){return function(n,r){return void 0===r&&(r={}),xz[n]=new Az(e,t,r.handler,r.level,GB(GB({},r.context),{logger:{name:n}})),xz[n]}}(n,s),c.getLogger=Oz,c.logger=u,c}function Oz(e){return xz[e]}!function(e){e.http="http",e.console="console",e.silent="silent"}(Cz||(Cz={}));var Az=function(){function e(e,t,n,r,i){void 0===n&&(n=Cz.http),void 0===r&&(r=yz.debug),void 0===i&&(i={}),this.session=e,this.handlers=t,this.level=r,this.loggerContext=i,this.handler=this.handlers[n]}return e.prototype.log=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=yz.info),this.session.isTracked()&&Tz[n]>=Tz[this.level]&&this.handler(GB({message:e,status:n},oD({},this.loggerContext,t)))},e.prototype.debug=function(e,t){void 0===t&&(t={}),this.log(e,t,yz.debug)},e.prototype.info=function(e,t){void 0===t&&(t={}),this.log(e,t,yz.info)},e.prototype.warn=function(e,t){void 0===t&&(t={}),this.log(e,t,yz.warn)},e.prototype.error=function(e,t){void 0===t&&(t={});var n={error:{origin:VD.LOGGER}};this.log(e,oD({},n,t),yz.error)},e.prototype.setContext=function(e){this.loggerContext=e},e.prototype.addContext=function(e,t){this.loggerContext[e]=t},e.prototype.removeContext=function(e){delete this.loggerContext[e]},e.prototype.setHandler=function(e){this.handler=this.handlers[e]},e.prototype.setLevel=function(e){this.level=e},function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);o>3&&a&&Object.defineProperty(t,n,a)}([PD],e.prototype,"log",null),e}();function Pz(e){var t=window.DD_RUM;return t&&t.getInternalContext?t.getInternalContext(e):void 0}var _z,Iz={buildMode:"release",datacenter:"us",sdkVersion:"1.19.0"};function Mz(e,t){if(!t){var n=Rz(e)===_z.TRACKED;return{getId:function(){},isTracked:function(){return n}}}var r=mz(e.cookieOptions,"logs",(function(t){return function(e,t){var n=function(e){return e===_z.NOT_TRACKED||e===_z.TRACKED}(t)?t:Rz(e);return{trackingType:n,isTracked:n===_z.TRACKED}}(e,t)}));return{getId:r.getId,isTracked:function(){return r.getTrackingType()===_z.TRACKED}}}function Rz(e){return 0!==(t=e.sampleRate)&&100*Math.random()<=t?_z.TRACKED:_z.NOT_TRACKED;var t}!function(e){e.NOT_TRACKED="0",e.TRACKED="1"}(_z||(_z={}));var Lz={debug:function(e,t){az("logs.logger.debug")},error:function(e,t){az("logs.logger.error")},info:function(e,t){az("logs.logger.info")},log:function(e,t,n){az("logs.logger.log")},warn:function(e,t){az("logs.logger.warn")},setContext:function(e){az("logs.logger.setContext")},addContext:function(e,t){az("logs.logger.addContext")},removeContext:function(e){az("logs.logger.removeContext")},setHandler:function(e){az("logs.logger.setHandler")},setLevel:function(e){az("logs.logger.setLevel")}},Bz=function(e){var t=function(e){var t=GB({},e);return Object.defineProperty(t,"_setDebug",{get:function(){return MD},enumerable:!1}),t}(e),n=!1;return t.init=_D((function(e){if(dz()&&function(e){if(n)return e.silentMultipleInit||console.error("DD_LOGS is already initialized."),!1;if(!e||!e.publicApiKey&&!e.clientToken)return console.error("Client Token is not configured, we will not send any data."),!1;if(void 0!==e.sampleRate&&(t=e.sampleRate,!(function(e){return"number"==typeof e}(t)&&t>=0&&t<=100)))return console.error("Sample Rate should be a number between 0 and 100"),!1;var t;return!0}(e)){e.publicApiKey&&(e.clientToken=e.publicApiKey,console.warn("Public API Key is deprecated. Please use Client Token instead."));var r=!1!==e.forwardErrorsToLogs,i=cz(GB(GB({},e),{isCollectingError:r}),Iz),o=i.errorObservable,a=i.configuration,s=i.internalMonitoring,u=Nz(o,a,Mz(a,function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="dd_cookie_test",n="test";return pD(t,n,eD,{secure:e}),hD(t)===n}catch(e){return console.error(e),!1}}(pz(e))),s);aD(t,u),n=!0}})),t}({logger:Lz,init:function(e){az("core.init")},addLoggerGlobalContext:function(e,t){az("addLoggerGlobalContext")},setLoggerGlobalContext:function(e){az("setLoggerGlobalContext")},createLogger:function(e,t){return az("createLogger"),Lz},getLogger:function(e){az("getLogger")}});(function(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}()).DD_LOGS=Bz;const Dz=(e,t)=>{Bz.init(Object.assign({forwardErrorsToLogs:!1},t));let n=[],r=!1;const i=i=>{const{level:o,message:a,context:s,tags:u}=i;if(!1===HB(o,e)||!0===r)return;const c=o===Ce.Fatal?Ce.Error:o,d=(e=>{switch(UB(e)){case zB.String:return{message:e,context:{}};case zB.Error:return{message:e.message,context:{error:KB(e)}};case zB.Unknown:default:return{message:"Meta: Unidentifed payload captured",context:{}}}})(a),l=Object.assign(Object.assign(Object.assign({service:t.service},d.context),s),{tags:u});"error"===c&&(l.breadcrumbs=n.reduce(((e,[t,n])=>(e[`crumb-${t}`]=n,e)),{}),n=[]),Bz.logger.log(d.message,l,c)};return{onEvent:i,captureCrumb:e=>{if(!0===r)return;n.push(e);const[,t]=e;i(Object.assign(Object.assign({},t),{tags:{}}))},teardown:()=>(r=!0,Promise.resolve())}};var zz=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function jz(e,t){return Object.assign(Object.assign({},e),{tags:e.tags.concat(t)})}function Uz(e){return e?Object.entries(e).map((([e,t])=>({key:e,value:String(t)}))):[]}function Fz({metricsConfig:e,graphqlClient:t,sdkPartnerName:n}){const r={key:"sdkPartnerName",value:String(n)},i={increment:[],gauge:[]};let o=Date.now();const a=({increment:n,gauge:a,force:s})=>zz(this,void 0,void 0,(function*(){if(e.disableDatadogMetrics)return Promise.resolve(void 0);!function(e,t){e&&i.increment.push(...e),t&&i.gauge.push(...t)}(n,a);if((Date.now()-o>1e4||s)&&(i.increment.length||i.gauge.length)){o=Date.now();const e=function(e,t,n,r){var i,o;return zz(this,void 0,void 0,(function*(){return(yield e.mutation(pi`
        mutation EmitDatadogEvents(
          $increment: [DatadogIncrementInput!]!
          $gauge: [DatadogGuageInput!]!
        ) {
          emitDatadogEvents(increment: $increment, gauge: $gauge) {
            ... on EmitDatadogEventsPayload {
              success
              message
            }
          }
        }
      `,{increment:null!==(i=null==t?void 0:t.map((e=>jz(e,r))))&&void 0!==i?i:[],gauge:null!==(o=null==n?void 0:n.map((e=>jz(e,r))))&&void 0!==o?o:[]}).toPromise()).data}))}(t,i.increment,i.gauge,r);i.increment=[],i.gauge=[],yield e}}));return setInterval((()=>a({force:!0})),1e4),{increment:(e,t)=>{a({increment:[{keyName:e,tags:Uz(t)}],force:!1})},gauge:(e,t,n)=>{a({gauge:[{keyName:e,value:t,tags:Uz(n)}],force:!1})},flush:()=>a({force:!0})}}const qz=e=>({requiresHack:t=>1!==function(e,t){for(var n=e.split("."),r=t.split("."),i=0;i<3;i++){var o=Number(n[i]),a=Number(r[i]);if(o>a)return 1;if(a>o)return-1;if(!isNaN(o)&&isNaN(a))return 1;if(isNaN(o)&&!isNaN(a))return-1}return 0}(e.partnerData.loomSdkVersion||"1.0.0",t)}),Kz=(e,t)=>{const{trackerConfig:n,graphqlConfig:r,metricsConfig:i,analyticsConfig:o}=t,a=(({sentryDsn:e,environment:t,baseContext:n,datadog:r})=>{const i=[$B([Ce.Error],{dsn:e,environment:t,normalizeDepth:8})];return r&&i.push(Dz([Ce.Error,Ce.Fatal,Ce.Warning,Ce.Info],{clientToken:r.datadogClientToken,env:t,service:r.datadogServiceName})),Ki({baseContext:n,trackerMethods:i,onCrumbHook:()=>!1,isConsoleLogActive:()=>t!==He.Production})})(n),s=sR(e,r,a);return{config:t,logger:a,analytics:HM(o,a),gqlClient:s,metrics:Fz({metricsConfig:i,graphqlClient:s,sdkPartnerName:t.partnerData.sdkPartnerName}),versions:qz(t)}};var Hz=function(e){if(!1==("undefined"!=typeof window&&null!=window.env&&"string"==typeof window.env))return null;var t=JSON.parse(atob(window.env));return t.trackerConfig.environment=function(){var e=window.location,t=e.hostname,n=e.pathname;return t.includes("loomlocal.com")?He.Development:t.includes("stage.loom.com")?He.Staging:t.includes("localhost")&&n.includes("sdk-testbench")?He.Testbench:He.Production}(),Kz(e,t)}("LoomSDK");null!=Hz&&eP(Hz)}));
